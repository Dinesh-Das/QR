"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[701],{3117:(e,s,a)=>{a.d(s,{A:()=>l});var t=a(8168),n=a(5043);const r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 512a48 48 0 1096 0 48 48 0 10-96 0zm200 0a48 48 0 1096 0 48 48 0 10-96 0zm-400 0a48 48 0 1096 0 48 48 0 10-96 0zm661.2-173.6c-22.6-53.7-55-101.9-96.3-143.3a444.35 444.35 0 00-143.3-96.3C630.6 75.7 572.2 64 512 64h-2c-60.6.3-119.3 12.3-174.5 35.9a445.35 445.35 0 00-142 96.5c-40.9 41.3-73 89.3-95.2 142.8-23 55.4-34.6 114.3-34.3 174.9A449.4 449.4 0 00112 714v152a46 46 0 0046 46h152.1A449.4 449.4 0 00510 960h2.1c59.9 0 118-11.6 172.7-34.3a444.48 444.48 0 00142.8-95.2c41.3-40.9 73.8-88.7 96.5-142 23.6-55.2 35.6-113.9 35.9-174.5.3-60.9-11.5-120-34.8-175.6zm-151.1 438C704 845.8 611 884 512 884h-1.7c-60.3-.3-120.2-15.3-173.1-43.5l-8.4-4.5H188V695.2l-4.5-8.4C155.3 633.9 140.3 574 140 513.7c-.4-99.7 37.7-193.3 107.6-263.8 69.8-70.5 163.1-109.5 262.8-109.9h1.7c50 0 98.5 9.7 144.2 28.9 44.6 18.7 84.6 45.6 119 80 34.3 34.3 61.3 74.4 80 119 19.4 46.2 29.1 95.2 28.9 145.8-.6 99.6-39.7 192.9-110.1 262.7z"}}]},name:"message",theme:"outlined"};var c=a(2172),i=function(e,s){return n.createElement(c.A,(0,t.A)({},e,{ref:s,icon:r}))};const l=n.forwardRef(i)},3183:(e,s,a)=>{a.d(s,{p9:()=>i});var t=a(3944),n=a(955);const r=new t.Mo("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),c=new t.Mo("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),i=function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{antCls:a}=e,t=`${a}-fade`,i=s?"&":"";return[(0,n.b)(t,r,c,e.motionDurationMid,s),{[`\n        ${i}${t}-enter,\n        ${i}${t}-appear\n      `]:{opacity:0,animationTimingFunction:"linear"},[`${i}${t}-leave`]:{animationTimingFunction:"linear"}}]}},3285:(e,s,a)=>{a.r(s),a.d(s,{default:()=>R});var t=a(6237),n=a(119),r=a(9470),c=a(3889),i=a(3117),l=a(617),o=a(2261),u=a(5206),d=a(9073),h=a(1645),A=a(7419),g=a(6051),f=a(6612),y=a(8918),m=a(3927),v=a(5043),p=a(6649),b=a(8365),x=a(173),j=a(5423),k=a(2868),w=a(5123),C=a(579);const{Title:T}=m.A,{TabPane:Q}=y.A,R=()=>{const[e,s]=(0,v.useState)({totalQueries:0,openQueries:0,resolvedToday:0,overdueQueries:0,avgResolutionTime:0,highPriorityQueries:0}),{isTechUser:a,isAdmin:m}=(0,w.hm)();(0,v.useEffect)(()=>{const e=new AbortController;return R(e.signal),()=>{e.abort()}},[]);const R=async e=>{try{const[a,t,n,r,c]=await Promise.all([p.default.get("/queries/stats/count-open/TECH",{signal:e}).catch(()=>0),p.default.get("/queries/stats/resolved-today",{signal:e}).catch(()=>0),p.default.get("/queries/overdue",{signal:e}).then(e=>Array.isArray(e)?e.filter(e=>e.assignedTeam===k.r0.TECH).length:0).catch(()=>0),p.default.get("/queries/stats/avg-resolution-time/TECH",{signal:e}).catch(()=>0),p.default.get("/queries/high-priority",{signal:e}).then(e=>Array.isArray(e)?e.filter(e=>e.assignedTeam===k.r0.TECH).length:0).catch(()=>0)]);s({totalQueries:a+t,openQueries:a,resolvedToday:t,overdueQueries:n,avgResolutionTime:r,highPriorityQueries:c})}catch(a){console.error("Failed to load dashboard stats:",a)}};return(0,C.jsx)(j.PK,{children:(0,C.jsxs)("div",{style:{padding:24},children:[(0,C.jsx)(T,{level:2,children:"Tech Dashboard"}),(0,C.jsxs)(A.A,{gutter:16,style:{marginBottom:16},children:[(0,C.jsx)(h.A,{span:6,children:(0,C.jsx)(d.A,{children:(0,C.jsx)(f.A,{title:"Open Queries",value:e.openQueries,prefix:(0,C.jsx)(i.A,{}),valueStyle:{color:"#cf1322"}})})}),(0,C.jsx)(h.A,{span:6,children:(0,C.jsx)(d.A,{children:(0,C.jsx)(f.A,{title:"Resolved Today",value:e.resolvedToday,prefix:(0,C.jsx)(t.A,{}),valueStyle:{color:"#3f8600"}})})}),(0,C.jsx)(h.A,{span:6,children:(0,C.jsx)(d.A,{children:(0,C.jsx)(f.A,{title:"Overdue",value:e.overdueQueries,prefix:(0,C.jsx)(r.A,{}),valueStyle:{color:e.overdueQueries>0?"#cf1322":"#3f8600"}})})}),(0,C.jsx)(h.A,{span:6,children:(0,C.jsx)(d.A,{children:(0,C.jsx)(f.A,{title:"Avg Resolution",value:e.avgResolutionTime,precision:1,suffix:"hrs",prefix:(0,C.jsx)(n.A,{})})})})]}),e.overdueQueries>0&&(0,C.jsx)(o.A,{message:`${e.overdueQueries} queries are overdue (>3 days)`,description:"These queries require immediate attention to maintain SLA compliance.",type:"error",showIcon:!0,style:{marginBottom:16},action:(0,C.jsx)(u.Ay,{size:"small",danger:!0,children:"View Overdue"})}),e.highPriorityQueries>0&&(0,C.jsx)(o.A,{message:`${e.highPriorityQueries} high priority queries pending`,description:"These queries have been marked as high priority and need urgent resolution.",type:"warning",showIcon:!0,style:{marginBottom:16},action:(0,C.jsx)(u.Ay,{size:"small",type:"primary",children:"View High Priority"})}),(0,C.jsxs)(y.A,{defaultActiveKey:"queries",size:"large",tabBarExtraContent:(0,C.jsx)(g.A,{children:(0,C.jsx)(u.Ay,{icon:(0,C.jsx)(l.A,{}),onClick:R,size:"small",children:"Refresh Stats"})}),children:[(0,C.jsx)(Q,{tab:(0,C.jsxs)(g.A,{children:[(0,C.jsx)(i.A,{}),(0,C.jsx)("span",{children:"Query Inbox"}),e.openQueries>0&&(0,C.jsx)("span",{style:{background:"#ff4d4f",color:"white",borderRadius:"10px",padding:"2px 6px",fontSize:"12px"},children:e.openQueries})]}),children:(0,C.jsx)(x.A,{team:"TECH",userRole:"TECH_USER"})},"queries"),(0,C.jsx)(Q,{tab:(0,C.jsxs)(g.A,{children:[(0,C.jsx)(c.A,{}),(0,C.jsx)("span",{children:"Query History"})]}),children:(0,C.jsx)(b.A,{})},"history")]})]})})}},3889:(e,s,a)=>{a.d(s,{A:()=>l});var t=a(8168),n=a(5043);const r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M536.1 273H488c-4.4 0-8 3.6-8 8v275.3c0 2.6 1.2 5 3.3 6.5l165.3 120.7c3.6 2.6 8.6 1.9 11.2-1.7l28.6-39c2.7-3.7 1.9-8.7-1.7-11.2L544.1 528.5V281c0-4.4-3.6-8-8-8zm219.8 75.2l156.8 38.3c5 1.2 9.9-2.6 9.9-7.7l.8-161.5c0-6.7-7.7-10.5-12.9-6.3L752.9 334.1a8 8 0 003 14.1zm167.7 301.1l-56.7-19.5a8 8 0 00-10.1 4.8c-1.9 5.1-3.9 10.1-6 15.1-17.8 42.1-43.3 80-75.9 112.5a353 353 0 01-112.5 75.9 352.18 352.18 0 01-137.7 27.8c-47.8 0-94.1-9.3-137.7-27.8a353 353 0 01-112.5-75.9c-32.5-32.5-58-70.4-75.9-112.5A353.44 353.44 0 01171 512c0-47.8 9.3-94.2 27.8-137.8 17.8-42.1 43.3-80 75.9-112.5a353 353 0 01112.5-75.9C430.6 167.3 477 158 524.8 158s94.1 9.3 137.7 27.8A353 353 0 01775 261.7c10.2 10.3 19.8 21 28.6 32.3l59.8-46.8C784.7 146.6 662.2 81.9 524.6 82 285 82.1 92.6 276.7 95 516.4 97.4 751.9 288.9 942 524.8 942c185.5 0 343.5-117.6 403.7-282.3 1.5-4.2-.7-8.9-4.9-10.4z"}}]},name:"history",theme:"outlined"};var c=a(2172),i=function(e,s){return n.createElement(c.A,(0,t.A)({},e,{ref:s,icon:r}))};const l=n.forwardRef(i)},5123:(e,s,a)=>{a.d(s,{hm:()=>c});var t=a(5043),n=a(3719),r=a(4642);const c=()=>{const[e,s]=(0,t.useState)(null),[a,c]=(0,t.useState)(!0),[i,l]=(0,t.useState)(null),o=(0,t.useCallback)(async()=>{if(!(0,n.wR)())return s(null),void c(!1);try{c(!0),l(null);const e=await r.A.getUserAccessSummary();s(e)}catch(e){console.warn("Failed to load access summary, using fallback:",e),l(e);const a=r.A.getFallbackAccessSummary();s(a)}finally{c(!1)}},[]);(0,t.useEffect)(()=>{o()},[o]);const u=(0,t.useCallback)(async e=>{try{return await r.A.hasScreenAccess(e)}catch(i){return console.warn("Screen access check failed, using fallback:",i),r.A.getFallbackScreenAccess(e)}},[]),d=(0,t.useCallback)(async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await r.A.hasDataAccess(e,s)}catch(i){return console.warn("Data access check failed, using fallback:",i),r.A.getFallbackDataAccess(e,s)}},[]),h=(0,t.useCallback)(async function(e,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{return await r.A.hasPlantDataAccess(e,s,a)}catch(i){return console.warn("Plant data access check failed, using fallback:",i),r.A.getFallbackPlantDataAccess(e,s,a)}},[]),A=(0,t.useCallback)(async function(e,s,a){let t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};try{return await r.A.makeAccessDecision(e,s,a,t)}catch(i){return console.warn("Access decision failed, using fallback:",i),r.A.getFallbackAccessDecision(e,s,a,t)}},[]),g=(0,t.useCallback)((e,s)=>r.A.filterDataByPlantAccess(e,s),[]);return{loading:a,error:i,isAuthenticated:(0,n.wR)(),currentUser:(0,n.HW)(),primaryRole:(0,n.Jv)(),userPlants:(0,n.nT)(),primaryPlant:(0,n.bN)(),isAdmin:(0,n.qc)(),isJvcUser:(0,n.bV)(),isCqsUser:(0,n.po)(),isTechUser:(0,n.C9)(),isPlantUser:(0,n.X9)(),isViewer:(0,n.Z$)(),accessSummary:e,hasRole:e=>(0,n.hf)(e),hasAnyRole:e=>e.some(e=>(0,n.hf)(e)),hasAllRoles:e=>e.every(e=>(0,n.hf)(e)),checkScreenAccess:u,checkDataAccess:d,checkPlantDataAccess:h,makeAccessDecision:A,filterByPlantAccess:g,refresh:o}}},5391:(e,s,a)=>{a.d(s,{A:()=>h,d:()=>o});var t=a(5043),n=a(3727),r=a(8060),c=a(370),i=a(6970),l=a(8588);function o(e){if(e)return{closable:e.closable,closeIcon:e.closeIcon}}function u(e){const{closable:s,closeIcon:a}=e||{};return t.useMemo(()=>{if(!s&&(!1===s||!1===a||null===a))return!1;if(void 0===s&&void 0===a)return null;let e={closeIcon:"boolean"!==typeof a&&null!==a?a:void 0};return s&&"object"===typeof s&&(e=Object.assign(Object.assign({},e),s)),e},[s,a])}const d={};function h(e,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d;const o=u(e),h=u(s),[A]=(0,c.A)("global",i.A.global),g="boolean"!==typeof o&&!!(null===o||void 0===o?void 0:o.disabled),f=t.useMemo(()=>Object.assign({closeIcon:t.createElement(n.A,null)},a),[a]),y=t.useMemo(()=>!1!==o&&(o?(0,l.A)(f,h,o):!1!==h&&(h?(0,l.A)(f,h):!!f.closable&&f)),[o,h,f]);return t.useMemo(()=>{var e,s;if(!1===y)return[!1,null,g,{}];const{closeIconRender:a}=f,{closeIcon:n}=y;let c=n;const i=(0,r.A)(y,!0);return null!==c&&void 0!==c&&(a&&(c=a(n)),c=t.isValidElement(c)?t.cloneElement(c,Object.assign(Object.assign(Object.assign({},c.props),{"aria-label":null!==(s=null===(e=c.props)||void 0===e?void 0:e["aria-label"])&&void 0!==s?s:A.close}),i)):t.createElement("span",Object.assign({"aria-label":A.close},i),c)),[!0,c,g,i]},[y,f])}}}]);
//# sourceMappingURL=701.459ad22d.chunk.js.map