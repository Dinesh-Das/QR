{"version":3,"file":"static/js/39.2079bb1e.chunk.js","mappings":"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","sources":["utils/dataUtils.js","components/ErrorBoundaries/UserErrorBoundary.js","components/User/NotificationPreferencesPreview.js","hooks/usePlantAssignment.js","components/User/PlantAssignmentForm.js","components/User/UserModal.js","components/User/UserTable.js","hooks/useUserManagement.js","screens/Users.js","components/SecureForm.js","services/userAPI.js","services/masterDataAPI.js"],"sourcesContent":["/**\n * @fileoverview Utility functions for safe data handling in React components\n * Provides functions to ensure data is always in the expected format for Table components\n * \n * @author QRMFG Development Team\n * @since 1.0.0\n */\n\n/**\n * Ensures the provided data is always an array\n * This prevents the \"G.some is not a function\" error in Ant Design Table components\n * \n * @param {any} data - The data to validate\n * @param {Array} fallback - Fallback array to use if data is not valid (default: [])\n * @returns {Array} Safe array that can be used with Table components\n * \n * @example\n * ```javascript\n * const safeUsers = ensureArray(users);\n * const safeRoles = ensureArray(roles, []);\n * ```\n */\nexport const ensureArray = (data, fallback = []) => {\n  if (Array.isArray(data)) {\n    return data;\n  }\n\n  console.warn('Data is not an array, using fallback:', { data, fallback });\n  return fallback;\n};\n\n/**\n * Safely processes API response data for Table components\n * Handles common API response patterns and ensures array output\n * \n * @param {any} response - API response data\n * @param {string} [dataKey] - Key to extract array from response object\n * @param {Array} [fallback] - Fallback array if extraction fails\n * @returns {Array} Safe array for Table components\n * \n * @example\n * ```javascript\n * // For direct array responses\n * const users = safeApiResponse(response);\n * \n * // For nested data\n * const users = safeApiResponse(response, 'users');\n * const roles = safeApiResponse(response, 'data.roles');\n * ```\n */\nexport const safeApiResponse = (response, dataKey = null, fallback = []) => {\n  if (!response) {\n    return fallback;\n  }\n\n  // If no dataKey specified, expect direct array\n  if (!dataKey) {\n    return ensureArray(response, fallback);\n  }\n\n  // Handle nested keys like 'data.users'\n  const keys = dataKey.split('.');\n  let data = response;\n\n  for (const key of keys) {\n    if (data && typeof data === 'object' && key in data) {\n      data = data[key];\n    } else {\n      console.warn(`Key '${key}' not found in response:`, response);\n      return fallback;\n    }\n  }\n\n  return ensureArray(data, fallback);\n};\n\n/**\n * Safely handles user roles data which can come in various formats\n * \n * @param {any} roles - Roles data from API\n * @returns {Array} Array of role objects with consistent structure\n */\nexport const safeRolesData = (roles) => {\n  const safeRoles = ensureArray(roles);\n\n  return safeRoles.map(role => {\n    if (typeof role === 'string') {\n      return { name: role, id: role };\n    }\n    if (typeof role === 'object' && role !== null) {\n      return {\n        name: role.name || role.roleName || role.id || 'Unknown Role',\n        id: role.id || role.name || role.roleName || Math.random().toString(36),\n        ...role\n      };\n    }\n    return { name: 'Unknown Role', id: Math.random().toString(36) };\n  });\n};\n\n/**\n * Safely handles plant assignment data which can come in various formats\n * \n * @param {any} plantData - Plant assignment data from API\n * @returns {Object} Normalized plant assignment object\n */\nexport const safePlantData = (plantData) => {\n  if (!plantData) {\n    return { assignedPlants: [], primaryPlant: null };\n  }\n\n  // If plantData is directly an array\n  if (Array.isArray(plantData)) {\n    return {\n      assignedPlants: plantData,\n      primaryPlant: plantData.length > 0 ? plantData[0] : null\n    };\n  }\n\n  // If plantData is an object\n  if (typeof plantData === 'object') {\n    return {\n      assignedPlants: ensureArray(plantData.assignedPlants || plantData.plants),\n      primaryPlant: plantData.primaryPlant || plantData.primary || null\n    };\n  }\n\n  return { assignedPlants: [], primaryPlant: null };\n};\n\n/**\n * Creates a safe error handler for API calls that sets empty arrays on error\n * \n * @param {Function} setStateFunction - React setState function\n * @param {string} [errorMessage] - Custom error message\n * @returns {Function} Error handler function\n */\nexport const createSafeErrorHandler = (setStateFunction, errorMessage = 'Failed to fetch data') => {\n  return (error, signal) => {\n    if (!signal?.aborted) {\n      console.error(errorMessage, error);\n      setStateFunction([]);\n    }\n  };\n};","import { Result, Button } from 'antd';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nclass UserErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false, error: null, errorInfo: null };\n  }\n\n  static getDerivedStateFromError(error) {\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    this.setState({\n      error,\n      errorInfo\n    });\n\n    // Report error to monitoring service\n    this.reportError(error, errorInfo, { \n      level: 'component',\n      component: 'UserManagement',\n      context: this.props.context || 'user-management'\n    });\n  }\n\n  reportError = (error, errorInfo, context) => {\n    // In a real application, this would send to a monitoring service\n    console.error('UserErrorBoundary caught an error:', {\n      error: error.message,\n      stack: error.stack,\n      errorInfo,\n      context,\n      timestamp: new Date().toISOString()\n    });\n\n    // Example: Send to monitoring service\n    // monitoringService.reportError({\n    //   message: error.message,\n    //   stack: error.stack,\n    //   component: context.component,\n    //   level: context.level,\n    //   timestamp: new Date().toISOString()\n    // });\n  };\n\n  handleRetry = () => {\n    this.setState({ hasError: false, error: null, errorInfo: null });\n    \n    // Call retry callback if provided\n    if (this.props.onRetry) {\n      this.props.onRetry();\n    }\n  };\n\n  handleGoHome = () => {\n    window.location.href = '/qrmfg';\n  };\n\n  render() {\n    if (this.state.hasError) {\n      return (\n        <Result\n          status=\"error\"\n          title=\"User Management Error\"\n          subTitle=\"Something went wrong while managing users. Please try again or contact support if the problem persists.\"\n          extra={[\n            <Button type=\"primary\" onClick={this.handleRetry} key=\"retry\">\n              Try Again\n            </Button>,\n            <Button onClick={this.handleGoHome} key=\"home\">\n              Go Home\n            </Button>\n          ]}\n          style={{ padding: '50px 0' }}\n        >\n          {process.env.NODE_ENV === 'development' && (\n            <div style={{ textAlign: 'left', marginTop: 20 }}>\n              <details style={{ whiteSpace: 'pre-wrap' }}>\n                <summary>Error Details (Development Only)</summary>\n                <div style={{ marginTop: 10, fontSize: '12px', color: '#666' }}>\n                  <strong>Error:</strong> {this.state.error?.message}\n                  <br />\n                  <strong>Stack:</strong>\n                  <pre style={{ fontSize: '11px', marginTop: 5 }}>\n                    {this.state.error?.stack}\n                  </pre>\n                  {this.state.errorInfo?.componentStack && (\n                    <>\n                      <strong>Component Stack:</strong>\n                      <pre style={{ fontSize: '11px', marginTop: 5 }}>\n                        {this.state.errorInfo.componentStack}\n                      </pre>\n                    </>\n                  )}\n                </div>\n              </details>\n            </div>\n          )}\n        </Result>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nUserErrorBoundary.propTypes = {\n  children: PropTypes.node.isRequired,\n  context: PropTypes.string,\n  onRetry: PropTypes.func\n};\n\nUserErrorBoundary.defaultProps = {\n  context: 'user-management',\n  onRetry: null\n};\n\nexport default UserErrorBoundary;","import { BellOutlined, InfoCircleOutlined } from '@ant-design/icons';\r\nimport { Card, Alert, Row, Col, Typography, Tag, Spin } from 'antd';\r\nimport PropTypes from 'prop-types';\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\n\r\nimport apiClient from '../../api/client';\r\n\r\nconst { Text, Title } = Typography;\r\n\r\n/**\r\n * NotificationPreferencesPreview Component\r\n * \r\n * Shows a preview of what notification preferences will be created for a new user\r\n * based on their selected roles and the current admin configuration.\r\n * \r\n * @component\r\n */\r\nconst NotificationPreferencesPreview = ({ selectedRoles, roles, visible }) => {\r\n  const [previewData, setPreviewData] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Get the primary role name from selected role IDs\r\n  const getPrimaryRoleName = useCallback(() => {\r\n    if (!selectedRoles || selectedRoles.length === 0) return null;\r\n    \r\n    const primaryRoleId = selectedRoles[0];\r\n    const role = roles.find(r => r.id === primaryRoleId);\r\n    \r\n    if (!role) return null;\r\n    \r\n    // Convert role name to match backend format\r\n    // e.g., \"ROLE_CQS_USER\" -> \"CQS\" or \"JVC_USER\" -> \"JVC_USER\"\r\n    let roleName = role.name;\r\n    if (roleName.startsWith('ROLE_') && roleName.endsWith('_USER')) {\r\n      roleName = roleName.substring(5, roleName.length - 5);\r\n    } else if (roleName.startsWith('ROLE_')) {\r\n      roleName = roleName.substring(5);\r\n    }\r\n    // If the role name is already in format like \"JVC_USER\", keep it as is\r\n    // The backend will handle both \"JVC\" and \"JVC_USER\" mappings\r\n    \r\n    return roleName;\r\n  }, [selectedRoles, roles]);\r\n\r\n  // Load preview data when roles change\r\n  useEffect(() => {\r\n    const loadPreview = async () => {\r\n      const primaryRole = getPrimaryRoleName();\r\n      if (!primaryRole || !visible) {\r\n        setPreviewData(null);\r\n        return;\r\n      }\r\n\r\n      setLoading(true);\r\n      try {\r\n        const data = await apiClient.get(`/admin/notification-defaults/preview?role=${primaryRole}`);\r\n        if (data.success) {\r\n          setPreviewData({\r\n            role: primaryRole,\r\n            preferences: data.defaultPreferences\r\n          });\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to load notification preferences preview:', error);\r\n        setPreviewData(null);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadPreview();\r\n  }, [selectedRoles, roles, visible, getPrimaryRoleName]);\r\n\r\n  if (!visible || !selectedRoles || selectedRoles.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  const primaryRole = getPrimaryRoleName();\r\n\r\n  return (\r\n    <Card\r\n      title={\r\n        <span>\r\n          <BellOutlined style={{ marginRight: 8 }} />\r\n          Notification Preferences Preview\r\n        </span>\r\n      }\r\n      size=\"small\"\r\n      style={{ marginTop: 16 }}\r\n    >\r\n      <Alert\r\n        message=\"Default Notification Preferences\"\r\n        description={`The following notification preferences will be automatically created for this user based on their ${primaryRole} role.`}\r\n        type=\"info\"\r\n        showIcon\r\n        icon={<InfoCircleOutlined />}\r\n        style={{ marginBottom: 16 }}\r\n      />\r\n\r\n      {loading ? (\r\n        <div style={{ textAlign: 'center', padding: 20 }}>\r\n          <Spin size=\"small\" />\r\n          <Text style={{ marginLeft: 8 }}>Loading preview...</Text>\r\n        </div>\r\n      ) : previewData ? (\r\n        <div>\r\n          <div style={{ marginBottom: 12 }}>\r\n            <Text strong>Primary Role: </Text>\r\n            <Tag color=\"blue\">{previewData.role}</Tag>\r\n          </div>\r\n          \r\n          <Title level={5} style={{ marginBottom: 12 }}>\r\n            Notification Types:\r\n          </Title>\r\n          \r\n          <Row gutter={[8, 8]}>\r\n            {Object.entries(previewData.preferences).map(([type, enabled]) => (\r\n              <Col xs={24} sm={12} md={8} key={type}>\r\n                <div style={{\r\n                  padding: '6px 10px',\r\n                  backgroundColor: enabled ? '#f6ffed' : '#fff2f0',\r\n                  border: `1px solid ${enabled ? '#b7eb8f' : '#ffccc7'}`,\r\n                  borderRadius: '4px',\r\n                  display: 'flex',\r\n                  justifyContent: 'space-between',\r\n                  alignItems: 'center'\r\n                }}>\r\n                  <Text style={{ fontSize: '12px' }}>\r\n                    {type.replace(/_/g, ' ')}\r\n                  </Text>\r\n                  <Tag \r\n                    color={enabled ? 'success' : 'default'} \r\n                    size=\"small\"\r\n                  >\r\n                    {enabled ? 'ON' : 'OFF'}\r\n                  </Tag>\r\n                </div>\r\n              </Col>\r\n            ))}\r\n          </Row>\r\n          \r\n          <Alert\r\n            message=\"User Customization\"\r\n            description=\"After creation, the user can modify these preferences in their settings.\"\r\n            type=\"success\"\r\n            showIcon\r\n            style={{ marginTop: 12 }}\r\n            size=\"small\"\r\n          />\r\n        </div>\r\n      ) : (\r\n        <Alert\r\n          message=\"Preview Unavailable\"\r\n          description=\"Could not load notification preferences preview for the selected role.\"\r\n          type=\"warning\"\r\n          showIcon\r\n          size=\"small\"\r\n        />\r\n      )}\r\n    </Card>\r\n  );\r\n};\r\n\r\nNotificationPreferencesPreview.propTypes = {\r\n  selectedRoles: PropTypes.array,\r\n  roles: PropTypes.array.isRequired,\r\n  visible: PropTypes.bool.isRequired\r\n};\r\n\r\nNotificationPreferencesPreview.defaultProps = {\r\n  selectedRoles: []\r\n};\r\n\r\nexport default NotificationPreferencesPreview;","import { message } from 'antd';\nimport { useState, useCallback, useEffect, useMemo } from 'react';\n\nimport { masterDataAPI } from '../services/masterDataAPI';\n\nexport const usePlantAssignment = () => {\n  const [availablePlants, setAvailablePlants] = useState([]);\n  const [plantsLoading, setPlantsLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Fetch plants from master data API\n  const fetchPlants = useCallback(async (signal) => {\n    setPlantsLoading(true);\n    setError(null);\n    \n    try {\n      const locations = await masterDataAPI.getAllLocations({ signal });\n      if (!signal?.aborted) {\n        const plantOptions = locations.map(location => ({\n          label: `${location.locationCode} - ${location.description}`,\n          value: location.locationCode,\n          key: location.locationCode\n        }));\n        setAvailablePlants(plantOptions);\n      }\n    } catch (err) {\n      if (!signal?.aborted) {\n        console.error('Failed to fetch plants:', err);\n        setError(err.message);\n        message.warning('Failed to fetch plants from location master, using fallback data');\n\n        // Fallback plant data\n        const fallbackPlants = [\n          { label: '1107 - Manufacturing Unit 1107', value: '1107', key: '1107' },\n          { label: '1106 - Manufacturing Unit 1106', value: '1106', key: '1106' },\n          { label: '1104 - Manufacturing Unit 1104', value: '1104', key: '1104' },\n          { label: '1103 - Manufacturing Unit 1103', value: '1103', key: '1103' },\n          { label: '1102 - Manufacturing Unit 1102', value: '1102', key: '1102' }\n        ];\n        setAvailablePlants(fallbackPlants);\n      }\n    } finally {\n      if (!signal?.aborted) {\n        setPlantsLoading(false);\n      }\n    }\n  }, []);\n\n  // Get plant description by code\n  const getPlantDescription = useCallback((plantCode) => {\n    const plant = availablePlants.find(p => p.value === plantCode);\n    return plant ? plant.label : plantCode;\n  }, [availablePlants]);\n\n  // Validate plant assignments\n  const validatePlantAssignments = useCallback((assignedPlants, primaryPlant) => {\n    const errors = [];\n\n    if (!assignedPlants || assignedPlants.length === 0) {\n      errors.push('At least one plant must be assigned');\n    }\n\n    if (primaryPlant && assignedPlants && !assignedPlants.includes(primaryPlant)) {\n      errors.push('Primary plant must be one of the assigned plants');\n    }\n\n    return errors;\n  }, []);\n\n  // Filter available plants based on search\n  const filterPlants = useCallback((input, option) => {\n    return option?.label?.toLowerCase().includes(input.toLowerCase());\n  }, []);\n\n  // Get plants that are available for assignment (not already assigned)\n  const getAvailablePlantsForAssignment = useCallback((currentAssignments = []) => {\n    return availablePlants.filter(plant => !currentAssignments.includes(plant.value));\n  }, [availablePlants]);\n\n  // Initialize plants on mount\n  useEffect(() => {\n    const controller = new AbortController();\n    fetchPlants(controller.signal);\n\n    return () => {\n      controller.abort();\n    };\n  }, [fetchPlants]);\n\n  // Memoized plant options for primary plant selection\n  const primaryPlantOptions = useMemo(() => {\n    return availablePlants.map(plant => ({\n      ...plant,\n      disabled: false // All plants can be primary\n    }));\n  }, [availablePlants]);\n\n  return {\n    availablePlants,\n    plantsLoading,\n    error,\n    fetchPlants,\n    getPlantDescription,\n    validatePlantAssignments,\n    filterPlants,\n    getAvailablePlantsForAssignment,\n    primaryPlantOptions\n  };\n};","import { ReloadOutlined } from '@ant-design/icons';\nimport { Form, Select, Button, Divider, Typography, Space, Alert } from 'antd';\nimport PropTypes from 'prop-types';\nimport React, { useCallback, useMemo, useEffect } from 'react';\n\nimport { usePlantAssignment } from '../../hooks/usePlantAssignment';\n\nconst { Text } = Typography;\n\nconst PlantAssignmentForm = React.memo(({ \n  selectedRoles, \n  roles, \n  form,\n  initialValues = {}\n}) => {\n  const {\n    availablePlants,\n    plantsLoading,\n    error,\n    fetchPlants,\n    filterPlants,\n    validatePlantAssignments\n  } = usePlantAssignment();\n\n  // Check if selected roles include plant user role\n  const isPlantUserSelected = useMemo(() => {\n    if (!selectedRoles || !roles) return false;\n    \n    const plantRoleIds = roles\n      .filter(role => role.name === 'ROLE_PLANT_USER' || role.name === 'PLANT_USER')\n      .map(role => role.id);\n\n    return selectedRoles.some(roleId => plantRoleIds.includes(roleId));\n  }, [selectedRoles, roles]);\n\n  // Handle refresh plants button click\n  const handleRefreshPlants = useCallback(async () => {\n    const controller = new AbortController();\n    await fetchPlants(controller.signal);\n  }, [fetchPlants]);\n\n  // Custom validator for assigned plants\n  const validateAssignedPlants = useCallback((_, value) => {\n    if (!isPlantUserSelected) {\n      return Promise.resolve();\n    }\n\n    if (!value || value.length === 0) {\n      return Promise.reject(new Error('Please select at least one plant for plant users!'));\n    }\n\n    return Promise.resolve();\n  }, [isPlantUserSelected]);\n\n  // Custom validator for primary plant\n  const validatePrimaryPlant = useCallback((_, value) => {\n    if (!isPlantUserSelected) {\n      return Promise.resolve();\n    }\n\n    const assignedPlants = form.getFieldValue('assignedPlants') || [];\n    \n    if (value && !assignedPlants.includes(value)) {\n      return Promise.reject(new Error('Primary plant must be one of the assigned plants!'));\n    }\n\n    return Promise.resolve();\n  }, [isPlantUserSelected, form]);\n\n  // Handle assigned plants change to update primary plant options\n  const handleAssignedPlantsChange = useCallback((values) => {\n    const currentPrimaryPlant = form.getFieldValue('primaryPlant');\n    \n    // If current primary plant is not in the new assigned plants, clear it\n    if (currentPrimaryPlant && !values.includes(currentPrimaryPlant)) {\n      form.setFieldValue('primaryPlant', undefined);\n    }\n  }, [form]);\n\n  // Get primary plant options based on assigned plants\n  const primaryPlantOptions = useMemo(() => {\n    const assignedPlants = form.getFieldValue('assignedPlants') || [];\n    return availablePlants.filter(plant => assignedPlants.includes(plant.value));\n  }, [availablePlants, form]);\n\n  // Set initial values when component mounts or initialValues change\n  useEffect(() => {\n    if (initialValues.assignedPlants || initialValues.primaryPlant) {\n      form.setFieldsValue({\n        assignedPlants: initialValues.assignedPlants || [],\n        primaryPlant: initialValues.primaryPlant || null\n      });\n    }\n  }, [initialValues, form]);\n\n  // Don't render if plant user role is not selected\n  if (!isPlantUserSelected) {\n    return null;\n  }\n\n  return (\n    <>\n      <Divider />\n      <div\n        style={{\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          marginBottom: 8\n        }}\n      >\n        <Text strong style={{ color: '#1890ff' }}>\n          Plant Assignments\n        </Text>\n        <Button \n          size=\"small\" \n          icon={<ReloadOutlined />}\n          onClick={handleRefreshPlants} \n          loading={plantsLoading}\n          aria-label=\"Refresh plants list\"\n          data-testid=\"refresh-plants-button\"\n        >\n          Refresh Plants\n        </Button>\n      </div>\n\n      <Text\n        type=\"secondary\"\n        style={{ display: 'block', marginBottom: 16, fontSize: '12px' }}\n      >\n        Plant users need to be assigned to specific plants to access plant-specific data.\n        Plants are loaded from Location Master.\n      </Text>\n\n      {error && (\n        <Alert\n          message=\"Plant Loading Error\"\n          description={`Failed to load plants: ${error}. Using fallback data.`}\n          type=\"warning\"\n          showIcon\n          style={{ marginBottom: 16 }}\n          data-testid=\"plant-error-alert\"\n        />\n      )}\n\n      <Form.Item\n        name=\"assignedPlants\"\n        label=\"Assigned Plants\"\n        rules={[\n          { validator: validateAssignedPlants }\n        ]}\n        hasFeedback\n        tooltip=\"Select all plants this user should have access to\"\n      >\n        <Select\n          mode=\"multiple\"\n          placeholder=\"Select plants this user can access\"\n          loading={plantsLoading}\n          options={availablePlants}\n          showSearch\n          filterOption={filterPlants}\n          onChange={handleAssignedPlantsChange}\n          aria-label=\"Assigned plants selection\"\n          data-testid=\"assigned-plants-select\"\n          maxTagCount=\"responsive\"\n          allowClear\n        />\n      </Form.Item>\n\n      <Form.Item\n        name=\"primaryPlant\"\n        label=\"Primary Plant\"\n        rules={[\n          { validator: validatePrimaryPlant }\n        ]}\n        hasFeedback\n        tooltip=\"The default plant that will be selected when the user logs in\"\n      >\n        <Select\n          placeholder=\"Select primary plant (optional)\"\n          allowClear\n          loading={plantsLoading}\n          options={primaryPlantOptions}\n          showSearch\n          filterOption={filterPlants}\n          aria-label=\"Primary plant selection\"\n          data-testid=\"primary-plant-select\"\n          disabled={!form.getFieldValue('assignedPlants')?.length}\n        />\n      </Form.Item>\n\n      {/* Helper text for primary plant */}\n      {form.getFieldValue('assignedPlants')?.length > 0 && (\n        <div style={{ marginTop: -16, marginBottom: 16 }}>\n          <Text type=\"secondary\" style={{ fontSize: '11px' }}>\n            Primary plant will be auto-selected from assigned plants if not specified\n          </Text>\n        </div>\n      )}\n    </>\n  );\n});\n\nPlantAssignmentForm.displayName = 'PlantAssignmentForm';\n\nPlantAssignmentForm.propTypes = {\n  selectedRoles: PropTypes.arrayOf(PropTypes.string),\n  roles: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired\n  })).isRequired,\n  form: PropTypes.object.isRequired,\n  initialValues: PropTypes.shape({\n    assignedPlants: PropTypes.arrayOf(PropTypes.string),\n    primaryPlant: PropTypes.string\n  })\n};\n\nPlantAssignmentForm.defaultProps = {\n  selectedRoles: [],\n  initialValues: {}\n};\n\nexport default PlantAssignmentForm;","import { Modal, Form, Input, Select } from 'antd';\nimport PropTypes from 'prop-types';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { userAPI } from '../../services/userAPI';\nimport { ValidationRules } from '../../utils/inputValidation';\nimport SecureForm, { SecureInput, SecureFormItem } from '../SecureForm';\n\nimport NotificationPreferencesPreview from './NotificationPreferencesPreview';\nimport PlantAssignmentForm from './PlantAssignmentForm';\n\n/**\n * UserModal Component\n * \n * A modal dialog for creating and editing user information including roles and plant assignments.\n * Supports both create and edit modes with form validation and error handling.\n * \n * @component\n * @example\n * ```jsx\n * const roles = [\n *   { value: 'USER', label: 'User' },\n *   { value: 'ADMIN', label: 'Administrator' }\n * ];\n * \n * <UserModal\n *   visible={true}\n *   editingUser={{ id: '1', username: 'john', email: 'john@example.com' }}\n *   roles={roles}\n *   onSave={(userData) => console.log('Save user:', userData)}\n *   onCancel={() => console.log('Cancel edit')}\n *   loading={false}\n * />\n * ```\n * \n * @param {Object} props - Component props\n * @param {boolean} props.visible - Whether the modal is visible\n * @param {Object|null} props.editingUser - User object being edited (null for create mode)\n * @param {string} props.editingUser.id - User ID\n * @param {string} props.editingUser.username - Username\n * @param {string} props.editingUser.email - Email address\n * @param {Array<string>} props.editingUser.roles - User roles\n * @param {Array<Object>} props.roles - Available roles for selection\n * @param {string} props.roles[].value - Role value\n * @param {string} props.roles[].label - Role display name\n * @param {Function} props.onSave - Callback when user data is saved\n * @param {Function} props.onCancel - Callback when modal is cancelled\n * @param {boolean} [props.loading=false] - Whether save operation is in progress\n * \n * @returns {React.ReactElement} Rendered UserModal component\n * \n * @since 1.0.0\n * @author QRMFG Development Team\n */\nconst UserModal = React.memo(({ \n  visible, \n  editingUser, \n  roles, \n  onSave, \n  onCancel,\n  loading = false \n}) => {\n  const [form] = Form.useForm();\n  const [selectedRoles, setSelectedRoles] = useState([]);\n  const [plantAssignmentData, setPlantAssignmentData] = useState({});\n\n  // Determine if this is edit or create mode\n  const isEditMode = useMemo(() => Boolean(editingUser), [editingUser]);\n\n  // Modal title based on mode\n  const modalTitle = useMemo(() => \n    isEditMode ? 'Edit User' : 'Add User', \n    [isEditMode]\n  );\n\n  // Form validation rules with enhanced security\n  const validationRules = useMemo(() => ({\n    username: ValidationRules.username,\n    email: ValidationRules.email,\n    password: isEditMode ? [] : ValidationRules.password,\n    roles: [\n      { required: true, message: 'Please select at least one role!' },\n      { type: 'array', min: 1, message: 'Please select at least one role!' }\n    ]\n  }), [isEditMode]);\n\n  // Role options for select\n  const roleOptions = useMemo(() => \n    roles.map(role => ({\n      label: role.name,\n      value: role.id,\n      key: role.id\n    })), \n    [roles]\n  );\n\n  // Handle form submission\n  const handleSubmit = useCallback(async (values) => {\n    try {\n      await onSave(values, editingUser);\n      form.resetFields();\n    } catch (error) {\n      console.error('Error saving user:', error);\n      // Error message is handled in the parent component\n    }\n  }, [onSave, editingUser, form]);\n\n  // Handle modal cancel\n  const handleCancel = useCallback(() => {\n    form.resetFields();\n    onCancel();\n  }, [form, onCancel]);\n\n  // Handle modal OK button\n  const handleOk = useCallback(() => {\n    form.submit();\n  }, [form]);\n\n  // Load plant assignment data for editing user\n  const loadPlantAssignmentData = useCallback(async (username) => {\n    try {\n      const plantData = await userAPI.getUserPlantAssignments(username);\n      setPlantAssignmentData(plantData || {});\n      return plantData;\n    } catch (error) {\n      console.warn('Could not load plant assignments for user:', error);\n      setPlantAssignmentData({});\n      return {};\n    }\n  }, []);\n\n  // Reset form when modal opens/closes or editing user changes\n  useEffect(() => {\n    if (visible && editingUser) {\n      const userRoles = (editingUser.roles || []).map(r => r?.id).filter(Boolean);\n      setSelectedRoles(userRoles);\n      \n      // Populate form with editing user data\n      form.setFieldsValue({\n        username: editingUser.username,\n        email: editingUser.email,\n        roles: userRoles\n      });\n\n      // Load plant assignments for editing user\n      loadPlantAssignmentData(editingUser.username);\n    } else if (visible && !editingUser) {\n      // Reset form for new user\n      setSelectedRoles([]);\n      setPlantAssignmentData({});\n      form.resetFields();\n    }\n  }, [visible, editingUser, form, loadPlantAssignmentData]);\n\n  // Form layout configuration\n  const formLayout = {\n    labelCol: { span: 6 },\n    wrapperCol: { span: 18 }\n  };\n\n  return (\n    <Modal\n      title={modalTitle}\n      open={visible}\n      onOk={handleOk}\n      onCancel={handleCancel}\n      confirmLoading={loading}\n      destroyOnClose\n      width={600}\n      maskClosable={false}\n      aria-labelledby=\"user-modal-title\"\n      data-testid=\"user-modal\"\n    >\n      <SecureForm\n        form={form}\n        {...formLayout}\n        onFinish={handleSubmit}\n        preserve={false}\n        aria-label={`${modalTitle} form`}\n        data-testid=\"user-form\"\n        componentName=\"UserModal\"\n        enableSecurityLogging={true}\n      >\n        <SecureFormItem\n          name=\"username\"\n          label=\"Username\"\n          validationType=\"username\"\n          hasFeedback\n        >\n          <SecureInput\n            placeholder=\"Enter username\"\n            disabled={isEditMode} // Username cannot be changed in edit mode\n            aria-label=\"Username input\"\n            data-testid=\"username-input\"\n            validationType=\"username\"\n            componentName=\"UserModal\"\n            fieldName=\"username\"\n          />\n        </SecureFormItem>\n\n        <SecureFormItem\n          name=\"email\"\n          label=\"Email\"\n          validationType=\"email\"\n          hasFeedback\n        >\n          <SecureInput\n            placeholder=\"Enter email address\"\n            aria-label=\"Email input\"\n            data-testid=\"email-input\"\n            validationType=\"email\"\n            componentName=\"UserModal\"\n            fieldName=\"email\"\n          />\n        </SecureFormItem>\n\n        {!isEditMode && (\n          <SecureFormItem\n            name=\"password\"\n            label=\"Password\"\n            validationType=\"password\"\n            hasFeedback\n          >\n            <Input.Password\n              placeholder=\"Enter password\"\n              aria-label=\"Password input\"\n              data-testid=\"password-input\"\n            />\n          </SecureFormItem>\n        )}\n\n        <Form.Item\n          name=\"roles\"\n          label=\"Roles\"\n          rules={validationRules.roles}\n          hasFeedback\n        >\n          <Select\n            mode=\"multiple\"\n            placeholder=\"Select user roles\"\n            options={roleOptions}\n            aria-label=\"Roles selection\"\n            data-testid=\"roles-select\"\n            showSearch\n            filterOption={(input, option) =>\n              option?.label?.toLowerCase().includes(input.toLowerCase())\n            }\n            maxTagCount=\"responsive\"\n            onChange={setSelectedRoles}\n          />\n        </Form.Item>\n\n        {/* Plant Assignment Section */}\n        <PlantAssignmentForm\n          selectedRoles={selectedRoles}\n          roles={roles}\n          form={form}\n          initialValues={plantAssignmentData}\n        />\n\n        {/* Notification Preferences Preview (only for new users) */}\n        {!isEditMode && (\n          <NotificationPreferencesPreview\n            selectedRoles={selectedRoles}\n            roles={roles}\n            visible={visible}\n          />\n        )}\n      </SecureForm>\n    </Modal>\n  );\n});\n\nUserModal.displayName = 'UserModal';\n\nUserModal.propTypes = {\n  visible: PropTypes.bool.isRequired,\n  editingUser: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    username: PropTypes.string.isRequired,\n    email: PropTypes.string.isRequired,\n    roles: PropTypes.arrayOf(PropTypes.shape({\n      id: PropTypes.string,\n      name: PropTypes.string\n    }))\n  }),\n  roles: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired\n  })).isRequired,\n  onSave: PropTypes.func.isRequired,\n  onCancel: PropTypes.func.isRequired,\n  loading: PropTypes.bool\n};\n\nUserModal.defaultProps = {\n  editingUser: null,\n  loading: false\n};\n\nexport default UserModal;","import { EditOutlined, DeleteOutlined } from '@ant-design/icons';\nimport { Table, Button } from 'antd';\nimport PropTypes from 'prop-types';\nimport React, { useMemo, useCallback } from 'react';\n\n/**\n * UserTable Component\n * \n * A performant, accessible table component for displaying and managing users.\n * Features include sorting, editing, deletion, and plant assignment display.\n * \n * @component\n * @example\n * ```jsx\n * const users = [\n *   { id: '1', username: 'john', email: 'john@example.com', roles: ['USER'], plantAssignments: ['PLANT1'] }\n * ];\n * \n * <UserTable\n *   users={users}\n *   loading={false}\n *   onEdit={(user) => console.log('Edit user:', user)}\n *   onDelete={(userId) => console.log('Delete user:', userId)}\n *   availablePlants={[{ value: 'PLANT1', label: 'Plant 1' }]}\n * />\n * ```\n * \n * @param {Object} props - Component props\n * @param {Array<Object>} props.users - Array of user objects to display\n * @param {string} props.users[].id - Unique user identifier\n * @param {string} props.users[].username - User's username\n * @param {string} props.users[].email - User's email address\n * @param {Array<string>} props.users[].roles - User's assigned roles\n * @param {Array<string>} props.users[].plantAssignments - User's plant assignments\n * @param {boolean} props.loading - Whether the table is in loading state\n * @param {Function} props.onEdit - Callback function when edit button is clicked\n * @param {Function} props.onDelete - Callback function when delete button is clicked\n * @param {Array<Object>} [props.availablePlants=[]] - Available plants for display mapping\n * @param {string} props.availablePlants[].value - Plant code\n * @param {string} props.availablePlants[].label - Plant display name\n * \n * @returns {React.ReactElement} Rendered UserTable component\n * \n * @since 1.0.0\n * @author QRMFG Development Team\n */\nconst UserTable = React.memo(({ \n  users, \n  loading, \n  onEdit, \n  onDelete, \n  availablePlants = [] \n}) => {\n  // Memoized function to get plant description by code\n  const getPlantDescription = useCallback((plantCode) => {\n    const plant = availablePlants.find(p => p.value === plantCode);\n    return plant ? plant.label : plantCode;\n  }, [availablePlants]);\n\n  // Memoized column definitions\n  const columns = useMemo(() => [\n    {\n      title: 'Username',\n      dataIndex: 'username',\n      key: 'username',\n      sorter: (a, b) => a.username.localeCompare(b.username),\n      'aria-label': 'Username column'\n    },\n    {\n      title: 'Email',\n      dataIndex: 'email',\n      key: 'email',\n      sorter: (a, b) => a.email.localeCompare(b.email),\n      'aria-label': 'Email column'\n    },\n    {\n      title: 'Roles',\n      dataIndex: 'roles',\n      key: 'roles',\n      'aria-label': 'Roles column',\n      render: (roles) => {\n        // Ensure roles is always an array\n        const rolesArray = Array.isArray(roles) ? roles : [];\n        const roleNames = rolesArray\n          .map(role => role?.name || role || '')\n          .filter(Boolean)\n          .join(', ');\n          \n        return roleNames || 'No roles assigned';\n      }\n    },\n    {\n      title: 'Assigned Plants',\n      key: 'plants',\n      'aria-label': 'Assigned plants column',\n      render: (_, record) => {\n        // Handle multiple data sources for plant assignments\n        let assignedPlants = [];\n        let primaryPlant = null;\n        \n        // Check for plantAssignments (from hook)\n        if (record.plantAssignments) {\n          if (Array.isArray(record.plantAssignments)) {\n            assignedPlants = record.plantAssignments;\n          } else if (record.plantAssignments.assignedPlants && Array.isArray(record.plantAssignments.assignedPlants)) {\n            assignedPlants = record.plantAssignments.assignedPlants;\n            primaryPlant = record.plantAssignments.primaryPlant;\n          }\n        }\n        \n        // Check for assignedPlants directly from backend (comma-separated string)\n        if (assignedPlants.length === 0 && record.assignedPlants) {\n          if (Array.isArray(record.assignedPlants)) {\n            assignedPlants = record.assignedPlants;\n          } else if (typeof record.assignedPlants === 'string' && record.assignedPlants.trim()) {\n            // Parse comma-separated string\n            assignedPlants = record.assignedPlants.split(',').map(plant => plant.trim()).filter(Boolean);\n          }\n          primaryPlant = record.primaryPlant;\n        }\n        \n        if (!assignedPlants || assignedPlants.length === 0) {\n          return <span style={{ color: '#999' }} aria-label=\"No plants assigned\">None</span>;\n        }\n\n        const plants = assignedPlants\n          .map(plantCode => getPlantDescription(plantCode))\n          .join(', ');\n\n        return (\n          <div>\n            <div aria-label={`Assigned plants: ${plants}`}>{plants}</div>\n            {primaryPlant && (\n              <div \n                style={{ fontSize: '11px', color: '#666' }}\n                aria-label={`Primary plant: ${getPlantDescription(primaryPlant)}`}\n              >\n                Primary: {getPlantDescription(primaryPlant)}\n              </div>\n            )}\n          </div>\n        );\n      }\n    },\n    {\n      title: 'Actions',\n      key: 'actions',\n      'aria-label': 'Actions column',\n      render: (_, record) => (\n        <div role=\"group\" aria-label={`Actions for user ${record.username}`}>\n          <Button \n            type=\"link\" \n            icon={<EditOutlined />} \n            onClick={() => onEdit(record)}\n            aria-label={`Edit user ${record.username}`}\n            data-testid={`edit-button-${record.id}`}\n          >\n            Edit\n          </Button>\n          <Button\n            type=\"link\"\n            danger\n            icon={<DeleteOutlined />}\n            onClick={() => onDelete(record.id)}\n            aria-label={`Delete user ${record.username}`}\n            data-testid={`delete-button-${record.id}`}\n          >\n            Delete\n          </Button>\n        </div>\n      )\n    }\n  ], [onEdit, onDelete, getPlantDescription]);\n\n  // Memoized table props with safety checks\n  const tableProps = useMemo(() => {\n    // Ensure users is always an array\n    const safeUsers = Array.isArray(users) ? users : [];\n    \n    return {\n      columns,\n      dataSource: safeUsers,\n      rowKey: 'id', // Use user.id instead of array index for better performance\n      loading,\n      pagination: {\n        pageSize: 10,\n        showSizeChanger: true,\n        showQuickJumper: true,\n        showTotal: (total, range) => \n          `${range[0]}-${range[1]} of ${total} users`,\n        'aria-label': 'User table pagination'\n      },\n      scroll: { x: 800 }, // Enable horizontal scroll on small screens\n      size: 'middle',\n      'aria-label': 'Users table',\n      'data-testid': 'users-table'\n    };\n  }, [columns, users, loading]);\n\n  // Show empty state when no users\n  const safeUsers = Array.isArray(users) ? users : [];\n  if (!loading && safeUsers.length === 0) {\n    return (\n      <div \n        style={{ \n          textAlign: 'center', \n          padding: '40px 0', \n          color: '#999' \n        }}\n        role=\"status\"\n        aria-label=\"No users found\"\n      >\n        No users found. Click \"Add User\" to create the first user.\n      </div>\n    );\n  }\n\n  return (\n    <Table \n      {...tableProps}\n      locale={{\n        emptyText: 'No users found'\n      }}\n    />\n  );\n});\n\nUserTable.displayName = 'UserTable';\n\nUserTable.propTypes = {\n  users: PropTypes.array, // Made more flexible to handle null/undefined gracefully\n  loading: PropTypes.bool,\n  onEdit: PropTypes.func.isRequired,\n  onDelete: PropTypes.func.isRequired,\n  availablePlants: PropTypes.arrayOf(PropTypes.shape({\n    label: PropTypes.string.isRequired,\n    value: PropTypes.string.isRequired\n  }))\n};\n\nUserTable.defaultProps = {\n  users: [],\n  loading: false,\n  availablePlants: []\n};\n\nexport default UserTable;","import { message } from 'antd';\nimport { useReducer, useCallback, useEffect } from 'react';\n\nimport { userAPI } from '../services/userAPI';\nimport { ensureArray, safeApiResponse, safeRolesData, safePlantData } from '../utils/dataUtils';\n\n/**\n * @fileoverview Custom hook for managing user operations including CRUD operations,\n * state management, and error handling. Provides a centralized way to handle\n * user-related business logic with proper loading states and error handling.\n * \n * @author QRMFG Development Team\n * @since 1.0.0\n */\n\n// Simple API client mock for development\nconst createSimpleApiClient = () => {\n  if (process.env.NODE_ENV === 'test') {\n    return {\n      get: jest.fn(),\n      post: jest.fn(),\n      put: jest.fn(),\n      delete: jest.fn()\n    };\n  }\n  \n  // In production, import the real API client\n  try {\n    const apiClient = require('../api/client').default;\n    return apiClient;\n  } catch (error) {\n    console.warn('API client not available, using mock');\n    return {\n      get: () => Promise.resolve([]),\n      post: () => Promise.resolve({}),\n      put: () => Promise.resolve({}),\n      delete: () => Promise.resolve({})\n    };\n  }\n};\n\nconst apiClient = createSimpleApiClient();\n\n// Action types\nconst USER_ACTIONS = {\n  SET_LOADING: 'SET_LOADING',\n  SET_USERS: 'SET_USERS',\n  SET_ROLES: 'SET_ROLES',\n  SET_ERROR: 'SET_ERROR',\n  SET_MODAL_VISIBLE: 'SET_MODAL_VISIBLE',\n  SET_EDITING_USER: 'SET_EDITING_USER',\n  RESET_MODAL: 'RESET_MODAL'\n};\n\n// Initial state\nconst initialState = {\n  users: [],\n  roles: [],\n  loading: false,\n  error: null,\n  modalVisible: false,\n  editingUser: null\n};\n\n// Reducer function\nconst userReducer = (state, action) => {\n  switch (action.type) {\n    case USER_ACTIONS.SET_LOADING:\n      return { ...state, loading: action.payload };\n    case USER_ACTIONS.SET_USERS:\n      return { ...state, users: action.payload, loading: false, error: null };\n    case USER_ACTIONS.SET_ROLES:\n      return { ...state, roles: action.payload };\n    case USER_ACTIONS.SET_ERROR:\n      return { ...state, error: action.payload, loading: false };\n    case USER_ACTIONS.SET_MODAL_VISIBLE:\n      return { ...state, modalVisible: action.payload };\n    case USER_ACTIONS.SET_EDITING_USER:\n      return { ...state, editingUser: action.payload };\n    case USER_ACTIONS.RESET_MODAL:\n      return { ...state, modalVisible: false, editingUser: null };\n    default:\n      return state;\n  }\n};\n\n/**\n * Custom hook for comprehensive user management operations\n * \n * Provides a complete set of user management functionality including:\n * - User CRUD operations (Create, Read, Update, Delete)\n * - Plant assignment management\n * - Modal state management for user editing\n * - Loading states and error handling\n * - Automatic data fetching and caching\n * \n * @hook\n * @example\n * ```jsx\n * function UsersScreen() {\n *   const {\n *     users,\n *     loading,\n *     error,\n *     modalVisible,\n *     editingUser,\n *     actions\n *   } = useUserManagement();\n * \n *   useEffect(() => {\n *     actions.fetchUsers();\n *   }, [actions.fetchUsers]);\n * \n *   return (\n *     <div>\n *       <UserTable \n *         users={users}\n *         loading={loading}\n *         onEdit={actions.openEditModal}\n *         onDelete={actions.deleteUser}\n *       />\n *       <UserModal\n *         visible={modalVisible}\n *         editingUser={editingUser}\n *         onSave={actions.saveUser}\n *         onCancel={actions.closeModal}\n *       />\n *     </div>\n *   );\n * }\n * ```\n * \n * @returns {Object} User management state and actions\n * @returns {Array<Object>} returns.users - Array of user objects with plant assignments\n * @returns {boolean} returns.loading - Loading state for async operations\n * @returns {string|null} returns.error - Error message if any operation failed\n * @returns {boolean} returns.modalVisible - Whether the user edit modal is visible\n * @returns {Object|null} returns.editingUser - User object being edited (null for create mode)\n * @returns {Object} returns.actions - Object containing all available actions\n * @returns {Function} returns.actions.fetchUsers - Fetch all users from the server\n * @returns {Function} returns.actions.saveUser - Save user data (create or update)\n * @returns {Function} returns.actions.deleteUser - Delete a user by ID\n * @returns {Function} returns.actions.openEditModal - Open modal for editing a user\n * @returns {Function} returns.actions.openCreateModal - Open modal for creating a new user\n * @returns {Function} returns.actions.closeModal - Close the user edit/create modal\n * @returns {Function} returns.actions.assignPlantToUser - Assign a plant to a user\n * @returns {Function} returns.actions.removePlantFromUser - Remove plant assignment from user\n * \n * @since 1.0.0\n * @author QRMFG Development Team\n */\nexport const useUserManagement = () => {\n  const [state, dispatch] = useReducer(userReducer, initialState);\n\n  // Fetch users with plant assignments\n  const fetchUsers = useCallback(async (signal) => {\n    dispatch({ type: USER_ACTIONS.SET_LOADING, payload: true });\n    try {\n      const data = await apiClient.get('/admin/users', { signal });\n      // Safely extract users array from the response\n      const usersArray = safeApiResponse(data, 'users');\n\n      // Load plant assignments for each user\n      const usersWithPlants = await Promise.all(\n        usersArray.map(async (user) => {\n          try {\n            const plantData = await userAPI.getUserPlantAssignments(user.username, { signal });\n            return {\n              ...user,\n              roles: safeRolesData(user.roles),\n              plantAssignments: safePlantData(plantData)\n            };\n          } catch (error) {\n            if (!signal?.aborted) {\n              console.error('Error loading plant assignments:', error);\n            }\n            return {\n              ...user,\n              roles: safeRolesData(user.roles),\n              plantAssignments: safePlantData(null)\n            };\n          }\n        })\n      );\n\n      if (!signal?.aborted) {\n        dispatch({ type: USER_ACTIONS.SET_USERS, payload: usersWithPlants });\n      }\n    } catch (error) {\n      if (!signal?.aborted) {\n        console.error('Error fetching users:', error);\n        dispatch({ type: USER_ACTIONS.SET_ERROR, payload: error.message });\n        message.error('Failed to fetch users');\n        // Ensure we always set an empty array on error\n        dispatch({ type: USER_ACTIONS.SET_USERS, payload: [] });\n      }\n    }\n  }, []);\n\n  // Fetch roles\n  const fetchRoles = useCallback(async (signal) => {\n    try {\n      const data = await apiClient.get('/admin/roles', { signal });\n      if (!signal?.aborted) {\n        // Safely extract roles array from the response\n        const rolesArray = safeApiResponse(data, 'roles');\n        dispatch({ type: USER_ACTIONS.SET_ROLES, payload: rolesArray });\n      }\n    } catch (error) {\n      if (!signal?.aborted) {\n        console.error('Failed to fetch roles:', error);\n        message.error('Failed to fetch roles');\n        dispatch({ type: USER_ACTIONS.SET_ROLES, payload: [] });\n      }\n    }\n  }, []);\n\n  // Delete user\n  const deleteUser = useCallback(async (userId) => {\n    try {\n      await apiClient.delete(`/admin/users/${userId}`);\n      message.success('User deleted successfully');\n      // Refetch users after deletion\n      const controller = new AbortController();\n      await fetchUsers(controller.signal);\n    } catch (error) {\n      message.error('Failed to delete user');\n      throw error;\n    }\n  }, [fetchUsers]);\n\n  // Save user (create or update)\n  const saveUser = useCallback(async (values, editingUser) => {\n    try {\n      // Separate user data from plant data and roles\n      const { assignedPlants, primaryPlant, roles, ...userData } = values;\n\n      if (editingUser) {\n        // Update user basic info\n        await apiClient.put(`/admin/users/${editingUser.id}`, userData);\n\n        // Update roles if provided\n        if (roles && roles.length > 0) {\n          try {\n            await apiClient.post(`/admin/users/${editingUser.id}/roles`, {\n              roleIds: roles\n            });\n          } catch (roleError) {\n            console.warn('Failed to update user roles:', roleError);\n            message.warning('User updated but roles could not be assigned');\n          }\n        }\n\n        // Update plant assignments if provided\n        if (assignedPlants && assignedPlants.length > 0) {\n          await userAPI.updateUserPlantAssignments(editingUser.username, {\n            assignedPlants,\n            primaryPlant: primaryPlant || assignedPlants[0]\n          });\n        }\n\n        message.success('User updated successfully');\n      } else {\n        // Create new user with roles and plants included in the initial request\n        const userPayload = {\n          ...userData,\n          roles: roles || [],\n          assignedPlants: assignedPlants || [],\n          primaryPlant: primaryPlant || (assignedPlants && assignedPlants.length > 0 ? assignedPlants[0] : null)\n        };\n        \n        const response = await apiClient.post('/admin/users', userPayload);\n        console.log('User creation response:', response);\n        \n        // Check if the response indicates any warnings (like role assignment failures)\n        if (response.status === 'warning') {\n          message.warning(response.message);\n        } else if (response.status === 'success') {\n          message.success('User created successfully');\n        } else {\n          message.success('User created successfully');\n        }\n\n\n      }\n\n      dispatch({ type: USER_ACTIONS.RESET_MODAL });\n      // Refetch users after save\n      const controller = new AbortController();\n      await fetchUsers(controller.signal);\n    } catch (error) {\n      message.error('Failed to save user');\n      throw error;\n    }\n  }, [fetchUsers]);\n\n  // Open edit modal\n  const openEditModal = useCallback(async (user) => {\n    dispatch({ type: USER_ACTIONS.SET_EDITING_USER, payload: user });\n    dispatch({ type: USER_ACTIONS.SET_MODAL_VISIBLE, payload: true });\n  }, []);\n\n  // Open add modal\n  const openAddModal = useCallback(() => {\n    dispatch({ type: USER_ACTIONS.SET_EDITING_USER, payload: null });\n    dispatch({ type: USER_ACTIONS.SET_MODAL_VISIBLE, payload: true });\n  }, []);\n\n  // Close modal\n  const closeModal = useCallback(() => {\n    dispatch({ type: USER_ACTIONS.RESET_MODAL });\n  }, []);\n\n  // Initialize data on mount\n  useEffect(() => {\n    const controller = new AbortController();\n\n    const initializeData = async () => {\n      try {\n        await Promise.all([\n          fetchUsers(controller.signal),\n          fetchRoles(controller.signal)\n        ]);\n      } catch (error) {\n        if (!controller.signal.aborted) {\n          console.error('Error initializing user management data:', error);\n        }\n      }\n    };\n\n    initializeData();\n\n    return () => {\n      controller.abort();\n    };\n  }, [fetchUsers, fetchRoles]);\n\n  // Memoized actions object\n  const actions = {\n    fetchUsers,\n    fetchRoles,\n    deleteUser,\n    saveUser,\n    openEditModal,\n    openAddModal,\n    closeModal\n  };\n\n  return {\n    ...state,\n    actions\n  };\n};","import { Button, Space, message, Alert } from 'antd';\nimport React, { useCallback } from 'react';\n\nimport UserErrorBoundary from '../components/ErrorBoundaries/UserErrorBoundary';\nimport UserModal from '../components/User/UserModal';\nimport UserTable from '../components/User/UserTable';\nimport { usePlantAssignment } from '../hooks/usePlantAssignment';\nimport { useUserManagement } from '../hooks/useUserManagement';\nimport { getCurrentUser, isAuthenticated, getUserRoles } from '../services/auth';\nimport { masterDataAPI } from '../services/masterDataAPI';\nconst Users = () => {\n  // Use custom hooks for state management\n  const { users, roles, loading, modalVisible, editingUser, actions } = useUserManagement();\n  const { availablePlants } = usePlantAssignment();\n\n  // Handle test API calls (keeping existing functionality)\n  const handleTestLocationAPI = useCallback(async () => {\n    try {\n      const result = await masterDataAPI.testLocationMaster();\n      message.success(result);\n    } catch (error) {\n      message.error(`Test failed: ${  error.message}`);\n    }\n  }, []);\n\n  const handleTestSimpleAPI = useCallback(async () => {\n    try {\n      const result = await masterDataAPI.testSimpleLocation();\n      message.success(result);\n    } catch (error) {\n      message.error(`Simple test failed: ${  error.message}`);\n    }\n  }, []);\n\n  const handleDiagnosticAPI = useCallback(async () => {\n    try {\n      const result = await masterDataAPI.diagnosticLocationMaster();\n      console.log('Diagnostic result:', result);\n      message.info('Check console for diagnostic info');\n    } catch (error) {\n      message.error(`Diagnostic failed: ${  error.message}`);\n    }\n  }, []);\n\n  // Handle retry for error boundary\n  const handleRetry = useCallback(() => {\n    const controller = new AbortController();\n    actions.fetchUsers(controller.signal);\n  }, [actions]);\n\n  // Test user roles endpoint\n  const handleTestUserRoles = useCallback(async () => {\n    try {\n      // Import the API client\n      const apiClient = (await import('../api/client')).default;\n      const result = await apiClient.get('/admin/test/user-roles');\n      console.log('Test user roles result:', result);\n      message.success('Test successful! Check console for user roles test data');\n    } catch (error) {\n      console.error('Test user roles failed:', error);\n      if (error.status === 401) {\n        message.error('Authentication failed. Please log in first.');\n      } else {\n        message.error(`Test failed: ${error.message}`);\n      }\n    }\n  }, []);\n\n  // Quick login redirect\n  const handleGoToLogin = useCallback(() => {\n    window.location.href = '/qrmfg/login';\n  }, []);\n\n  // Fix admin roles\n  const handleFixAdminRoles = useCallback(async () => {\n    try {\n      const apiClient = (await import('../api/client')).default;\n      const result = await apiClient.post('/admin/fix-admin-roles');\n      console.log('Fix admin roles result:', result);\n      message.success('Admin roles fixed! Refreshing user data...');\n      // Refresh the users data\n      const controller = new AbortController();\n      actions.fetchUsers(controller.signal);\n    } catch (error) {\n      console.error('Fix admin roles failed:', error);\n      message.error(`Fix failed: ${error.message}`);\n    }\n  }, [actions]);\n\n  // Get current user info for debugging\n  const currentUser = getCurrentUser();\n  const userRoles = getUserRoles();\n  const authenticated = isAuthenticated();\n\n  return (\n    <UserErrorBoundary context=\"user-management\" onRetry={handleRetry}>\n      <div style={{ padding: '24px' }}>\n        {/* Debug info */}\n        <Alert\n          message={`Debug Info: User: ${currentUser || 'Not logged in'}, Authenticated: ${authenticated}, Roles: ${userRoles.join(', ') || 'None'}`}\n          type={authenticated ? \"info\" : \"warning\"}\n          style={{ marginBottom: 16 }}\n          showIcon\n          action={\n            !authenticated && (\n              <Button size=\"small\" onClick={handleGoToLogin}>\n                Go to Login\n              </Button>\n            )\n          }\n        />\n\n        {/* Action buttons */}\n        <div style={{ marginBottom: 16 }}>\n          <Space wrap>\n            <Button \n              type=\"primary\" \n              onClick={actions.openAddModal}\n              data-testid=\"add-user-button\"\n            >\n              Add User\n            </Button>\n            <Button onClick={handleTestLocationAPI}>\n              Test Location API\n            </Button>\n            <Button onClick={handleTestSimpleAPI}>\n              Test Simple API\n            </Button>\n            <Button onClick={handleDiagnosticAPI}>\n              Diagnostic\n            </Button>\n            <Button onClick={handleTestUserRoles}>\n              Test User Roles\n            </Button>\n            <Button onClick={handleFixAdminRoles} type=\"dashed\">\n              Fix Admin Roles\n            </Button>\n          </Space>\n        </div>\n\n        {/* Users table */}\n        <UserTable\n          users={users}\n          loading={loading}\n          onEdit={actions.openEditModal}\n          onDelete={actions.deleteUser}\n          availablePlants={availablePlants}\n        />\n\n        {/* User modal */}\n        <UserModal\n          visible={modalVisible}\n          editingUser={editingUser}\n          roles={roles}\n          onSave={actions.saveUser}\n          onCancel={actions.closeModal}\n          loading={loading}\n        />\n      </div>\n    </UserErrorBoundary>\n  );\n};\n\nexport default Users;\n","/**\n * SecureForm Component\n * \n * A wrapper component that provides enhanced security features for forms including:\n * - Input validation and sanitization\n * - XSS prevention\n * - Security audit logging\n * - Real-time validation feedback\n * \n * @component\n * @since 1.0.0\n * @author QRMFG Security Team\n */\n\nimport { Form, Input, message } from 'antd';\nimport PropTypes from 'prop-types';\nimport React, { useCallback, useEffect, useState } from 'react';\n\nimport { \n  InputSanitizer, \n  ValidationRules, \n  useInputValidation, \n  SecurityAuditLogger \n} from '../utils/inputValidation';\n\nconst { TextArea } = Input;\n\n/**\n * SecureInput Component - Enhanced input with validation and sanitization\n */\nconst SecureInput = React.memo(({ \n  value, \n  onChange, \n  validationType = 'text',\n  componentName = 'SecureInput',\n  fieldName = 'input',\n  onValidationChange,\n  ...props \n}) => {\n  const { validateInput } = useInputValidation();\n  const [validationState, setValidationState] = useState({\n    isValid: true,\n    errors: [],\n    wasModified: false\n  });\n\n  const handleChange = useCallback((e) => {\n    const inputValue = e.target.value;\n    const validation = validateInput(inputValue, validationType);\n    \n    setValidationState(validation);\n    \n    // Log potential security issues\n    if (validation.wasModified) {\n      SecurityAuditLogger.logXSSAttempt(\n        inputValue,\n        validation.sanitizedValue,\n        componentName,\n        fieldName\n      );\n      \n      message.warning('Input was sanitized for security reasons');\n    }\n    \n    // Call parent onChange with sanitized value\n    if (onChange) {\n      onChange({\n        ...e,\n        target: {\n          ...e.target,\n          value: validation.sanitizedValue\n        }\n      });\n    }\n    \n    // Notify parent of validation state\n    if (onValidationChange) {\n      onValidationChange(validation);\n    }\n  }, [onChange, validationType, componentName, fieldName, onValidationChange, validateInput]);\n\n  return (\n    <Input\n      {...props}\n      value={value}\n      onChange={handleChange}\n      status={validationState.isValid ? '' : 'error'}\n      title={validationState.errors.join(', ')}\n    />\n  );\n});\n\n/**\n * SecureTextArea Component - Enhanced textarea with validation and sanitization\n */\nconst SecureTextArea = React.memo(({ \n  value, \n  onChange, \n  validationType = 'richtext',\n  componentName = 'SecureTextArea',\n  fieldName = 'textarea',\n  onValidationChange,\n  ...props \n}) => {\n  const { validateInput } = useInputValidation();\n  const [validationState, setValidationState] = useState({\n    isValid: true,\n    errors: [],\n    wasModified: false\n  });\n\n  const handleChange = useCallback((e) => {\n    const inputValue = e.target.value;\n    const validation = validateInput(inputValue, validationType);\n    \n    setValidationState(validation);\n    \n    // Log potential security issues\n    if (validation.wasModified) {\n      SecurityAuditLogger.logXSSAttempt(\n        inputValue,\n        validation.sanitizedValue,\n        componentName,\n        fieldName\n      );\n      \n      message.warning('Input was sanitized for security reasons');\n    }\n    \n    // Call parent onChange with sanitized value\n    if (onChange) {\n      onChange({\n        ...e,\n        target: {\n          ...e.target,\n          value: validation.sanitizedValue\n        }\n      });\n    }\n    \n    // Notify parent of validation state\n    if (onValidationChange) {\n      onValidationChange(validation);\n    }\n  }, [onChange, validationType, componentName, fieldName, onValidationChange, validateInput]);\n\n  return (\n    <TextArea\n      {...props}\n      value={value}\n      onChange={handleChange}\n      status={validationState.isValid ? '' : 'error'}\n      title={validationState.errors.join(', ')}\n    />\n  );\n});\n\n/**\n * SecureForm Component - Enhanced form with security features\n */\nconst SecureForm = React.memo(({ \n  children, \n  onFinish, \n  componentName = 'SecureForm',\n  enableSecurityLogging = true,\n  ...props \n}) => {\n  const [securityEvents, setSecurityEvents] = useState([]);\n\n  // Handle form submission with security validation\n  const handleFinish = useCallback(async (values) => {\n    try {\n      // Sanitize all form values before submission\n      const sanitizedValues = {};\n      const securityIssues = [];\n\n      Object.keys(values).forEach(key => {\n        const originalValue = values[key];\n        \n        if (typeof originalValue === 'string') {\n          const sanitizedValue = InputSanitizer.sanitizeText(originalValue);\n          sanitizedValues[key] = sanitizedValue;\n          \n          if (sanitizedValue !== originalValue) {\n            securityIssues.push({\n              field: key,\n              originalValue: originalValue.substring(0, 50),\n              sanitizedValue: sanitizedValue.substring(0, 50)\n            });\n          }\n        } else {\n          sanitizedValues[key] = originalValue;\n        }\n      });\n\n      // Log security issues if any\n      if (securityIssues.length > 0 && enableSecurityLogging) {\n        securityIssues.forEach(issue => {\n          SecurityAuditLogger.logXSSAttempt(\n            issue.originalValue,\n            issue.sanitizedValue,\n            componentName,\n            issue.field\n          );\n        });\n        \n        message.warning(`${securityIssues.length} field(s) were sanitized for security`);\n      }\n\n      // Call original onFinish with sanitized values\n      if (onFinish) {\n        await onFinish(sanitizedValues);\n      }\n    } catch (error) {\n      console.error('SecureForm submission error:', error);\n      message.error('Form submission failed');\n      throw error;\n    }\n  }, [onFinish, componentName, enableSecurityLogging]);\n\n  // Track security events\n  useEffect(() => {\n    if (enableSecurityLogging) {\n      const events = SecurityAuditLogger.getRecentEvents();\n      setSecurityEvents(events.slice(-10)); // Keep last 10 events\n    }\n  }, [enableSecurityLogging]);\n\n  return (\n    <Form\n      {...props}\n      onFinish={handleFinish}\n      validateTrigger={['onChange', 'onBlur']}\n    >\n      {children}\n      \n      {/* Development mode security info */}\n      {process.env.NODE_ENV === 'development' && securityEvents.length > 0 && (\n        <div style={{ \n          marginTop: 16, \n          padding: 8, \n          background: '#fff7e6', \n          border: '1px solid #ffd591',\n          borderRadius: 4,\n          fontSize: 12\n        }}>\n          <strong>Security Events (Dev Mode):</strong>\n          <ul style={{ margin: '4px 0', paddingLeft: 16 }}>\n            {securityEvents.slice(-3).map((event, index) => (\n              <li key={index}>\n                {event.type} in {event.component}.{event.field} at {new Date(event.timestamp).toLocaleTimeString()}\n              </li>\n            ))}\n          </ul>\n        </div>\n      )}\n    </Form>\n  );\n});\n\n// Form.Item wrapper with enhanced validation\nconst SecureFormItem = React.memo(({ \n  children, \n  validationType = 'text',\n  name,\n  rules = [],\n  ...props \n}) => {\n  // Combine custom rules with security validation rules\n  const securityRules = React.useMemo(() => {\n    let baseRules = [];\n    \n    switch (validationType) {\n      case 'username':\n        baseRules = ValidationRules.username;\n        break;\n      case 'email':\n        baseRules = ValidationRules.email;\n        break;\n      case 'password':\n        baseRules = ValidationRules.password;\n        break;\n      case 'projectCode':\n        baseRules = ValidationRules.projectCode;\n        break;\n      case 'materialCode':\n        baseRules = ValidationRules.materialCode;\n        break;\n      case 'plantCode':\n        baseRules = ValidationRules.plantCode;\n        break;\n      case 'text':\n        baseRules = ValidationRules.text(false, 0, 255);\n        break;\n      case 'richtext':\n        baseRules = ValidationRules.richText(false, 0, 1000);\n        break;\n      default:\n        baseRules = [];\n    }\n    \n    return [...baseRules, ...rules];\n  }, [validationType, rules]);\n\n  return (\n    <Form.Item\n      {...props}\n      name={name}\n      rules={securityRules}\n    >\n      {children}\n    </Form.Item>\n  );\n});\n\n// PropTypes\nSecureInput.propTypes = {\n  value: PropTypes.string,\n  onChange: PropTypes.func,\n  validationType: PropTypes.oneOf(['text', 'username', 'email', 'sql', 'filename', 'url']),\n  componentName: PropTypes.string,\n  fieldName: PropTypes.string,\n  onValidationChange: PropTypes.func\n};\n\nSecureTextArea.propTypes = {\n  value: PropTypes.string,\n  onChange: PropTypes.func,\n  validationType: PropTypes.oneOf(['text', 'richtext']),\n  componentName: PropTypes.string,\n  fieldName: PropTypes.string,\n  onValidationChange: PropTypes.func\n};\n\nSecureForm.propTypes = {\n  children: PropTypes.node.isRequired,\n  onFinish: PropTypes.func,\n  componentName: PropTypes.string,\n  enableSecurityLogging: PropTypes.bool\n};\n\nSecureFormItem.propTypes = {\n  children: PropTypes.node.isRequired,\n  validationType: PropTypes.string,\n  name: PropTypes.string,\n  rules: PropTypes.array\n};\n\n// Display names\nSecureInput.displayName = 'SecureInput';\nSecureTextArea.displayName = 'SecureTextArea';\nSecureForm.displayName = 'SecureForm';\nSecureFormItem.displayName = 'SecureFormItem';\n\n// Exports\nexport { SecureInput, SecureTextArea, SecureFormItem };\nexport default SecureForm;","import apiClient from '../api/client';\nimport { getToken, isAuthenticated } from '../services/auth';\n\n/**\n * User API service providing user management functionality\n * Migrated to use unified APIClient with standardized error handling\n *\n * @namespace userAPI\n */\nexport const userAPI = {\n  /**\n   * Get current user's plant assignments from backend API\n   * @param {string} username - Username to get plant assignments for\n   * @param {Object} options - Additional options including signal for AbortController\n   * @returns {Promise<Object>} Plant assignment data\n   */\n  getUserPlantAssignments: async (username, options = {}) => {\n    try {\n      console.log('Getting plant assignments for user:', username);\n      console.log('Is authenticated:', isAuthenticated());\n\n      // Check if user is authenticated first\n      if (!isAuthenticated()) {\n        console.warn('User is not authenticated, cannot get plant assignments');\n        return {\n          assignedPlants: [],\n          primaryPlant: null,\n          effectivePlant: null,\n          isPlantUser: false\n        };\n      }\n\n      // Primary method: Get plant info from JWT token validation\n      const token = getToken();\n      console.log('Retrieved token:', token ? 'Token found' : 'No token found');\n\n      if (token) {\n        try {\n          const validationResponse = await apiClient.post('/auth/validate', { token }, options);\n          console.log('Token validation response:', validationResponse);\n          console.log('Plant codes in token:', validationResponse.plantCodes);\n          console.log('Primary plant in token:', validationResponse.primaryPlant);\n          console.log('Is plant user:', validationResponse.isPlantUser);\n\n          if (validationResponse.valid) {\n            // Check if we have plant data in the token\n            if (validationResponse.plantCodes && validationResponse.plantCodes.length > 0) {\n              console.log('Plant assignments from token:', validationResponse);\n              return {\n                assignedPlants: validationResponse.plantCodes || [],\n                primaryPlant: validationResponse.primaryPlant || null,\n                effectivePlant: validationResponse.primaryPlant || (validationResponse.plantCodes && validationResponse.plantCodes[0]) || null,\n                isPlantUser: validationResponse.isPlantUser || false\n              };\n            }\n\n            // Handle case where user has primaryPlant but empty plantCodes array\n            if (validationResponse.primaryPlant && validationResponse.isPlantUser) {\n              console.log('User has primary plant but empty plantCodes, using primary plant as assigned plant:', validationResponse.primaryPlant);\n              return {\n                assignedPlants: [validationResponse.primaryPlant],\n                primaryPlant: validationResponse.primaryPlant,\n                effectivePlant: validationResponse.primaryPlant,\n                isPlantUser: validationResponse.isPlantUser || false\n              };\n            }\n\n            // If no plant data in token but token is valid, user might not have plants assigned\n            console.log('Token is valid but no plant data found in token');\n          }\n        } catch (tokenError) {\n          console.warn('Failed to validate token for plant assignments:', tokenError);\n        }\n      }\n\n      // Fallback: try to get from stored user data (check multiple storage keys)\n      const possibleKeys = ['userData', 'qrmfg_user_data', 'user_info'];\n      for (const key of possibleKeys) {\n        const storedUserData = localStorage.getItem(key) || sessionStorage.getItem(key);\n        if (storedUserData) {\n          try {\n            const userData = JSON.parse(storedUserData);\n            if (userData.plantCodes || userData.assignedPlants) {\n              console.log('Plant assignments from stored data:', userData);\n              return {\n                assignedPlants: userData.plantCodes || userData.assignedPlants || [],\n                primaryPlant: userData.primaryPlant || null,\n                effectivePlant: userData.primaryPlant || ((userData.plantCodes || userData.assignedPlants) && (userData.plantCodes || userData.assignedPlants)[0]) || null,\n                isPlantUser: userData.isPlantUser || false\n              };\n            }\n          } catch (parseError) {\n            console.warn(`Failed to parse stored user data from ${key}:`, parseError);\n          }\n        }\n      }\n\n      // Last resort: Try admin endpoints only if user might have admin access\n      try {\n        // Only try admin endpoints if we think the user might be an admin\n        const adminToken = getToken();\n        const validationResponse = await apiClient.post('/auth/validate', { token: adminToken }, options);\n        if (validationResponse.valid && validationResponse.isAdmin) {\n          console.log('User appears to be admin, trying admin endpoints...');\n\n          const userDetails = await apiClient.get('/admin/users', options);\n          const currentUser = userDetails.users?.find(user => user.username === username);\n\n          if (currentUser && currentUser.assignedPlants) {\n            console.log('Admin endpoint: Using user details for plant assignments:', currentUser);\n\n            return {\n              assignedPlants: currentUser.assignedPlants || [],\n              primaryPlant: currentUser.primaryPlant || null,\n              effectivePlant: currentUser.primaryPlant || (currentUser.assignedPlants && currentUser.assignedPlants[0]) || null,\n              isPlantUser: (currentUser.assignedPlants && currentUser.assignedPlants.length > 0) || false\n            };\n          }\n        }\n      } catch (adminError) {\n        console.warn('Admin endpoints not accessible (expected for non-admin users):', adminError.message);\n      }\n\n      // If no plant data available, return empty structure\n      console.warn('No plant assignment data available for user:', username);\n      return {\n        assignedPlants: [],\n        primaryPlant: null,\n        effectivePlant: null,\n        isPlantUser: false\n      };\n    } catch (error) {\n      console.error('Error getting user plant assignments:', error);\n      // Return empty structure on error to prevent crashes\n      return {\n        assignedPlants: [],\n        primaryPlant: null,\n        effectivePlant: null,\n        isPlantUser: false\n      };\n    }\n  },\n\n  /**\n   * Update user's plant assignments\n   * @param {string} username - Username to update plant assignments for\n   * @param {Object} plantData - Plant assignment data\n   * @returns {Promise<Object>} Updated plant assignments\n   */\n  updateUserPlantAssignments: (username, plantData) =>\n    apiClient.put(`/admin/users/${encodeURIComponent(username)}/plants`, plantData),\n\n  /**\n   * Check if user is assigned to a specific plant\n   * @param {string} username - Username to check\n   * @param {string} plantCode - Plant code to check assignment for\n   * @returns {Promise<boolean>} True if user is assigned to plant\n   */\n  checkUserPlantAssignment: (username, plantCode) =>\n    apiClient.get(\n      `/admin/users/${encodeURIComponent(username)}/plants/${encodeURIComponent(plantCode)}/check`\n    ),\n\n  /**\n   * Get user information by ID\n   * @param {string} id - User ID\n   * @returns {Promise<Object>} User information\n   */\n  getUserById: id => apiClient.get(`/admin/users/${id}`),\n\n  /**\n   * Get all users (cached for 5 minutes)\n   * @param {Object} options - Additional options including signal for AbortController\n   * @returns {Promise<Array>} Array of all users\n   */\n  getAllUsers: (options = {}) => apiClient.get('/admin/users', {\n    cacheTTL: 5 * 60 * 1000, // Cache for 5 minutes\n    ...options\n  }),\n\n  /**\n   * Get all users without cache (for real-time data)\n   * @param {Object} options - Additional options including signal for AbortController\n   * @returns {Promise<Array>} Array of all users\n   */\n  getAllUsersRealTime: (options = {}) => apiClient.get('/admin/users', {\n    useCache: false,\n    ...options\n  })\n};\n","import apiClient from '../api/client';\n\nexport const masterDataAPI = {\n  // Location Master (Plants) endpoints\n  getAllLocations: async () => {\n    try {\n      return await apiClient.get('/master-data/locations');\n    } catch (error) {\n      console.warn('Main locations endpoint failed, trying fallback:', error);\n      try {\n        return await apiClient.get('/master-data/locations/fallback');\n      } catch (fallbackError) {\n        console.warn('Fallback endpoint failed, trying simple endpoint:', fallbackError);\n        try {\n          return await apiClient.get('/simple-locations');\n        } catch (simpleError) {\n          console.error('All locations endpoints failed:', simpleError);\n          throw simpleError;\n        }\n      }\n    }\n  },\n\n  getLocationByCode: locationCode =>\n    apiClient.get(`/master-data/locations/${encodeURIComponent(locationCode)}`),\n\n  searchLocations: searchTerm =>\n    apiClient.get(`/master-data/locations/search?term=${encodeURIComponent(searchTerm)}`),\n\n  createLocation: locationData => apiClient.post('/master-data/locations', locationData),\n\n  updateLocation: (locationCode, locationData) =>\n    apiClient.put(`/master-data/locations/${encodeURIComponent(locationCode)}`, locationData),\n\n  deleteLocation: locationCode =>\n    apiClient.delete(`/master-data/locations/${encodeURIComponent(locationCode)}`),\n\n\n\n  // Project Item Master endpoints\n  getAllProjectItems: () => apiClient.get('/master-data/project-items'),\n\n  getItemsByProject: projectCode =>\n    apiClient.get(`/master-data/project-items/projects/${encodeURIComponent(projectCode)}`),\n\n  getProjectsByItem: itemCode =>\n    apiClient.get(`/master-data/project-items/items/${encodeURIComponent(itemCode)}`),\n\n  getAllProjectCodes: () => apiClient.get('/master-data/project-codes'),\n\n  getAllItemCodes: () => apiClient.get('/master-data/item-codes'),\n\n  getItemCodesByProject: projectCode =>\n    apiClient.get(`/master-data/project-codes/${encodeURIComponent(projectCode)}/items`),\n\n  // Test endpoints\n  testLocationMaster: () => apiClient.get('/master-data/locations/test'),\n\n  testSimpleLocation: () => apiClient.get('/simple-locations/test'),\n\n  diagnosticLocationMaster: () => apiClient.get('/master-data/locations/diagnostic'),\n\n  getSimpleLocationCount: () => apiClient.get('/simple-locations/count')\n};\n"],"names":["ensureArray","data","fallback","arguments","length","undefined","Array","isArray","console","warn","safeApiResponse","response","dataKey","keys","split","key","safeRolesData","roles","map","role","name","id","roleName","Math","random","toString","safePlantData","plantData","assignedPlants","primaryPlant","plants","primary","UserErrorBoundary","React","constructor","props","super","reportError","error","errorInfo","context","message","stack","timestamp","Date","toISOString","handleRetry","this","setState","hasError","onRetry","handleGoHome","window","location","href","state","getDerivedStateFromError","componentDidCatch","level","component","render","_jsx","Result","status","title","subTitle","extra","Button","type","onClick","children","style","padding","process","defaultProps","Text","Title","Typography","NotificationPreferencesPreview","_ref","selectedRoles","visible","previewData","setPreviewData","useState","loading","setLoading","getPrimaryRoleName","useCallback","primaryRoleId","find","r","startsWith","endsWith","substring","useEffect","async","primaryRole","apiClient","get","success","preferences","defaultPreferences","loadPreview","_jsxs","Card","BellOutlined","marginRight","size","marginTop","Alert","description","showIcon","icon","InfoCircleOutlined","marginBottom","textAlign","Spin","marginLeft","strong","Tag","color","Row","gutter","Object","entries","_ref2","enabled","Col","xs","sm","md","backgroundColor","border","borderRadius","display","justifyContent","alignItems","fontSize","replace","usePlantAssignment","availablePlants","setAvailablePlants","plantsLoading","setPlantsLoading","setError","fetchPlants","locations","masterDataAPI","getAllLocations","signal","aborted","plantOptions","label","locationCode","value","err","warning","getPlantDescription","plantCode","plant","p","validatePlantAssignments","errors","push","includes","filterPlants","input","option","_option$label","toLowerCase","getAvailablePlantsForAssignment","currentAssignments","filter","controller","AbortController","abort","primaryPlantOptions","useMemo","disabled","PlantAssignmentForm","_form$getFieldValue","_form$getFieldValue2","form","initialValues","isPlantUserSelected","plantRoleIds","some","roleId","handleRefreshPlants","validateAssignedPlants","_","Promise","resolve","reject","Error","validatePrimaryPlant","getFieldValue","handleAssignedPlantsChange","values","currentPrimaryPlant","setFieldValue","setFieldsValue","_Fragment","Divider","ReloadOutlined","Form","Item","rules","validator","hasFeedback","tooltip","Select","mode","placeholder","options","showSearch","filterOption","onChange","maxTagCount","allowClear","displayName","UserModal","editingUser","onSave","onCancel","useForm","setSelectedRoles","plantAssignmentData","setPlantAssignmentData","isEditMode","Boolean","modalTitle","validationRules","username","ValidationRules","email","password","required","min","roleOptions","handleSubmit","resetFields","handleCancel","handleOk","submit","loadPlantAssignmentData","userAPI","getUserPlantAssignments","userRoles","Modal","open","onOk","confirmLoading","destroyOnClose","width","maskClosable","SecureForm","labelCol","span","wrapperCol","onFinish","preserve","componentName","enableSecurityLogging","SecureFormItem","validationType","SecureInput","fieldName","Input","Password","UserTable","users","onEdit","onDelete","columns","dataIndex","sorter","a","b","localeCompare","join","record","plantAssignments","trim","EditOutlined","danger","DeleteOutlined","tableProps","safeUsers","dataSource","rowKey","pagination","pageSize","showSizeChanger","showQuickJumper","showTotal","total","range","scroll","x","Table","locale","emptyText","createSimpleApiClient","require","post","put","delete","USER_ACTIONS","initialState","modalVisible","userReducer","action","payload","Users","actions","useUserManagement","dispatch","useReducer","fetchUsers","usersArray","usersWithPlants","all","user","fetchRoles","rolesArray","deleteUser","userId","saveUser","userData","roleIds","roleError","updateUserPlantAssignments","userPayload","log","openEditModal","openAddModal","closeModal","initializeData","handleTestLocationAPI","result","testLocationMaster","handleTestSimpleAPI","testSimpleLocation","handleDiagnosticAPI","diagnosticLocationMaster","info","handleTestUserRoles","default","handleGoToLogin","handleFixAdminRoles","currentUser","getCurrentUser","getUserRoles","authenticated","isAuthenticated","Space","wrap","TextArea","onValidationChange","validateInput","useInputValidation","validationState","setValidationState","isValid","wasModified","handleChange","e","inputValue","target","validation","SecurityAuditLogger","logXSSAttempt","sanitizedValue","SecureTextArea","_ref3","securityEvents","setSecurityEvents","handleFinish","sanitizedValues","securityIssues","forEach","originalValue","InputSanitizer","sanitizeText","field","issue","events","getRecentEvents","slice","validateTrigger","_ref4","securityRules","baseRules","projectCode","materialCode","text","richText","effectivePlant","isPlantUser","token","getToken","validationResponse","plantCodes","valid","tokenError","possibleKeys","storedUserData","localStorage","getItem","sessionStorage","JSON","parse","parseError","adminToken","isAdmin","_userDetails$users","adminError","encodeURIComponent","checkUserPlantAssignment","getUserById","getAllUsers","cacheTTL","getAllUsersRealTime","useCache","fallbackError","simpleError","getLocationByCode","searchLocations","searchTerm","createLocation","locationData","updateLocation","deleteLocation","getAllProjectItems","getItemsByProject","getProjectsByItem","itemCode","getAllProjectCodes","getAllItemCodes","getItemCodesByProject","getSimpleLocationCount"],"sourceRoot":""}