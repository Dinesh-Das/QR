"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[173],{173:(e,s,l)=>{l.d(s,{A:()=>ce});var r=l(6833),t=l(6191),i=l(6237),n=l(3117),a=l(119),o=l(9470),d=l(617),c=l(8463),x=l(5444),h=l(6553),u=l(3927),j=l(9098),p=l(6569),y=l(6051),m=l(6399),A=l(7692),g=l(5206),f=l(2261),v=l(7419),w=l(1645),C=l(9073),S=l(6612),b=l(3217),T=l(2751),I=l(8354),k=l(5043),z=l(6649),R=l(2868),N=l(1780),D=l(4786),E=l(1334),Q=l(6091),L=l(4228),q=l(7326),P=l(1686),M=l(691),B=l(579);const{Panel:O}=q.A,{Text:F}=u.A,H=e=>{var s;let{materialCode:l,workflowId:r,compact:t=!1}=e;const[i,n]=(0,k.useState)(!1),[a,o]=(0,k.useState)(null),[d,c]=(0,k.useState)(null),[x,h]=(0,k.useState)(null),u=(0,k.useCallback)(async()=>{try{n(!0),h(null);const e=[];r&&e.push(z.default.get(`/workflows/${r}`).then(e=>c(e))),l&&e.push(Promise.resolve({id:l,name:`Material ${l}`,description:"Sample material description",category:"Chemical",supplier:"Sample Supplier",hazardClass:"Class 3",physicalState:"Liquid",flashPoint:"25\xb0C",autoIgnitionTemp:"300\xb0C",density:"0.85 g/cm\xb3",solubility:"Soluble in water",ph:"7.2",viscosity:"2.5 cP"}).then(e=>o(e))),await Promise.all(e)}catch(x){console.error("Failed to load material context:",x),h("Failed to load material information")}finally{n(!1)}},[r,l]);(0,k.useEffect)(()=>{(l||r)&&u()},[l,r,u]);const j=e=>({JVC_PENDING:"blue",PLANT_PENDING:"orange",CQS_PENDING:"red",TECH_PENDING:"purple",COMPLETED:"green"}[e]||"default"),p=e=>({"Class 1":"red","Class 2":"orange","Class 3":"yellow","Class 4":"blue","Class 5":"green","Class 6":"purple","Class 7":"magenta","Class 8":"cyan","Class 9":"lime"}[e]||"default");return i?(0,B.jsx)(C.A,{size:"small",children:(0,B.jsxs)("div",{style:{textAlign:"center",padding:"20px"},children:[(0,B.jsx)(P.A,{size:"small"}),(0,B.jsx)("div",{style:{marginTop:8},children:"Loading material context..."})]})}):x?(0,B.jsx)(f.A,{message:"Context Error",description:x,type:"warning",showIcon:!0,size:"small"}):t?(0,B.jsx)(C.A,{size:"small",title:"Material Context",style:{marginBottom:16},children:(0,B.jsxs)(y.A,{direction:"vertical",style:{width:"100%"},children:[a&&(0,B.jsxs)("div",{children:[(0,B.jsx)(F,{strong:!0,children:"Material:"})," ",a.name," (",a.id,")",(0,B.jsx)("br",{}),(0,B.jsx)(F,{strong:!0,children:"Category:"})," ",a.category,(0,B.jsx)("br",{}),(0,B.jsx)(F,{strong:!0,children:"Hazard Class:"})," ",(0,B.jsx)(m.A,{color:p(a.hazardClass),children:a.hazardClass})]}),d&&(0,B.jsxs)("div",{children:[(0,B.jsx)(F,{strong:!0,children:"Workflow State:"})," ",(0,B.jsx)(m.A,{color:j(d.state),children:null===(A=d.state)||void 0===A?void 0:A.replace("_"," ")}),(0,B.jsx)("br",{}),(0,B.jsx)(F,{strong:!0,children:"Plant:"})," ",d.assignedPlant]})]})}):(0,B.jsxs)(C.A,{title:(0,B.jsxs)(y.A,{children:[(0,B.jsx)(D.A,{}),(0,B.jsx)("span",{children:"Material Context"})]}),size:"small",style:{marginBottom:16},children:[(0,B.jsxs)(q.A,{size:"small",ghost:!0,children:[a&&(0,B.jsxs)(O,{header:(0,B.jsxs)(y.A,{children:[(0,B.jsx)(E.A,{}),(0,B.jsx)("span",{children:"Material Properties"})]}),children:[(0,B.jsxs)(M.A,{size:"small",column:2,bordered:!0,children:[(0,B.jsx)(M.A.Item,{label:"Material ID",children:a.id}),(0,B.jsx)(M.A.Item,{label:"Name",children:a.name}),(0,B.jsx)(M.A.Item,{label:"Category",children:(0,B.jsx)(m.A,{color:"blue",children:a.category})}),(0,B.jsx)(M.A.Item,{label:"Supplier",children:a.supplier}),(0,B.jsx)(M.A.Item,{label:"Hazard Class",children:(0,B.jsx)(m.A,{color:p(a.hazardClass),children:a.hazardClass})}),(0,B.jsx)(M.A.Item,{label:"Physical State",children:a.physicalState}),(0,B.jsx)(M.A.Item,{label:"Flash Point",children:(0,B.jsx)(F,{type:"danger",children:a.flashPoint})}),(0,B.jsx)(M.A.Item,{label:"Auto-Ignition Temp",children:(0,B.jsx)(F,{type:"danger",children:a.autoIgnitionTemp})}),(0,B.jsx)(M.A.Item,{label:"Density",children:a.density}),(0,B.jsx)(M.A.Item,{label:"Solubility",children:a.solubility}),(0,B.jsx)(M.A.Item,{label:"pH",children:a.ph}),(0,B.jsx)(M.A.Item,{label:"Viscosity",children:a.viscosity})]}),a.description&&(0,B.jsxs)("div",{style:{marginTop:12},children:[(0,B.jsx)(F,{strong:!0,children:"Description:"}),(0,B.jsx)("div",{style:{marginTop:4,padding:8,background:"#f5f5f5",borderRadius:4},children:a.description})]})]},"material"),d&&(0,B.jsx)(O,{header:(0,B.jsxs)(y.A,{children:[(0,B.jsx)(Q.A,{}),(0,B.jsx)("span",{children:"Workflow Information"})]}),children:(0,B.jsxs)(M.A,{size:"small",column:2,bordered:!0,children:[(0,B.jsx)(M.A.Item,{label:"Workflow ID",children:d.id}),(0,B.jsx)(M.A.Item,{label:"Current State",children:(0,B.jsx)(m.A,{color:j(d.state),children:null===(s=d.state)||void 0===s?void 0:s.replace("_"," ")})}),(0,B.jsx)(M.A.Item,{label:"Assigned Plant",children:d.assignedPlant}),(0,B.jsx)(M.A.Item,{label:"Initiated By",children:d.initiatedBy}),(0,B.jsx)(M.A.Item,{label:"Created",children:d.createdAt&&new Date(d.createdAt).toLocaleString()}),(0,B.jsx)(M.A.Item,{label:"Last Modified",children:d.lastModified&&new Date(d.lastModified).toLocaleString()})]})},"workflow"),(0,B.jsx)(O,{header:(0,B.jsxs)(y.A,{children:[(0,B.jsx)(L.A,{}),(0,B.jsx)("span",{children:"Safety Guidelines"})]}),children:(0,B.jsx)(f.A,{message:"Safety Reminders",description:(0,B.jsxs)("ul",{style:{marginBottom:0,paddingLeft:20},children:[(0,B.jsx)("li",{children:"Always verify material properties before providing guidance"}),(0,B.jsx)("li",{children:"Consider plant-specific safety protocols and equipment"}),(0,B.jsx)("li",{children:"Reference latest SDS (Safety Data Sheet) when available"}),(0,B.jsx)("li",{children:"Escalate to safety team for Class 1-2 hazardous materials"}),(0,B.jsx)("li",{children:"Ensure compliance with local and international regulations"})]}),type:"info",showIcon:!0})},"safety")]}),(0,B.jsx)("div",{style:{marginTop:12,textAlign:"right"},children:(0,B.jsx)(g.Ay,{size:"small",icon:(0,B.jsx)(D.A,{}),onClick:u,children:"Refresh Context"})})]});var A};var $=l(6523),U=l(6989),G=l(9330),_=l(2878),W=l(1966),V=l(1210),J=l(3722),K=l(9472),Y=l(4522),Z=l(6651),X=l(647),ee=l(3661);const{Text:se,Title:le}=u.A,re=e=>{let{queryId:s,allowDelete:l=!1,onDocumentDeleted:r,showBulkActions:t=!0,currentUser:i}=e;const[a,o]=(0,k.useState)([]),[d,c]=(0,k.useState)(!0),[x,h]=(0,k.useState)(new Set),[u,j]=(0,k.useState)(new Set);(0,k.useEffect)(()=>{s&&A()},[s,A]);const A=(0,k.useCallback)(async()=>{try{c(!0);const e=await ee.B.getQueryDocuments(s);o(e||[])}catch(e){console.error("Error fetching query documents:",e),p.Ay.error("Failed to load documents. Please try again."),o([])}finally{c(!1)}},[s]),v=e=>{if(!e||0===e)return"0 Bytes";const s=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,s)).toFixed(2))} ${["Bytes","KB","MB","GB"][s]}`},w=e=>{if(!e)return"Unknown";try{return new Date(e).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(s){return"Invalid Date"}},S=e=>{if(!e)return(0,B.jsx)($.A,{});const s={fontSize:"16px"};switch(e.toLowerCase().split(".").pop()){case"pdf":return(0,B.jsx)(Q.A,{style:{...s,color:"#ff4d4f"}});case"doc":case"docx":return(0,B.jsx)(Q.A,{style:{...s,color:"#1890ff"}});case"xls":case"xlsx":return(0,B.jsx)(Q.A,{style:{...s,color:"#52c41a"}});case"jpg":case"jpeg":case"png":return(0,B.jsx)($.A,{style:{...s,color:"#722ed1"}});default:return(0,B.jsx)($.A,{style:s})}},b=async e=>{try{h(s=>new Set([...s,e.id]));const l=await ee.B.downloadQueryDocument(s,e.id),r=window.URL.createObjectURL(l),t=e.createElement("a");t.href=r,t.download=e.originalFileName||e.fileName,e.body.appendChild(t),t.click(),window.URL.revokeObjectURL(r),e.body.removeChild(t),p.Ay.success(`Downloaded ${e.originalFileName||e.fileName}`)}catch(l){console.error("Error downloading document:",l),p.Ay.error("Failed to download document. Please try again.")}finally{h(s=>{const l=new Set(s);return l.delete(e.id),l})}},T=async e=>{try{j(s=>new Set([...s,e.id])),await ee.B.deleteQueryDocument(s,e.id),p.Ay.success(`Deleted ${e.originalFileName||e.fileName}`),o(s=>s.filter(s=>s.id!==e.id)),r&&r(e)}catch(l){console.error("Error deleting document:",l),p.Ay.error("Failed to delete document. Please try again.")}finally{j(s=>{const l=new Set(s);return l.delete(e.id),l})}},z=a.reduce((e,s)=>{const l=s.responseId?"response":"query";return e[l]||(e[l]=[]),e[l].push(s),e},{}),R=e=>!!l&&(!!i&&(e.uploadedBy===i||"ADMIN"===i.role));return d?(0,B.jsx)(C.A,{children:(0,B.jsxs)("div",{style:{textAlign:"center",padding:"20px"},children:[(0,B.jsx)(P.A,{size:"large"}),(0,B.jsx)("div",{style:{marginTop:"16px"},children:(0,B.jsx)(se,{type:"secondary",children:"Loading documents..."})})]})}):0===a.length?(0,B.jsx)(C.A,{children:(0,B.jsx)(K.A,{image:K.A.PRESENTED_IMAGE_SIMPLE,description:(0,B.jsxs)(y.A,{direction:"vertical",children:[(0,B.jsx)(se,{type:"secondary",children:"No documents attached to this query"}),(0,B.jsx)(se,{type:"secondary",style:{fontSize:"12px"},children:"Documents can be attached when creating queries or responding to them"})]})})}):(0,B.jsx)(C.A,{title:(0,B.jsxs)(y.A,{children:[(0,B.jsx)(U.A,{}),(0,B.jsxs)("span",{children:["Query Documents (",a.length,")"]})]}),extra:t&&a.length>0&&(0,B.jsx)(y.A,{children:(0,B.jsx)(g.Ay,{icon:(0,B.jsx)(G.A,{}),onClick:async()=>{if(0!==a.length){p.Ay.info(`Starting download of ${a.length} documents...`);for(const s of a)try{await b(s),await new Promise(e=>setTimeout(e,500))}catch(e){console.error(`Failed to download ${s.originalFileName}:`,e)}}else p.Ay.warning("No documents to download.")},size:"small",children:"Download All"})}),children:(0,B.jsxs)(y.A,{direction:"vertical",style:{width:"100%"},children:[(0,B.jsx)(f.A,{message:`${a.length} document(s) attached to this query`,description:(0,B.jsxs)(y.A,{children:[z.query&&(0,B.jsxs)(se,{type:"secondary",children:[z.query.length," from original query"]}),z.response&&(0,B.jsxs)(se,{type:"secondary",children:[z.response.length," from responses"]})]}),type:"info",showIcon:!0,size:"small"}),z.query&&z.query.length>0&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)(le,{level:5,children:[(0,B.jsx)(_.A,{style:{color:"#1890ff"}}),(0,B.jsxs)("span",{style:{marginLeft:"8px"},children:["Original Query Documents (",z.query.length,")"]})]}),(0,B.jsx)(Y.A,{size:"small",dataSource:z.query,renderItem:e=>(0,B.jsx)(Y.A.Item,{actions:[(0,B.jsx)(Z.A,{title:"Download document",children:(0,B.jsx)(g.Ay,{type:"text",icon:(0,B.jsx)(G.A,{}),onClick:()=>b(e),loading:x.has(e.id),size:"small"})},"download"),...R(e)?[(0,B.jsx)(X.A,{title:"Delete Document",description:"Are you sure you want to delete this document?",onConfirm:()=>T(e),okText:"Yes",cancelText:"No",icon:(0,B.jsx)(_.A,{style:{color:"red"}}),children:(0,B.jsx)(Z.A,{title:"Delete document",children:(0,B.jsx)(g.Ay,{type:"text",danger:!0,icon:(0,B.jsx)(W.A,{}),loading:u.has(e.id),size:"small"})})},"delete")]:[]],children:(0,B.jsx)(Y.A.Item.Meta,{avatar:S(e.originalFileName),title:(0,B.jsxs)(y.A,{children:[(0,B.jsx)(se,{strong:!0,children:e.originalFileName||e.fileName}),(0,B.jsx)(m.A,{color:"blue",size:"small",children:"Query"})]}),description:(0,B.jsx)(y.A,{direction:"vertical",size:"small",children:(0,B.jsxs)(y.A,{size:"large",children:[(0,B.jsxs)(se,{type:"secondary",children:[(0,B.jsx)($.A,{style:{marginRight:"4px"}}),v(e.fileSize)]}),(0,B.jsxs)(se,{type:"secondary",children:[(0,B.jsx)(V.A,{style:{marginRight:"4px"}}),w(e.uploadedAt)]}),(0,B.jsxs)(se,{type:"secondary",children:[(0,B.jsx)(J.A,{style:{marginRight:"4px"}}),e.uploadedBy||"Unknown"]})]})})})})})]}),z.response&&z.response.length>0&&(0,B.jsxs)(B.Fragment,{children:[z.query&&(0,B.jsx)(I.A,{}),(0,B.jsxs)(le,{level:5,children:[(0,B.jsx)(n.A,{style:{color:"#52c41a"}}),(0,B.jsxs)("span",{style:{marginLeft:"8px"},children:["Response Documents (",z.response.length,")"]})]}),(0,B.jsx)(Y.A,{size:"small",dataSource:z.response,renderItem:e=>(0,B.jsx)(Y.A.Item,{actions:[(0,B.jsx)(Z.A,{title:"Download document",children:(0,B.jsx)(g.Ay,{type:"text",icon:(0,B.jsx)(G.A,{}),onClick:()=>b(e),loading:x.has(e.id),size:"small"})},"download"),...R(e)?[(0,B.jsx)(X.A,{title:"Delete Document",description:"Are you sure you want to delete this document?",onConfirm:()=>T(e),okText:"Yes",cancelText:"No",icon:(0,B.jsx)(_.A,{style:{color:"red"}}),children:(0,B.jsx)(Z.A,{title:"Delete document",children:(0,B.jsx)(g.Ay,{type:"text",danger:!0,icon:(0,B.jsx)(W.A,{}),loading:u.has(e.id),size:"small"})})},"delete")]:[]],children:(0,B.jsx)(Y.A.Item.Meta,{avatar:S(e.originalFileName),title:(0,B.jsxs)(y.A,{children:[(0,B.jsx)(se,{strong:!0,children:e.originalFileName||e.fileName}),(0,B.jsx)(m.A,{color:"green",size:"small",children:"Response"}),e.responseId&&(0,B.jsxs)(m.A,{color:"orange",size:"small",children:["#",e.responseId]})]}),description:(0,B.jsx)(y.A,{direction:"vertical",size:"small",children:(0,B.jsxs)(y.A,{size:"large",children:[(0,B.jsxs)(se,{type:"secondary",children:[(0,B.jsx)($.A,{style:{marginRight:"4px"}}),v(e.fileSize)]}),(0,B.jsxs)(se,{type:"secondary",children:[(0,B.jsx)(V.A,{style:{marginRight:"4px"}}),w(e.uploadedAt)]}),(0,B.jsxs)(se,{type:"secondary",children:[(0,B.jsx)(J.A,{style:{marginRight:"4px"}}),e.uploadedBy||"Unknown"]})]})})})})})]})]})})};var te=l(7933),ie=l(8365);const{TextArea:ne}=x.A,{Option:ae}=h.A,{Text:oe,Title:de}=u.A,ce=e=>{let{team:s}=e;const[l,u]=(0,k.useState)(!1),[D,E]=(0,k.useState)([]),[Q,L]=(0,k.useState)([]),[q,P]=(0,k.useState)(null),[M,O]=(0,k.useState)(!1),[F,$]=(0,k.useState)(!1),[U]=j.A.useForm(),[G,_]=(0,k.useState)([]),[W,V]=(0,k.useState)(null),[J,K]=(0,k.useState)([]),[Y,Z]=(0,k.useState)({status:"all",priority:"all",material:"",daysOpen:"all",project:"",plant:"",assignedTeam:"all",hasAttachments:"all"}),[X,ee]=(0,k.useState)({total:0,open:0,resolved:0,resolvedToday:0,overdue:0,avgResolutionTime:0}),se=(0,k.useCallback)(async e=>{try{u(!0);const l=await z.default.get(`/queries/inbox/${s}`,{signal:e});null!==e&&void 0!==e&&e.aborted||E(l)}catch(l){null!==e&&void 0!==e&&e.aborted||(console.error("Failed to load queries:",l),p.Ay.error("Failed to load queries"))}finally{u(!1)}},[s]),le=(0,k.useCallback)(async e=>{try{const[l,r,t,i,n]=await Promise.all([z.default.get(`/queries/stats/count-open/${s}`,{signal:e}).catch(()=>0),z.default.get(`/queries/stats/count-resolved/${s}`,{signal:e}).catch(()=>0),z.default.get(`/queries/stats/resolved-today/${s}`,{signal:e}).catch(()=>0),z.default.get(`/queries/stats/overdue-count/${s}`,{signal:e}).catch(()=>0),z.default.get(`/queries/stats/avg-resolution-time/${s}`,{signal:e}).catch(()=>0)]);null!==e&&void 0!==e&&e.aborted||ee({total:l+r,open:l,resolved:r,resolvedToday:t,overdue:i,avgResolutionTime:n})}catch(l){null!==e&&void 0!==e&&e.aborted||console.error("Failed to load stats:",l)}},[s]),ce=(0,k.useCallback)(()=>{let e=[...D];if("all"!==Y.status&&(e=e.filter(e=>e.status===Y.status)),"all"!==Y.priority&&(e=e.filter(e=>e.priorityLevel===Y.priority)),Y.material&&(e=e.filter(e=>{var s,l;return(null===(s=e.materialCode)||void 0===s?void 0:s.toLowerCase().includes(Y.material.toLowerCase()))||(null===(l=e.materialName)||void 0===l?void 0:l.toLowerCase().includes(Y.material.toLowerCase()))})),Y.project&&(e=e.filter(e=>{var s;return null===(s=e.projectCode)||void 0===s?void 0:s.toLowerCase().includes(Y.project.toLowerCase())})),Y.plant&&(e=e.filter(e=>{var s;return null===(s=e.plantCode)||void 0===s?void 0:s.toLowerCase().includes(Y.plant.toLowerCase())})),"all"!==Y.assignedTeam&&(e=e.filter(e=>e.assignedTeam===Y.assignedTeam)),"all"!==Y.daysOpen){const s=parseInt(Y.daysOpen);e=e.filter(e=>e.daysOpen>=s)}"all"!==Y.hasAttachments&&("with"===Y.hasAttachments?e=e.filter(e=>(e.documentCount||0)>0):"without"===Y.hasAttachments&&(e=e.filter(e=>0===(e.documentCount||0)))),L(e)},[D,Y]);(0,k.useEffect)(()=>{const e=new AbortController;return(async()=>{try{await Promise.all([se(e.signal),le(e.signal)])}catch(s){e.signal.aborted||console.error("Error loading query inbox data:",s)}})(),()=>{e.abort()}},[s,se,le]),(0,k.useEffect)(()=>{ce()},[D,Y,ce]);const xe=(0,k.useCallback)(async e=>{try{const s=await z.default.get(`/queries/${e}/documents`);K(s)}catch(s){console.error("Failed to load query documents:",s),K([])}},[]),he=e=>e===R.cS.OPEN?"red":"green",ue=e=>({LOW:"blue",MEDIUM:"orange",HIGH:"red",URGENT:"purple"}[e]||"default"),je=e=>e>=3?"#ff4d4f":e>=2?"#faad14":"#52c41a",pe=[{title:"Material Context",dataIndex:"materialCode",key:"materialContext",width:180,render:(e,s)=>(0,B.jsxs)("div",{children:[(0,B.jsx)(oe,{strong:!0,children:e}),s.materialName&&(0,B.jsx)("div",{style:{fontSize:"12px",color:"#666"},children:s.materialName}),s.projectCode&&(0,B.jsxs)("div",{style:{fontSize:"11px",color:"#999"},children:["Project: ",s.projectCode]}),s.plantCode&&(0,B.jsxs)("div",{style:{fontSize:"11px",color:"#999"},children:["Plant: ",s.plantCode]})]})},{title:"Query",dataIndex:"question",key:"question",width:300,ellipsis:!0,render:e=>(0,B.jsx)("div",{children:(0,B.jsx)(oe,{style:{color:"#1890ff"},children:e||"No query text available"})})},{title:"Attachments",key:"attachments",width:100,render:(e,s)=>{const l=s.documentCount||0;return l>0?(0,B.jsxs)(y.A,{children:[(0,B.jsx)(r.A,{style:{color:"#1890ff"}}),(0,B.jsx)(oe,{type:"secondary",children:l})]}):(0,B.jsx)(oe,{type:"secondary",children:"-"})}},{title:"Field",dataIndex:"fieldName",key:"fieldName",width:120,render:e=>e?(0,B.jsx)(m.A,{color:"blue",children:e}):(0,B.jsx)(oe,{type:"secondary",children:"-"})},{title:"Priority",dataIndex:"priorityLevel",key:"priorityLevel",width:80,render:e=>(0,B.jsx)(m.A,{color:ue(e),children:e||R.fz.MEDIUM})},{title:"Status",dataIndex:"status",key:"status",width:80,render:e=>(0,B.jsx)(m.A,{color:he(e),children:e})},{title:"Days Open",dataIndex:"daysOpen",key:"daysOpen",width:100,render:(e,s)=>{const{progress:l,status:r}=(e=>{const s=Math.min(e/3*100,100);let l="normal";return s>=100?l="exception":s>=80&&(l="active"),{progress:s,status:l}})(e);return(0,B.jsxs)("div",{children:[(0,B.jsxs)(oe,{style:{color:je(e)},children:[e," days"]}),(0,B.jsx)(A.A,{percent:l,status:r,size:"small",showInfo:!1,style:{marginTop:4}})]})}},{title:"Raised By",dataIndex:"raisedBy",key:"raisedBy",width:100},{title:"Actions",key:"actions",width:120,render:(e,s)=>(0,B.jsxs)(y.A,{children:[(0,B.jsx)(g.Ay,{size:"small",icon:(0,B.jsx)(t.A,{}),onClick:()=>{P(s),$(!0),xe(s.id)},children:"View"}),s.status===R.cS.OPEN&&(0,B.jsx)(g.Ay,{size:"small",type:"primary",icon:(0,B.jsx)(i.A,{}),onClick:()=>{P(s),O(!0),xe(s.id)},children:"Resolve"})]})}];return(0,B.jsx)(N.qw,{componentName:"QueryInbox",children:(0,B.jsxs)("div",{children:[(0,B.jsx)(f.A,{message:`${s} Team Statistics`,description:"All statistics below are specific to your team and update in real-time.",type:"info",showIcon:!0,style:{marginBottom:16}}),(0,B.jsx)(N.pE,{operation:"query statistics loading",onRetry:le,maxRetries:3,children:(0,B.jsxs)(v.A,{gutter:16,style:{marginBottom:16},children:[(0,B.jsx)(w.A,{span:5,children:(0,B.jsx)(C.A,{children:(0,B.jsx)(S.A,{title:"Total Queries",value:X.total,prefix:(0,B.jsx)(n.A,{})})})}),(0,B.jsx)(w.A,{span:5,children:(0,B.jsx)(C.A,{children:(0,B.jsx)(S.A,{title:"Open Queries",value:X.open,valueStyle:{color:"#cf1322"},prefix:(0,B.jsx)(a.A,{})})})}),(0,B.jsx)(w.A,{span:5,children:(0,B.jsx)(C.A,{children:(0,B.jsx)(S.A,{title:"Resolved Today",value:X.resolvedToday,valueStyle:{color:"#3f8600"},prefix:(0,B.jsx)(i.A,{})})})}),(0,B.jsx)(w.A,{span:5,children:(0,B.jsx)(C.A,{children:(0,B.jsx)(S.A,{title:"Overdue",value:X.overdue,valueStyle:{color:X.overdue>0?"#cf1322":"#3f8600"},prefix:(0,B.jsx)(o.A,{})})})}),(0,B.jsx)(w.A,{span:4,children:(0,B.jsx)(C.A,{children:(0,B.jsx)(S.A,{title:"Avg Resolution Time",value:X.avgResolutionTime,suffix:"hrs",precision:1,prefix:(0,B.jsx)(i.A,{})})})})]})}),(0,B.jsx)(C.A,{size:"small",style:{marginBottom:16},children:(0,B.jsxs)(v.A,{gutter:[16,8],align:"middle",children:[(0,B.jsx)(w.A,{span:4,children:(0,B.jsxs)(h.A,{placeholder:"Status",value:Y.status,onChange:e=>Z({...Y,status:e}),style:{width:"100%"},children:[(0,B.jsx)(ae,{value:"all",children:"All Status"}),(0,B.jsx)(ae,{value:"OPEN",children:"Open"}),(0,B.jsx)(ae,{value:"RESOLVED",children:"Resolved"})]})}),(0,B.jsx)(w.A,{span:4,children:(0,B.jsxs)(h.A,{placeholder:"Priority",value:Y.priority,onChange:e=>Z({...Y,priority:e}),style:{width:"100%"},children:[(0,B.jsx)(ae,{value:"all",children:"All Priority"}),(0,B.jsx)(ae,{value:"LOW",children:"Low"}),(0,B.jsx)(ae,{value:"MEDIUM",children:"Medium"}),(0,B.jsx)(ae,{value:"HIGH",children:"High"}),(0,B.jsx)(ae,{value:"URGENT",children:"Urgent"})]})}),(0,B.jsx)(w.A,{span:4,children:(0,B.jsx)(x.A,{placeholder:"Material ID/Name",value:Y.material,onChange:e=>Z({...Y,material:e.target.value})})}),(0,B.jsx)(w.A,{span:4,children:(0,B.jsx)(x.A,{placeholder:"Project Code",value:Y.project,onChange:e=>Z({...Y,project:e.target.value})})}),(0,B.jsx)(w.A,{span:4,children:(0,B.jsx)(x.A,{placeholder:"Plant",value:Y.plant,onChange:e=>Z({...Y,plant:e.target.value})})}),(0,B.jsx)(w.A,{span:4,children:(0,B.jsxs)(h.A,{placeholder:"Team",value:Y.assignedTeam,onChange:e=>Z({...Y,assignedTeam:e}),style:{width:"100%"},children:[(0,B.jsx)(ae,{value:"all",children:"All Teams"}),(0,B.jsx)(ae,{value:"CQS",children:"CQS"}),(0,B.jsx)(ae,{value:"TECH",children:"Tech"}),(0,B.jsx)(ae,{value:"JVC",children:"JVC"})]})}),(0,B.jsx)(w.A,{span:4,children:(0,B.jsxs)(h.A,{placeholder:"Attachments",value:Y.hasAttachments,onChange:e=>Z({...Y,hasAttachments:e}),style:{width:"100%"},children:[(0,B.jsx)(ae,{value:"all",children:"All Queries"}),(0,B.jsx)(ae,{value:"with",children:"With Attachments"}),(0,B.jsx)(ae,{value:"without",children:"Without Attachments"})]})}),(0,B.jsx)(w.A,{span:4,children:(0,B.jsxs)(h.A,{placeholder:"Days Open",value:Y.daysOpen,onChange:e=>Z({...Y,daysOpen:e}),style:{width:"100%"},children:[(0,B.jsx)(ae,{value:"all",children:"All"}),(0,B.jsx)(ae,{value:"1",children:"1+ days"}),(0,B.jsx)(ae,{value:"2",children:"2+ days"}),(0,B.jsx)(ae,{value:"3",children:"3+ days (Overdue)"})]})}),(0,B.jsx)(w.A,{span:8,children:(0,B.jsxs)(y.A,{children:[(0,B.jsx)(g.Ay,{icon:(0,B.jsx)(d.A,{}),onClick:()=>{se(),le()},children:"Refresh"}),(0,B.jsx)(g.Ay,{icon:(0,B.jsx)(c.A,{}),onClick:()=>Z({status:"all",priority:"all",material:"",daysOpen:"all",project:"",plant:"",assignedTeam:"all",hasAttachments:"all"}),children:"Clear Filters"})]})})]})}),(0,B.jsx)(N.pE,{operation:"query data loading",onRetry:se,maxRetries:3,children:(0,B.jsxs)(C.A,{title:(0,B.jsxs)("div",{children:[(0,B.jsxs)(de,{level:4,style:{margin:0},children:[s," Team Query Inbox"]}),(0,B.jsxs)(oe,{type:"secondary",children:[Q.length," of ",D.length," queries"]})]}),children:[X.overdue>0&&(0,B.jsx)(f.A,{message:`${X.overdue} queries are overdue (>3 days)`,type:"warning",showIcon:!0,style:{marginBottom:16}}),(0,B.jsx)(b.A,{dataSource:Q,columns:pe,loading:l,pagination:{pageSize:R.Bq.DEFAULT_PAGE_SIZE,showSizeChanger:!0,showQuickJumper:!0,showTotal:(e,s)=>`${s[0]}-${s[1]} of ${e} queries`},rowKey:"id",size:"small",rowClassName:e=>e.daysOpen>=3?"overdue-row":""})]})}),(0,B.jsx)(T.A,{title:`Query #${null===q||void 0===q?void 0:q.id} Details`,open:F,onCancel:()=>{$(!1),P(null),K([])},footer:[(0,B.jsx)(g.Ay,{onClick:()=>$(!1),children:"Close"},"close"),(null===q||void 0===q?void 0:q.status)===R.cS.OPEN&&(0,B.jsx)(g.Ay,{type:"primary",onClick:()=>{$(!1),O(!0),xe(q.id)},children:"Resolve Query"},"resolve")],width:1200,children:q&&(0,B.jsxs)(v.A,{gutter:16,children:[(0,B.jsx)(w.A,{span:14,children:(0,B.jsxs)("div",{children:[(0,B.jsxs)(v.A,{gutter:16,children:[(0,B.jsxs)(w.A,{span:12,children:[(0,B.jsx)(oe,{strong:!0,children:"Material Code:"})," ",q.materialCode,q.materialName&&(0,B.jsx)("div",{style:{fontSize:"12px",color:"#666"},children:q.materialName})]}),(0,B.jsxs)(w.A,{span:12,children:[(0,B.jsx)(oe,{strong:!0,children:"Status:"})," ",(0,B.jsx)(m.A,{color:he(q.status),children:q.status})]})]}),(0,B.jsx)(I.A,{}),(0,B.jsxs)(v.A,{gutter:16,children:[(0,B.jsxs)(w.A,{span:8,children:[(0,B.jsx)(oe,{strong:!0,children:"Priority:"})," ",(0,B.jsx)(m.A,{color:ue(q.priorityLevel),children:q.priorityLevel||R.fz.MEDIUM})]}),(0,B.jsxs)(w.A,{span:8,children:[(0,B.jsx)(oe,{strong:!0,children:"Team:"})," ",(0,B.jsx)(m.A,{color:q.assignedTeam===R.r0.CQS?"blue":q.assignedTeam===R.r0.TECH?"purple":"orange",children:q.assignedTeam})]}),(0,B.jsxs)(w.A,{span:8,children:[(0,B.jsx)(oe,{strong:!0,children:"Days Open:"})," ",(0,B.jsxs)(oe,{style:{color:je(q.daysOpen)},children:[q.daysOpen," days"]})]})]}),(0,B.jsx)(I.A,{}),(q.projectCode||q.plantCode)&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)(v.A,{gutter:16,children:[q.projectCode&&(0,B.jsxs)(w.A,{span:8,children:[(0,B.jsx)(oe,{strong:!0,children:"Project:"})," ",q.projectCode]}),q.plantCode&&(0,B.jsxs)(w.A,{span:8,children:[(0,B.jsx)(oe,{strong:!0,children:"Plant:"})," ",q.plantCode]})]}),(0,B.jsx)(I.A,{})]}),q.fieldName&&(0,B.jsx)(B.Fragment,{children:(0,B.jsxs)("div",{style:{marginBottom:16},children:[(0,B.jsx)(oe,{strong:!0,style:{fontSize:"16px",color:"#1890ff"},children:"Field Context"}),(0,B.jsxs)("div",{style:{marginTop:8,padding:12,background:"#e6f7ff",borderRadius:6,border:"1px solid #91d5ff"},children:[(0,B.jsx)("div",{style:{fontSize:"14px",fontWeight:"bold"},children:q.fieldName}),q.stepNumber&&(0,B.jsxs)("div",{style:{fontSize:"12px",color:"#666",marginTop:4},children:["Step ",q.stepNumber,q.stepTitle&&`: ${q.stepTitle}`]})]})]})}),q.originalQuestion&&(0,B.jsxs)("div",{style:{marginBottom:16},children:[(0,B.jsx)(oe,{strong:!0,style:{fontSize:"16px",color:"#52c41a"},children:"Original Questionnaire Question"}),(0,B.jsx)("div",{style:{marginTop:8,padding:12,background:"#f6ffed",borderRadius:6,border:"1px solid #b7eb8f",fontStyle:"italic"},children:q.originalQuestion})]}),q.queryCategory&&(0,B.jsxs)("div",{style:{marginBottom:16},children:[(0,B.jsx)(oe,{strong:!0,style:{fontSize:"16px",color:"#722ed1"},children:"Query Category"}),(0,B.jsx)("div",{style:{marginTop:8,padding:8,background:"#f9f0ff",borderRadius:6,border:"1px solid #d3adf7"},children:(0,B.jsx)(m.A,{color:"purple",children:q.queryCategory})})]}),(0,B.jsxs)("div",{style:{marginBottom:16},children:[(0,B.jsx)(oe,{strong:!0,style:{fontSize:"16px",color:"#fa8c16"},children:"Query Text (What was asked)"}),(0,B.jsx)("div",{style:{marginTop:8,padding:12,background:"#fff7e6",borderRadius:6,border:"1px solid #ffd591",whiteSpace:"pre-wrap",minHeight:"60px"},children:q.question||"No query text available"})]}),q.response&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(I.A,{}),(0,B.jsx)(oe,{strong:!0,children:"Response:"}),(0,B.jsx)("div",{style:{marginTop:8,padding:12,background:"#f0f9ff",borderRadius:4,whiteSpace:"pre-wrap"},children:q.response}),(0,B.jsxs)("div",{style:{marginTop:8,fontSize:"12px",color:"#666"},children:["Resolved by: ",q.resolvedBy," on"," ",q.resolvedAt&&new Date(q.resolvedAt).toLocaleString()]})]}),J.length>0&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(I.A,{}),(0,B.jsx)(oe,{strong:!0,children:(0,B.jsxs)(y.A,{children:[(0,B.jsx)(r.A,{}),"Attached Documents (",J.length,")"]})}),(0,B.jsx)("div",{style:{marginTop:8},children:(0,B.jsx)(re,{documents:J,showActions:!0,compact:!1})})]}),(0,B.jsx)(I.A,{}),(0,B.jsxs)("div",{style:{fontSize:"12px",color:"#666"},children:[(0,B.jsxs)("div",{children:["Raised by: ",q.raisedBy]}),(0,B.jsxs)("div",{children:["Created:"," ",q.createdAt&&new Date(q.createdAt).toLocaleString()]})]})]})}),(0,B.jsxs)(w.A,{span:10,children:[(0,B.jsx)(N.qw,{componentName:"MaterialContextDisplay",children:(0,B.jsx)(H,{materialCode:q.materialCode,workflowId:q.workflowId,compact:!0})}),(0,B.jsx)(N.qw,{componentName:"QueryHistoryTracker",children:(0,B.jsx)(ie.A,{materialCode:q.materialCode,workflowId:q.workflowId,compact:!0})})]})]})}),(0,B.jsx)(T.A,{title:`Resolve Query #${null===q||void 0===q?void 0:q.id}`,open:M,onCancel:()=>{O(!1),U.resetFields(),P(null),_([]),V(null),K([])},onOk:()=>U.submit(),width:1400,okText:"Resolve Query",okButtonProps:{type:"primary",size:"large"},cancelButtonProps:{size:"large"},children:q&&(0,B.jsxs)(v.A,{gutter:16,children:[(0,B.jsxs)(w.A,{span:16,children:[(0,B.jsxs)("div",{style:{marginBottom:16,padding:16,background:"#f5f5f5",borderRadius:6,border:"1px solid #d9d9d9"},children:[(0,B.jsxs)(v.A,{gutter:16,style:{marginBottom:12},children:[(0,B.jsxs)(w.A,{span:12,children:[(0,B.jsx)(oe,{strong:!0,children:"Material:"})," ",q.materialCode,q.materialName&&(0,B.jsx)("div",{style:{fontSize:"12px",color:"#666"},children:q.materialName})]}),(0,B.jsx)(w.A,{span:12,children:(0,B.jsxs)(y.A,{children:[(0,B.jsx)(oe,{strong:!0,children:"Team:"}),(0,B.jsx)(m.A,{color:q.assignedTeam===R.r0.CQS?"blue":q.assignedTeam===R.r0.TECH?"purple":"orange",children:q.assignedTeam}),(0,B.jsx)(oe,{strong:!0,children:"Priority:"}),(0,B.jsx)(m.A,{color:ue(q.priorityLevel),children:q.priorityLevel||"MEDIUM"})]})})]}),(q.projectCode||q.plantCode)&&(0,B.jsxs)(v.A,{gutter:16,style:{marginBottom:12},children:[q.projectCode&&(0,B.jsxs)(w.A,{span:8,children:[(0,B.jsx)(oe,{strong:!0,children:"Project:"})," ",q.projectCode]}),q.plantCode&&(0,B.jsxs)(w.A,{span:8,children:[(0,B.jsx)(oe,{strong:!0,children:"Plant:"})," ",q.plantCode]})]}),(0,B.jsx)(oe,{strong:!0,children:"Question:"}),(0,B.jsx)("div",{style:{marginTop:8,whiteSpace:"pre-wrap",fontSize:"14px"},children:q.question}),q.fieldName&&(0,B.jsxs)("div",{style:{marginTop:8},children:[(0,B.jsx)(oe,{strong:!0,children:"Field Context:"})," ",q.fieldName,q.stepNumber&&` (Step ${q.stepNumber})`]}),(0,B.jsx)("div",{style:{marginTop:8,fontSize:"12px",color:"#666"},children:(0,B.jsxs)(y.A,{children:[(0,B.jsxs)("span",{children:["Raised by: ",q.raisedBy]}),(0,B.jsx)("span",{children:"\u2022"}),(0,B.jsx)("span",{children:q.createdAt&&new Date(q.createdAt).toLocaleString()}),(0,B.jsx)("span",{children:"\u2022"}),(0,B.jsxs)("span",{style:{color:je(q.daysOpen)},children:[q.daysOpen," days open"]})]})})]}),(0,B.jsxs)(j.A,{form:U,layout:"vertical",onFinish:async e=>{try{const s={response:e.response,priorityLevel:e.priorityLevel},l=await z.default.put(`/queries/${q.id}/resolve`,s);l.responseId&&V(l.responseId);const r=G.length>0?` with ${G.length} document(s) attached`:"";p.Ay.success(`Query resolved successfully${r}`),O(!1),U.resetFields(),P(null),_([]),V(null),K([]),se(),le()}catch(s){console.error("Failed to resolve query:",s),p.Ay.error("Failed to resolve query")}},children:[(0,B.jsx)(j.A.Item,{name:"response",label:(0,B.jsxs)(y.A,{children:[(0,B.jsx)("span",{children:"Resolution Response"}),(0,B.jsx)(oe,{type:"secondary",children:"(Required)"})]}),rules:[{required:!0,message:"Please provide a resolution response"}],children:(0,B.jsx)(ne,{rows:8,placeholder:"Provide detailed resolution or answer to the query. Include any relevant technical details, safety considerations, or references to documentation...",showCount:!0,maxLength:2e3,style:{direction:"ltr",textAlign:"left",fontFamily:"inherit"}})}),J.length>0&&(0,B.jsx)(j.A.Item,{label:(0,B.jsxs)(y.A,{children:[(0,B.jsx)(r.A,{}),(0,B.jsx)("span",{children:"Query Documents"}),(0,B.jsx)(oe,{type:"secondary",children:"(For context while responding)"})]}),children:(0,B.jsx)(re,{documents:J,showActions:!1,compact:!0})}),(0,B.jsx)(j.A.Item,{label:(0,B.jsxs)(y.A,{children:[(0,B.jsx)(r.A,{}),(0,B.jsx)("span",{children:"Attach Documents to Response"}),(0,B.jsx)(oe,{type:"secondary",children:"(Optional)"})]}),children:(0,B.jsx)(te.A,{queryId:null===q||void 0===q?void 0:q.id,responseId:W,context:"response",onUploadComplete:e=>{_(s=>[...s,...e]),p.Ay.success(`${e.length} document(s) uploaded to response`)},maxFiles:5,disabled:!1})}),(0,B.jsxs)(v.A,{gutter:16,children:[(0,B.jsx)(w.A,{span:12,children:(0,B.jsx)(j.A.Item,{name:"priorityLevel",label:"Update Priority (Optional)",initialValue:q.priorityLevel||"MEDIUM",children:(0,B.jsxs)(h.A,{size:"large",children:[(0,B.jsx)(ae,{value:"LOW",children:"Low Priority"}),(0,B.jsx)(ae,{value:"MEDIUM",children:"Medium Priority"}),(0,B.jsx)(ae,{value:"HIGH",children:"High Priority"}),(0,B.jsx)(ae,{value:"URGENT",children:"Urgent Priority"})]})})}),(0,B.jsx)(w.A,{span:12,children:(0,B.jsx)("div",{style:{marginTop:30},children:(0,B.jsx)(oe,{type:"secondary",children:"This resolution will be sent to the plant team and the workflow will continue."})})})]})]})]}),(0,B.jsxs)(w.A,{span:8,children:[(0,B.jsx)(N.qw,{componentName:"MaterialContextDisplay",children:(0,B.jsx)(H,{materialCode:q.materialCode,workflowId:q.workflowId,compact:!0})}),(0,B.jsx)(N.qw,{componentName:"QueryHistoryTracker",children:(0,B.jsx)(ie.A,{materialCode:q.materialCode,workflowId:q.workflowId,compact:!0})})]})]})}),(0,B.jsx)("style",{children:"\n          .overdue-row {\n            background-color: #fff2f0;\n          }\n          .overdue-row:hover {\n            background-color: #ffebe6 !important;\n          }\n        "})]})})}},8365:(e,s,l)=>{l.d(s,{A:()=>S});var r=l(6237),t=l(119),i=l(3889),n=l(3117),a=l(3722),o=l(5206),d=l(9073),c=l(1645),x=l(9472),h=l(7419),u=l(6051),j=l(1686),p=l(6612),y=l(6399),m=l(6263),A=l(3927),g=l(5043),f=l(6649),v=l(3719),w=l(579);const{Text:C}=A.A,S=e=>{let{queryId:s,materialCode:l,workflowId:A,compact:S=!1}=e;const[b,T]=(0,g.useState)(!1),[I,k]=(0,g.useState)([]),[z,R]=(0,g.useState)({totalQueries:0,resolvedQueries:0,avgResolutionTime:0,currentSLA:0}),N=(0,g.useCallback)(async()=>{try{T(!0);const e=(0,v.uG)();console.log("QueryHistoryTracker - userRole:",e);let r="/queries";if(s)r+=`/${s}/history`;else if(A)r+=`/workflow/${A}`;else if(l)r+=`/material/${l}`;else if(e){const s={CQS_USER:"CQS",TECH_USER:"TECH",JVC_USER:"JVC"}[e];console.log("QueryHistoryTracker - mapped team:",s),s?r+=`/resolved/${s}`:(console.warn("QueryHistoryTracker - unknown role, using CQS fallback"),r+="/resolved/CQS")}else r+="/resolved/CQS";console.log("QueryHistoryTracker - endpoint:",r);const t=await f.default.get(r);console.log("QueryHistoryTracker - received data:",t),console.log("QueryHistoryTracker - data type:",typeof t),console.log("QueryHistoryTracker - is array:",Array.isArray(t)),console.log("QueryHistoryTracker - data length:",null===t||void 0===t?void 0:t.length);const i=Array.isArray(t)?t:t?[t]:[];console.log("QueryHistoryTracker - setting history:",i),k(i);const n=Array.isArray(t)?t:t?[t]:[],a=n.filter(e=>"RESOLVED"===e.status),o=a.length>0?a.reduce((e,s)=>e+(s.daysOpen||0),0)/a.length:0;console.log("QueryHistoryTracker - stats calculation:",{dataArray:n.length,resolved:a.length,avgTime:o}),R({totalQueries:n.length,resolvedQueries:a.length,avgResolutionTime:o,currentSLA:n.filter(e=>e.daysOpen>3).length})}catch(e){console.error("Failed to load query history:",e)}finally{T(!1)}},[s,l,A]);(0,g.useEffect)(()=>{N()},[s,l,A,N]);return b?(0,w.jsx)(d.A,{size:"small",children:(0,w.jsxs)("div",{style:{textAlign:"center",padding:"20px"},children:[(0,w.jsx)(j.A,{size:"small"}),(0,w.jsx)("div",{style:{marginTop:8},children:"Loading query history..."})]})}):S?(0,w.jsx)(d.A,{size:"small",title:(0,w.jsxs)(u.A,{children:[(0,w.jsx)(i.A,{}),(0,w.jsx)("span",{children:s?"Query History":A?"Workflow Queries":l?"Material Queries":"Team History"})]}),style:{marginBottom:16},children:(0,w.jsxs)(h.A,{gutter:16,children:[(0,w.jsx)(c.A,{span:6,children:(0,w.jsx)(p.A,{title:"Total",value:z.totalQueries,prefix:(0,w.jsx)(n.A,{})})}),(0,w.jsx)(c.A,{span:6,children:(0,w.jsx)(p.A,{title:"Resolved",value:z.resolvedQueries,prefix:(0,w.jsx)(r.A,{}),valueStyle:{color:"#3f8600"}})}),(0,w.jsx)(c.A,{span:6,children:(0,w.jsx)(p.A,{title:"Avg Days",value:z.avgResolutionTime,precision:1,prefix:(0,w.jsx)(t.A,{})})}),(0,w.jsx)(c.A,{span:6,children:(0,w.jsx)(p.A,{title:"Overdue",value:z.currentSLA,prefix:(0,w.jsx)(t.A,{}),valueStyle:{color:z.currentSLA>0?"#cf1322":"#3f8600"}})})]})}):(0,w.jsxs)(d.A,{title:(0,w.jsxs)(u.A,{children:[(0,w.jsx)(i.A,{}),(0,w.jsx)("span",{children:s?"Query History":A?"Workflow Query History":l?"Material Query History":"Team Resolved Queries"})]}),size:"small",extra:(0,w.jsx)(o.Ay,{size:"small",icon:(0,w.jsx)(i.A,{}),onClick:N,children:"Refresh"}),children:[(0,w.jsxs)(h.A,{gutter:16,style:{marginBottom:16},children:[(0,w.jsx)(c.A,{span:6,children:(0,w.jsx)(p.A,{title:"Total Queries",value:z.totalQueries,prefix:(0,w.jsx)(n.A,{})})}),(0,w.jsx)(c.A,{span:6,children:(0,w.jsx)(p.A,{title:"Resolved",value:z.resolvedQueries,prefix:(0,w.jsx)(r.A,{}),valueStyle:{color:"#3f8600"}})}),(0,w.jsx)(c.A,{span:6,children:(0,w.jsx)(p.A,{title:"Avg Resolution Time",value:z.avgResolutionTime,precision:1,suffix:"days",prefix:(0,w.jsx)(t.A,{})})}),(0,w.jsx)(c.A,{span:6,children:(0,w.jsx)(p.A,{title:"Overdue Queries",value:z.currentSLA,prefix:(0,w.jsx)(t.A,{}),valueStyle:{color:z.currentSLA>0?"#cf1322":"#3f8600"}})})]}),I.length>0?(0,w.jsx)(m.A,{items:I.map(e=>{const s="RESOLVED"===e.status;return{dot:s?(0,w.jsx)(r.A,{style:{color:"#52c41a"}}):(0,w.jsx)(t.A,{style:{color:"#faad14"}}),color:s?"green":"blue",children:(0,w.jsxs)("div",{children:[(0,w.jsx)("div",{style:{marginBottom:8},children:(0,w.jsxs)(u.A,{wrap:!0,children:[(0,w.jsxs)(C,{strong:!0,children:["Query #",e.id]}),(0,w.jsx)(y.A,{color:(n=e.status,"OPEN"===n?"red":"green"),children:e.status}),(0,w.jsx)(y.A,{color:(i=e.assignedTeam,{CQS:"blue",TECH:"purple",JVC:"orange"}[i]||"default"),children:e.assignedTeam}),e.priorityLevel&&(0,w.jsx)(y.A,{color:(l=e.priorityLevel,{LOW:"blue",MEDIUM:"orange",HIGH:"red",URGENT:"purple"}[l]||"default"),children:e.priorityLevel})]})}),(0,w.jsx)("div",{style:{marginBottom:8},children:(0,w.jsx)(C,{children:e.question})}),e.fieldName&&(0,w.jsxs)("div",{style:{marginBottom:4,fontSize:"12px",color:"#666"},children:["Field: ",e.fieldName," ",e.stepNumber&&`(Step ${e.stepNumber})`]}),(0,w.jsx)("div",{style:{fontSize:"12px",color:"#666",marginBottom:8},children:(0,w.jsxs)(u.A,{children:[(0,w.jsxs)("span",{children:[(0,w.jsx)(a.A,{})," Raised by: ",e.raisedBy]}),(0,w.jsxs)("span",{children:[(0,w.jsx)(t.A,{})," ",e.createdAt&&new Date(e.createdAt).toLocaleString()]}),(0,w.jsxs)("span",{children:["Days open: ",e.daysOpen]})]})}),e.response&&(0,w.jsxs)("div",{style:{marginTop:8,padding:8,background:"#f0f9ff",borderRadius:4,borderLeft:"3px solid #1890ff"},children:[(0,w.jsx)("div",{style:{marginBottom:4},children:(0,w.jsx)(C,{strong:!0,children:"Resolution:"})}),(0,w.jsx)("div",{style:{marginBottom:4},children:(0,w.jsx)(C,{children:e.response})}),(0,w.jsxs)("div",{style:{fontSize:"11px",color:"#666"},children:["Resolved by: ",e.resolvedBy," on"," ",e.resolvedAt&&new Date(e.resolvedAt).toLocaleString()]})]})]})};var l,i,n}),mode:"left"}):(0,w.jsx)(x.A,{description:"No query history available",image:x.A.PRESENTED_IMAGE_SIMPLE})]})}}}]);
//# sourceMappingURL=173.2e0747ce.chunk.js.map