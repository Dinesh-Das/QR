"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[255],{1255:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Q});var l=a(1199),r=a(6237),o=a(119),n=a(9330),i=a(9470),s=a(2878),d=a(5206),c=a(9073),u=a(1645),p=a(487),x=a(6569),m=a(7692),y=a(7419),A=a(1686),h=a(6612),g=a(3258),v=a(8918),j=a(3927),f=a(7304),b=a(5043),k=a(6058),T=a(6649),w=a(5571),C=a(579);f.t1.register(...f.$L);const{Title:S,Text:P}=j.A,{RangePicker:B}=p.A,{TabPane:I}=v.A,Q=()=>{var e,t,a,p;const[j,f]=(0,b.useState)(!0),[Q,R]=(0,b.useState)(null),[W,O]=(0,b.useState)([null,null]),[E,N]=(0,b.useState)(null),[D,L]=(0,b.useState)(!1),[M,F]=(0,b.useState)(!1),[G,J]=(0,b.useState)(null),[_,$]=(0,b.useState)(!1),[V,H]=(0,b.useState)(null),[q,U]=(0,b.useState)(!1),z=(0,b.useCallback)(async e=>{f(!0);try{const t=await w.pm.getWorkflowMetrics();null!==e&&void 0!==e&&e.aborted||R(t)}catch(t){if(null===e||void 0===e||!e.aborted){console.warn("Monitoring API not available, using mock data:",t);R({totalWorkflows:150,activeWorkflows:45,completedWorkflows:95,overdueWorkflows:10,totalQueries:320,openQueries:25,overdueQueries:8,averageCompletionTimeHours:24.5,workflowsByState:{JVC_PENDING:15,PLANT_PENDING:12,CQS_PENDING:8,TECH_PENDING:10,COMPLETED:95},workflowsByPlant:{"Plant A":45,"Plant B":38,"Plant C":42,"Plant D":25},recentActivity:{"2025-08-01":12,"2025-08-02":15,"2025-08-03":8,"2025-08-04":18,"2025-08-05":22,"2025-08-06":16,"2025-08-07":14,"2025-08-08":10}})}}finally{null!==e&&void 0!==e&&e.aborted||f(!1)}},[]),K=async()=>{L(!0);try{const e=await w.pm.getQueryMetrics();N(e)}catch(e){console.warn("Query metrics API not available, using mock data:",e);N({overallSlaCompliance:87.5,overallAverageResolutionTime:18.2,totalQueries:320,totalResolvedQueries:280,slaComplianceByTeam:{"JVC Team":92.3,"Plant Team":85.1,"CQS Team":89.7,"Tech Team":83.4},averageResolutionTimesByTeam:{"JVC Team":14.5,"Plant Team":22.1,"CQS Team":16.8,"Tech Team":19.3},totalQueriesByTeam:{"JVC Team":85,"Plant Team":92,"CQS Team":78,"Tech Team":65},resolvedQueriesByTeam:{"JVC Team":78,"Plant Team":78,"CQS Team":70,"Tech Team":54},overdueQueriesByTeam:{"JVC Team":3,"Plant Team":8,"CQS Team":4,"Tech Team":6}})}finally{L(!1)}},Z=(0,b.useCallback)(async e=>{$(!0);try{const t=await w.pm.getWorkflowMetrics();null!==e&&void 0!==e&&e.aborted||J(t)}catch(t){if(null===e||void 0===e||!e.aborted){console.warn("Bottlenecks API not available, using mock data:",t);J({averageTimeInState:{JVC_PENDING:16.5,PLANT_PENDING:28.3,CQS_PENDING:12.7,TECH_PENDING:22.1,COMPLETED:0},overdueByState:{JVC_PENDING:3,PLANT_PENDING:5,CQS_PENDING:1,TECH_PENDING:4},openQueriesByTeam:{"JVC Team":7,"Plant Team":14,"CQS Team":8,"Tech Team":11},delayedByPlant:{"Plant A":4,"Plant B":6,"Plant C":2,"Plant D":3}})}}finally{null!==e&&void 0!==e&&e.aborted||$(!1)}},[]),X=(0,b.useCallback)(async e=>{U(!0);try{const t=await w.pm.getDashboardPerformanceMetrics();null!==e&&void 0!==e&&e.aborted||H(t)}catch(t){if(null===e||void 0===e||!e.aborted){console.warn("Performance metrics API not available, using mock data:",t);H({completionRate:78.5,averageCompletionTimeHours:24.3,queriesPerWorkflow:2.1,throughputByMonth:{"Jan 2025":45,"Feb 2025":52,"Mar 2025":48,"Apr 2025":61,"May 2025":55,"Jun 2025":58,"Jul 2025":63,"Aug 2025":42}})}}finally{null!==e&&void 0!==e&&e.aborted||U(!1)}},[]);(0,b.useEffect)(()=>{const e=new AbortController;return(async()=>{try{await Promise.all([z(e.signal),Z(e.signal),X(e.signal)])}catch(t){e.signal.aborted||console.error("Error fetching workflow monitoring data:",t)}})(),()=>{e.abort()}},[z,Z,X]);return j&&!Q?(0,C.jsxs)("div",{style:{textAlign:"center",padding:"50px"},children:[(0,C.jsx)(A.A,{size:"large"}),(0,C.jsx)("p",{children:"Loading dashboard data..."})]}):(0,C.jsxs)("div",{children:[(0,C.jsx)(S,{level:2,children:"Workflow Monitoring Dashboard"}),(0,C.jsx)(y.A,{gutter:[16,16],style:{marginBottom:16},children:(0,C.jsx)(u.A,{span:24,children:(0,C.jsx)(c.A,{children:(0,C.jsxs)(y.A,{gutter:16,children:[(0,C.jsx)(u.A,{span:8,children:(0,C.jsx)(B,{onChange:e=>{O(e)},style:{width:"100%"}})}),(0,C.jsx)(u.A,{span:4,children:(0,C.jsx)(d.Ay,{type:"primary",onClick:()=>{K(),X()},children:"Apply Filter"})}),(0,C.jsxs)(u.A,{span:12,style:{textAlign:"right"},children:[(0,C.jsx)(d.Ay,{icon:(0,C.jsx)(n.A,{}),onClick:async()=>{F(!0);try{let e="/admin/monitoring/audit-logs/export";W[0]&&W[1]&&(e+=`?startDate=${W[0].toISOString()}&endDate=${W[1].toISOString()}`);const t=await T.default.get(e,{responseType:"blob"}),a=window.URL.createObjectURL(t),l=document.createElement("a");l.href=a,l.setAttribute("download",`audit-logs-${(new Date).toISOString().split("T")[0]}.csv`),document.body.appendChild(l),l.click(),l.remove(),x.Ay.success("Audit logs exported successfully")}catch(e){x.Ay.error("Failed to export audit logs"),console.error("Error exporting audit logs:",e)}finally{F(!1)}},loading:M,style:{marginRight:8},children:"Export Audit Logs"}),(0,C.jsx)(d.Ay,{icon:(0,C.jsx)(n.A,{}),onClick:()=>async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;F(!0);try{let t="/admin/monitoring/workflows/export";const a=[];W[0]&&W[1]&&(a.push(`startDate=${W[0].toISOString()}`),a.push(`endDate=${W[1].toISOString()}`)),e&&a.push(`state=${e}`),a.length>0&&(t+=`?${a.join("&")}`);const l=await T.default.get(t,{responseType:"blob"}),r=window.URL.createObjectURL(l),o=document.createElement("a");o.href=r,o.setAttribute("download",`workflow-report-${(new Date).toISOString().split("T")[0]}.csv`),document.body.appendChild(o),o.click(),o.remove(),x.Ay.success("Workflow report exported successfully")}catch(t){x.Ay.error("Failed to export workflow report"),console.error("Error exporting workflow report:",t)}finally{F(!1)}}(),loading:M,children:"Export Workflow Report"})]})]})})})}),(0,C.jsxs)(y.A,{gutter:[16,16],children:[(0,C.jsx)(u.A,{span:6,children:(0,C.jsx)(c.A,{children:(0,C.jsx)(h.A,{title:"Total Workflows",value:(null===Q||void 0===Q?void 0:Q.totalWorkflows)||0,prefix:(0,C.jsx)(l.A,{})})})}),(0,C.jsx)(u.A,{span:6,children:(0,C.jsx)(c.A,{children:(0,C.jsx)(h.A,{title:"Active Workflows",value:(null===Q||void 0===Q?void 0:Q.activeWorkflows)||0,prefix:(0,C.jsx)(o.A,{}),valueStyle:{color:"#1890ff"}})})}),(0,C.jsx)(u.A,{span:6,children:(0,C.jsx)(c.A,{children:(0,C.jsx)(h.A,{title:"Completed Workflows",value:(null===Q||void 0===Q?void 0:Q.completedWorkflows)||0,prefix:(0,C.jsx)(r.A,{}),valueStyle:{color:"#3f8600"}})})}),(0,C.jsx)(u.A,{span:6,children:(0,C.jsx)(c.A,{children:(0,C.jsx)(h.A,{title:"Overdue Workflows",value:(null===Q||void 0===Q?void 0:Q.overdueWorkflows)||0,prefix:(0,C.jsx)(i.A,{}),valueStyle:{color:"#cf1322"}})})})]}),(0,C.jsxs)(y.A,{gutter:[16,16],style:{marginTop:16},children:[(0,C.jsx)(u.A,{span:6,children:(0,C.jsx)(c.A,{children:(0,C.jsx)(h.A,{title:"Total Queries",value:(null===Q||void 0===Q?void 0:Q.totalQueries)||0,prefix:(0,C.jsx)(s.A,{})})})}),(0,C.jsx)(u.A,{span:6,children:(0,C.jsx)(c.A,{children:(0,C.jsx)(h.A,{title:"Open Queries",value:(null===Q||void 0===Q?void 0:Q.openQueries)||0,valueStyle:{color:"#1890ff"}})})}),(0,C.jsx)(u.A,{span:6,children:(0,C.jsx)(c.A,{children:(0,C.jsx)(h.A,{title:"Overdue Queries",value:(null===Q||void 0===Q?void 0:Q.overdueQueries)||0,valueStyle:{color:"#cf1322"}})})}),(0,C.jsx)(u.A,{span:6,children:(0,C.jsx)(c.A,{children:(0,C.jsx)(h.A,{title:"Avg. Completion Time (hrs)",value:(null===Q||void 0===Q||null===(e=Q.averageCompletionTimeHours)||void 0===e?void 0:e.toFixed(1))||0,precision:1})})})]}),(0,C.jsxs)(v.A,{defaultActiveKey:"1",style:{marginTop:16},children:[(0,C.jsxs)(I,{tab:"Workflow Status",children:[(0,C.jsxs)(y.A,{gutter:[16,16],children:[(0,C.jsx)(u.A,{span:12,children:(0,C.jsx)(c.A,{title:"Workflow Status Distribution",children:Q&&Q.workflowsByState&&(0,C.jsx)(k.Fq,{data:(()=>{if(!Q||!Q.workflowsByState)return null;return{labels:Object.keys(Q.workflowsByState),datasets:[{label:"Workflows by State",data:Object.values(Q.workflowsByState),backgroundColor:["rgba(54, 162, 235, 0.6)","rgba(255, 206, 86, 0.6)","rgba(75, 192, 192, 0.6)","rgba(153, 102, 255, 0.6)","rgba(255, 159, 64, 0.6)"],borderColor:["rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]}})(),options:{responsive:!0,maintainAspectRatio:!1},height:300})})}),(0,C.jsx)(u.A,{span:12,children:(0,C.jsx)(c.A,{title:"Recent Activity",children:Q&&Q.recentActivity&&(0,C.jsx)(k.N1,{data:(()=>{if(!Q||!Q.recentActivity)return null;const e=Object.keys(Q.recentActivity).sort(),t=e.map(e=>Q.recentActivity[e]);return{labels:e,datasets:[{label:"Workflow Activity",data:t,fill:!1,backgroundColor:"rgba(54, 162, 235, 0.6)",borderColor:"rgba(54, 162, 235, 1)",tension:.1}]}})(),options:{responsive:!0,maintainAspectRatio:!1},height:300})})})]}),(0,C.jsx)(y.A,{gutter:[16,16],style:{marginTop:16},children:(0,C.jsx)(u.A,{span:24,children:(0,C.jsx)(c.A,{title:"Workflows by Plant",children:(0,C.jsx)(g.A,{dataSource:Q&&Q.workflowsByPlant?Object.entries(Q.workflowsByPlant).map(e=>{let[t,a]=e;return{key:t,plant:t,count:a}}):[],columns:[{title:"Plant",dataIndex:"plant",key:"plant"},{title:"Workflow Count",dataIndex:"count",key:"count"}],pagination:!1})})})})]},"1"),(0,C.jsxs)(I,{tab:"Query SLA Reports",children:[(0,C.jsx)(d.Ay,{type:"primary",onClick:K,loading:D,style:{marginBottom:16},children:"Generate SLA Report"}),D?(0,C.jsxs)("div",{style:{textAlign:"center",padding:"50px"},children:[(0,C.jsx)(A.A,{}),(0,C.jsx)("p",{children:"Generating SLA report..."})]}):E?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(y.A,{gutter:[16,16],children:[(0,C.jsx)(u.A,{span:8,children:(0,C.jsxs)(c.A,{children:[(0,C.jsx)(h.A,{title:"Overall SLA Compliance",value:E.overallSlaCompliance.toFixed(1),suffix:"%",precision:1}),(0,C.jsx)(m.A,{percent:E.overallSlaCompliance,status:E.overallSlaCompliance>=90?"success":"active"})]})}),(0,C.jsx)(u.A,{span:8,children:(0,C.jsx)(c.A,{children:(0,C.jsx)(h.A,{title:"Average Resolution Time",value:E.overallAverageResolutionTime.toFixed(1),suffix:"hours",precision:1})})}),(0,C.jsx)(u.A,{span:8,children:(0,C.jsx)(c.A,{children:(0,C.jsx)(h.A,{title:"Resolution Rate",value:(E.totalResolvedQueries/E.totalQueries*100).toFixed(1),suffix:"%",precision:1})})})]}),(0,C.jsxs)(y.A,{gutter:[16,16],style:{marginTop:16},children:[(0,C.jsx)(u.A,{span:12,children:(0,C.jsx)(c.A,{title:"SLA Compliance by Team",children:(0,C.jsx)(k.yP,{data:(()=>{if(!E||!E.slaComplianceByTeam)return null;return{labels:Object.keys(E.slaComplianceByTeam),datasets:[{label:"SLA Compliance (%)",data:Object.values(E.slaComplianceByTeam),backgroundColor:"rgba(75, 192, 192, 0.6)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}]}})(),options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,max:100}}},height:300})})}),(0,C.jsx)(u.A,{span:12,children:(0,C.jsx)(c.A,{title:"Average Resolution Times by Team",children:(0,C.jsx)(k.yP,{data:(()=>{if(!E||!E.averageResolutionTimesByTeam)return null;return{labels:Object.keys(E.averageResolutionTimesByTeam),datasets:[{label:"Average Resolution Time (hours)",data:Object.values(E.averageResolutionTimesByTeam),backgroundColor:"rgba(255, 159, 64, 0.6)",borderColor:"rgba(255, 159, 64, 1)",borderWidth:1}]}})(),options:{responsive:!0,maintainAspectRatio:!1},height:300})})})]}),(0,C.jsx)(y.A,{gutter:[16,16],style:{marginTop:16},children:(0,C.jsx)(u.A,{span:24,children:(0,C.jsx)(c.A,{title:"Query Metrics by Team",children:(0,C.jsx)(g.A,{dataSource:E.totalQueriesByTeam?Object.keys(E.totalQueriesByTeam).map(e=>{var t,a;return{key:e,team:e,total:E.totalQueriesByTeam[e],resolved:E.resolvedQueriesByTeam[e],overdue:E.overdueQueriesByTeam[e],avgTime:null===(t=E.averageResolutionTimesByTeam[e])||void 0===t?void 0:t.toFixed(1),compliance:null===(a=E.slaComplianceByTeam[e])||void 0===a?void 0:a.toFixed(1)}}):[],columns:[{title:"Team",dataIndex:"team",key:"team"},{title:"Total Queries",dataIndex:"total",key:"total"},{title:"Resolved",dataIndex:"resolved",key:"resolved"},{title:"Overdue",dataIndex:"overdue",key:"overdue"},{title:"Avg. Resolution Time (hrs)",dataIndex:"avgTime",key:"avgTime"},{title:"SLA Compliance",dataIndex:"compliance",key:"compliance",render:e=>`${e}%`}],pagination:!1})})})})]}):(0,C.jsx)("div",{style:{textAlign:"center",padding:"50px"},children:(0,C.jsx)(P,{type:"secondary",children:'Click "Generate SLA Report" to view query SLA metrics'})})]},"2"),(0,C.jsxs)(I,{tab:"Bottlenecks Analysis",children:[(0,C.jsx)(d.Ay,{type:"primary",onClick:()=>Z(),loading:_,style:{marginBottom:16},children:"Refresh Bottlenecks Analysis"}),_?(0,C.jsxs)("div",{style:{textAlign:"center",padding:"50px"},children:[(0,C.jsx)(A.A,{}),(0,C.jsx)("p",{children:"Analyzing bottlenecks..."})]}):G?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(y.A,{gutter:[16,16],children:[(0,C.jsx)(u.A,{span:12,children:(0,C.jsx)(c.A,{title:"Average Time in Each State (hours)",children:(0,C.jsx)(g.A,{dataSource:G.averageTimeInState?Object.entries(G.averageTimeInState).map(e=>{let[t,a]=e;return{key:t,state:t,hours:a.toFixed(1)}}):[],columns:[{title:"Workflow State",dataIndex:"state",key:"state"},{title:"Average Hours",dataIndex:"hours",key:"hours"}],pagination:!1})})}),(0,C.jsx)(u.A,{span:12,children:(0,C.jsx)(c.A,{title:"Overdue Workflows by State",children:(0,C.jsx)(g.A,{dataSource:G.overdueByState?Object.entries(G.overdueByState).map(e=>{let[t,a]=e;return{key:t,state:t,count:a}}):[],columns:[{title:"Workflow State",dataIndex:"state",key:"state"},{title:"Overdue Count",dataIndex:"count",key:"count"}],pagination:!1})})})]}),(0,C.jsxs)(y.A,{gutter:[16,16],style:{marginTop:16},children:[(0,C.jsx)(u.A,{span:12,children:(0,C.jsx)(c.A,{title:"Open Queries by Team",children:(0,C.jsx)(g.A,{dataSource:G.openQueriesByTeam?Object.entries(G.openQueriesByTeam).map(e=>{let[t,a]=e;return{key:t,team:t,count:a}}):[],columns:[{title:"Team",dataIndex:"team",key:"team"},{title:"Open Queries",dataIndex:"count",key:"count"}],pagination:!1})})}),(0,C.jsx)(u.A,{span:12,children:(0,C.jsx)(c.A,{title:"Delayed Workflows by Plant",children:(0,C.jsx)(g.A,{dataSource:G.delayedByPlant?Object.entries(G.delayedByPlant).map(e=>{let[t,a]=e;return{key:t,plant:t,count:a}}):[],columns:[{title:"Plant",dataIndex:"plant",key:"plant"},{title:"Delayed Count",dataIndex:"count",key:"count"}],pagination:!1})})})]})]}):(0,C.jsx)("div",{style:{textAlign:"center",padding:"50px"},children:(0,C.jsx)(P,{type:"secondary",children:'Click "Refresh Bottlenecks Analysis" to view workflow bottlenecks'})})]},"3"),(0,C.jsxs)(I,{tab:"Performance Metrics",children:[(0,C.jsx)(d.Ay,{type:"primary",onClick:()=>X(),loading:q,style:{marginBottom:16},children:"Refresh Performance Metrics"}),q?(0,C.jsxs)("div",{style:{textAlign:"center",padding:"50px"},children:[(0,C.jsx)(A.A,{}),(0,C.jsx)("p",{children:"Loading performance metrics..."})]}):V?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(y.A,{gutter:[16,16],children:[(0,C.jsx)(u.A,{span:8,children:(0,C.jsxs)(c.A,{children:[(0,C.jsx)(h.A,{title:"Completion Rate",value:null===(t=V.completionRate)||void 0===t?void 0:t.toFixed(1),suffix:"%",precision:1}),(0,C.jsx)(m.A,{percent:V.completionRate,status:V.completionRate>=80?"success":"active"})]})}),(0,C.jsx)(u.A,{span:8,children:(0,C.jsx)(c.A,{children:(0,C.jsx)(h.A,{title:"Average Completion Time",value:null===(a=V.averageCompletionTimeHours)||void 0===a?void 0:a.toFixed(1),suffix:"hours",precision:1})})}),(0,C.jsx)(u.A,{span:8,children:(0,C.jsx)(c.A,{children:(0,C.jsx)(h.A,{title:"Queries Per Workflow",value:null===(p=V.queriesPerWorkflow)||void 0===p?void 0:p.toFixed(1),precision:1})})})]}),(0,C.jsx)(y.A,{gutter:[16,16],style:{marginTop:16},children:(0,C.jsx)(u.A,{span:24,children:(0,C.jsx)(c.A,{title:"Monthly Workflow Throughput",children:V.throughputByMonth&&(0,C.jsx)(k.yP,{data:{labels:Object.keys(V.throughputByMonth),datasets:[{label:"Completed Workflows",data:Object.values(V.throughputByMonth),backgroundColor:"rgba(75, 192, 192, 0.6)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1},height:300})})})})]}):(0,C.jsx)("div",{style:{textAlign:"center",padding:"50px"},children:(0,C.jsx)(P,{type:"secondary",children:'Click "Refresh Performance Metrics" to view workflow performance data'})})]},"4")]})]})}}}]);
//# sourceMappingURL=255.0c277492.chunk.js.map