"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[658],{2868:(e,t,n)=>{n.d(t,{aZ:()=>d,lX:()=>E,rb:()=>l,Bq:()=>u,fz:()=>r,cS:()=>o,tS:()=>p,r0:()=>c,EW:()=>a,sB:()=>i,Fv:()=>s});const a={MOBILE_BREAKPOINT:768,TABLET_BREAKPOINT:1024,PAGE_SIZE:10,DEBOUNCE_DELAY:300},s={INITIATED:"INITIATED",IN_PROGRESS:"IN_PROGRESS",PENDING_REVIEW:"PENDING_REVIEW",APPROVED:"APPROVED",REJECTED:"REJECTED",COMPLETED:"COMPLETED"},r={LOW:"LOW",MEDIUM:"MEDIUM",HIGH:"HIGH",URGENT:"URGENT",CRITICAL:"CRITICAL"},l=(s.INITIATED,s.IN_PROGRESS,s.PENDING_REVIEW,s.APPROVED,s.REJECTED,s.COMPLETED,r.LOW,r.MEDIUM,r.HIGH,r.URGENT,r.CRITICAL,{MAX_UPLOAD_SIZE:26214400,BYTES_PER_KB:1024,BYTES_PER_MB:1048576,BYTES_PER_GB:1073741824}),i={JVC_PENDING:"JVC_PENDING",PLANT_PENDING:"PLANT_PENDING",CQS_PENDING:"CQS_PENDING",TECH_PENDING:"TECH_PENDING",DRAFT:"DRAFT",IN_PROGRESS:"IN_PROGRESS",SUBMITTED:"SUBMITTED"},o={OPEN:"OPEN",RESOLVED:"RESOLVED",CLOSED:"CLOSED"},c={CQS:"CQS",TECH:"TECH",JVC:"JVC",PLANT:"PLANT"},d={INTERVAL:3e4,DEBOUNCE_DELAY:2e3},u={DEFAULT_PAGE_SIZE:10,SMALL_PAGE_SIZE:5,LARGE_PAGE_SIZE:15,SHOW_SIZE_CHANGER:!0,SHOW_QUICK_JUMPER:!0},E={ALL:"all",COMPLETED:"completed",IN_PROGRESS:"in-progress",NOT_STARTED:"not-started"},p={INITIATE:"initiate",PENDING:"pending",COMPLETED:"completed",QUERIES:"queries",HISTORY:"history"}},6612:(e,t,n)=>{n.d(t,{A:()=>T});var a=n(5043),s=n(7483),r=n(5818),l=n(2701),i=n(8139),o=n.n(i),c=n(8060),d=n(5296),u=n(7650);const E=e=>{const{value:t,formatter:n,precision:s,decimalSeparator:r,groupSeparator:l="",prefixCls:i}=e;let o;if("function"===typeof n)o=n(t);else{const e=String(t),n=e.match(/^(-?)(\d*)(\.(\d+))?$/);if(n&&"-"!==e){const e=n[1];let t=n[2]||"0",c=n[4]||"";t=t.replace(/\B(?=(\d{3})+(?!\d))/g,l),"number"===typeof s&&(c=c.padEnd(s,"0").slice(0,s>0?s:0)),c&&(c=`${r}${c}`),o=[a.createElement("span",{key:"int",className:`${i}-content-value-int`},e,t),c&&a.createElement("span",{key:"decimal",className:`${i}-content-value-decimal`},c)]}else o=e}return a.createElement("span",{className:`${i}-content-value`},o)};var p=n(4414),m=n(8855),A=n(8446);const g=e=>{const{componentCls:t,marginXXS:n,padding:a,colorTextDescription:s,titleFontSize:r,colorTextHeading:l,contentFontSize:i,fontFamily:o}=e;return{[t]:Object.assign(Object.assign({},(0,p.dF)(e)),{[`${t}-title`]:{marginBottom:n,color:s,fontSize:r},[`${t}-skeleton`]:{paddingTop:a},[`${t}-content`]:{color:l,fontSize:i,fontFamily:o,[`${t}-content-value`]:{display:"inline-block",direction:"ltr"},[`${t}-content-prefix, ${t}-content-suffix`]:{display:"inline-block"},[`${t}-content-prefix`]:{marginInlineEnd:n},[`${t}-content-suffix`]:{marginInlineStart:n}}})}},x=(0,m.OF)("Statistic",e=>{const t=(0,A.oX)(e,{});return[g(t)]},e=>{const{fontSizeHeading3:t,fontSize:n}=e;return{titleFontSize:n,contentFontSize:t}});var f=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(n[a[s]]=e[a[s]])}return n};const S=a.forwardRef((e,t)=>{const{prefixCls:n,className:s,rootClassName:r,style:l,valueStyle:i,value:p=0,title:m,valueRender:A,prefix:g,suffix:S,loading:h=!1,formatter:j,precision:v,decimalSeparator:y=".",groupSeparator:I=",",onMouseEnter:N,onMouseLeave:O}=e,T=f(e,["prefixCls","className","rootClassName","style","valueStyle","value","title","valueRender","prefix","suffix","loading","formatter","precision","decimalSeparator","groupSeparator","onMouseEnter","onMouseLeave"]),{getPrefixCls:P,direction:R,className:D,style:C}=(0,d.TP)("statistic"),b=P("statistic",n),[_,M,L]=x(b),w=a.createElement(E,{decimalSeparator:y,groupSeparator:I,prefixCls:b,formatter:j,precision:v,value:p}),U=o()(b,{[`${b}-rtl`]:"rtl"===R},D,s,r,M,L),G=a.useRef(null);a.useImperativeHandle(t,()=>({nativeElement:G.current}));const B=(0,c.A)(T,{aria:!0,data:!0});return _(a.createElement("div",Object.assign({},B,{ref:G,className:U,style:Object.assign(Object.assign({},C),l),onMouseEnter:N,onMouseLeave:O}),m&&a.createElement("div",{className:`${b}-title`},m),a.createElement(u.A,{paragraph:!1,loading:h,className:`${b}-skeleton`},a.createElement("div",{style:i,className:`${b}-content`},g&&a.createElement("span",{className:`${b}-content-prefix`},g),A?A(w):w,S&&a.createElement("span",{className:`${b}-content-suffix`},S)))))});const h=S,j=[["Y",31536e6],["M",2592e6],["D",864e5],["H",36e5],["m",6e4],["s",1e3],["S",1]];function v(e,t,n){const{format:a=""}=t,s=new Date(e).getTime(),r=Date.now();return function(e,t){let n=e;const a=/\[[^\]]*]/g,s=(t.match(a)||[]).map(e=>e.slice(1,-1)),r=t.replace(a,"[]"),l=j.reduce((e,t)=>{let[a,s]=t;if(e.includes(a)){const t=Math.floor(n/s);return n-=t*s,e.replace(new RegExp(`${a}+`,"g"),e=>{const n=e.length;return t.toString().padStart(n,"0")})}return e},r);let i=0;return l.replace(a,()=>{const e=s[i];return i+=1,e})}(n?Math.max(s-r,0):Math.max(r-s,0),a)}var y=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(n[a[s]]=e[a[s]])}return n};const I=e=>{const{value:t,format:n="HH:mm:ss",onChange:i,onFinish:o,type:c}=e,d=y(e,["value","format","onChange","onFinish","type"]),u="countdown"===c,[E,p]=a.useState(null),m=(0,s._q)(()=>{const e=Date.now(),n=function(e){return new Date(e).getTime()}(t);p({});return null===i||void 0===i||i(u?n-e:e-n),!(u&&n<e)||(null===o||void 0===o||o(),!1)});a.useEffect(()=>{let e;const t=()=>{e=(0,r.A)(()=>{m()&&t()})};return t(),()=>r.A.cancel(e)},[t,u]),a.useEffect(()=>{p({})},[]);return a.createElement(h,Object.assign({},d,{value:t,valueRender:e=>(0,l.Ob)(e,{title:void 0}),formatter:(e,t)=>E?v(e,Object.assign(Object.assign({},t),{format:n}),u):"-"}))},N=e=>a.createElement(I,Object.assign({},e,{type:"countdown"})),O=a.memo(N);h.Timer=I,h.Countdown=O;const T=h},6658:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var a=n(9073),s=n(1645),r=n(7419),l=n(6612),i=n(3217),o=n(8918),c=n(3927),d=n(5043),u=n(6649),E=n(2868),p=n(579);const{Title:m}=c.A,{TabPane:A}=o.A,g=()=>{const[e,t]=(0,d.useState)({total:0,active:0}),[n,c]=(0,d.useState)([]),[g,x]=(0,d.useState)([]),[f,S]=(0,d.useState)({}),[h,j]=(0,d.useState)({}),[v,y]=(0,d.useState)(!1);(0,d.useEffect)(()=>{const e=new AbortController;return(async()=>{y(!0);try{const[n,a,s,r,l]=await Promise.all([u.default.get("/reports/analytics/user-stats",{signal:e.signal}).catch(()=>({total:0,active:0})),u.default.get("/reports/analytics/role-distribution",{signal:e.signal}).catch(()=>({})),u.default.get("/reports/analytics/activity-timeline",{signal:e.signal}).catch(()=>({})),u.default.get("/system/health",{signal:e.signal}).catch(()=>({})),u.default.get("/system/stats",{signal:e.signal}).catch(()=>({}))]);e.signal.aborted||(t(n),c(Object.entries(a).map(e=>{let[t,n]=e;return{role:t,count:n}})),x(Object.entries(s).map(e=>{let[t,n]=e;return{date:t,count:n}})),S(r),j(l))}catch(n){e.signal.aborted||console.error("Failed to fetch dashboard data:",n)}finally{e.signal.aborted||y(!1)}})(),()=>{e.abort()}},[]);const I=e=>{if(0===e)return"0 Bytes";const t=E.rb.BYTES_PER_KB||1024,n=Math.floor(Math.log(e)/Math.log(t));return`${parseFloat((e/Math.pow(t,n)).toFixed(2))} ${["Bytes","KB","MB","GB"][n]}`},N=e=>{const t=Math.floor(e/1e3);return`${Math.floor(t/86400)}d ${Math.floor(t%86400/3600)}h ${Math.floor(t%3600/60)}m`};return(0,p.jsxs)("div",{style:{padding:24},children:[(0,p.jsx)(m,{level:2,children:"System Dashboard"}),(0,p.jsxs)(o.A,{defaultActiveKey:"overview",size:"large",children:[(0,p.jsx)(A,{tab:"Overview",children:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(r.A,{gutter:16,style:{marginBottom:24},children:[(0,p.jsx)(s.A,{span:6,children:(0,p.jsx)(a.A,{children:(0,p.jsx)(l.A,{title:"System Status",value:f.status||"Unknown",valueStyle:{color:"UP"===f.status?"#3f8600":"#cf1322"},loading:v})})}),(0,p.jsx)(s.A,{span:6,children:(0,p.jsx)(a.A,{children:(0,p.jsx)(l.A,{title:"Total Users",value:e.total,loading:v})})}),(0,p.jsx)(s.A,{span:6,children:(0,p.jsx)(a.A,{children:(0,p.jsx)(l.A,{title:"Active Users",value:e.active||h.activeUsers||0,loading:v})})}),(0,p.jsx)(s.A,{span:6,children:(0,p.jsx)(a.A,{children:(0,p.jsx)(l.A,{title:"Uptime",value:f.uptime?N(f.uptime):"N/A",loading:v})})})]}),(0,p.jsxs)(r.A,{gutter:16,style:{marginBottom:24},children:[(0,p.jsx)(s.A,{span:12,children:(0,p.jsx)(a.A,{title:"Role Distribution",children:(0,p.jsx)(i.A,{dataSource:n,columns:[{title:"Role",dataIndex:"role",render:e=>e.replace(/_/g," ").toLowerCase().replace(/\b\w/g,e=>e.toUpperCase())},{title:"Count",dataIndex:"count"}],rowKey:"role",pagination:!1,loading:v,size:"small"})})}),(0,p.jsx)(s.A,{span:12,children:(0,p.jsx)(a.A,{title:"Recent Activity",children:(0,p.jsx)(i.A,{dataSource:g.slice(0,10),columns:[{title:"Date",dataIndex:"date"},{title:"Activities",dataIndex:"count"}],rowKey:"date",pagination:!1,loading:v,size:"small"})})})]})]})},"overview"),(0,p.jsx)(A,{tab:"System Health",children:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(r.A,{gutter:16,style:{marginBottom:24},children:[(0,p.jsx)(s.A,{span:6,children:(0,p.jsx)(a.A,{children:(0,p.jsx)(l.A,{title:"System Status",value:f.status||"Unknown",valueStyle:{color:"UP"===f.status?"#3f8600":"#cf1322"},loading:v})})}),(0,p.jsx)(s.A,{span:6,children:(0,p.jsx)(a.A,{children:(0,p.jsx)(l.A,{title:"Memory Used",value:f.memory?I(f.memory):"N/A",loading:v})})}),(0,p.jsx)(s.A,{span:6,children:(0,p.jsx)(a.A,{children:(0,p.jsx)(l.A,{title:"Uptime",value:f.uptime?N(f.uptime):"N/A",loading:v})})}),(0,p.jsx)(s.A,{span:6,children:(0,p.jsx)(a.A,{children:(0,p.jsx)(l.A,{title:"Active Sessions",value:h.activeSessions||0,loading:v})})})]}),(0,p.jsx)(r.A,{gutter:16,children:(0,p.jsx)(s.A,{span:24,children:(0,p.jsx)(a.A,{title:"System Metrics",children:(0,p.jsx)(i.A,{dataSource:Object.entries(h).map(e=>{let[t,n]=e;return{key:t,metric:t.replace(/([A-Z])/g," $1").toLowerCase(),value:"number"===typeof n?n.toLocaleString():n}}),columns:[{title:"Metric",dataIndex:"metric",key:"metric",render:e=>e.charAt(0).toUpperCase()+e.slice(1)},{title:"Value",dataIndex:"value",key:"value"}],pagination:!1,loading:v,size:"small"})})})})]})},"system"),(0,p.jsx)(A,{tab:"User Analytics",children:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(r.A,{gutter:16,style:{marginBottom:24},children:[(0,p.jsx)(s.A,{span:8,children:(0,p.jsx)(a.A,{children:(0,p.jsx)(l.A,{title:"Total Users",value:e.total,loading:v})})}),(0,p.jsx)(s.A,{span:8,children:(0,p.jsx)(a.A,{children:(0,p.jsx)(l.A,{title:"Active Users",value:e.active,loading:v})})}),(0,p.jsx)(s.A,{span:8,children:(0,p.jsx)(a.A,{children:(0,p.jsx)(l.A,{title:"User Activity Rate",value:e.total>0?Math.round(e.active/e.total*100):0,suffix:"%",loading:v})})})]}),(0,p.jsxs)(r.A,{gutter:16,children:[(0,p.jsx)(s.A,{span:12,children:(0,p.jsx)(a.A,{title:"User Role Distribution",children:(0,p.jsx)(i.A,{dataSource:n,columns:[{title:"Role",dataIndex:"role",render:e=>e.replace(/_/g," ").toLowerCase().replace(/\b\w/g,e=>e.toUpperCase())},{title:"Count",dataIndex:"count"},{title:"Percentage",dataIndex:"count",render:e=>{const t=n.reduce((e,t)=>e+t.count,0);return t>0?`${Math.round(e/t*100)}%`:"0%"}}],rowKey:"role",pagination:!1,loading:v,size:"small"})})}),(0,p.jsx)(s.A,{span:12,children:(0,p.jsx)(a.A,{title:"Activity Timeline",children:(0,p.jsx)(i.A,{dataSource:g,columns:[{title:"Date",dataIndex:"date"},{title:"Activities",dataIndex:"count"}],rowKey:"date",pagination:{pageSize:10},loading:v,size:"small"})})})]})]})},"analytics")]})]})}}}]);
//# sourceMappingURL=658.46cb3757.chunk.js.map