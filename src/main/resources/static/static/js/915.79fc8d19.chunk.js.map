{"version":3,"file":"static/js/915.79fc8d19.chunk.js","mappings":"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","sources":["components/ErrorBoundaries/PlantErrorBoundary.js","components/Plant/FilterPanel.js","components/Plant/PlantDashboard.js","components/Plant/WorkflowTable.js","components/MaterialContextPanel.js","components/QueryRaisingModal.js","components/PlantQuestionnaire.js","screens/PlantView.js","hooks/usePlantWorkflows.js","hooks/useWorkflowFilters.js","hooks/useRoleBasedAccess.js","components/SecureForm.js","utils/questionnaireUtils.js","services/userAPI.js","services/masterDataAPI.js"],"sourcesContent":["import React from 'react';\n\nimport { RouteErrorBoundary } from './RouteErrorBoundary';\n\n/**\n * Plant-specific error boundary for handling errors within plant workflow management\n * Extends RouteErrorBoundary with plant-specific context\n */\nexport const PlantErrorBoundary = ({ children, plantCode }) => (\n  <RouteErrorBoundary \n    routeName=\"Plant Dashboard\" \n    errorContext={{ \n      plantCode,\n      feature: 'plant-workflow-management',\n      level: 'plant'\n    }}\n  >\n    {children}\n  </RouteErrorBoundary>\n);\n\nexport default PlantErrorBoundary;","import { SearchOutlined, ClearOutlined, SaveOutlined, FilterOutlined } from '@ant-design/icons';\nimport { Card, Row, Col, Input, Select, Button, Space, Tag, Divider } from 'antd';\nimport PropTypes from 'prop-types';\nimport React, { useCallback } from 'react';\n\nconst { Search } = Input;\nconst { Option } = Select;\n\n/**\n * FilterPanel component provides filtering controls for workflow data\n * Optimized with React.memo and useCallback for performance\n */\nconst FilterPanel = React.memo(({ \n  searchText,\n  statusFilter,\n  completionFilter,\n  onSearchTextChange,\n  onStatusFilterChange,\n  onCompletionFilterChange,\n  onClearFilters,\n  onApplyPreset,\n  onSaveFilters,\n  filterPresets,\n  filterSummary\n}) => {\n  /**\n   * Handle search text change\n   */\n  const handleSearchChange = useCallback((value) => {\n    if (onSearchTextChange) {\n      onSearchTextChange(value);\n    }\n  }, [onSearchTextChange]);\n\n  /**\n   * Handle status filter change\n   */\n  const handleStatusChange = useCallback((value) => {\n    if (onStatusFilterChange) {\n      onStatusFilterChange(value);\n    }\n  }, [onStatusFilterChange]);\n\n  /**\n   * Handle completion filter change\n   */\n  const handleCompletionChange = useCallback((value) => {\n    if (onCompletionFilterChange) {\n      onCompletionFilterChange(value);\n    }\n  }, [onCompletionFilterChange]);\n\n  /**\n   * Handle clear all filters\n   */\n  const handleClearFilters = useCallback(() => {\n    if (onClearFilters) {\n      onClearFilters();\n    }\n  }, [onClearFilters]);\n\n  /**\n   * Handle preset application\n   */\n  const handlePresetClick = useCallback((presetName) => {\n    if (onApplyPreset) {\n      onApplyPreset(presetName);\n    }\n  }, [onApplyPreset]);\n\n  /**\n   * Handle save filters\n   */\n  const handleSaveFilters = useCallback(() => {\n    if (onSaveFilters) {\n      onSaveFilters();\n    }\n  }, [onSaveFilters]);\n\n  return (\n    <Card \n      title={\n        <div style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\n          <FilterOutlined />\n          <span>Filters</span>\n          {filterSummary?.hasActiveFilters && (\n            <Tag color=\"blue\" style={{ marginLeft: 8 }}>\n              {filterSummary.activeFilters.length} active\n            </Tag>\n          )}\n        </div>\n      }\n      size=\"small\"\n      style={{ marginBottom: 16 }}\n      extra={\n        <Space>\n          {onSaveFilters && (\n            <Button \n              size=\"small\" \n              icon={<SaveOutlined />}\n              onClick={handleSaveFilters}\n              disabled={!filterSummary?.hasActiveFilters}\n            >\n              Save\n            </Button>\n          )}\n          <Button \n            size=\"small\" \n            icon={<ClearOutlined />}\n            onClick={handleClearFilters}\n            disabled={!filterSummary?.hasActiveFilters}\n          >\n            Clear All\n          </Button>\n        </Space>\n      }\n    >\n      {/* Main Filter Controls */}\n      <Row gutter={[16, 16]} style={{ marginBottom: 16 }}>\n        <Col xs={24} sm={8} md={8} lg={8}>\n          <div style={{ marginBottom: 4, fontSize: '12px', fontWeight: '500', color: '#666' }}>\n            Search Materials\n          </div>\n          <Search\n            placeholder=\"Search by Material Code or Plant\"\n            value={searchText}\n            onChange={(e) => handleSearchChange(e.target.value)}\n            style={{ width: '100%' }}\n            allowClear\n            enterButton={<SearchOutlined />}\n          />\n        </Col>\n        <Col xs={12} sm={8} md={8} lg={8}>\n          <div style={{ marginBottom: 4, fontSize: '12px', fontWeight: '500', color: '#666' }}>\n            Status Filter\n          </div>\n          <Select\n            placeholder=\"Filter by Status\"\n            value={statusFilter}\n            onChange={handleStatusChange}\n            style={{ width: '100%' }}\n            allowClear\n          >\n            <Option value=\"all\">All Statuses</Option>\n            <Option value=\"DRAFT\">Draft</Option>\n            <Option value=\"IN_PROGRESS\">In Progress</Option>\n            <Option value=\"COMPLETED\">Completed</Option>\n            <Option value=\"SUBMITTED\">Submitted</Option>\n          </Select>\n        </Col>\n        <Col xs={12} sm={8} md={8} lg={8}>\n          <div style={{ marginBottom: 4, fontSize: '12px', fontWeight: '500', color: '#666' }}>\n            Completion Filter\n          </div>\n          <Select\n            placeholder=\"Filter by Completion\"\n            value={completionFilter}\n            onChange={handleCompletionChange}\n            style={{ width: '100%' }}\n            allowClear\n          >\n            <Option value=\"all\">All Progress</Option>\n            <Option value=\"not-started\">Not Started (0%)</Option>\n            <Option value=\"in-progress\">In Progress (1-99%)</Option>\n            <Option value=\"completed\">Completed (100%)</Option>\n          </Select>\n        </Col>\n      </Row>\n\n      {/* Filter Presets */}\n      {filterPresets && filterPresets.length > 0 && (\n        <>\n          <Divider style={{ margin: '12px 0' }} />\n          <div style={{ marginBottom: 8 }}>\n            <span style={{ fontSize: '12px', fontWeight: '500', color: '#666' }}>\n              Quick Filters:\n            </span>\n          </div>\n          <Space wrap>\n            {filterPresets.map((preset) => (\n              <Button\n                key={preset.name}\n                size=\"small\"\n                type=\"default\"\n                onClick={() => handlePresetClick(preset.name)}\n                style={{ fontSize: '12px' }}\n              >\n                {preset.name}\n              </Button>\n            ))}\n          </Space>\n        </>\n      )}\n\n      {/* Active Filters Summary */}\n      {filterSummary?.hasActiveFilters && (\n        <>\n          <Divider style={{ margin: '12px 0' }} />\n          <div style={{ marginBottom: 8 }}>\n            <span style={{ fontSize: '12px', fontWeight: '500', color: '#666' }}>\n              Active Filters:\n            </span>\n          </div>\n          <Space wrap>\n            {filterSummary.activeFilters.map((filter, index) => (\n              <Tag key={index} color=\"blue\" style={{ fontSize: '11px' }}>\n                {filter}\n              </Tag>\n            ))}\n          </Space>\n          <div style={{ marginTop: 8, fontSize: '12px', color: '#666' }}>\n            Showing {filterSummary.totalFiltered} of {filterSummary.totalOriginal} workflows\n          </div>\n        </>\n      )}\n\n      {/* No Active Filters Message */}\n      {!filterSummary?.hasActiveFilters && (\n        <>\n          <Divider style={{ margin: '12px 0' }} />\n          <div style={{ fontSize: '12px', color: '#999', textAlign: 'center' }}>\n            No filters applied - showing all workflows\n          </div>\n        </>\n      )}\n    </Card>\n  );\n});\n\nFilterPanel.displayName = 'FilterPanel';\n\nFilterPanel.propTypes = {\n  searchText: PropTypes.string,\n  statusFilter: PropTypes.string,\n  completionFilter: PropTypes.string,\n  onSearchTextChange: PropTypes.func,\n  onStatusFilterChange: PropTypes.func,\n  onCompletionFilterChange: PropTypes.func,\n  onClearFilters: PropTypes.func,\n  onApplyPreset: PropTypes.func,\n  onSaveFilters: PropTypes.func,\n  filterPresets: PropTypes.arrayOf(PropTypes.shape({\n    name: PropTypes.string.isRequired,\n    filters: PropTypes.object.isRequired\n  })),\n  filterSummary: PropTypes.shape({\n    activeFilters: PropTypes.arrayOf(PropTypes.string),\n    hasActiveFilters: PropTypes.bool,\n    totalFiltered: PropTypes.number,\n    totalOriginal: PropTypes.number\n  })\n};\n\nFilterPanel.defaultProps = {\n  searchText: '',\n  statusFilter: 'all',\n  completionFilter: 'all',\n  onSearchTextChange: null,\n  onStatusFilterChange: null,\n  onCompletionFilterChange: null,\n  onClearFilters: null,\n  onApplyPreset: null,\n  onSaveFilters: null,\n  filterPresets: [],\n  filterSummary: null\n};\n\nexport default FilterPanel;","import {\n  ClockCircleOutlined,\n  CheckCircleOutlined,\n  ExclamationCircleOutlined,\n  BarChartOutlined\n} from '@ant-design/icons';\nimport { Card, Row, Col, Statistic, Progress, Alert } from 'antd';\nimport PropTypes from 'prop-types';\nimport React, { useMemo } from 'react';\n\n/**\n * PlantDashboard component displays summary statistics and progress for plant workflows\n * Optimized with React.memo and useMemo for performance\n */\nconst PlantDashboard = React.memo(({ \n  dashboardStats, \n  loading, \n  error, \n  currentPlant,\n  onRefresh \n}) => {\n  /**\n   * Calculate progress color based on completion percentage\n   */\n  const getProgressColor = useMemo(() => (percentage) => {\n    if (percentage >= 80) return '#52c41a'; // Green\n    if (percentage >= 60) return '#1890ff'; // Blue\n    if (percentage >= 40) return '#faad14'; // Yellow\n    if (percentage >= 20) return '#fa8c16'; // Orange\n    return '#ff4d4f'; // Red\n  }, []);\n\n  /**\n   * Calculate completion rate statistics\n   */\n  const completionStats = useMemo(() => {\n    const { totalWorkflows, completedCount, inProgressCount, draftCount } = dashboardStats;\n    \n    if (totalWorkflows === 0) {\n      return {\n        completionRate: 0,\n        inProgressRate: 0,\n        draftRate: 0\n      };\n    }\n\n    return {\n      completionRate: Math.round((completedCount / totalWorkflows) * 100),\n      inProgressRate: Math.round((inProgressCount / totalWorkflows) * 100),\n      draftRate: Math.round((draftCount / totalWorkflows) * 100)\n    };\n  }, [dashboardStats]);\n\n  /**\n   * Get status color for statistics\n   */\n  const getStatisticColor = useMemo(() => (type) => {\n    const colors = {\n      total: '#1890ff',\n      inProgress: '#fa8c16',\n      completed: '#52c41a',\n      average: '#52c41a'\n    };\n    return colors[type] || '#1890ff';\n  }, []);\n\n  if (error) {\n    return (\n      <Alert\n        message=\"Dashboard Error\"\n        description={`Failed to load dashboard data: ${error}`}\n        type=\"error\"\n        showIcon\n        style={{ marginBottom: 24 }}\n        action={\n          onRefresh && (\n            <button onClick={onRefresh} style={{ border: 'none', background: 'none', color: '#1890ff', cursor: 'pointer' }}>\n              Retry\n            </button>\n          )\n        }\n      />\n    );\n  }\n\n  return (\n    <div style={{ marginBottom: 24 }}>\n      {/* Main Statistics Row */}\n      <Row gutter={[16, 16]} style={{ marginBottom: 16 }}>\n        <Col xs={12} sm={6} md={6} lg={6}>\n          <Card loading={loading}>\n            <Statistic\n              title=\"Total Materials\"\n              value={dashboardStats.totalWorkflows || 0}\n              prefix={<ClockCircleOutlined />}\n              valueStyle={{ color: getStatisticColor('total') }}\n            />\n          </Card>\n        </Col>\n        <Col xs={12} sm={6} md={6} lg={6}>\n          <Card loading={loading}>\n            <Statistic\n              title=\"In Progress\"\n              value={dashboardStats.inProgressCount || 0}\n              prefix={<ExclamationCircleOutlined />}\n              valueStyle={{ color: getStatisticColor('inProgress') }}\n            />\n          </Card>\n        </Col>\n        <Col xs={12} sm={6} md={6} lg={6}>\n          <Card loading={loading}>\n            <Statistic\n              title=\"Completed\"\n              value={dashboardStats.completedCount || 0}\n              prefix={<CheckCircleOutlined />}\n              valueStyle={{ color: getStatisticColor('completed') }}\n            />\n          </Card>\n        </Col>\n        <Col xs={12} sm={6} md={6} lg={6}>\n          <Card loading={loading}>\n            <Statistic\n              title=\"Average Progress\"\n              value={dashboardStats.averageCompletion || 0}\n              suffix=\"%\"\n              prefix={<BarChartOutlined />}\n              valueStyle={{ color: getStatisticColor('average') }}\n            />\n          </Card>\n        </Col>\n      </Row>\n\n      {/* Progress Breakdown Row */}\n      <Row gutter={[16, 16]}>\n        <Col xs={24} sm={12} md={8} lg={8}>\n          <Card \n            title=\"Completion Rate\" \n            loading={loading}\n            size=\"small\"\n          >\n            <Progress\n              type=\"circle\"\n              percent={completionStats.completionRate}\n              strokeColor={getProgressColor(completionStats.completionRate)}\n              format={(percent) => `${percent}%`}\n              size={80}\n            />\n            <div style={{ textAlign: 'center', marginTop: 8, fontSize: '12px', color: '#666' }}>\n              {dashboardStats.completedCount} of {dashboardStats.totalWorkflows} completed\n            </div>\n          </Card>\n        </Col>\n        <Col xs={24} sm={12} md={8} lg={8}>\n          <Card \n            title=\"In Progress Rate\" \n            loading={loading}\n            size=\"small\"\n          >\n            <Progress\n              type=\"circle\"\n              percent={completionStats.inProgressRate}\n              strokeColor=\"#fa8c16\"\n              format={(percent) => `${percent}%`}\n              size={80}\n            />\n            <div style={{ textAlign: 'center', marginTop: 8, fontSize: '12px', color: '#666' }}>\n              {dashboardStats.inProgressCount} workflows active\n            </div>\n          </Card>\n        </Col>\n        <Col xs={24} sm={12} md={8} lg={8}>\n          <Card \n            title=\"Draft Rate\" \n            loading={loading}\n            size=\"small\"\n          >\n            <Progress\n              type=\"circle\"\n              percent={completionStats.draftRate}\n              strokeColor=\"#ff4d4f\"\n              format={(percent) => `${percent}%`}\n              size={80}\n            />\n            <div style={{ textAlign: 'center', marginTop: 8, fontSize: '12px', color: '#666' }}>\n              {dashboardStats.draftCount} not started\n            </div>\n          </Card>\n        </Col>\n      </Row>\n\n      {/* Plant Information */}\n      {currentPlant && (\n        <Alert\n          message={`Plant Dashboard - ${currentPlant}`}\n          description=\"Overview of all assigned materials and their completion status for the selected plant.\"\n          type=\"info\"\n          showIcon\n          style={{ marginTop: 16 }}\n        />\n      )}\n    </div>\n  );\n});\n\nPlantDashboard.displayName = 'PlantDashboard';\n\nPlantDashboard.propTypes = {\n  dashboardStats: PropTypes.shape({\n    totalWorkflows: PropTypes.number,\n    completedCount: PropTypes.number,\n    inProgressCount: PropTypes.number,\n    draftCount: PropTypes.number,\n    averageCompletion: PropTypes.number,\n    completedToday: PropTypes.number\n  }).isRequired,\n  loading: PropTypes.bool,\n  error: PropTypes.string,\n  currentPlant: PropTypes.string,\n  onRefresh: PropTypes.func\n};\n\nPlantDashboard.defaultProps = {\n  loading: false,\n  error: null,\n  currentPlant: null,\n  onRefresh: null\n};\n\nexport default PlantDashboard;","import {\n  FormOutlined,\n  EyeOutlined,\n  SearchOutlined\n} from '@ant-design/icons';\nimport { Table, Button, Space, Tag, Progress, Input } from 'antd';\nimport PropTypes from 'prop-types';\nimport React, { useMemo, useCallback } from 'react';\n\nimport { PAGINATION } from '../../constants';\n\n/**\n * WorkflowTable component displays workflows in a table format with sorting, filtering, and actions\n * Optimized with React.memo and performance optimizations\n */\nconst WorkflowTable = React.memo(({ \n  workflows, \n  loading, \n  onStartQuestionnaire, \n  onViewWorkflow,\n  onRefresh \n}) => {\n  /**\n   * Get status color for workflow status tags\n   */\n  const getStatusColor = useCallback((status) => {\n    const colors = {\n      DRAFT: 'default',\n      IN_PROGRESS: 'processing',\n      COMPLETED: 'success',\n      SUBMITTED: 'success'\n    };\n    return colors[status] || 'default';\n  }, []);\n\n  /**\n   * Get completion color based on percentage\n   */\n  const getCompletionColor = useCallback((percentage) => {\n    if (percentage === 100) return '#52c41a';\n    if (percentage >= 75) return '#1890ff';\n    if (percentage >= 50) return '#faad14';\n    if (percentage >= 25) return '#fa8c16';\n    return '#ff4d4f';\n  }, []);\n\n  /**\n   * Calculate days in current state\n   */\n  const getDaysInState = useCallback((lastModified) => {\n    if (!lastModified) return 0;\n    const now = new Date();\n    const modified = new Date(lastModified);\n    const diffTime = Math.abs(now - modified);\n    return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n  }, []);\n\n  /**\n   * Handle start questionnaire action\n   */\n  const handleStartQuestionnaire = useCallback((workflow) => {\n    if (onStartQuestionnaire) {\n      onStartQuestionnaire(workflow);\n    }\n  }, [onStartQuestionnaire]);\n\n  /**\n   * Handle view workflow action\n   */\n  const handleViewWorkflow = useCallback((workflow) => {\n    if (onViewWorkflow) {\n      onViewWorkflow(workflow);\n    } else {\n      console.log('View workflow:', workflow.id);\n    }\n  }, [onViewWorkflow]);\n\n  /**\n   * Table columns configuration with memoization\n   */\n  const columns = useMemo(() => [\n    {\n      title: 'Material Code',\n      dataIndex: 'materialCode',\n      key: 'materialCode',\n      width: 140,\n      sorter: (a, b) => a.materialCode.localeCompare(b.materialCode),\n      filterDropdown: ({ setSelectedKeys, selectedKeys, confirm, clearFilters }) => (\n        <div style={{ padding: 8 }}>\n          <Input\n            placeholder=\"Search Material Code\"\n            value={selectedKeys[0]}\n            onChange={e => setSelectedKeys(e.target.value ? [e.target.value] : [])}\n            onPressEnter={() => confirm()}\n            style={{ width: 188, marginBottom: 8, display: 'block' }}\n          />\n          <Space>\n            <Button\n              type=\"primary\"\n              onClick={() => confirm()}\n              icon={<SearchOutlined />}\n              size=\"small\"\n              style={{ width: 90 }}\n            >\n              Search\n            </Button>\n            <Button onClick={() => clearFilters()} size=\"small\" style={{ width: 90 }}>\n              Reset\n            </Button>\n          </Space>\n        </div>\n      ),\n      filterIcon: filtered => (\n        <SearchOutlined style={{ color: filtered ? '#1890ff' : undefined }} />\n      ),\n      onFilter: (value, record) => record.materialCode.toLowerCase().includes(value.toLowerCase()),\n      render: (text, record) => (\n        <div>\n          <div style={{ fontWeight: 'bold' }}>{text}</div>\n          <div style={{ fontSize: '12px', color: '#666' }}>\n            {record.materialName || record.itemDescription || 'Material Name'}\n          </div>\n        </div>\n      )\n    },\n    {\n      title: 'Plant Code',\n      dataIndex: 'plantCode',\n      key: 'plantCode',\n      width: 120,\n      sorter: (a, b) => (a.plantCode || '').localeCompare(b.plantCode || ''),\n      filterDropdown: ({ setSelectedKeys, selectedKeys, confirm, clearFilters }) => (\n        <div style={{ padding: 8 }}>\n          <Input\n            placeholder=\"Search Plant Code\"\n            value={selectedKeys[0]}\n            onChange={e => setSelectedKeys(e.target.value ? [e.target.value] : [])}\n            onPressEnter={() => confirm()}\n            style={{ width: 188, marginBottom: 8, display: 'block' }}\n          />\n          <Space>\n            <Button\n              type=\"primary\"\n              onClick={() => confirm()}\n              icon={<SearchOutlined />}\n              size=\"small\"\n              style={{ width: 90 }}\n            >\n              Search\n            </Button>\n            <Button onClick={() => clearFilters()} size=\"small\" style={{ width: 90 }}>\n              Reset\n            </Button>\n          </Space>\n        </div>\n      ),\n      filterIcon: filtered => (\n        <SearchOutlined style={{ color: filtered ? '#1890ff' : undefined }} />\n      ),\n      onFilter: (value, record) =>\n        (record.plantCode || '').toLowerCase().includes(value.toLowerCase()),\n      render: text => (\n        <Tag color=\"blue\" style={{ fontWeight: 'bold' }}>\n          {text || 'N/A'}\n        </Tag>\n      )\n    },\n\n    {\n      title: 'Status',\n      dataIndex: 'completionStatus',\n      key: 'completionStatus',\n      width: 120,\n      filters: [\n        { text: 'Draft', value: 'DRAFT' },\n        { text: 'In Progress', value: 'IN_PROGRESS' },\n        { text: 'Completed', value: 'COMPLETED' },\n        { text: 'Submitted', value: 'SUBMITTED' }\n      ],\n      onFilter: (value, record) => record.completionStatus === value,\n      render: status => <Tag color={getStatusColor(status)}>{status.replace('_', ' ')}</Tag>\n    },\n    {\n      title: 'Progress',\n      key: 'progress',\n      width: 150,\n      sorter: (a, b) => a.completionPercentage - b.completionPercentage,\n      render: (_, record) => {\n        const percentage = record.completionPercentage || 0;\n        return (\n          <div>\n            <Progress\n              percent={percentage}\n              size=\"small\"\n              strokeColor={getCompletionColor(percentage)}\n              format={() => `${percentage}%`}\n            />\n            <div style={{ fontSize: '11px', color: '#666', marginTop: 2 }}>\n              {record.completedFields || 0} / {record.totalFields || 0} fields\n            </div>\n          </div>\n        );\n      }\n    },\n    {\n      title: 'Days Pending',\n      key: 'daysPending',\n      width: 100,\n      sorter: (a, b) => getDaysInState(a.lastModified) - getDaysInState(b.lastModified),\n      render: (_, record) => {\n        const days = getDaysInState(record.lastModified);\n        return <span style={{ color: days > 3 ? '#ff4d4f' : 'inherit' }}>{days}</span>;\n      }\n    },\n    {\n      title: 'Open Queries',\n      dataIndex: 'openQueries',\n      key: 'openQueries',\n      width: 100,\n      sorter: (a, b) => (a.openQueries || 0) - (b.openQueries || 0),\n      render: count => (count > 0 ? <Tag color=\"red\">{count}</Tag> : <Tag color=\"green\">0</Tag>)\n    },\n    {\n      title: 'Actions',\n      key: 'actions',\n      width: 150,\n      render: (_, record) => (\n        <Space>\n          <Button\n            type=\"primary\"\n            size=\"small\"\n            icon={<FormOutlined />}\n            onClick={() => handleStartQuestionnaire(record)}\n            disabled={record.isSubmitted}\n          >\n            {record.completionPercentage > 0 ? 'Continue' : 'Start'}\n          </Button>\n          <Button\n            size=\"small\"\n            icon={<EyeOutlined />}\n            onClick={() => handleViewWorkflow(record)}\n          >\n            View\n          </Button>\n        </Space>\n      )\n    }\n  ], [getStatusColor, getCompletionColor, getDaysInState, handleStartQuestionnaire, handleViewWorkflow]);\n\n  /**\n   * Row class name for styling overdue rows\n   */\n  const getRowClassName = useCallback((record) => {\n    const days = getDaysInState(record.lastModified);\n    return days > 3 ? 'overdue-row' : '';\n  }, [getDaysInState]);\n\n  /**\n   * Pagination configuration\n   */\n  const paginationConfig = useMemo(() => ({\n    pageSize: PAGINATION.DEFAULT_PAGE_SIZE,\n    showSizeChanger: true,\n    showQuickJumper: true,\n    showTotal: (total, range) => `${range[0]}-${range[1]} of ${total} materials`,\n    pageSizeOptions: ['10', '20', '50', '100']\n  }), []);\n\n  return (\n    <>\n      <Table\n        dataSource={workflows}\n        columns={columns}\n        loading={loading}\n        rowKey=\"id\"\n        pagination={paginationConfig}\n        rowClassName={getRowClassName}\n        scroll={{ x: 1200 }}\n        size=\"small\"\n        bordered\n        title={() => (\n          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n            <span style={{ fontWeight: 'bold' }}>\n              Assigned Materials ({workflows.length})\n            </span>\n            {onRefresh && (\n              <Button onClick={onRefresh} loading={loading} size=\"small\">\n                Refresh\n              </Button>\n            )}\n          </div>\n        )}\n      />\n      \n      {/* Custom styles for overdue rows */}\n      <style>{`\n        .overdue-row {\n          background-color: #fff2f0;\n        }\n        .overdue-row:hover {\n          background-color: #ffebe6 !important;\n        }\n        .ant-table-tbody > tr.overdue-row > td {\n          border-bottom: 1px solid #ffccc7;\n        }\n      `}</style>\n    </>\n  );\n});\n\nWorkflowTable.displayName = 'WorkflowTable';\n\nWorkflowTable.propTypes = {\n  workflows: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    materialCode: PropTypes.string.isRequired,\n    plantCode: PropTypes.string,\n\n    completionStatus: PropTypes.string.isRequired,\n    completionPercentage: PropTypes.number,\n    totalFields: PropTypes.number,\n    completedFields: PropTypes.number,\n    lastModified: PropTypes.string,\n    openQueries: PropTypes.number,\n    isSubmitted: PropTypes.bool,\n    materialName: PropTypes.string,\n    itemDescription: PropTypes.string\n  })).isRequired,\n  loading: PropTypes.bool,\n  onStartQuestionnaire: PropTypes.func,\n  onViewWorkflow: PropTypes.func,\n  onRefresh: PropTypes.func\n};\n\nWorkflowTable.defaultProps = {\n  loading: false,\n  onStartQuestionnaire: null,\n  onViewWorkflow: null,\n  onRefresh: null\n};\n\nexport default WorkflowTable;","import {\n  InfoCircleOutlined,\n  FileTextOutlined,\n  TeamOutlined,\n  CalendarOutlined,\n  DownloadOutlined,\n  WarningOutlined\n} from '@ant-design/icons';\nimport {\n  Card,\n  Descriptions,\n  Tag,\n  Space,\n  Button,\n  Collapse,\n  Alert,\n  Divider,\n  Typography,\n  Tooltip,\n  Badge,\n  Spin,\n  Progress,\n  message\n} from 'antd';\nimport React, { useState, useEffect, useCallback } from 'react';\n\nimport { workflowAPI } from '../services/workflowAPI';\n\nconst { Panel } = Collapse;\nconst { Text } = Typography;\n\nconst MaterialContextPanel = ({ workflowData }) => {\n  const [loading, setLoading] = useState(false);\n  const [jvcDocuments, setJvcDocuments] = useState([]);\n  const [expanded, setExpanded] = useState(['basic', 'workflow', 'jvc-data']);\n\n  const loadJvcDocuments = useCallback(async () => {\n    try {\n      setLoading(true);\n      \n      // Get reusable documents for the same project/material combination\n      if (workflowData?.projectCode && workflowData?.materialCode) {\n        const documents = await workflowAPI.getReusableDocuments(\n          workflowData.projectCode, \n          workflowData.materialCode\n        );\n        setJvcDocuments(documents || []);\n      } else {\n        // Fallback to workflow documents if project/material codes are not available\n        const documents = await workflowAPI.getWorkflowDocuments(workflowData.id);\n        setJvcDocuments(documents || []);\n      }\n    } catch (error) {\n      console.error('Failed to load JVC documents:', error);\n      setJvcDocuments([]);\n    } finally {\n      setLoading(false);\n    }\n  }, [workflowData?.id, workflowData?.projectCode, workflowData?.materialCode]);\n\n  useEffect(() => {\n    if (workflowData?.id) {\n      loadJvcDocuments();\n    }\n  }, [workflowData?.id, workflowData?.projectCode, workflowData?.materialCode, loadJvcDocuments]);\n\n  const getStateColor = state => {\n    const colors = {\n      JVC_PENDING: 'blue',\n      PLANT_PENDING: 'orange',\n      CQS_PENDING: 'purple',\n      TECH_PENDING: 'cyan',\n      COMPLETED: 'green'\n    };\n    return colors[state] || 'default';\n  };\n\n  const getStateName = state => {\n    const names = {\n      JVC_PENDING: 'JVC Pending',\n      PLANT_PENDING: 'Plant Pending',\n      CQS_PENDING: 'CQS Pending',\n      TECH_PENDING: 'Tech Pending',\n      COMPLETED: 'Completed'\n    };\n    return names[state] || state;\n  };\n\n  const formatDate = dateString => {\n    if (!dateString) {\n      return 'N/A';\n    }\n    return new Date(dateString).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  const calculateDaysInState = lastModified => {\n    if (!lastModified) {\n      return 0;\n    }\n    const now = new Date();\n    const modified = new Date(lastModified);\n    const diffTime = Math.abs(now - modified);\n    return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n  };\n\n  const handleDocumentDownload = async (documentId, filename) => {\n    try {\n      console.log('Downloading document:', { documentId, filename });\n      const blob = await workflowAPI.downloadDocument(documentId);\n      console.log('Download blob received:', blob);\n      \n      const url = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = filename || `document_${documentId}`;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(url);\n      \n      message.success(`Downloaded ${filename || 'document'}`);\n    } catch (error) {\n      console.error('Failed to download document:', error);\n      message.error(`Failed to download document: ${error.message || 'Unknown error'}`);\n    }\n  };\n\n\n\n  if (!workflowData) {\n    return (\n      <Card title=\"Material Context\" style={{ height: 'fit-content' }}>\n        <Alert\n          message=\"No Material Data\"\n          description=\"Material context will appear here once a workflow is selected.\"\n          type=\"info\"\n          showIcon\n        />\n      </Card>\n    );\n  }\n\n  const daysInCurrentState = calculateDaysInState(workflowData.lastModified);\n  const isOverdue = daysInCurrentState > 3;\n\n  return (\n    <Card\n      title={\n        <Space>\n          <InfoCircleOutlined />\n          Material Context\n          {isOverdue && <Badge status=\"error\" text={`${daysInCurrentState} days`} />}\n        </Space>\n      }\n      style={{ height: 'fit-content', position: 'sticky', top: 24 }}\n      size=\"small\"\n    >\n      <Collapse activeKey={expanded} onChange={setExpanded} ghost size=\"small\">\n        {/* Basic Material Information */}\n        <Panel\n          header={\n            <Space>\n              <FileTextOutlined />\n              <strong>Basic Information</strong>\n            </Space>\n          }\n          key=\"basic\"\n        >\n          <Descriptions column={1} size=\"small\">\n            <Descriptions.Item label=\"Material Code\">\n              <Text strong>{workflowData.materialCode}</Text>\n            </Descriptions.Item>\n            <Descriptions.Item label=\"Material Name\">\n              {workflowData.materialName || 'Not specified'}\n            </Descriptions.Item>\n            <Descriptions.Item label=\"Assigned Plant\">\n              <Tag color=\"blue\">{workflowData.assignedPlant}</Tag>\n            </Descriptions.Item>\n            <Descriptions.Item label=\"Initiated By\">\n              <Space>\n                <TeamOutlined />\n                {workflowData.initiatedBy}\n              </Space>\n            </Descriptions.Item>\n            <Descriptions.Item label=\"Created\">\n              <Space>\n                <CalendarOutlined />\n                {formatDate(workflowData.createdAt)}\n              </Space>\n            </Descriptions.Item>\n          </Descriptions>\n        </Panel>\n\n        {/* Workflow Status */}\n        <Panel\n          header={\n            <Space>\n              <TeamOutlined />\n              <strong>Workflow Status</strong>\n              {isOverdue && <WarningOutlined style={{ color: '#ff4d4f' }} />}\n            </Space>\n          }\n          key=\"workflow\"\n        >\n          <Space direction=\"vertical\" style={{ width: '100%' }}>\n            <div>\n              <Text strong>Current State:</Text>\n              <div style={{ marginTop: 4 }}>\n                <Tag color={getStateColor(workflowData.state)}>\n                  {getStateName(workflowData.state)}\n                </Tag>\n              </div>\n            </div>\n\n            <div>\n              <Text strong>Time in Current State:</Text>\n              <div style={{ marginTop: 4 }}>\n                <Text style={{ color: isOverdue ? '#ff4d4f' : 'inherit' }}>\n                  {daysInCurrentState} day{daysInCurrentState !== 1 ? 's' : ''}\n                  {isOverdue && ' (Overdue)'}\n                </Text>\n              </div>\n            </div>\n\n            <div>\n              <Text strong>Last Modified:</Text>\n              <div style={{ marginTop: 4 }}>\n                <Text type=\"secondary\">{formatDate(workflowData.lastModified)}</Text>\n              </div>\n            </div>\n\n            {workflowData.totalQueries > 0 && (\n              <div>\n                <Text strong>Queries:</Text>\n                <div style={{ marginTop: 4 }}>\n                  <Space>\n                    <Tag color=\"red\">{workflowData.openQueries || 0} Open</Tag>\n                    <Tag color=\"green\">\n                      {(workflowData.totalQueries || 0) - (workflowData.openQueries || 0)} Resolved\n                    </Tag>\n                  </Space>\n                </div>\n              </div>\n            )}\n\n            {/* Progress indicator */}\n            {workflowData.completionPercentage !== undefined && (\n              <div>\n                <Text strong>Completion Progress:</Text>\n                <div style={{ marginTop: 4 }}>\n                  <Progress\n                    percent={workflowData.completionPercentage}\n                    size=\"small\"\n                    status={workflowData.completionPercentage === 100 ? 'success' : 'active'}\n                  />\n                </div>\n              </div>\n            )}\n          </Space>\n        </Panel>\n\n        {/* JVC Provided Documents */}\n        <Panel\n          header={\n            <Space>\n              <FileTextOutlined />\n              <strong>JVC Documents</strong>\n              <Badge count={jvcDocuments.length} size=\"small\" />\n            </Space>\n          }\n          key=\"documents\"\n        >\n          {loading ? (\n            <div style={{ textAlign: 'center', padding: '20px' }}>\n              <Spin size=\"small\" />\n            </div>\n          ) : jvcDocuments.length > 0 ? (\n            <Space direction=\"vertical\" style={{ width: '100%' }}>\n              {jvcDocuments.map((doc, index) => (\n                <Card\n                  key={doc.id || index}\n                  size=\"small\"\n                  style={{ marginBottom: 8 }}\n                  styles={{ body: { padding: '8px 12px' } }}\n                >\n                  <div style={{ marginBottom: 4 }}>\n                    <Text strong style={{ fontSize: '12px' }}>\n                      {doc.originalFileName || doc.fileName || `Document ${index + 1}`}\n                    </Text>\n                  </div>\n                  <div style={{ marginBottom: 8 }}>\n                    <Text type=\"secondary\" style={{ fontSize: '11px' }}>\n                      {doc.sourceDescription || \n                       `${doc.documentSource || 'Document'} • ${doc.fileType?.toUpperCase() || 'File'} • ${\n                         doc.fileSize ? `${(doc.fileSize / 1024 / 1024).toFixed(1)} MB` : 'Unknown size'\n                       } • Uploaded by ${doc.uploadedBy || 'Unknown'}`}\n                    </Text>\n                  </div>\n                  <div style={{ textAlign: 'right' }}>\n                    <Tooltip title=\"Download document\">\n                      <Button\n                        type=\"primary\"\n                        size=\"small\"\n                        icon={<DownloadOutlined />}\n                        onClick={() => handleDocumentDownload(doc.id, doc.originalFileName || doc.fileName)}\n                      >\n                        Download\n                      </Button>\n                    </Tooltip>\n                  </div>\n                </Card>\n              ))}\n            </Space>\n          ) : (\n            <Alert\n              message=\"No Documents\"\n              description=\"No documents have been provided by the JVC team for this material.\"\n              type=\"info\"\n              showIcon\n              size=\"small\"\n            />\n          )}\n        </Panel>\n\n        {/* Enhanced JVC Material Data */}\n        <Panel\n          header={\n            <Space>\n              <InfoCircleOutlined />\n              <strong>JVC Material Data</strong>\n              <Tooltip title=\"Information provided by JVC team for questionnaire completion\">\n                <InfoCircleOutlined style={{ fontSize: '12px', color: '#1890ff' }} />\n              </Tooltip>\n            </Space>\n          }\n          key=\"jvc-data\"\n        >\n          <Descriptions column={1} size=\"small\">\n            <Descriptions.Item label=\"Material Category\">\n              <Tag color=\"blue\">{workflowData.materialCategory || 'Not specified'}</Tag>\n            </Descriptions.Item>\n\n            <Descriptions.Item label=\"Supplier Information\">\n              <Space direction=\"vertical\" size=\"small\" style={{ width: '100%' }}>\n                <div>\n                  <Text strong style={{ fontSize: '11px' }}>\n                    Supplier Name:\n                  </Text>\n                  <div style={{ fontSize: '12px' }}>\n                    {workflowData.supplierName || 'Not specified'}\n                  </div>\n                </div>\n                <div>\n                  <Text strong style={{ fontSize: '11px' }}>\n                    Supplier Code:\n                  </Text>\n                  <div style={{ fontSize: '12px' }}>\n                    {workflowData.supplierCode || 'Not specified'}\n                  </div>\n                </div>\n                <div>\n                  <Text strong style={{ fontSize: '11px' }}>\n                    Contact Info:\n                  </Text>\n                  <div style={{ fontSize: '12px' }}>\n                    {workflowData.supplierContact || 'Not provided'}\n                  </div>\n                </div>\n              </Space>\n            </Descriptions.Item>\n\n            <Descriptions.Item label=\"Purchase Information\">\n              <Space direction=\"vertical\" size=\"small\" style={{ width: '100%' }}>\n                <div>\n                  <Text strong style={{ fontSize: '11px' }}>\n                    Purchase Order:\n                  </Text>\n                  <div style={{ fontSize: '12px' }}>\n                    {workflowData.purchaseOrder || 'Not specified'}\n                  </div>\n                </div>\n                <div>\n                  <Text strong style={{ fontSize: '11px' }}>\n                    Quantity Ordered:\n                  </Text>\n                  <div style={{ fontSize: '12px' }}>\n                    {workflowData.quantityOrdered || 'Not specified'}\n                  </div>\n                </div>\n                <div>\n                  <Text strong style={{ fontSize: '11px' }}>\n                    Expected Delivery:\n                  </Text>\n                  <div style={{ fontSize: '12px' }}>\n                    {workflowData.expectedDelivery\n                      ? formatDate(workflowData.expectedDelivery)\n                      : 'Not specified'}\n                  </div>\n                </div>\n              </Space>\n            </Descriptions.Item>\n\n            <Descriptions.Item label=\"Usage & Application\">\n              <Space direction=\"vertical\" size=\"small\" style={{ width: '100%' }}>\n                <div>\n                  <Text strong style={{ fontSize: '11px' }}>\n                    Expected Usage:\n                  </Text>\n                  <div style={{ fontSize: '12px' }}>\n                    {workflowData.expectedUsage || 'Not specified'}\n                  </div>\n                </div>\n                <div>\n                  <Text strong style={{ fontSize: '11px' }}>\n                    Application Area:\n                  </Text>\n                  <div style={{ fontSize: '12px' }}>\n                    {workflowData.applicationArea || 'Not specified'}\n                  </div>\n                </div>\n                <div>\n                  <Text strong style={{ fontSize: '11px' }}>\n                    Process Requirements:\n                  </Text>\n                  <div style={{ fontSize: '12px' }}>\n                    {workflowData.processRequirements || 'Standard processing'}\n                  </div>\n                </div>\n              </Space>\n            </Descriptions.Item>\n\n            <Descriptions.Item label=\"Regulatory Requirements\">\n              <div\n                style={{\n                  padding: '6px 8px',\n                  backgroundColor: '#fff7e6',\n                  border: '1px solid #ffd591',\n                  borderRadius: '4px',\n                  fontSize: '12px'\n                }}\n              >\n                {workflowData.regulatoryRequirements || 'Standard compliance required'}\n              </div>\n            </Descriptions.Item>\n\n            <Descriptions.Item label=\"Special Instructions\">\n              {workflowData.specialInstructions ? (\n                <div\n                  style={{\n                    padding: '6px 8px',\n                    backgroundColor: '#f6ffed',\n                    border: '1px solid #b7eb8f',\n                    borderRadius: '4px',\n                    fontSize: '12px'\n                  }}\n                >\n                  {workflowData.specialInstructions}\n                </div>\n              ) : (\n                <Text type=\"secondary\" style={{ fontSize: '12px' }}>\n                  None\n                </Text>\n              )}\n            </Descriptions.Item>\n\n            <Descriptions.Item label=\"Priority & Impact\">\n              <Space direction=\"vertical\" size=\"small\" style={{ width: '100%' }}>\n                <div>\n                  <Text strong style={{ fontSize: '11px' }}>\n                    Urgency Level:\n                  </Text>\n                  <div style={{ marginTop: 2 }}>\n                    <Tag\n                      color={\n                        workflowData.urgencyLevel === 'HIGH'\n                          ? 'red'\n                          : workflowData.urgencyLevel === 'MEDIUM'\n                            ? 'orange'\n                            : 'green'\n                      }\n                    >\n                      {workflowData.urgencyLevel || 'NORMAL'}\n                    </Tag>\n                  </div>\n                </div>\n                <div>\n                  <Text strong style={{ fontSize: '11px' }}>\n                    Business Impact:\n                  </Text>\n                  <div style={{ fontSize: '12px', marginTop: 2 }}>\n                    {workflowData.businessImpact || 'Standard processing'}\n                  </div>\n                </div>\n                <div>\n                  <Text strong style={{ fontSize: '11px' }}>\n                    Cost Center:\n                  </Text>\n                  <div style={{ fontSize: '12px', marginTop: 2 }}>\n                    {workflowData.costCenter || 'Not specified'}\n                  </div>\n                </div>\n              </Space>\n            </Descriptions.Item>\n          </Descriptions>\n\n          {workflowData.jvcNotes && (\n            <div style={{ marginTop: 12 }}>\n              <Text strong style={{ fontSize: '12px' }}>\n                JVC Notes:\n              </Text>\n              <div\n                style={{\n                  marginTop: 4,\n                  padding: '8px',\n                  backgroundColor: '#f6ffed',\n                  border: '1px solid #b7eb8f',\n                  borderRadius: '4px',\n                  fontSize: '12px',\n                  whiteSpace: 'pre-wrap'\n                }}\n              >\n                {workflowData.jvcNotes}\n              </div>\n            </div>\n          )}\n\n          {/* Known Material Properties */}\n          {workflowData.knownProperties && Object.keys(workflowData.knownProperties).length > 0 && (\n            <div style={{ marginTop: 12 }}>\n              <Text strong style={{ fontSize: '12px' }}>\n                Known Properties:\n              </Text>\n              <div\n                style={{\n                  marginTop: 4,\n                  padding: '8px',\n                  backgroundColor: '#f0f5ff',\n                  border: '1px solid #adc6ff',\n                  borderRadius: '4px',\n                  fontSize: '11px'\n                }}\n              >\n                {Object.entries(workflowData.knownProperties).map(([key, value]) => (\n                  <div key={key} style={{ marginBottom: 2 }}>\n                    <strong>\n                      {key.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase())}:\n                    </strong>{' '}\n                    {value}\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Additional Context for Plant Team */}\n          <Divider style={{ margin: '12px 0 8px 0' }} />\n          <div style={{ fontSize: '11px', color: '#666' }}>\n            <Text strong>For Plant Team Reference:</Text>\n            <ul style={{ margin: '4px 0 0 16px', padding: 0 }}>\n              <li>Review all JVC-provided information before starting questionnaire</li>\n              <li>Use this context when raising queries to other teams</li>\n              <li>Reference material ID and supplier details in communications</li>\n              <li>Contact JVC team for clarification on any provided data</li>\n              <li>Consider regulatory requirements when completing safety sections</li>\n            </ul>\n          </div>\n        </Panel>\n\n        {/* Material Specifications */}\n        {workflowData.specifications && (\n          <Panel\n            header={\n              <Space>\n                <InfoCircleOutlined />\n                <strong>Technical Specifications</strong>\n              </Space>\n            }\n            key=\"specifications\"\n          >\n            <Descriptions column={1} size=\"small\">\n              {Object.entries(workflowData.specifications).map(([key, value]) => (\n                <Descriptions.Item\n                  key={key}\n                  label={key.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase())}\n                >\n                  {typeof value === 'object' ? JSON.stringify(value) : String(value)}\n                </Descriptions.Item>\n              ))}\n            </Descriptions>\n          </Panel>\n        )}\n\n        {/* Safety Notes */}\n        {workflowData.safetyNotes && (\n          <Panel\n            header={\n              <Space>\n                <WarningOutlined />\n                <strong>Safety Notes</strong>\n              </Space>\n            }\n            key=\"safety\"\n          >\n            <Alert\n              message=\"Important Safety Information\"\n              description={workflowData.safetyNotes}\n              type=\"warning\"\n              showIcon\n              size=\"small\"\n            />\n          </Panel>\n        )}\n      </Collapse>\n\n      <Divider style={{ margin: '12px 0' }} />\n{/* \n      Quick Actions\n      <Space direction=\"vertical\" style={{ width: '100%' }}>\n        <Text strong style={{ fontSize: '12px' }}>\n          Quick Actions:\n        </Text>\n        <Space wrap>\n          <Button size=\"small\" type=\"link\" style={{ padding: '0 4px', height: 'auto' }}>\n            View Full History\n          </Button>\n          <Button size=\"small\" type=\"link\" style={{ padding: '0 4px', height: 'auto' }}>\n            Contact JVC\n          </Button>\n          <Button size=\"small\" type=\"link\" style={{ padding: '0 4px', height: 'auto' }}>\n            Export Data\n          </Button>\n        </Space>\n      </Space> */}\n    </Card>\n  );\n};\n\nexport default MaterialContextPanel;\n","import {\n  QuestionCircleOutlined,\n  InfoCircleOutlined,\n  ExclamationCircleOutlined,\n  PaperClipOutlined\n} from '@ant-design/icons';\nimport {\n  Modal,\n  Form,\n  Input,\n  Select,\n  Radio,\n  Button,\n  Space,\n  Alert,\n  Divider,\n  Tag,\n  message,\n  Collapse\n} from 'antd';\nimport React, { useState } from 'react';\n\nimport { queryAPI } from '../services/queryAPI';\n\nimport QueryDocumentUpload from './QueryDocumentUpload';\nimport SecureForm, { SecureInput, SecureTextArea, SecureFormItem } from './SecureForm';\n\nconst { TextArea } = Input;\nconst { Option } = Select;\n\nconst QueryRaisingModal = ({ open, visible, onCancel, onSubmit, workflowId, fieldContext }) => {\n  const [form] = Form.useForm();\n  const [loading, setLoading] = useState(false);\n  const [uploadedDocuments, setUploadedDocuments] = useState([]);\n  const [createdQueryId, setCreatedQueryId] = useState(null);\n\n  console.log('QueryRaisingModal props:', { open, visible, workflowId, fieldContext });\n\n  const handleSubmit = async values => {\n    try {\n      setLoading(true);\n\n      const queryData = {\n        question: values.question,\n        assignedTeam: values.assignedTeam, // This should be 'CQS', 'TECH', or 'JVC'\n        priorityLevel: values.priority || 'MEDIUM',\n        fieldName: fieldContext?.name,\n        stepNumber: fieldContext?.stepNumber,\n        queryCategory: 'GENERAL' // Default category\n      };\n\n      const createdQuery = await queryAPI.createQuery(workflowId, queryData);\n      setCreatedQueryId(createdQuery.id);\n\n      message.success('Query created successfully! You can now attach documents if needed.');\n      \n      // Don't close the modal immediately - allow user to upload documents\n      // The modal will close when they click \"Done\" or \"Cancel\"\n      \n    } catch (error) {\n      console.error('Failed to create query:', error);\n      message.error('Failed to raise query. Please try again.');\n      setLoading(false);\n    }\n  };\n\n  // const getCurrentUser = () => { // Not currently used\n  //   return localStorage.getItem('username') || 'current_user';\n  // };\n\n  const handleCancel = () => {\n    form.resetFields();\n    setUploadedDocuments([]);\n    setCreatedQueryId(null);\n    onCancel();\n  };\n\n  // Handle document upload completion\n  const handleDocumentUpload = (documents) => {\n    setUploadedDocuments(prev => [...prev, ...documents]);\n    message.success(`${documents.length} document(s) uploaded successfully`);\n  };\n\n  // const getTeamDescription = team => { // Not currently used\n  //   const descriptions = {\n  //     CQS: 'Chemical Quality & Safety team - for safety data, hazard classifications, and regulatory compliance questions',\n  //     TECH: 'Technical team - for technical specifications, physical properties, and process-related questions',\n  //     JVC: 'JVC team - for material identification, supplier information, and general material questions'\n  //   };\n  //   return descriptions[team] || '';\n  // };\n\n  const getPriorityColor = priority => {\n    const colors = {\n      LOW: 'green',\n      MEDIUM: 'blue',\n      HIGH: 'orange',\n      URGENT: 'red'\n    };\n    return colors[priority] || 'default';\n  };\n\n  const getRecommendedTeam = fieldContext => {\n    if (!fieldContext || !fieldContext.name) {\n      return null;\n    }\n\n    const fieldName = fieldContext.name.toLowerCase();\n    const stepTitle = fieldContext.stepTitle?.toLowerCase() || '';\n    const fieldLabel = fieldContext.label?.toLowerCase() || '';\n\n    // Enhanced smart team recommendation with confidence scoring\n    // const recommendations = []; // Not currently used\n\n    // CQS Team scoring\n    let cqsScore = 0;\n    const cqsKeywords = [\n      'hazard',\n      'safety',\n      'precautionary',\n      'environmental',\n      'toxic',\n      'corrosive',\n      'flammable',\n      'classification',\n      'ghs',\n      'signal',\n      'statement'\n    ];\n    cqsKeywords.forEach(keyword => {\n      if (\n        fieldName.includes(keyword) ||\n        stepTitle.includes(keyword) ||\n        fieldLabel.includes(keyword)\n      ) {\n        cqsScore += 1;\n      }\n    });\n\n    // Technical Team scoring\n    let techScore = 0;\n    const techKeywords = [\n      'physical',\n      'boiling',\n      'melting',\n      'technical',\n      'properties',\n      'temperature',\n      'state',\n      'color',\n      'odor',\n      'specification'\n    ];\n    techKeywords.forEach(keyword => {\n      if (\n        fieldName.includes(keyword) ||\n        stepTitle.includes(keyword) ||\n        fieldLabel.includes(keyword)\n      ) {\n        techScore += 1;\n      }\n    });\n\n    // JVC Team scoring\n    let jvcScore = 0;\n    const jvcKeywords = [\n      'material',\n      'supplier',\n      'cas',\n      'basic',\n      'information',\n      'name',\n      'identification',\n      'type'\n    ];\n    jvcKeywords.forEach(keyword => {\n      if (\n        fieldName.includes(keyword) ||\n        stepTitle.includes(keyword) ||\n        fieldLabel.includes(keyword)\n      ) {\n        jvcScore += 1;\n      }\n    });\n\n    // Determine primary recommendation\n    const maxScore = Math.max(cqsScore, techScore, jvcScore);\n    let primaryTeam = 'CQS'; // Default to CQS for safety\n    let confidence = 'Medium';\n\n    if (maxScore === 0) {\n      confidence = 'Low';\n    } else if (maxScore >= 3) {\n      confidence = 'High';\n    }\n\n    if (cqsScore === maxScore) {\n      primaryTeam = 'CQS';\n    } else if (techScore === maxScore) {\n      primaryTeam = 'TECH';\n    } else if (jvcScore === maxScore) {\n      primaryTeam = 'JVC';\n    }\n\n    const teamDescriptions = {\n      CQS: 'Chemical Quality & Safety team - handles safety data, hazard classifications, and regulatory compliance',\n      TECH: 'Technical team - handles technical specifications, physical properties, and process-related questions',\n      JVC: 'JVC team - handles material identification, supplier information, and general material questions'\n    };\n\n    return (\n      <div>\n        <div style={{ marginBottom: 8 }}>\n          <strong\n            style={{\n              color:\n                confidence === 'High' ? '#52c41a' : confidence === 'Medium' ? '#1890ff' : '#faad14'\n            }}\n          >\n            {primaryTeam} Team\n          </strong>{' '}\n          is recommended ({confidence} confidence)\n        </div>\n        <div style={{ fontSize: '12px', color: '#666', marginBottom: 8 }}>\n          {teamDescriptions[primaryTeam]}\n        </div>\n        <div style={{ fontSize: '11px', color: '#999' }}>\n          Based on field: \"<em>{fieldContext.label}</em>\" in step: \"\n          <em>{fieldContext.stepTitle}</em>\"\n        </div>\n        {confidence === 'Low' && (\n          <div style={{ fontSize: '11px', color: '#fa8c16', marginTop: 4 }}>\n            💡 Consider the nature of your question when selecting the team\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  return (\n    <Modal\n      title={\n        <Space>\n          <QuestionCircleOutlined />\n          Raise Query\n        </Space>\n      }\n      open={open || visible}\n      onCancel={handleCancel}\n      footer={\n        createdQueryId ? [\n          <Button key=\"done\" type=\"primary\" onClick={() => {\n            const documentMessage = uploadedDocuments.length > 0 \n              ? ` with ${uploadedDocuments.length} document(s) attached`\n              : '';\n            message.success(`Query completed${documentMessage}`);\n            \n            form.resetFields();\n            setUploadedDocuments([]);\n            const queryToReturn = { id: createdQueryId, documents: uploadedDocuments };\n            setCreatedQueryId(null);\n            setLoading(false);\n            \n            if (onSubmit) {\n              onSubmit(queryToReturn);\n            }\n          }}>\n            Done\n          </Button>\n        ] : [\n          <Button key=\"cancel\" onClick={handleCancel}>\n            Cancel\n          </Button>,\n          <Button key=\"submit\" type=\"primary\" loading={loading} onClick={() => form.submit()}>\n            Create Query\n          </Button>\n        ]\n      }\n      width={600}\n      destroyOnClose\n    >\n      {/* Field Context Information */}\n      {fieldContext && (\n        <Alert\n          message=\"Field Context\"\n          description={\n            <div>\n              <p>\n                <strong>Step:</strong> {fieldContext.stepTitle}\n              </p>\n              <p>\n                <strong>Field:</strong> {fieldContext.label}\n              </p>\n              {fieldContext.placeholder && (\n                <p>\n                  <strong>Expected:</strong> {fieldContext.placeholder}\n                </p>\n              )}\n            </div>\n          }\n          type=\"info\"\n          icon={<InfoCircleOutlined />}\n          style={{ marginBottom: 16 }}\n        />\n      )}\n\n      <SecureForm\n        form={form}\n        layout=\"vertical\"\n        onFinish={handleSubmit}\n        initialValues={{\n          priority: 'MEDIUM',\n          fieldContext: fieldContext?.label\n        }}\n        componentName=\"QueryRaisingModal\"\n        enableSecurityLogging={true}\n        disabled={createdQueryId !== null}\n      >\n        {/* Smart Team Recommendation */}\n        {fieldContext && (\n          <Alert\n            message=\"Recommended Team\"\n            description={getRecommendedTeam(fieldContext)}\n            type=\"info\"\n            style={{ marginBottom: 16 }}\n            showIcon\n          />\n        )}\n\n        {/* Team Selection with Enhanced Context */}\n        <Form.Item\n          name=\"assignedTeam\"\n          label=\"Assign to Team\"\n          rules={[{ required: true, message: 'Please select a team to assign this query to' }]}\n          help=\"Choose the most appropriate team based on your question type. Consider the field context and question nature.\"\n        >\n          <Select\n            placeholder=\"Select team to handle this query\"\n            size=\"large\"\n            showSearch\n            optionFilterProp=\"children\"\n            filterOption={(input, option) =>\n              option.children.props.children[0].props.children\n                .toLowerCase()\n                .indexOf(input.toLowerCase()) >= 0\n            }\n          >\n            <Option value=\"CQS\">\n              <div>\n                <div style={{ fontWeight: 'bold', color: '#722ed1' }}>CQS Team</div>\n                <div style={{ fontSize: '12px', color: '#666', marginBottom: '4px' }}>\n                  Safety data, hazard classifications, regulatory compliance\n                </div>\n                <div style={{ fontSize: '11px', color: '#999' }}>\n                  Best for: Safety measures, hazard statements, environmental impact\n                </div>\n              </div>\n            </Option>\n            <Option value=\"TECH\">\n              <div>\n                <div style={{ fontWeight: 'bold', color: '#13c2c2' }}>Technical Team</div>\n                <div style={{ fontSize: '12px', color: '#666', marginBottom: '4px' }}>\n                  Technical specs, physical properties, processes\n                </div>\n                <div style={{ fontSize: '11px', color: '#999' }}>\n                  Best for: Physical properties, technical specifications, processes\n                </div>\n              </div>\n            </Option>\n            <Option value=\"JVC\">\n              <div>\n                <div style={{ fontWeight: 'bold', color: '#1890ff' }}>JVC Team</div>\n                <div style={{ fontSize: '12px', color: '#666', marginBottom: '4px' }}>\n                  Material identification, supplier info, general questions\n                </div>\n                <div style={{ fontSize: '11px', color: '#999' }}>\n                  Best for: Material details, supplier information, general clarifications\n                </div>\n              </div>\n            </Option>\n          </Select>\n        </Form.Item>\n\n        {/* Field Context (editable) */}\n        <SecureFormItem\n          name=\"fieldContext\"\n          label=\"Field Context\"\n          help=\"Specify which field or section this query relates to\"\n          validationType=\"text\"\n        >\n          <SecureInput\n            placeholder=\"e.g., Material Name, Safety Classification, Storage Conditions\"\n            prefix={<InfoCircleOutlined />}\n            validationType=\"text\"\n            componentName=\"QueryRaisingModal\"\n            fieldName=\"fieldContext\"\n          />\n        </SecureFormItem>\n\n        {/* Priority Selection */}\n        <Form.Item\n          name=\"priority\"\n          label=\"Priority Level\"\n          help=\"Select the urgency level for this query\"\n        >\n          <Radio.Group>\n            <Space direction=\"vertical\">\n              <Radio value=\"LOW\">\n                <Tag color={getPriorityColor('LOW')}>LOW</Tag>\n                <span style={{ marginLeft: 8 }}>General information, non-blocking</span>\n              </Radio>\n              <Radio value=\"MEDIUM\">\n                <Tag color={getPriorityColor('MEDIUM')}>MEDIUM</Tag>\n                <span style={{ marginLeft: 8 }}>Standard clarification needed</span>\n              </Radio>\n              <Radio value=\"HIGH\">\n                <Tag color={getPriorityColor('HIGH')}>HIGH</Tag>\n                <span style={{ marginLeft: 8 }}>Important for completion</span>\n              </Radio>\n              <Radio value=\"URGENT\">\n                <Tag color={getPriorityColor('URGENT')}>URGENT</Tag>\n                <span style={{ marginLeft: 8 }}>Blocking progress, needs immediate attention</span>\n              </Radio>\n            </Space>\n          </Radio.Group>\n        </Form.Item>\n\n        <Divider />\n\n        {/* Question Text */}\n        <SecureFormItem\n          name=\"question\"\n          label=\"Your Question\"\n          validationType=\"richtext\"\n          help=\"Be specific and provide context to help the assigned team understand your question\"\n        >\n          <SecureTextArea\n            rows={6}\n            placeholder=\"Describe your question in detail. Include:\n• What specific information you need\n• Why you need this information\n• Any relevant context or background\n• What you've already tried or researched\"\n            showCount\n            maxLength={1000}\n            validationType=\"richtext\"\n            componentName=\"QueryRaisingModal\"\n            fieldName=\"question\"\n          />\n        </SecureFormItem>\n\n        {/* Document Upload Section */}\n        {createdQueryId ? (\n          <div style={{ marginTop: 16 }}>\n            <Alert\n              message=\"Query Created Successfully!\"\n              description=\"Your query has been created. You can now attach supporting documents if needed, or click 'Done' to finish.\"\n              type=\"success\"\n              showIcon\n              style={{ marginBottom: 16 }}\n            />\n            <QueryDocumentUpload\n              queryId={createdQueryId}\n              context=\"query\"\n              onUploadComplete={handleDocumentUpload}\n              maxFiles={5}\n              disabled={false}\n            />\n          </div>\n        ) : (\n          <Collapse\n            size=\"small\"\n            ghost\n            items={[\n              {\n                key: 'documents',\n                label: (\n                  <Space>\n                    <PaperClipOutlined />\n                    <span>Supporting Documents</span>\n                    <Tag color=\"blue\">Available after query creation</Tag>\n                  </Space>\n                ),\n                children: (\n                  <Alert\n                    message=\"Document Attachment\"\n                    description=\"After creating your query, you'll be able to attach supporting documents to provide additional context. Documents help the assigned team better understand your question.\"\n                    type=\"info\"\n                    showIcon\n                  />\n                )\n              }\n            ]}\n          />\n        )}\n\n        <Divider />\n\n        {/* Guidelines */}\n        <Alert\n          message=\"Query Guidelines\"\n          description={\n            <ul style={{ margin: 0, paddingLeft: 20 }}>\n              <li>Be specific and clear in your question</li>\n              <li>Include relevant context and background information</li>\n              <li>Mention any documentation or resources you've already checked</li>\n              <li>For urgent queries, explain why immediate attention is needed</li>\n              <li>Use appropriate technical terminology when relevant</li>\n            </ul>\n          }\n          type=\"info\"\n          showIcon\n          icon={<ExclamationCircleOutlined />}\n        />\n      </SecureForm>\n    </Modal>\n  );\n};\n\nexport default QueryRaisingModal;\n","import {\n  SaveOutlined,\n  QuestionCircleOutlined,\n  CheckCircleOutlined,\n  ExclamationCircleOutlined,\n  ArrowLeftOutlined,\n  ArrowRightOutlined,\n  CloudSyncOutlined,\n  WifiOutlined,\n  DisconnectOutlined,\n  MenuOutlined,\n  DashboardOutlined,\n  FileTextOutlined,\n  SafetyOutlined,\n  ExperimentOutlined,\n  FireOutlined,\n  MedicineBoxOutlined,\n  BookOutlined,\n  SettingOutlined,\n  BulbOutlined,\n  RocketOutlined\n} from '@ant-design/icons';\nimport {\n  Card,\n  Form,\n  Input,\n  Select,\n  Radio,\n  Checkbox,\n  Button,\n  Row,\n  Col,\n  Progress,\n  message,\n  Spin,\n  Alert,\n  Space,\n  Tooltip,\n  Badge,\n  notification,\n  Typography,\n  Tag,\n  Modal,\n  FloatButton,\n  Drawer,\n  Timeline,\n  Avatar\n} from 'antd';\nimport React, { useState, useEffect, useCallback } from 'react';\n\nimport { UI_CONFIG, AUTO_SAVE } from '../constants';\nimport { queryAPI } from '../services/queryAPI';\nimport { workflowAPI } from '../services/workflowAPI';\n\nimport MaterialContextPanel from './MaterialContextPanel';\nimport QueryRaisingModal from './QueryRaisingModal';\nimport './PlantQuestionnaire.css';\n\n// const { Step } = Steps; // Not currently used\nconst { TextArea } = Input;\nconst { Option } = Select;\nconst { Text, Title, Paragraph } = Typography;\n\n// Hook to detect screen size\nconst useResponsive = () => {\n  const [screenSize, setScreenSize] = useState({\n    isMobile: window.innerWidth <= UI_CONFIG.MOBILE_BREAKPOINT,\n    isTablet:\n      window.innerWidth > UI_CONFIG.MOBILE_BREAKPOINT &&\n      window.innerWidth <= UI_CONFIG.TABLET_BREAKPOINT,\n    isDesktop: window.innerWidth > UI_CONFIG.TABLET_BREAKPOINT\n  });\n\n  useEffect(() => {\n    const handleResize = () => {\n      setScreenSize({\n        isMobile: window.innerWidth <= UI_CONFIG.MOBILE_BREAKPOINT,\n        isTablet:\n          window.innerWidth > UI_CONFIG.MOBILE_BREAKPOINT &&\n          window.innerWidth <= UI_CONFIG.TABLET_BREAKPOINT,\n        isDesktop: window.innerWidth > UI_CONFIG.TABLET_BREAKPOINT\n      });\n    };\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  return screenSize;\n};\n\nconst PlantQuestionnaire = ({ workflowId, onComplete, onSaveDraft }) => {\n  const [form] = Form.useForm();\n  const [currentStep, setCurrentStep] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [submitting, setSubmitting] = useState(false);\n  const [workflowData, setWorkflowData] = useState(null);\n  const [formData, setFormData] = useState({});\n  const [completedSteps, setCompletedSteps] = useState(new Set());\n  const [queryModalVisible, setQueryModalVisible] = useState(false);\n  const [selectedField, setSelectedField] = useState(null);\n  const [queries, setQueries] = useState([]);\n  const [autoSaveEnabled, setAutoSaveEnabled] = useState(true);\n  const [isOffline, setIsOffline] = useState(!navigator.onLine);\n  const [pendingChanges, setPendingChanges] = useState(false);\n  const [sidebarVisible, setSidebarVisible] = useState(false);\n  // const [compactMode, setCompactMode] = useState(false); // Not currently used\n  const [_progressUpdateTrigger, _setProgressUpdateTrigger] = useState(0);\n  const { isMobile } = useResponsive();\n\n  // Define questionnaire steps (loaded from backend template)\n  const [questionnaireSteps, setQuestionnaireSteps] = useState([]);\n  const [templateLoading, setTemplateLoading] = useState(true);\n  // eslint-disable-next-line no-unused-vars\n  const [_cqsData, setCqsData] = useState({}); // Used for CQS auto-population (pending implementation)\n  // eslint-disable-next-line no-unused-vars\n  const [_plantSpecificData, setPlantSpecificData] = useState({}); // Used for plant-specific data loading\n\n  // Step icons mapping for modern UI\n  const stepIcons = {\n    General: <FileTextOutlined />,\n    Physical: <ExperimentOutlined />,\n    'Flammability and Explosivity': <FireOutlined />,\n    Toxicity: <SafetyOutlined />,\n    'Storage and Handling': <BookOutlined />,\n    PPE: <SafetyOutlined />,\n    'First Aid': <MedicineBoxOutlined />,\n    Statutory: <BookOutlined />,\n    Others: <SettingOutlined />,\n    Safety: <SafetyOutlined />,\n    Environmental: <BulbOutlined />,\n    Quality: <RocketOutlined />\n  };\n\n  // Load questionnaire template from backend\n  const loadQuestionnaireTemplate = useCallback(async () => {\n    try {\n      setTemplateLoading(true);\n\n      if (!workflowData?.materialCode || !workflowData?.assignedPlant) {\n        console.warn('Missing required data for template loading:', {\n          materialCode: workflowData?.materialCode,\n          assignedPlant: workflowData?.assignedPlant\n        });\n        setQuestionnaireSteps(getDefaultTemplate());\n        return;\n      }\n\n      console.log('Loading questionnaire template for:', {\n        materialCode: workflowData.materialCode,\n        plantCode: workflowData.assignedPlant\n      });\n\n      const template = await workflowAPI.getQuestionnaireTemplate({\n        materialCode: workflowData.materialCode,\n        plantCode: workflowData.assignedPlant,\n        templateType: 'PLANT_QUESTIONNAIRE'\n      });\n\n      console.log('Received template:', template);\n\n      // Validate template structure\n      if (!template || !template.steps || !Array.isArray(template.steps)) {\n        console.error('Invalid template structure:', template);\n        throw new Error('Invalid template structure received from backend');\n      }\n\n      // Process template to include CQS auto-populated fields\n      const processedSteps = template.steps.map(step => ({\n        ...step,\n        title: step.title || step.stepTitle || `Step ${step.stepNumber || 'Unknown'}`,\n        description: step.description || '',\n        fields: (step.fields || []).map(field => ({\n          ...field,\n          isCqsAutoPopulated: field.cqsAutoPopulated || field.isCqsAutoPopulated || false,\n          cqsValue: field.cqsAutoPopulated || field.isCqsAutoPopulated ? 'Pending IMP' : null,\n          disabled: field.cqsAutoPopulated || field.isCqsAutoPopulated || field.disabled || false,\n          placeholder:\n            field.cqsAutoPopulated || field.isCqsAutoPopulated\n              ? 'Auto-populated by CQS (Pending Implementation)'\n              : field.placeholder\n        }))\n      }));\n\n      console.log('Processed steps:', processedSteps);\n      setQuestionnaireSteps(processedSteps);\n\n      // Load CQS data if available\n      try {\n        const cqsResponse = await workflowAPI.getCqsData({\n          materialCode: workflowData?.materialCode,\n          plantCode: workflowData?.assignedPlant\n        });\n\n        setCqsData(cqsResponse.data || {});\n\n        // Update form with CQS data\n        const cqsFormData = {};\n        Object.entries(cqsResponse.data || {}).forEach(([key, value]) => {\n          if (value && value !== 'Pending IMP') {\n            cqsFormData[key] = value;\n          }\n        });\n\n        if (Object.keys(cqsFormData).length > 0) {\n          setFormData(prev => ({ ...prev, ...cqsFormData }));\n          form.setFieldsValue(cqsFormData);\n        }\n      } catch (error) {\n        console.error('Failed to load CQS data:', error);\n        // Don't show error message as CQS data might not be available yet\n      }\n\n      // Load plant-specific data\n      try {\n        const plantData = await workflowAPI.getOrCreatePlantSpecificData({\n          plantCode: workflowData?.assignedPlant,\n          materialCode: workflowData?.materialCode,\n          workflowId\n        });\n\n        setPlantSpecificData(plantData || {});\n\n        // If plant data exists, populate form with existing plant inputs\n        if (plantData?.plantInputs) {\n          setFormData(prev => ({ ...prev, ...plantData.plantInputs }));\n          form.setFieldsValue(plantData.plantInputs);\n        }\n      } catch (error) {\n        console.error('Failed to load plant-specific data:', error);\n      }\n    } catch (error) {\n      console.error('Failed to load questionnaire template:', error);\n      message.error(`Failed to load questionnaire template: ${error.message}`);\n      // Fallback to default template if backend fails\n      console.log('Using fallback template');\n      setQuestionnaireSteps(getDefaultTemplate());\n    } finally {\n      setTemplateLoading(false);\n    }\n  }, [workflowData, workflowId, form]);\n\n\n  // Save plant-specific data with composite key\n  // const savePlantSpecificData = async data => { // Not currently used\n  //   try {\n  //     const plantSpecificPayload = {\n  //       plantCode: workflowData?.assignedPlant,\n  //       materialCode: workflowData?.materialCode,\n\n  //       workflowId: workflowId,\n  //       cqsInputs: cqsData,\n  //       plantInputs: data,\n  //       totalFields: Object.keys(data).length,\n  //       completedFields: Object.values(data).filter(\n  //         value => value !== null && value !== undefined && value !== ''\n  //       ).length\n  //     };\n\n  //     await workflowAPI.savePlantSpecificData(plantSpecificPayload, 'current_user');\n  //   } catch (error) {\n  //     console.error('Failed to save plant-specific data:', error);\n  //     throw error;\n  //   }\n  // };\n\n  // Default template fallback - Updated to match actual 87 questions\n  const getDefaultTemplate = () => [\n    {\n      title: 'General',\n      description: 'General information about MSDS availability and completeness',\n      fields: [\n        {\n          name: 'msds_available',\n          label: 'Is 16 Section MSDS of the raw material available?',\n          type: 'radio',\n          required: false,\n          options: [\n            { value: 'yes', label: 'Yes' },\n            { value: 'no', label: 'No' }\n          ]\n        },\n        {\n          name: 'missing_info',\n          label: 'Which information in any one of the 16 sections is not available in full?',\n          type: 'textarea',\n          required: false,\n          placeholder: 'Describe missing information'\n        },\n        {\n          name: 'sourcing_asked',\n          label:\n            'Has the identified missing / more information required from the supplier asked thru Sourcing?',\n          type: 'radio',\n          required: false,\n          options: [\n            { value: 'yes', label: 'Yes' },\n            { value: 'no', label: 'No' },\n            { value: 'na', label: 'N/A' }\n          ]\n        },\n        {\n          name: 'cas_available',\n          label: 'Is CAS number of the raw material based on the pure substance available?',\n          type: 'radio',\n          required: false,\n          options: [\n            { value: 'yes', label: 'Yes' },\n            { value: 'no', label: 'No' }\n          ]\n        },\n        {\n          name: 'mixture_ingredients',\n          label: 'For mixtures, are ingredients of mixture available?',\n          type: 'radio',\n          required: false,\n          options: [\n            { value: 'yes', label: 'Yes' },\n            { value: 'no', label: 'No' }\n          ]\n        },\n        {\n          name: 'composition_percentage',\n          label: 'Is % age composition substances in the mixture available?',\n          type: 'radio',\n          required: false,\n          options: [\n            { value: 'yes', label: 'Yes' },\n            { value: 'no', label: 'No' }\n          ]\n        },\n        {\n          name: 'total_percentage_1',\n          label:\n            'Is the total %age of all substances in the mixture equal to 100?',\n          type: 'radio',\n          required: false,\n          options: [\n            { value: 'yes', label: 'Yes' },\n            { value: 'no', label: 'No' }\n          ]\n        },\n        {\n          name: 'total_percentage',\n          label:\n            'If not what is the % of substances not available?',\n          type: 'textarea',\n          required: false,\n          placeholder: 'Provide details about percentage composition'\n        }\n      ]\n    },\n    {\n      title: 'Physical',\n      description: 'Physical properties and handling requirements',\n      fields: [\n        {\n          name: 'is_corrosive',\n          label: 'Is the material corrosive?',\n          type: 'radio',\n          required: false,\n          isCqsAutoPopulated: true,\n          disabled: true,\n          cqsValue: 'Pending IMP',\n          placeholder: 'Auto-populated by CQS (Pending Implementation)',\n          options: [\n            { value: 'yes', label: 'Yes' },\n            { value: 'no', label: 'No' }\n          ]\n        },\n        {\n          name: 'corrosive_storage',\n          label:\n            'Does the plant have acid and alkali proof storage facilities to store a corrosive raw material?',\n          type: 'radio',\n          required: false,\n          options: [\n            { value: 'yes', label: 'Yes' },\n            { value: 'no', label: 'No' },\n            { value: 'na', label: 'N/A' }\n          ]\n        },\n        {\n          name: 'highly_toxic',\n          label: 'Is the material highly toxic?',\n          type: 'radio',\n          required: false,\n          isCqsAutoPopulated: true,\n          disabled: true,\n          cqsValue: 'Pending IMP',\n          placeholder: 'Auto-populated by CQS (Pending Implementation)',\n          options: [\n            { value: 'yes', label: 'Yes' },\n            { value: 'no', label: 'No' }\n          ]\n        },\n        {\n          name: 'toxic_powder_handling',\n          label:\n            'Does the plant have facilities to handle fine powder of highly toxic raw material?',\n          type: 'radio',\n          required: false,\n          options: [\n            { value: 'yes', label: 'Yes' },\n            { value: 'no', label: 'No' },\n            { value: 'na', label: 'N/A' }\n          ]\n        },\n        {\n          name: 'crushing_facilities',\n          label: 'Does the plant have facilities to crush the stone like solid raw material?',\n          type: 'radio',\n          required: false,\n          options: [\n            { value: 'yes', label: 'Yes' },\n            { value: 'no', label: 'No' },\n            { value: 'na', label: 'N/A' }\n          ]\n        },\n        {\n          name: 'heating_facilities',\n          label:\n            'Does the plant have facilities to heat/melt the raw material if required for charging the same in a batch?',\n          type: 'radio',\n          required: false,\n          options: [\n            { value: 'yes', label: 'Yes' },\n            { value: 'no', label: 'No' },\n            { value: 'na', label: 'N/A' }\n          ]\n        },\n        {\n          name: 'paste_preparation',\n          label:\n            'Does the plant have facilities to prepare paste of raw material if required for charging the same in a batch?',\n          type: 'radio',\n          required: false,\n          options: [\n            { value: 'yes', label: 'Yes' },\n            { value: 'no', label: 'No' },\n            { value: 'na', label: 'N/A' }\n          ]\n        }\n      ]\n    },\n    {\n      title: 'Flammability and Explosivity',\n      description: 'Flammability, explosivity and fire safety measures',\n      fields: [\n        {\n          name: 'flash_point_65',\n          label: 'Is Flash point of the raw material given and less than or equal to 65 degree C?',\n          type: 'radio',\n          required: false,\n          isCqsAutoPopulated: true,\n          disabled: true,\n          cqsValue: 'Pending IMP',\n          placeholder: 'Auto-populated by CQS (Pending Implementation)',\n          options: [\n            { value: 'yes', label: 'Yes' },\n            { value: 'no', label: 'No' },\n            { value: 'na', label: 'N/A' }\n          ]\n        },\n        {\n          name: 'petroleum_class',\n          label:\n            'Is the raw material is to be catgorised as ClassC / Class B / Class A substance as per Petroleum Act / Rules?',\n          type: 'select',\n          required: false,\n          isCqsAutoPopulated: true,\n          disabled: true,\n          cqsValue: 'Pending IMP',\n          placeholder: 'Auto-populated by CQS (Pending Implementation)',\n          options: [\n            { value: 'class_a', label: 'Class A' },\n            { value: 'class_b', label: 'Class B' },\n            { value: 'class_c', label: 'Class C' },\n            { value: 'na', label: 'N/A' }\n          ]\n        },\n        {\n          name: 'storage_license',\n          label: 'Does all the plants have the capacity and license to store the raw material?',\n          type: 'radio',\n          required: false,\n          options: [\n            { value: 'yes', label: 'Yes' },\n            { value: 'no', label: 'No' }\n          ]\n        },\n        {\n          name: 'ccoe_license',\n          label:\n            'If no, has the plant applied for CCoE license and by when expected to receive the license?',\n          type: 'textarea',\n          required: false,\n          placeholder: 'Provide details about CCoE license application'\n        },\n        {\n          name: 'flash_point_21',\n          label: 'Is Flash point of the raw material given is less than 21 degree C?',\n          type: 'radio',\n          required: false,\n          isCqsAutoPopulated: true,\n          disabled: true,\n          cqsValue: 'Pending IMP',\n          placeholder: 'Auto-populated by CQS (Pending Implementation)',\n          options: [\n            { value: 'yes', label: 'Yes' },\n            { value: 'no', label: 'No' },\n            { value: 'na', label: 'N/A' }\n          ]\n        },\n        {\n          name: 'flammable_infrastructure',\n          label:\n            \"If yes, does plant have infrastructure to comply State Factories Rule for handling 'Flammable liquids'?\",\n          type: 'radio',\n          required: false,\n          options: [\n            { value: 'yes', label: 'Yes' },\n            { value: 'no', label: 'No' },\n            { value: 'na', label: 'N/A' }\n          ]\n        }\n      ]\n    },\n    {\n      title: 'Toxicity',\n      description: 'Toxicity assessment and exposure control',\n      fields: [\n        {\n          name: 'ld50_oral',\n          label:\n            'Is LD 50 (oral) value available and higher than the threshold limit of 200 mg/Kg BW?',\n          type: 'radio',\n          required: false,\n          isCqsAutoPopulated: true,\n          disabled: true,\n          cqsValue: 'Pending IMP',\n          placeholder: 'Auto-populated by CQS (Pending Implementation)',\n          options: [\n            { value: 'yes', label: 'Yes' },\n            { value: 'no', label: 'No' },\n            { value: 'na', label: 'N/A' }\n          ]\n        },\n        {\n          name: 'ld50_dermal',\n          label: 'Is LD 50 (Dermal) value available and higher than 1000 mg/Kg BW?',\n          type: 'radio',\n          required: false,\n          isCqsAutoPopulated: true,\n          disabled: true,\n          cqsValue: 'Pending IMP',\n          placeholder: 'Auto-populated by CQS (Pending Implementation)',\n          options: [\n            { value: 'yes', label: 'Yes' },\n            { value: 'no', label: 'No' },\n            { value: 'na', label: 'N/A' }\n          ]\n        },\n        {\n          name: 'lc50_inhalation',\n          label: 'Is LC50 Inhalation value available and higher than 10 mg/L?',\n          type: 'radio',\n          required: false,\n          isCqsAutoPopulated: true,\n          disabled: true,\n          cqsValue: 'Pending IMP',\n          placeholder: 'Auto-populated by CQS (Pending Implementation)',\n          options: [\n            { value: 'yes', label: 'Yes' },\n            { value: 'no', label: 'No' },\n            { value: 'na', label: 'N/A' }\n          ]\n        },\n        {\n          name: 'exposure_minimization',\n          label:\n            'If no, in any of the above three cases (where avaialble) then does the plant have facilities and /or procedure to minmise the exposure of workman?',\n          type: 'textarea',\n          required: false,\n          placeholder: 'Describe exposure minimization procedures'\n        },\n        {\n          name: 'carcinogenic',\n          label: 'Is the RM a suspect Carcinogenic?',\n          type: 'radio',\n          required: false,\n          isCqsAutoPopulated: true,\n          disabled: true,\n          cqsValue: 'Pending IMP',\n          placeholder: 'Auto-populated by CQS (Pending Implementation)',\n          options: [\n            { value: 'yes', label: 'Yes' },\n            { value: 'no', label: 'No' },\n            { value: 'na', label: 'N/A' }\n          ]\n        },\n        {\n          name: 'carcinogenic_control',\n          label:\n            'If yes, plant has adequate facilities and /or procedure to minimse the exposure of workman?',\n          type: 'textarea',\n          required: false,\n          placeholder: 'Describe carcinogenic exposure control measures'\n        }\n      ]\n    },\n    {\n      title: 'Storage and Handling',\n      description: 'Storage and handling procedures',\n      fields: [\n        {\n          name: 'storage_conditions_stores',\n          label: 'Are any storage conditions required and available in the plant stores?',\n          type: 'textarea',\n          required: false,\n          placeholder: 'Describe storage conditions in plant stores'\n        },\n        {\n          name: 'storage_conditions_floor',\n          label: 'Are any storage conditions required and available in the shop floor?',\n          type: 'textarea',\n          required: false,\n          placeholder: 'Describe storage conditions on shop floor'\n        },\n        {\n          name: 'closed_loop_required',\n          label: 'Does it require closed loop handling system during charging?',\n          type: 'radio',\n          required: false,\n          options: [\n            { value: 'yes', label: 'Yes' },\n            { value: 'no', label: 'No' }\n          ]\n        },\n        {\n          name: 'work_permit_available',\n          label:\n            'Does the plant have required Work permit and /or WI/SOP to handle the raw material adequately?',\n          type: 'radio',\n          required: false,\n          options: [\n            { value: 'yes', label: 'Yes' },\n            { value: 'no', label: 'No' }\n          ]\n        },\n        {\n          name: 'procedures_details',\n          label: 'If, yes specify the procedures',\n          type: 'textarea',\n          required: false,\n          placeholder: 'Specify the procedures and work permits'\n        }\n      ]\n    },\n    {\n      title: 'PPE',\n      description: 'Personal protective equipment requirements',\n      fields: [\n        {\n          name: 'recommended_ppe',\n          label: 'Recommended specific PPEs based on MSDS',\n          type: 'textarea',\n          required: false,\n          isCqsAutoPopulated: true,\n          disabled: true,\n          cqsValue: 'Pending IMP',\n          placeholder: 'Auto-populated by CQS (Pending Implementation)'\n        },\n        {\n          name: 'ppe_in_use',\n          label:\n            'Are recommended PPE as per MSDS to handle the RM is already in use at the plants?',\n          type: 'radio',\n          required: false,\n          options: [\n            { value: 'yes', label: 'Yes' },\n            { value: 'no', label: 'No' },\n            { value: 'partial', label: 'Partially' }\n          ]\n        },\n        {\n          name: 'ppe_procurement_date',\n          label: 'If no, by when the plant can procure the require PPE?',\n          type: 'input',\n          required: false,\n          placeholder: 'Enter expected procurement date'\n        }\n      ]\n    },\n    {\n      title: 'First Aid',\n      description: 'First aid measures and emergency response',\n      fields: [\n        {\n          name: 'is_poisonous',\n          label: 'Is the raw material poisonous as per the MSDS?',\n          type: 'radio',\n          required: false,\n          isCqsAutoPopulated: true,\n          disabled: true,\n          cqsValue: 'Pending IMP',\n          placeholder: 'Auto-populated by CQS (Pending Implementation)',\n          options: [\n            { value: 'yes', label: 'Yes' },\n            { value: 'no', label: 'No' }\n          ]\n        },\n        {\n          name: 'antidote_specified',\n          label:\n            'Is the name of antidote required to counter the impact of the material given in the MSDS?',\n          type: 'radio',\n          required: false,\n          isCqsAutoPopulated: true,\n          disabled: true,\n          cqsValue: 'Pending IMP',\n          placeholder: 'Auto-populated by CQS (Pending Implementation)',\n          options: [\n            { value: 'yes', label: 'Yes' },\n            { value: 'no', label: 'No' },\n            { value: 'na', label: 'N/A' }\n          ]\n        },\n        {\n          name: 'antidote_available',\n          label: 'Is the above specified antidote available in the plants?',\n          type: 'radio',\n          required: false,\n          options: [\n            { value: 'yes', label: 'Yes' },\n            { value: 'no', label: 'No' },\n            { value: 'na', label: 'N/A' }\n          ]\n        },\n        {\n          name: 'antidote_source',\n          label:\n            'If the specified antidote is not available then what is source and who will obtain the antidote in the plant?',\n          type: 'textarea',\n          required: false,\n          placeholder: 'Describe antidote source and procurement plan'\n        },\n        {\n          name: 'first_aid_capability',\n          label:\n            'Does the plant has capability to provide the first aid mentioned in the MSDS with the existing control measures?',\n          type: 'radio',\n          required: false,\n          options: [\n            { value: 'yes', label: 'Yes' },\n            { value: 'no', label: 'No' }\n          ]\n        }\n      ]\n    },\n    {\n      title: 'Statutory',\n      description: 'Statutory compliance and regulatory requirements',\n      fields: [\n        {\n          name: 'cmvr_listed',\n          label: 'Is the RM or any of its ingredient listed in Table 3 of Rule 137 (CMVR)',\n          type: 'radio',\n          required: false,\n          isCqsAutoPopulated: true,\n          disabled: true,\n          cqsValue: 'Pending IMP',\n          placeholder: 'Auto-populated by CQS (Pending Implementation)',\n          options: [\n            { value: 'yes', label: 'Yes' },\n            { value: 'no', label: 'No' }\n          ]\n        },\n        {\n          name: 'msihc_listed',\n          label: 'Is the RM or any of its ingredient listed in part II of Schedule I of MSIHC Rule',\n          type: 'radio',\n          required: false,\n          isCqsAutoPopulated: true,\n          disabled: true,\n          cqsValue: 'Pending IMP',\n          placeholder: 'Auto-populated by CQS (Pending Implementation)',\n          options: [\n            { value: 'yes', label: 'Yes' },\n            { value: 'no', label: 'No' }\n          ]\n        },\n        {\n          name: 'factories_act_listed',\n          label: 'Is the RM or any of its ingredients listed in Schedule II of Factories Act',\n          type: 'radio',\n          required: false,\n          isCqsAutoPopulated: true,\n          disabled: true,\n          cqsValue: 'Pending IMP',\n          placeholder: 'Auto-populated by CQS (Pending Implementation)',\n          options: [\n            { value: 'yes', label: 'Yes' },\n            { value: 'no', label: 'No' }\n          ]\n        },\n        {\n          name: 'permissible_concentration',\n          label:\n            'With the current infrastructure, is the concentration of RM / ingredients listed in Schedule II of Factories Act within permissible concentrations as per Factories Act in the work area.',\n          type: 'radio',\n          required: false,\n          options: [\n            { value: 'yes', label: 'Yes' },\n            { value: 'no', label: 'No' },\n            { value: 'na', label: 'N/A' }\n          ]\n        },\n        {\n          name: 'monitoring_details',\n          label:\n            'Mention details of work area monitoring results and describe infrastructure used for handling',\n          type: 'textarea',\n          required: false,\n          placeholder: 'Provide monitoring details and infrastructure description'\n        }\n      ]\n    },\n    {\n      title: 'Others',\n      description: 'Additional inputs and gap analysis',\n      fields: [\n        {\n          name: 'plant_inputs_required',\n          label: 'Inputs required from plants based on the above assessment?',\n          type: 'textarea',\n          required: false,\n          placeholder: 'Describe inputs required from plants'\n        },\n        {\n          name: 'gaps_identified',\n          label: 'Gaps identified vis-à-vis existing controls / protocols',\n          type: 'textarea',\n          required: false,\n          placeholder: 'Identify gaps in existing controls and protocols'\n        },\n        {\n          name: 'additional_input_1',\n          label: 'Additional Input 1',\n          type: 'textarea',\n          required: false,\n          placeholder: 'Additional input field 1'\n        },\n        {\n          name: 'additional_input_2',\n          label: 'Additional Input 2',\n          type: 'textarea',\n          required: false,\n          placeholder: 'Additional input field 2'\n        }\n      ]\n    }\n  ];\n\n  // Function definitions (moved here to avoid hoisting issues)\n  const handleNext = useCallback(() => {\n    if (currentStep < questionnaireSteps.length - 1) {\n      setCurrentStep(currentStep + 1);\n    }\n  }, [currentStep, questionnaireSteps.length]);\n\n  const handlePrevious = useCallback(() => {\n    if (currentStep > 0) {\n      setCurrentStep(currentStep - 1);\n    }\n  }, [currentStep]);\n\n  const handleStepChange = useCallback(\n    step => {\n      if (step >= 0 && step < questionnaireSteps.length) {\n        setCurrentStep(step);\n      }\n    },\n    [questionnaireSteps.length]\n  );\n\n  // Helper function definitions\n  // const getStepForField = fieldName => { // Not currently used\n  //   for (let i = 0; i < questionnaireSteps.length; i++) {\n  //     if (questionnaireSteps[i].fields.some(field => field.name === fieldName)) {\n  //       return i;\n  //     }\n  //   }\n  //   return 0;\n  // };\n\n  // Fixed: Progress calculation now excludes CQS auto-populated fields\n  // CQS fields are disabled and auto-populated, so they shouldn't count towards user progress\n  const getOverallCompletionPercentage = useCallback(() => {\n    if (!questionnaireSteps || questionnaireSteps.length === 0 || !form) {\n      return 0;\n    }\n\n    let totalFields = 0;\n    let completedFields = 0;\n\n    // Get current form values including any unsaved changes\n    try {\n      const currentFormValues = form.getFieldsValue();\n      const currentData = { ...formData, ...currentFormValues };\n\n      questionnaireSteps.forEach((step, _index) => {\n        const stepFields = step.fields || [];\n        \n        // Filter out CQS auto-populated fields from total count\n        const userEditableFields = stepFields.filter(field => !field.isCqsAutoPopulated && !field.disabled);\n        totalFields += userEditableFields.length;\n\n        const completedStepFields = userEditableFields.filter(field => {\n          const value = currentData[field.name];\n          if (Array.isArray(value)) {\n            return value.length > 0;\n          }\n          return value && value !== '' && value !== null && value !== undefined;\n        });\n\n        completedFields += completedStepFields.length;\n      });\n\n      const percentage = totalFields > 0 ? Math.round((completedFields / totalFields) * 100) : 0;\n\n      // Overall completion calculated (excluding CQS auto-populated fields)\n\n      return percentage;\n    } catch (error) {\n      console.error('Error calculating overall completion:', error);\n      return 0;\n    }\n  }, [questionnaireSteps, formData, form]);\n\n  const getTotalFieldsPopulated = useCallback(() => {\n    if (!questionnaireSteps || questionnaireSteps.length === 0 || !form) {\n      return { total: 0, populated: 0 };\n    }\n\n    let totalFields = 0;\n    let populatedFields = 0;\n\n    try {\n      // Get current form values including any unsaved changes\n      const currentFormValues = form.getFieldsValue();\n      const currentData = { ...formData, ...currentFormValues };\n\n      questionnaireSteps.forEach(step => {\n        const stepFields = step.fields || [];\n        \n        // Filter out CQS auto-populated fields from total count\n        const userEditableFields = stepFields.filter(field => !field.isCqsAutoPopulated && !field.disabled);\n        totalFields += userEditableFields.length;\n\n        const populatedStepFields = userEditableFields.filter(field => {\n          const value = currentData[field.name];\n          if (Array.isArray(value)) {\n            return value.length > 0;\n          }\n          return value && value !== '' && value !== null && value !== undefined;\n        });\n\n        populatedFields += populatedStepFields.length;\n      });\n\n      // Total fields populated calculated (excluding CQS auto-populated fields)\n\n      return { total: totalFields, populated: populatedFields };\n    } catch (error) {\n      console.error('Error calculating total fields populated:', error);\n      return { total: 0, populated: 0 };\n    }\n  }, [questionnaireSteps, formData, form]);\n\n  const handleSaveDraft = useCallback(\n    async (silent = false) => {\n      try {\n        setSaving(true);\n        const currentValues = form.getFieldsValue();\n        const updatedFormData = { ...formData, ...currentValues };\n\n        // Enhanced validation before saving\n        const validatedFormData = {};\n        Object.entries(updatedFormData).forEach(([key, value]) => {\n          if (value !== null && value !== undefined && value !== '') {\n            validatedFormData[key] = value;\n          }\n        });\n\n        // Save to local storage as backup with enhanced metadata\n        const draftKey = `plant_questionnaire_draft_${workflowId}`;\n        const draftData = {\n          formData: validatedFormData,\n          currentStep,\n          timestamp: Date.now(),\n          completedSteps: Array.from(completedSteps),\n          version: '2.0',\n          materialCode: workflowData?.materialCode,\n          materialName: workflowData?.materialName,\n          assignedPlant: workflowData?.assignedPlant,\n          lastSyncAttempt: Date.now(),\n          syncStatus: isOffline ? 'pending' : 'synced',\n          totalFields: Object.keys(validatedFormData).length,\n          completionPercentage: getOverallCompletionPercentage(),\n          sessionId: Date.now()\n        };\n\n        try {\n          localStorage.setItem(draftKey, JSON.stringify(draftData));\n        } catch (localStorageError) {\n          console.warn('Failed to save draft to local storage:', localStorageError);\n        }\n\n        // Save to server if online\n        if (!isOffline) {\n          try {\n            const draftData = {\n              plantCode: workflowData?.assignedPlant,\n              materialCode: workflowData?.materialCode,\n\n              responses: updatedFormData,\n              currentStep,\n              completedSteps: Array.from(completedSteps),\n              modifiedBy: 'current_user'\n            };\n\n            await workflowAPI.saveDraftPlantResponses(workflowId, draftData);\n\n            if (!silent) {\n              message.success('Draft saved successfully');\n            }\n          } catch (serverError) {\n            console.error('Failed to save draft to server:', serverError);\n            setPendingChanges(true);\n\n            if (!silent) {\n              message.warning('Draft saved locally. Will sync when connection is restored.');\n            }\n          }\n        } else {\n          setPendingChanges(true);\n          if (!silent) {\n            message.info('Draft saved locally. Will sync when online.');\n          }\n        }\n\n        setFormData(updatedFormData);\n\n        if (onSaveDraft) {\n          onSaveDraft(updatedFormData);\n        }\n      } catch (error) {\n        console.error('Failed to save draft:', error);\n        if (!silent) {\n          message.error('Failed to save draft. Please try again.');\n        }\n      } finally {\n        setSaving(false);\n      }\n    },\n    [form, formData, workflowId, onSaveDraft, currentStep, completedSteps, isOffline, workflowData, getOverallCompletionPercentage]\n  );\n\n  // Network status monitoring with enhanced offline handling\n  useEffect(() => {\n    const handleOnline = () => {\n      setIsOffline(false);\n      notification.success({\n        message: 'Connection Restored',\n        description: 'You are back online. Syncing your changes...',\n        icon: <WifiOutlined style={{ color: '#52c41a' }} />,\n        duration: 3\n      });\n\n      if (pendingChanges) {\n        handleSaveDraft(true); // Auto-sync when back online\n        setPendingChanges(false);\n      }\n    };\n\n    const handleOffline = () => {\n      setIsOffline(true);\n      notification.warning({\n        message: 'Connection Lost',\n        description:\n          'You are offline. Changes will be saved locally and synced when connection is restored.',\n        icon: <DisconnectOutlined style={{ color: '#fa8c16' }} />,\n        duration: 5\n      });\n    };\n\n    window.addEventListener('online', handleOnline);\n    window.addEventListener('offline', handleOffline);\n\n    return () => {\n      window.removeEventListener('online', handleOnline);\n      window.removeEventListener('offline', handleOffline);\n    };\n  }, [pendingChanges, handleSaveDraft]);\n\n  // Enhanced keyboard navigation\n  useEffect(() => {\n    const handleKeyDown = event => {\n      // Ctrl/Cmd + S to save draft\n      if ((event.ctrlKey || event.metaKey) && event.key === 's') {\n        event.preventDefault();\n        handleSaveDraft();\n      }\n\n      // Ctrl/Cmd + Right Arrow to go to next step\n      if ((event.ctrlKey || event.metaKey) && event.key === 'ArrowRight') {\n        event.preventDefault();\n        if (currentStep < questionnaireSteps.length - 1) {\n          handleNext();\n        }\n      }\n\n      // Ctrl/Cmd + Left Arrow to go to previous step\n      if ((event.ctrlKey || event.metaKey) && event.key === 'ArrowLeft') {\n        event.preventDefault();\n        if (currentStep > 0) {\n          handlePrevious();\n        }\n      }\n\n      // F1 to show help/shortcuts\n      if (event.key === 'F1') {\n        event.preventDefault();\n        Modal.info({\n          title: 'Keyboard Shortcuts',\n          content: (\n            <div>\n              <p>\n                <strong>Ctrl/Cmd + S:</strong> Save draft\n              </p>\n              <p>\n                <strong>Ctrl/Cmd + →:</strong> Next step\n              </p>\n              <p>\n                <strong>Ctrl/Cmd + ←:</strong> Previous step\n              </p>\n              <p>\n                <strong>Tab:</strong> Navigate between fields\n              </p>\n              <p>\n                <strong>Enter:</strong> Submit form or proceed\n              </p>\n              <p>\n                <strong>Esc:</strong> Close modals\n              </p>\n            </div>\n          )\n        });\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [currentStep, questionnaireSteps.length, handleNext, handlePrevious, handleSaveDraft]);\n\n  // Define functions before useEffect hooks that depend on them\n  const loadWorkflowData = useCallback(async () => {\n    try {\n      setLoading(true);\n      const workflow = await workflowAPI.getWorkflow(workflowId);\n      setWorkflowData(workflow);\n\n      // Pre-populate material name from workflow data (from ProjectItemMaster)\n      const initialData = {};\n      if (workflow.materialName) {\n        initialData.materialName = workflow.materialName;\n      }\n\n      // Load existing responses if any\n      if (workflow.responses && workflow.responses.length > 0) {\n        const existingData = { ...initialData };\n        const completed = new Set();\n\n        workflow.responses.forEach(response => {\n          existingData[response.fieldName] = response.fieldValue;\n          completed.add(response.stepNumber);\n        });\n\n        setFormData(existingData);\n        setCompletedSteps(completed);\n        form.setFieldsValue(existingData);\n      } else {\n        // Set initial data even if no responses exist\n        setFormData(initialData);\n        form.setFieldsValue(initialData);\n      }\n    } catch (error) {\n      console.error('Failed to load workflow data:', error);\n      message.error('Failed to load workflow data');\n    } finally {\n      setLoading(false);\n    }\n  }, [workflowId, form]);\n\n  const loadQueries = useCallback(async () => {\n    try {\n      const workflowQueries = await queryAPI.getQueriesByWorkflow(workflowId);\n      setQueries(workflowQueries);\n    } catch (error) {\n      console.error('Failed to load queries:', error);\n    }\n  }, [workflowId]);\n\n  // Load workflow data and existing responses\n  useEffect(() => {\n    if (workflowId) {\n      loadWorkflowData();\n      loadQueries();\n    }\n  }, [workflowId, loadWorkflowData, loadQueries]);\n\n  // Load questionnaire template when workflow data is available\n  useEffect(() => {\n    if (workflowData && workflowData.materialCode && workflowData.assignedPlant) {\n      loadQuestionnaireTemplate();\n    }\n  }, [workflowData, loadQuestionnaireTemplate]);\n\n  // Auto-save functionality with recovery\n  useEffect(() => {\n    if (autoSaveEnabled && Object.keys(formData).length > 0) {\n      const autoSaveTimer = setTimeout(() => {\n        handleSaveDraft(true); // Silent save\n      }, AUTO_SAVE.INTERVAL); // Auto-save every 30 seconds\n\n      return () => clearTimeout(autoSaveTimer);\n    }\n  }, [formData, autoSaveEnabled, handleSaveDraft]);\n\n  // Track form data changes and update completed steps\n  useEffect(() => {\n    if (questionnaireSteps.length > 0) {\n      const newCompletedSteps = new Set();\n\n      // Get current form values including any unsaved changes\n      const currentFormValues = form.getFieldsValue();\n      const currentData = { ...formData, ...currentFormValues };\n\n      questionnaireSteps.forEach((step, index) => {\n        const stepFields = step.fields || [];\n        \n        // Filter out CQS auto-populated fields for step completion calculation\n        const userEditableFields = stepFields.filter(field => !field.isCqsAutoPopulated && !field.disabled);\n        const requiredFields = userEditableFields.filter(field => field.required);\n\n        const completedRequiredFields = requiredFields.filter(field => {\n          const value = currentData[field.name];\n          if (Array.isArray(value)) {\n            return value.length > 0;\n          }\n          return value && value !== '' && value !== null && value !== undefined;\n        });\n\n        // Mark step as complete based on field completion\n        if (requiredFields.length > 0) {\n          // If there are required fields, all must be completed\n          if (completedRequiredFields.length === requiredFields.length) {\n            newCompletedSteps.add(index);\n          }\n        } else {\n          // If no required fields, mark complete if at least 50% of user-editable fields are filled\n          const completedOptionalFields = userEditableFields.filter(field => {\n            const value = currentData[field.name];\n            if (Array.isArray(value)) {\n              return value.length > 0;\n            }\n            return value && value !== '' && value !== null && value !== undefined;\n          });\n\n          const completionPercentage =\n            userEditableFields.length > 0 ? (completedOptionalFields.length / userEditableFields.length) * 100 : 0;\n\n          if (completionPercentage >= 50) {\n            newCompletedSteps.add(index);\n          }\n        }\n\n        // Step completion calculated (excluding CQS auto-populated fields)\n      });\n\n      // Step completion updated\n\n      setCompletedSteps(newCompletedSteps);\n    }\n  }, [formData, questionnaireSteps, form]);\n\n  // Enhanced form validation with field-specific rules\n  const getFieldValidationRules = field => {\n    const rules = [];\n\n    if (field.required) {\n      rules.push({\n        required: true,\n        message: `${field.label} is required for MSDS completion`\n      });\n    }\n\n    // Add specific validation based on field type and name\n    switch (field.name) {\n      case 'casNumber':\n        rules.push({\n          pattern: /^\\d{1,7}-\\d{2}-\\d$/,\n          message:\n            'Please enter a valid CAS number format (e.g., 64-17-5). If unknown, raise a query to the Technical team.'\n        });\n        break;\n      case 'boilingPoint':\n      case 'meltingPoint':\n        rules.push({\n          pattern: /^-?\\d+(\\.\\d+)?$/,\n          message: 'Please enter a valid temperature in Celsius (e.g., 100.5 or -10)'\n        });\n        break;\n      case 'materialName':\n        rules.push({\n          min: 2,\n          message: 'Material name must be at least 2 characters'\n        });\n        rules.push({\n          max: 200,\n          message: 'Material name cannot exceed 200 characters'\n        });\n        break;\n      case 'supplierName':\n        rules.push({\n          min: 2,\n          message: 'Supplier name must be at least 2 characters'\n        });\n        rules.push({\n          max: 100,\n          message: 'Supplier name cannot exceed 100 characters'\n        });\n        break;\n      case 'missing_info':\n      case 'exposure_minimization':\n      case 'carcinogenic_control':\n      case 'storage_conditions_stores':\n      case 'storage_conditions_floor':\n      case 'procedures_details':\n      case 'antidote_source':\n      case 'monitoring_details':\n      case 'plant_inputs_required':\n      case 'gaps_identified':\n      case 'additional_input_1':\n      case 'additional_input_2':\n        rules.push({\n          min: 10,\n          message: `${field.label} must be at least 10 characters for regulatory compliance`\n        });\n        rules.push({\n          max: 2000,\n          message: `${field.label} cannot exceed 2000 characters`\n        });\n        break;\n      default:\n        break;\n    }\n\n    return rules;\n  };\n\n  // Get contextual help text for fields\n  const getFieldHelpText = field => {\n    const helpTexts = {\n      msds_available:\n        'Material Safety Data Sheet with all 16 sections as per regulatory requirements',\n      cas_available:\n        'Chemical Abstracts Service number - unique identifier for chemical substances',\n      is_corrosive: 'Corrosive materials can cause damage to skin, eyes, and respiratory system',\n      highly_toxic: 'Materials with high toxicity require special handling and safety measures',\n      flash_point_65:\n        'Flash point indicates fire hazard - materials with flash point ≤65°C are flammable',\n      petroleum_class:\n        'Classification under Petroleum Act determines storage and handling requirements',\n      ld50_oral: 'Lethal Dose 50 (oral) - dose that kills 50% of test animals when ingested',\n      ld50_dermal:\n        'Lethal Dose 50 (dermal) - dose that kills 50% of test animals through skin contact',\n      lc50_inhalation:\n        'Lethal Concentration 50 (inhalation) - concentration that kills 50% through inhalation',\n      carcinogenic: 'Materials suspected to cause cancer require enhanced safety protocols',\n      recommended_ppe: 'Personal Protective Equipment recommendations based on material hazards',\n      is_poisonous: 'Poisonous materials require specific antidotes and first aid procedures',\n      cmvr_listed:\n        'Chemical Manufacture and Verification Rules listing affects regulatory compliance',\n      msihc_listed: 'Manufacture, Storage and Import of Hazardous Chemical Rules listing',\n      factories_act_listed: 'Factories Act Schedule II listing requires workplace monitoring'\n    };\n\n    return helpTexts[field.name] || field.help;\n  };\n\n  // Enhanced auto-recovery on component mount with improved error handling\n  useEffect(() => {\n    const recoverDraftData = () => {\n      try {\n        const draftKey = `plant_questionnaire_draft_${workflowId}`;\n        const savedDraft = localStorage.getItem(draftKey);\n\n        if (savedDraft) {\n          const draftData = JSON.parse(savedDraft);\n          const draftTimestamp = draftData.timestamp;\n          const currentTime = Date.now();\n\n          // Only recover if draft is less than 7 days old (extended from 24 hours)\n          if (currentTime - draftTimestamp < 7 * 24 * 60 * 60 * 1000) {\n            // Enhanced validation of draft data integrity\n            if (draftData.formData && typeof draftData.formData === 'object') {\n              // Validate each field value before setting\n              const validatedFormData = {};\n              Object.entries(draftData.formData).forEach(([key, value]) => {\n                if (value !== null && value !== undefined && value !== '') {\n                  validatedFormData[key] = value;\n                }\n              });\n\n              setFormData(prev => ({ ...prev, ...validatedFormData }));\n              form.setFieldsValue(validatedFormData);\n\n              if (\n                typeof draftData.currentStep === 'number' &&\n                draftData.currentStep >= 0 &&\n                draftData.currentStep < questionnaireSteps.length\n              ) {\n                setCurrentStep(draftData.currentStep);\n              }\n\n              if (Array.isArray(draftData.completedSteps)) {\n                setCompletedSteps(new Set(draftData.completedSteps));\n              }\n\n              // Check if there are pending changes to sync\n              if (draftData.syncStatus === 'pending') {\n                setPendingChanges(true);\n              }\n\n              const recoveredFields = Object.keys(validatedFormData).length;\n              const draftAge = Math.round((currentTime - draftTimestamp) / (1000 * 60 * 60));\n\n              notification.success({\n                message: 'Draft Recovered',\n                description: `${recoveredFields} fields restored from ${draftAge} hours ago. Your progress has been preserved.`,\n                duration: 6,\n                placement: 'topRight'\n              });\n            } else {\n              // Remove corrupted draft\n              localStorage.removeItem(draftKey);\n              notification.warning({\n                message: 'Draft Recovery Failed',\n                description: 'Previous draft data was corrupted and has been cleared.',\n                duration: 4\n              });\n            }\n          } else {\n            // Remove old draft\n            localStorage.removeItem(draftKey);\n            const draftAge = Math.round((currentTime - draftTimestamp) / (1000 * 60 * 60 * 24));\n            notification.info({\n              message: 'Old Draft Cleared',\n              description: `Draft from ${draftAge} days ago was automatically removed.`,\n              duration: 3\n            });\n          }\n        }\n      } catch (error) {\n        console.error('Failed to recover draft data:', error);\n        // Remove corrupted draft\n        try {\n          localStorage.removeItem(`plant_questionnaire_draft_${workflowId}`);\n          notification.error({\n            message: 'Draft Recovery Error',\n            description: 'Failed to recover previous draft. Starting fresh.',\n            duration: 4\n          });\n        } catch (removeError) {\n          console.error('Failed to remove corrupted draft:', removeError);\n        }\n      }\n    };\n\n    if (workflowId && !workflowData) {\n      recoverDraftData();\n    }\n  }, [workflowId, workflowData, form, questionnaireSteps.length]);\n\n  // Enhanced step completion tracking with validation\n  const getStepCompletionStatus = useCallback(stepIndex => {\n    if (!questionnaireSteps[stepIndex] || !questionnaireSteps[stepIndex].fields) {\n      return {\n        total: 0,\n        required: 0,\n        optional: 0,\n        completed: 0,\n        requiredCompleted: 0,\n        optionalCompleted: 0,\n        isComplete: false,\n        hasOpenQueries: false,\n        hasResolvedQueries: false,\n        openQueriesCount: 0,\n        resolvedQueriesCount: 0,\n        completionPercentage: 0,\n        requiredCompletionPercentage: 0\n      };\n    }\n\n    const stepFields = questionnaireSteps[stepIndex].fields;\n    \n    // Filter out CQS auto-populated fields for step completion calculation\n    const userEditableFields = stepFields.filter(field => !field.isCqsAutoPopulated && !field.disabled);\n    const requiredFields = userEditableFields.filter(field => field.required);\n    const optionalFields = userEditableFields.filter(field => !field.required);\n\n    // Get current form values including any unsaved changes\n    const currentFormValues = form.getFieldsValue();\n    const currentData = { ...formData, ...currentFormValues };\n\n    const completedRequiredFields = requiredFields.filter(field => {\n      const value = currentData[field.name];\n      if (Array.isArray(value)) {\n        return value.length > 0;\n      }\n      return value && value !== '' && value !== null && value !== undefined;\n    });\n\n    const completedOptionalFields = optionalFields.filter(field => {\n      const value = currentData[field.name];\n      if (Array.isArray(value)) {\n        return value.length > 0;\n      }\n      return value && value !== '' && value !== null && value !== undefined;\n    });\n\n    const stepQueries = queries.filter(q => q.stepNumber === stepIndex);\n    const openQueries = stepQueries.filter(q => q.status === 'OPEN');\n    const resolvedQueries = stepQueries.filter(q => q.status === 'RESOLVED');\n\n    return {\n      total: userEditableFields.length,\n      required: requiredFields.length,\n      optional: optionalFields.length,\n      completed: completedRequiredFields.length + completedOptionalFields.length,\n      requiredCompleted: completedRequiredFields.length,\n      optionalCompleted: completedOptionalFields.length,\n      isComplete:\n        requiredFields.length > 0\n          ? completedRequiredFields.length === requiredFields.length\n          : userEditableFields.length > 0 &&\n          (completedRequiredFields.length + completedOptionalFields.length) / userEditableFields.length >=\n          0.5,\n      hasOpenQueries: openQueries.length > 0,\n      hasResolvedQueries: resolvedQueries.length > 0,\n      openQueriesCount: openQueries.length,\n      resolvedQueriesCount: resolvedQueries.length,\n      completionPercentage:\n        userEditableFields.length > 0\n          ? Math.round(\n            ((completedRequiredFields.length + completedOptionalFields.length) /\n              userEditableFields.length) *\n            100\n          )\n          : 100,\n      requiredCompletionPercentage:\n        requiredFields.length > 0\n          ? Math.round((completedRequiredFields.length / requiredFields.length) * 100)\n          : 100\n    };\n  }, [questionnaireSteps, formData, form, queries]);\n\n  const handleRaiseQuery = fieldName => {\n    console.log('handleRaiseQuery called with fieldName:', fieldName);\n    const field = questionnaireSteps[currentStep].fields.find(f => f.name === fieldName);\n    const currentValue = formData[fieldName] || form.getFieldValue(fieldName);\n\n    console.log('Found field:', field);\n    console.log('Current value:', currentValue);\n\n    setSelectedField({\n      ...field,\n      stepNumber: currentStep,\n      stepTitle: questionnaireSteps[currentStep].title,\n      currentValue,\n      materialContext: {\n        materialCode: workflowData?.materialCode,\n        materialName: workflowData?.materialName,\n        materialType: formData.materialType || workflowData?.materialType,\n        supplierName: formData.supplierName || workflowData?.supplierName\n      }\n    });\n\n    console.log('Setting queryModalVisible to true');\n    setQueryModalVisible(true);\n  };\n\n  const handleQueryCreated = _queryData => {\n    setQueryModalVisible(false);\n    setSelectedField(null);\n    loadQueries(); // Reload queries\n    message.success('Query raised successfully');\n  };\n\n  // Auto-scroll to field with resolved query\n  const scrollToResolvedQuery = useCallback(fieldName => {\n    setTimeout(() => {\n      const fieldElement = document.querySelector(`[data-field-name=\"${fieldName}\"]`);\n      if (fieldElement) {\n        fieldElement.scrollIntoView({\n          behavior: 'smooth',\n          block: 'center',\n          inline: 'nearest'\n        });\n\n        // Highlight the field briefly\n        fieldElement.style.transition = 'background-color 0.3s ease';\n        fieldElement.style.backgroundColor = '#f6ffed';\n        setTimeout(() => {\n          fieldElement.style.backgroundColor = '';\n        }, 2000);\n      }\n    }, 100);\n  }, []);\n\n  // Check for newly resolved queries and auto-scroll\n  useEffect(() => {\n    if (queries.length > 0) {\n      const resolvedQueriesInCurrentStep = queries.filter(\n        q => q.stepNumber === currentStep && q.status === 'RESOLVED' && !q.hasBeenViewed // Add this flag to track if user has seen the resolution\n      );\n\n      if (resolvedQueriesInCurrentStep.length > 0) {\n        const latestResolvedQuery = resolvedQueriesInCurrentStep.sort(\n          (a, b) => new Date(b.resolvedAt) - new Date(a.resolvedAt)\n        )[0];\n\n        scrollToResolvedQuery(latestResolvedQuery.fieldName);\n\n        // Show notification about resolved query\n        notification.success({\n          message: 'Query Resolved',\n          description: `Your query about \"${latestResolvedQuery.fieldName}\" has been resolved. Check the field for the response.`,\n          duration: 5,\n          placement: 'topRight'\n        });\n      }\n    }\n  }, [queries, currentStep, scrollToResolvedQuery]);\n\n  const handleSubmit = async () => {\n    try {\n      setSubmitting(true);\n\n      // Check for open queries\n      const openQueries = queries.filter(q => q.status === 'OPEN');\n      if (openQueries.length > 0) {\n        Modal.confirm({\n          title: 'Open Queries Detected',\n          content: `You have ${openQueries.length} open queries. Are you sure you want to submit the questionnaire? It's recommended to resolve all queries before submission.`,\n          okText: 'Submit Anyway',\n          cancelText: 'Cancel',\n          onOk: () => proceedWithSubmission()\n        });\n        return;\n      }\n\n      await proceedWithSubmission();\n    } catch (error) {\n      console.error('Failed to submit questionnaire:', error);\n      if (error.status === 400) {\n        message.error('Please complete all required fields before submitting');\n      } else if (error.status === 401) {\n        message.error('Session expired. Please log in again.');\n      } else {\n        message.error('Failed to submit questionnaire. Please try again.');\n      }\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  const proceedWithSubmission = async () => {\n    // Validate all required fields\n    const allRequiredFields = questionnaireSteps.flatMap(step =>\n      step.fields.filter(field => field.required).map(field => field.name)\n    );\n\n    await form.validateFields(allRequiredFields);\n\n    const finalData = form.getFieldsValue();\n\n    // Check completion percentage\n    const completionPercentage = getOverallCompletionPercentage();\n    if (completionPercentage < 80) {\n      const proceed = await new Promise(resolve => {\n        Modal.confirm({\n          title: 'Incomplete Questionnaire',\n          content: `Your questionnaire is only ${completionPercentage}% complete. Are you sure you want to submit?`,\n          okText: 'Submit',\n          cancelText: 'Continue Editing',\n          onOk: () => resolve(true),\n          onCancel: () => resolve(false)\n        });\n      });\n\n      if (!proceed) {\n        return;\n      }\n    }\n\n    const submissionData = {\n      plantCode: workflowData?.assignedPlant,\n      materialCode: workflowData?.materialCode,\n      responses: finalData,\n      completionPercentage,\n      submittedBy: 'current_user',\n      totalQueries: queries.length,\n      openQueries: queries.filter(q => q.status === 'OPEN').length\n    };\n\n    await workflowAPI.submitPlantQuestionnaire(workflowId, submissionData);\n\n    // Clear draft data after successful submission\n    try {\n      localStorage.removeItem(`plant_questionnaire_draft_${workflowId}`);\n    } catch (error) {\n      console.warn('Failed to clear draft data:', error);\n    }\n\n    message.success('Questionnaire submitted successfully');\n\n    if (onComplete) {\n      onComplete(finalData);\n    }\n  };\n\n  const renderField = field => {\n    const fieldQueries = queries.filter(\n      q => q.fieldName === field.name && q.stepNumber === currentStep\n    );\n\n    const hasOpenQuery = fieldQueries.some(q => q.status === 'OPEN');\n    const hasResolvedQuery = fieldQueries.some(q => q.status === 'RESOLVED');\n    const resolvedQuery = fieldQueries.find(q => q.status === 'RESOLVED');\n\n    const isFieldCompleted = formData[field.name] && formData[field.name] !== '';\n\n    const fieldLabel = (\n      <div className=\"modern-field-label\">\n        <Space align=\"center\">\n          {field.label}\n          {field.required && <span style={{ color: '#ef4444' }}>*</span>}\n          {field.isCqsAutoPopulated && <span className=\"cqs-badge\">CQS</span>}\n          {isFieldCompleted && (\n            <Tooltip title=\"Field completed\">\n              <CheckCircleOutlined style={{ color: '#10b981', fontSize: '14px' }} />\n            </Tooltip>\n          )}\n        </Space>\n        <div style={{ display: 'flex', gap: '8px', marginTop: '4px' }}>\n          <Button\n            type=\"text\"\n            size=\"small\"\n            icon={<QuestionCircleOutlined />}\n            onClick={() => handleRaiseQuery(field.name)}\n            style={{\n              color: '#667eea',\n              padding: '2px 6px',\n              height: 'auto',\n              fontSize: '12px'\n            }}\n          >\n            Query\n          </Button>\n          {hasOpenQuery && (\n            <Tag color=\"red\" size=\"small\">\n              Query Open\n            </Tag>\n          )}\n          {hasResolvedQuery && !hasOpenQuery && (\n            <Tag color=\"green\" size=\"small\">\n              Query Resolved\n            </Tag>\n          )}\n        </div>\n      </div>\n    );\n\n    // Enhanced validation rules\n    const validationRules = getFieldValidationRules(field);\n\n    const helpContent = resolvedQuery ? (\n      <div\n        style={{\n          marginTop: 8,\n          padding: '12px 16px',\n          background: 'linear-gradient(135deg, #f0fdf4, #dcfce7)',\n          border: '1px solid #bbf7d0',\n          borderRadius: '8px',\n          fontSize: '12px'\n        }}\n      >\n        <div style={{ marginBottom: 6 }}>\n          <Text strong style={{ color: '#059669' }}>\n            Query Response:\n          </Text>\n        </div>\n        <div style={{ marginBottom: 6, color: '#374151' }}>{resolvedQuery.response}</div>\n        <div style={{ fontSize: '10px', color: '#6b7280' }}>\n          Resolved by {resolvedQuery.resolvedBy} on{' '}\n          {new Date(resolvedQuery.resolvedAt).toLocaleDateString()}\n        </div>\n      </div>\n    ) : (\n      getFieldHelpText(field)\n    );\n\n    const commonProps = {\n      name: field.name,\n      label: fieldLabel,\n      rules: validationRules,\n      help: helpContent,\n      'data-field-name': field.name\n    };\n\n    const inputProps = {\n      className: 'modern-input',\n      disabled: field.disabled || field.isCqsAutoPopulated,\n      placeholder: field.placeholder || `Enter ${field.label.toLowerCase()}`\n    };\n\n    switch (field.type) {\n      case 'input':\n        return (\n          <Form.Item {...commonProps}>\n            <Input {...inputProps} />\n          </Form.Item>\n        );\n\n      case 'textarea':\n        return (\n          <Form.Item {...commonProps}>\n            <TextArea {...inputProps} rows={4} autoSize={{ minRows: 3, maxRows: 6 }} />\n          </Form.Item>\n        );\n\n      case 'select':\n        return (\n          <Form.Item {...commonProps}>\n            <Select\n              {...inputProps}\n              placeholder={`Select ${field.label.toLowerCase()}`}\n              showSearch\n              optionFilterProp=\"children\"\n            >\n              {field.options?.map(option => (\n                <Option key={option.value} value={option.value}>\n                  {option.label}\n                </Option>\n              ))}\n            </Select>\n          </Form.Item>\n        );\n\n      case 'radio':\n        return (\n          <Form.Item {...commonProps}>\n            <Radio.Group\n              className=\"modern-radio-group\"\n              disabled={field.disabled || field.isCqsAutoPopulated}\n            >\n              <Space direction=\"vertical\" size=\"small\">\n                {field.options?.map(option => (\n                  <Radio key={option.value} value={option.value}>\n                    {option.label}\n                  </Radio>\n                ))}\n              </Space>\n            </Radio.Group>\n          </Form.Item>\n        );\n\n      case 'checkbox':\n        return (\n          <Form.Item {...commonProps} valuePropName=\"checked\">\n            <Checkbox.Group\n              className=\"modern-checkbox-group\"\n              disabled={field.disabled || field.isCqsAutoPopulated}\n            >\n              <Space direction=\"vertical\" size=\"small\">\n                {field.options?.map(option => (\n                  <Checkbox key={option.value} value={option.value}>\n                    {option.label}\n                  </Checkbox>\n                ))}\n              </Space>\n            </Checkbox.Group>\n          </Form.Item>\n        );\n\n      default:\n        return (\n          <Form.Item {...commonProps}>\n            <Input {...inputProps} />\n          </Form.Item>\n        );\n    }\n  };\n\n  if (loading) {\n    return (\n      <div\n        className=\"plant-questionnaire-container\"\n        style={{\n          display: 'flex',\n          flexDirection: 'column',\n          justifyContent: 'center',\n          alignItems: 'center',\n          minHeight: '100vh',\n          gap: '24px'\n        }}\n      >\n        <div\n          style={{\n            background: 'white',\n            padding: '48px',\n            borderRadius: '16px',\n            boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)',\n            textAlign: 'center',\n            maxWidth: '400px'\n          }}\n        >\n          <div style={{ marginBottom: '24px' }}>\n            <div\n              style={{\n                width: '60px',\n                height: '60px',\n                margin: '0 auto 16px',\n                background: 'linear-gradient(135deg, #4f46e5, #7c3aed)',\n                borderRadius: '50%',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center'\n              }}\n            >\n              <FileTextOutlined style={{ fontSize: '24px', color: 'white' }} />\n            </div>\n            <Title level={3} style={{ margin: 0, color: '#1e293b' }}>\n              Loading Questionnaire\n            </Title>\n            <Text type=\"secondary\" style={{ fontSize: '14px' }}>\n              Preparing your workflow data...\n            </Text>\n          </div>\n\n          <div style={{ marginBottom: '16px' }}>\n            <Spin size=\"large\" />\n          </div>\n\n          <div\n            style={{\n              height: '4px',\n              background: '#e2e8f0',\n              borderRadius: '2px',\n              overflow: 'hidden'\n            }}\n          >\n            <div\n              style={{\n                height: '100%',\n                width: '30%',\n                background: 'linear-gradient(135deg, #4f46e5, #7c3aed)',\n                borderRadius: '2px',\n                animation: 'slideInFromLeft 2s ease-in-out infinite'\n              }}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!workflowData) {\n    return (\n      <Alert\n        message=\"Workflow Not Found\"\n        description=\"The requested workflow could not be loaded.\"\n        type=\"error\"\n        showIcon\n      />\n    );\n  }\n\n  // Add safety checks for questionnaire steps\n  if (templateLoading) {\n    return (\n      <div\n        className=\"plant-questionnaire-container\"\n        style={{\n          display: 'flex',\n          flexDirection: 'column',\n          justifyContent: 'center',\n          alignItems: 'center',\n          minHeight: '100vh',\n          gap: '24px'\n        }}\n      >\n        <div\n          style={{\n            background: 'white',\n            padding: '48px',\n            borderRadius: '16px',\n            boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)',\n            textAlign: 'center',\n            maxWidth: '400px'\n          }}\n        >\n          <div style={{ marginBottom: '24px' }}>\n            <div\n              style={{\n                width: '60px',\n                height: '60px',\n                margin: '0 auto 16px',\n                background: 'linear-gradient(135deg, #4f46e5, #7c3aed)',\n                borderRadius: '50%',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center'\n              }}\n            >\n              <ExperimentOutlined style={{ fontSize: '24px', color: 'white' }} />\n            </div>\n            <Title level={3} style={{ margin: 0, color: '#1e293b' }}>\n              Loading Template\n            </Title>\n            <Text type=\"secondary\" style={{ fontSize: '14px' }}>\n              Preparing your plant-specific questionnaire template...\n            </Text>\n          </div>\n\n          <div style={{ marginBottom: '16px' }}>\n            <Spin size=\"large\" />\n          </div>\n\n          <div\n            style={{\n              height: '4px',\n              background: '#e2e8f0',\n              borderRadius: '2px',\n              overflow: 'hidden'\n            }}\n          >\n            <div\n              style={{\n                height: '100%',\n                width: '60%',\n                background: 'linear-gradient(135deg, #4f46e5, #7c3aed)',\n                borderRadius: '2px',\n                animation: 'slideInFromLeft 2s ease-in-out infinite'\n              }}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!questionnaireSteps || questionnaireSteps.length === 0) {\n    return (\n      <Alert\n        message=\"Template Not Available\"\n        description=\"The questionnaire template could not be loaded. Please try refreshing the page.\"\n        type=\"error\"\n        showIcon\n        action={\n          <Button size=\"small\" onClick={() => window.location.reload()}>\n            Refresh\n          </Button>\n        }\n      />\n    );\n  }\n\n  // const progress = Math.round(((currentStep + 1) / questionnaireSteps.length) * 100); // Not currently used\n  const currentStepData = questionnaireSteps[currentStep] || {\n    title: 'Loading...',\n    description: '',\n    fields: []\n  };\n\n  return (\n    <div className=\"plant-questionnaire-container\">\n      {/* Modern Header */}\n      <div className=\"plant-questionnaire-header\">\n        <div className=\"plant-questionnaire-header-content\">\n          <div className=\"plant-questionnaire-title\">\n            <Avatar size={40} style={{ background: 'linear-gradient(135deg, #667eea, #764ba2)' }}>\n              <DashboardOutlined />\n            </Avatar>\n            <div>\n              <Title level={3} style={{ margin: 0, color: '#1e293b' }}>\n                Plant Questionnaire\n              </Title>\n              <Text type=\"secondary\" style={{ fontSize: '14px' }}>\n                {workflowData?.materialCode} • {workflowData?.assignedPlant}\n              </Text>\n            </div>\n          </div>\n\n          <div className=\"plant-questionnaire-stats\">\n            <div className=\"modern-stats-card\">\n              <div\n                className=\"modern-progress-ring\"\n                style={{ '--progress': getOverallCompletionPercentage() }}\n              >\n                <svg>\n                  <defs>\n                    <linearGradient id=\"progressGradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n                      <stop offset=\"0%\" stopColor=\"#4f46e5\" />\n                      <stop offset=\"100%\" stopColor=\"#7c3aed\" />\n                    </linearGradient>\n                  </defs>\n                  <circle className=\"progress-circle progress-background\" cx=\"30\" cy=\"30\" r=\"26\" />\n                  <circle className=\"progress-circle progress-foreground\" cx=\"30\" cy=\"30\" r=\"26\" />\n                </svg>\n                <div\n                  style={{\n                    position: 'absolute',\n                    inset: 0,\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    fontSize: '12px',\n                    fontWeight: '600',\n                    color: '#1e293b'\n                  }}\n                >\n                  {getOverallCompletionPercentage()}%\n                </div>\n              </div>\n              <div style={{ textAlign: 'center', marginTop: 8 }}>\n                <Text style={{ fontSize: '11px', color: '#64748b' }}>Overall Progress</Text>\n              </div>\n            </div>\n\n            <div className=\"modern-stats-card\">\n              <div\n                style={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  marginBottom: 8\n                }}\n              >\n                <Badge\n                  count={queries.filter(q => q.status === 'OPEN').length}\n                  style={{\n                    backgroundColor:\n                      queries.filter(q => q.status === 'OPEN').length > 0 ? '#ef4444' : '#10b981'\n                  }}\n                >\n                  <Avatar\n                    icon={<QuestionCircleOutlined />}\n                    style={{\n                      backgroundColor:\n                        queries.filter(q => q.status === 'OPEN').length > 0 ? '#fef2f2' : '#f0fdf4',\n                      color:\n                        queries.filter(q => q.status === 'OPEN').length > 0 ? '#ef4444' : '#10b981'\n                    }}\n                  />\n                </Badge>\n              </div>\n              <Text\n                style={{\n                  fontSize: '11px',\n                  color: '#64748b',\n                  display: 'block',\n                  textAlign: 'center'\n                }}\n              >\n                Open Queries\n              </Text>\n            </div>\n\n            <div className=\"modern-stats-card\">\n              <div style={{ textAlign: 'center' }}>\n                <div\n                  className={`modern-completion-badge ${getOverallCompletionPercentage() >= 80\n                    ? 'high'\n                    : getOverallCompletionPercentage() >= 50\n                      ? 'medium'\n                      : 'low'\n                    }`}\n                >\n                  Step {currentStep + 1}/{questionnaireSteps.length}\n                </div>\n                <Text\n                  style={{ fontSize: '11px', color: '#64748b', display: 'block', marginTop: 4 }}\n                >\n                  Current Step\n                </Text>\n              </div>\n            </div>\n\n            {/* Header Actions */}\n            <Space>\n              <Button\n                className=\"modern-btn modern-btn-secondary\"\n                icon={<SaveOutlined />}\n                onClick={() => handleSaveDraft()}\n                loading={saving}\n              >\n                Save Draft\n              </Button>\n              {isMobile && (\n                <Button\n                  className=\"modern-btn modern-btn-secondary\"\n                  icon={<MenuOutlined />}\n                  onClick={() => setSidebarVisible(true)}\n                >\n                  Steps\n                </Button>\n              )}\n            </Space>\n          </div>\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"plant-questionnaire-main\">\n        {/* Sidebar - Steps Navigation */}\n        {!isMobile && (\n          <div className=\"plant-questionnaire-sidebar\">\n            <Card className=\"modern-steps-card\">\n              <div className=\"modern-steps-header\">\n                <Title level={4} style={{ margin: 0, color: '#1e293b' }}>\n                  Questionnaire Steps\n                </Title>\n                <Text type=\"secondary\" style={{ fontSize: '12px' }}>\n                  {completedSteps.size} of {questionnaireSteps.length} steps completed\n                </Text>\n                <Text type=\"secondary\" style={{ fontSize: '11px', display: 'block', marginTop: 2 }}>\n                  {(() => {\n                    const fieldStats = getTotalFieldsPopulated();\n                    return `${fieldStats.populated} of ${fieldStats.total} fields populated`;\n                  })()}\n                </Text>\n              </div>\n\n              <div className=\"modern-steps-list\">\n                {questionnaireSteps.map((step, index) => {\n                  const stepStatus = getStepCompletionStatus(index);\n                  const hasOpenQueries = queries.some(\n                    q => q.stepNumber === index && q.status === 'OPEN'\n                  );\n                  const isActive = index === currentStep;\n                  const isCompleted = stepStatus.isComplete;\n\n                  return (\n                    <div\n                      key={index}\n                      className={`modern-step-item ${isActive ? 'active' : ''} ${isCompleted ? 'completed' : ''}`}\n                      onClick={() => handleStepChange(index)}\n                    >\n                      <div\n                        className={`step-completion-ring ${isCompleted ? 'completed' : ''}`}\n                        style={{\n                          '--completion-angle': `${(stepStatus.requiredCompleted / Math.max(stepStatus.required, 1)) * 360}deg`,\n                          background: isActive ? '#4f46e5' : isCompleted ? '#10b981' : '#f1f5f9',\n                          color: isActive || isCompleted ? 'white' : '#64748b'\n                        }}\n                      >\n                        {isCompleted ? (\n                          <CheckCircleOutlined />\n                        ) : hasOpenQueries ? (\n                          <ExclamationCircleOutlined />\n                        ) : (\n                          stepIcons[step.title] || <FileTextOutlined />\n                        )}\n                      </div>\n                      <div style={{ flex: 1, minWidth: 0 }}>\n                        <div style={{ fontWeight: isActive ? 600 : 400, color: '#1e293b' }}>\n                          {step.title}\n                        </div>\n                        <div style={{ fontSize: '12px', color: '#64748b', marginTop: 2 }}>\n                          {stepStatus.completed}/{stepStatus.total} fields (\n                          {stepStatus.requiredCompleted}/{stepStatus.required} required)\n                          {hasOpenQueries && (\n                            <Tag color=\"red\" size=\"small\" style={{ marginLeft: 4 }}>\n                              {\n                                queries.filter(q => q.stepNumber === index && q.status === 'OPEN')\n                                  .length\n                              }{' '}\n                              queries\n                            </Tag>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  );\n                })}\n              </div>\n            </Card>\n\n            {/* Material Context Panel */}\n            <div style={{ marginTop: 16 }}>\n              <MaterialContextPanel workflowData={workflowData} />\n            </div>\n          </div>\n        )}\n\n        {/* Main Form Content */}\n        <div className=\"plant-questionnaire-content\">\n          <Card className=\"modern-form-card\">\n            <div className=\"modern-form-header\">\n              <div>\n                <Title level={2} style={{ margin: 0, color: 'white' }}>\n                  {currentStepData.title}\n                </Title>\n                <Paragraph style={{ margin: '8px 0 0 0', color: 'rgba(255, 255, 255, 0.8)' }}>\n                  {currentStepData.description}\n                </Paragraph>\n              </div>\n\n              <div className=\"modern-progress-container\">\n                <Progress\n                  className=\"modern-progress\"\n                  percent={(() => {\n                    const status = getStepCompletionStatus(currentStep);\n                    return status.required > 0\n                      ? Math.round((status.requiredCompleted / status.required) * 100)\n                      : 100;\n                  })()}\n                  showInfo={false}\n                  strokeColor=\"rgba(255, 255, 255, 0.9)\"\n                  trailColor=\"rgba(255, 255, 255, 0.2)\"\n                />\n                <Text style={{ color: 'rgba(255, 255, 255, 0.8)', fontSize: '12px' }}>\n                  Step Progress:{' '}\n                  {(() => {\n                    const status = getStepCompletionStatus(currentStep);\n                    return `${status.requiredCompleted}/${status.required} required fields`;\n                  })()}\n                </Text>\n              </div>\n            </div>\n\n            {/* Offline Indicator */}\n            {isOffline && (\n              <Alert\n                className=\"modern-alert modern-alert-warning\"\n                message=\"Offline Mode\"\n                description=\"You are currently offline. Changes will be saved locally and synced when connection is restored.\"\n                type=\"warning\"\n                showIcon\n                style={{ margin: '16px 32px' }}\n                closable\n              />\n            )}\n\n            <div\n              className={`modern-form-content ${currentStep % 2 === 0 ? 'slide-in-from-right' : 'slide-in-from-left'}`}\n            >\n              <Form\n                form={form}\n                layout=\"vertical\"\n                onValuesChange={(changedValues, allValues) => {\n                  setFormData(prev => ({ ...prev, ...allValues }));\n                  setPendingChanges(true);\n                  _setProgressUpdateTrigger(prev => prev + 1);\n\n                  // Trigger completion status update\n                  setTimeout(() => {\n                    if (questionnaireSteps.length > 0) {\n                      const newCompletedSteps = new Set();\n\n                      questionnaireSteps.forEach((step, index) => {\n                        const stepFields = step.fields || [];\n                        \n                        // Filter out CQS auto-populated fields for step completion calculation\n                        const userEditableFields = stepFields.filter(field => !field.isCqsAutoPopulated && !field.disabled);\n                        const requiredFields = userEditableFields.filter(field => field.required);\n\n                        const completedRequiredFields = requiredFields.filter(field => {\n                          const value = allValues[field.name];\n                          if (Array.isArray(value)) {\n                            return value.length > 0;\n                          }\n                          return value && value !== '' && value !== null && value !== undefined;\n                        });\n\n                        // Mark step as complete based on field completion\n                        if (requiredFields.length > 0) {\n                          // If there are required fields, all must be completed\n                          if (completedRequiredFields.length === requiredFields.length) {\n                            newCompletedSteps.add(index);\n                          }\n                        } else {\n                          // If no required fields, mark complete if at least 50% of user-editable fields are filled\n                          const completedOptionalFields = userEditableFields.filter(field => {\n                            const value = allValues[field.name];\n                            if (Array.isArray(value)) {\n                              return value.length > 0;\n                            }\n                            return value && value !== '' && value !== null && value !== undefined;\n                          });\n\n                          const completionPercentage =\n                            userEditableFields.length > 0\n                              ? (completedOptionalFields.length / userEditableFields.length) * 100\n                              : 0;\n\n                          if (completionPercentage >= 50) {\n                            newCompletedSteps.add(index);\n                          }\n                        }\n                      });\n\n                      // Step completion updated on form change\n\n                      setCompletedSteps(newCompletedSteps);\n                    }\n                  }, 100); // Small delay to ensure form state is updated\n                }}\n              >\n                <Row gutter={[24, 24]}>\n                  {(currentStepData.fields || []).map((field, index) => (\n                    <Col\n                      key={field.name}\n                      xs={24}\n                      sm={field.type === 'textarea' ? 24 : 12}\n                      md={field.type === 'textarea' ? 24 : 12}\n                    >\n                      <div\n                        className={`modern-field-group ${field.required ? 'required' : ''} ${field.isCqsAutoPopulated ? 'cqs-populated' : ''} fade-in-up`}\n                        style={{ animationDelay: `${index * 0.1}s` }}\n                      >\n                        <div className=\"modern-field-header\">\n                          <div style={{ flex: 1 }}>{renderField(field)}</div>\n                          <div className=\"modern-field-actions\">\n                            <Tooltip title=\"Raise Query\">\n                              <button\n                                className=\"modern-query-button\"\n                                onClick={() => handleRaiseQuery(field.name)}\n                              >\n                                <QuestionCircleOutlined />\n                              </button>\n                            </Tooltip>\n                            {field.isCqsAutoPopulated && (\n                              <Tooltip title=\"CQS Auto-populated\">\n                                <div\n                                  style={{\n                                    background: 'linear-gradient(135deg, #10b981, #059669)',\n                                    color: 'white',\n                                    padding: '2px 6px',\n                                    borderRadius: '4px',\n                                    fontSize: '10px',\n                                    fontWeight: '500'\n                                  }}\n                                >\n                                  CQS\n                                </div>\n                              </Tooltip>\n                            )}\n                          </div>\n                        </div>\n                      </div>\n                    </Col>\n                  ))}\n                </Row>\n              </Form>\n            </div>\n\n            {/* Navigation */}\n            <div className=\"modern-navigation\">\n              <Button\n                className=\"modern-btn modern-btn-secondary\"\n                icon={<ArrowLeftOutlined />}\n                onClick={handlePrevious}\n                disabled={currentStep === 0}\n                style={{\n                  opacity: currentStep === 0 ? 0.5 : 1,\n                  cursor: currentStep === 0 ? 'not-allowed' : 'pointer'\n                }}\n              >\n                Previous\n              </Button>\n\n              <div style={{ display: 'flex', alignItems: 'center', gap: 16 }}>\n                <div style={{ textAlign: 'center' }}>\n                  <Text type=\"secondary\" style={{ fontSize: '12px', display: 'block' }}>\n                    Step Progress\n                  </Text>\n                  <Text style={{ fontSize: '14px', fontWeight: '600', color: '#1e293b' }}>\n                    {currentStep + 1} of {questionnaireSteps.length}\n                  </Text>\n                </div>\n\n                {pendingChanges && (\n                  <div\n                    style={{\n                      padding: '4px 8px',\n                      background: '#fef3c7',\n                      border: '1px solid #fde68a',\n                      borderRadius: '6px',\n                      fontSize: '11px',\n                      color: '#92400e'\n                    }}\n                  >\n                    Unsaved changes\n                  </div>\n                )}\n\n                {currentStep === questionnaireSteps.length - 1 ? (\n                  <Button\n                    className={`modern-btn modern-btn-primary ${getOverallCompletionPercentage() === 100 ? 'pulse-glow' : ''}`}\n                    onClick={handleSubmit}\n                    loading={submitting}\n                    size=\"large\"\n                    style={{ minWidth: '160px' }}\n                  >\n                    {submitting ? 'Submitting...' : 'Submit Questionnaire'}\n                  </Button>\n                ) : (\n                  <Button\n                    className=\"modern-btn modern-btn-primary\"\n                    icon={<ArrowRightOutlined />}\n                    onClick={handleNext}\n                    style={{ minWidth: '120px' }}\n                  >\n                    Next Step\n                  </Button>\n                )}\n              </div>\n            </div>\n          </Card>\n        </div>\n      </div>\n\n      {/* Mobile Sidebar Drawer */}\n      <Drawer\n        className=\"modern-drawer\"\n        title=\"Questionnaire Steps\"\n        placement=\"left\"\n        onClose={() => setSidebarVisible(false)}\n        open={sidebarVisible}\n        width={320}\n      >\n        <div className=\"modern-timeline\">\n          <Timeline>\n            {questionnaireSteps.map((step, index) => {\n              const stepStatus = getStepCompletionStatus(index);\n              const hasOpenQueries = queries.some(\n                q => q.stepNumber === index && q.status === 'OPEN'\n              );\n              const isActive = index === currentStep;\n              const isCompleted = stepStatus.isComplete;\n\n              return (\n                <Timeline.Item\n                  key={index}\n                  color={isCompleted ? '#10b981' : isActive ? '#667eea' : '#cbd5e1'}\n                  dot={\n                    isCompleted ? (\n                      <CheckCircleOutlined style={{ color: '#10b981' }} />\n                    ) : hasOpenQueries ? (\n                      <ExclamationCircleOutlined style={{ color: '#ef4444' }} />\n                    ) : (\n                      stepIcons[step.title] || <FileTextOutlined />\n                    )\n                  }\n                >\n                  <div\n                    onClick={() => {\n                      handleStepChange(index);\n                      setSidebarVisible(false);\n                    }}\n                    style={{ cursor: 'pointer', padding: '8px 0' }}\n                  >\n                    <Text strong={isActive} style={{ color: isActive ? '#667eea' : '#1e293b' }}>\n                      {step.title}\n                    </Text>\n                    <div style={{ fontSize: '12px', color: '#64748b', marginTop: 4 }}>\n                      {stepStatus.completed}/{stepStatus.total} fields completed (\n                      {stepStatus.requiredCompleted}/{stepStatus.required} required)\n                      {hasOpenQueries && (\n                        <Tag color=\"red\" size=\"small\" style={{ marginLeft: 4 }}>\n                          {\n                            queries.filter(q => q.stepNumber === index && q.status === 'OPEN')\n                              .length\n                          }{' '}\n                          queries\n                        </Tag>\n                      )}\n                    </div>\n                  </div>\n                </Timeline.Item>\n              );\n            })}\n          </Timeline>\n        </div>\n      </Drawer>\n\n      {/* Modern Floating Completion Indicator */}\n      {!isMobile && (\n        <div className=\"modern-floating-indicator\">\n          <div style={{ textAlign: 'center', marginBottom: 12 }}>\n            <Text strong style={{ color: '#1e293b', fontSize: '14px' }}>\n              Questionnaire Progress\n            </Text>\n          </div>\n          <div style={{ display: 'flex', alignItems: 'center', gap: 12, marginBottom: 8 }}>\n            <div\n              className=\"modern-progress-ring\"\n              style={{\n                '--progress': getOverallCompletionPercentage(),\n                width: '40px',\n                height: '40px'\n              }}\n            >\n              <svg>\n                <circle className=\"progress-circle progress-background\" cx=\"20\" cy=\"20\" r=\"16\" />\n                <circle className=\"progress-circle progress-foreground\" cx=\"20\" cy=\"20\" r=\"16\" />\n              </svg>\n              <div\n                style={{\n                  position: 'absolute',\n                  inset: 0,\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  fontSize: '10px',\n                  fontWeight: '600',\n                  color: '#1e293b'\n                }}\n              >\n                {getOverallCompletionPercentage()}%\n              </div>\n            </div>\n            <div>\n              <div style={{ fontSize: '12px', color: '#1e293b', fontWeight: '500' }}>\n                {completedSteps.size} of {questionnaireSteps.length} steps\n              </div>\n              <div style={{ fontSize: '11px', color: '#64748b' }}>\n                {(() => {\n                  const fieldStats = getTotalFieldsPopulated();\n                  return `${fieldStats.populated}/${fieldStats.total} fields`;\n                })()}\n              </div>\n              <div style={{ fontSize: '11px', color: '#64748b' }}>\n                {queries.filter(q => q.status === 'OPEN').length} open queries\n              </div>\n            </div>\n          </div>\n          <div\n            style={{\n              height: '2px',\n              background: '#e2e8f0',\n              borderRadius: '1px',\n              overflow: 'hidden'\n            }}\n          >\n            <div\n              style={{\n                height: '100%',\n                width: `${getOverallCompletionPercentage()}%`,\n                background: 'linear-gradient(135deg, #4f46e5, #7c3aed)',\n                transition: 'width 0.5s ease'\n              }}\n            />\n          </div>\n        </div>\n      )}\n\n      {/* Floating Action Buttons */}\n      <div className=\"modern-floating-actions\">\n        <FloatButton.Group\n          trigger=\"hover\"\n          type=\"primary\"\n          style={{ right: 24 }}\n          icon={<SettingOutlined />}\n        >\n          <FloatButton\n            icon={<SaveOutlined />}\n            tooltip=\"Save Draft\"\n            onClick={() => handleSaveDraft()}\n          />\n          <FloatButton\n            icon={<DashboardOutlined />}\n            tooltip=\"Summary\"\n            onClick={() => {\n              const summaryData = questionnaireSteps.map((step, index) => {\n                const status = getStepCompletionStatus(index);\n                const stepQueries = queries.filter(q => q.stepNumber === index);\n                return {\n                  step: index + 1,\n                  title: step.title,\n                  completed: status.requiredCompleted,\n                  required: status.required,\n                  percentage:\n                    status.required > 0\n                      ? Math.round((status.requiredCompleted / status.required) * 100)\n                      : 100,\n                  openQueries: stepQueries.filter(q => q.status === 'OPEN').length,\n                  resolvedQueries: stepQueries.filter(q => q.status === 'RESOLVED').length\n                };\n              });\n\n              Modal.info({\n                title: 'Questionnaire Summary',\n                width: 600,\n                content: (\n                  <div>\n                    <div style={{ marginBottom: 16 }}>\n                      <Text strong>Overall Progress: {getOverallCompletionPercentage()}%</Text>\n                    </div>\n                    {summaryData.map(step => (\n                      <div\n                        key={step.step}\n                        style={{\n                          marginBottom: 12,\n                          padding: '12px 16px',\n                          background:\n                            step.percentage === 100\n                              ? 'linear-gradient(135deg, #f0fdf4, #dcfce7)'\n                              : 'linear-gradient(135deg, #fffbeb, #fef3c7)',\n                          border: `1px solid ${step.percentage === 100 ? '#bbf7d0' : '#fde68a'}`,\n                          borderRadius: '8px'\n                        }}\n                      >\n                        <div\n                          style={{\n                            display: 'flex',\n                            justifyContent: 'space-between',\n                            alignItems: 'center'\n                          }}\n                        >\n                          <Text strong>\n                            Step {step.step}: {step.title}\n                          </Text>\n                          <Tag color={step.percentage === 100 ? 'green' : 'orange'}>\n                            {step.percentage}%\n                          </Tag>\n                        </div>\n                        <div style={{ fontSize: '12px', color: '#666', marginTop: 4 }}>\n                          {step.completed}/{step.required} required fields completed\n                          {step.openQueries > 0 && (\n                            <span style={{ color: '#ef4444', marginLeft: 8 }}>\n                              • {step.openQueries} open queries\n                            </span>\n                          )}\n                          {step.resolvedQueries > 0 && (\n                            <span style={{ color: '#10b981', marginLeft: 8 }}>\n                              • {step.resolvedQueries} resolved queries\n                            </span>\n                          )}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                )\n              });\n            }}\n          />\n          <FloatButton\n            icon={autoSaveEnabled ? <CloudSyncOutlined /> : <DisconnectOutlined />}\n            tooltip={autoSaveEnabled ? 'Auto-save ON' : 'Auto-save OFF'}\n            onClick={() => setAutoSaveEnabled(!autoSaveEnabled)}\n          />\n        </FloatButton.Group>\n      </div>\n\n      {/* Query Raising Modal */}\n      <QueryRaisingModal\n        open={queryModalVisible}\n        onCancel={() => {\n          setQueryModalVisible(false);\n          setSelectedField(null);\n        }}\n        onSubmit={handleQueryCreated}\n        workflowId={workflowId}\n        fieldContext={selectedField}\n      />\n    </div>\n  );\n};\n\nexport default PlantQuestionnaire;\n","import { Typography, Button, Space, Modal, Select, message } from 'antd';\nimport React, { useState, useEffect, useCallback } from 'react';\n\nimport PlantErrorBoundary from '../components/ErrorBoundaries/PlantErrorBoundary';\nimport FilterPanel from '../components/Plant/FilterPanel';\nimport PlantDashboard from '../components/Plant/PlantDashboard';\nimport WorkflowTable from '../components/Plant/WorkflowTable';\nimport PlantQuestionnaire from '../components/PlantQuestionnaire';\nimport { PlantOnly } from '../components/RoleBasedComponent';\nimport { usePlantWorkflows } from '../hooks/usePlantWorkflows';\nimport { useRoleBasedAccess } from '../hooks/useRoleBasedAccess';\nimport { useWorkflowFilters } from '../hooks/useWorkflowFilters';\nimport { getCurrentUser, isAuthenticated } from '../services/auth';\nimport { masterDataAPI } from '../services/masterDataAPI';\nimport { userAPI } from '../services/userAPI';\nimport { workflowAPI } from '../services/workflowAPI';\n\nconst { Title } = Typography;\nconst { Option } = Select;\n\nconst PlantView = () => {\n  const [selectedWorkflow, setSelectedWorkflow] = useState(null);\n  const [questionnaireVisible, setQuestionnaireVisible] = useState(false);\n  const [currentPlant, setCurrentPlant] = useState(null);\n  const [userPlantData, setUserPlantData] = useState(null);\n  const [availablePlants, setAvailablePlants] = useState([]);\n\n  // Use role-based access control\n  const { isPlantUser, isAdmin, userPlants, primaryPlant, filterByPlantAccess } = useRoleBasedAccess();\n\n  // Use custom hooks for workflow management and filtering\n  const {\n    workflows,\n    loading,\n    error,\n    dashboardStats,\n    refreshWorkflows\n  } = usePlantWorkflows(currentPlant, userPlantData);\n\n  const {\n    filteredWorkflows,\n    searchText,\n    statusFilter,\n    completionFilter,\n    updateSearchText,\n    updateStatusFilter,\n    updateCompletionFilter,\n    clearAllFilters,\n    applyPreset,\n    saveFilters,\n    filterPresets,\n    filterSummary\n  } = useWorkflowFilters(workflows);\n\n  useEffect(() => {\n    const controller = new AbortController();\n\n    const fetchData = async () => {\n      try {\n        await loadUserPlantData(controller.signal);\n      } catch (error) {\n        if (!controller.signal.aborted) {\n          console.error('Error loading user plant data:', error);\n        }\n      }\n    };\n\n    fetchData();\n\n    return () => {\n      controller.abort();\n    };\n  }, []);\n\n  const loadUserPlantData = async signal => {\n    try {\n      // Check if user is authenticated first\n      if (!isAuthenticated()) {\n        console.warn('User is not authenticated');\n        message.error('You are not logged in. Please log in to access the plant dashboard.');\n        return;\n      }\n\n      const currentUser = getCurrentUser();\n      if (!currentUser) {\n        console.warn('No current user found');\n        message.error('Unable to identify current user. Please log in again.');\n        return;\n      }\n\n      console.log('Loading plant data for user:', currentUser);\n\n      // Load user plant assignments and location master data in parallel\n      const [plantData, locations] = await Promise.all([\n        userAPI.getUserPlantAssignments(currentUser, { signal }),\n        masterDataAPI.getAllLocations({ signal })\n      ]);\n\n      console.log('User plant data received:', plantData);\n      console.log('Assigned plants:', plantData?.assignedPlants);\n      console.log('Primary plant:', plantData?.primaryPlant);\n      setUserPlantData(plantData);\n\n      // Set current plant to user's primary plant (or first assigned plant if no primary)\n      const effectivePlant = plantData.primaryPlant || (plantData.assignedPlants && plantData.assignedPlants[0]);\n      if (effectivePlant && plantData.assignedPlants && plantData.assignedPlants.includes(effectivePlant)) {\n        setCurrentPlant(effectivePlant);\n        localStorage.setItem('userPlant', effectivePlant);\n        console.log('Set current plant to primary/effective plant:', effectivePlant);\n      } else if (plantData.assignedPlants && plantData.assignedPlants.length > 0) {\n        // Fallback to first assigned plant if primary is not available\n        const firstPlant = plantData.assignedPlants[0];\n        setCurrentPlant(firstPlant);\n        localStorage.setItem('userPlant', firstPlant);\n        console.log('Set current plant to first assigned plant:', firstPlant);\n      }\n\n      // Update available plants to only show assigned plants with descriptions\n      if (plantData.assignedPlants && plantData.assignedPlants.length > 0) {\n        const plantOptions = plantData.assignedPlants.map(plantCode => {\n          const location = locations.find(loc => loc.locationCode === plantCode);\n          const isPrimary = plantCode === plantData.primaryPlant;\n          return {\n            value: plantCode,\n            label: location\n              ? `${plantCode} - ${location.description}${isPrimary ? ' (Primary)' : ''}`\n              : `${plantCode}${isPrimary ? ' (Primary)' : ''}`\n          };\n        });\n        setAvailablePlants(plantOptions);\n        console.log('Available plants set:', plantOptions);\n      }\n    } catch (error) {\n      console.error('Failed to load user plant data:', error);\n      // Set empty plant data to trigger the \"no assignments\" message\n      setUserPlantData({\n        assignedPlants: [],\n        primaryPlant: null,\n        effectivePlant: null,\n        isPlantUser: false\n      });\n      setAvailablePlants([]);\n      setCurrentPlant(null);\n      message.error('Unable to load plant assignments. Please contact administrator to assign plants to your user.');\n    }\n  };\n\n\n\n  const handlePlantChange = useCallback((newPlantCode) => {\n    // Validate that user is assigned to this plant\n    if (userPlantData && !userPlantData.assignedPlants.includes(newPlantCode)) {\n      message.error(`You are not assigned to plant: ${newPlantCode}`);\n      return;\n    }\n\n    localStorage.setItem('userPlant', newPlantCode);\n    setCurrentPlant(newPlantCode);\n    message.success(`Switched to plant: ${newPlantCode}`);\n  }, [userPlantData]);\n\n  const handleStartQuestionnaire = useCallback((workflow) => {\n    setSelectedWorkflow(workflow);\n    setQuestionnaireVisible(true);\n  }, []);\n\n  const handleQuestionnaireComplete = useCallback((_formData) => {\n    setQuestionnaireVisible(false);\n    setSelectedWorkflow(null);\n    refreshWorkflows(); // Refresh the list\n    message.success('Questionnaire completed successfully!');\n  }, [refreshWorkflows]);\n\n  const handleSaveDraft = useCallback((_formData) => {\n    message.success('Draft saved successfully');\n  }, []);\n\n\n\n  // Check if user is authenticated\n  if (!isAuthenticated()) {\n    return (\n      <PlantOnly>\n        <div style={{ padding: 24, textAlign: 'center' }}>\n          <Title level={3}>Authentication Required</Title>\n          <p>You need to be logged in to access the plant dashboard.</p>\n          <Button\n            type=\"primary\"\n            onClick={() => window.location.href = '/qrmfg/login'}\n          >\n            Go to Login\n          </Button>\n        </div>\n      </PlantOnly>\n    );\n  }\n\n  // Show loading state while plant data is being fetched\n  if (userPlantData === null) {\n    return (\n      <PlantOnly>\n        <div style={{ padding: 24, textAlign: 'center' }}>\n          <Title level={3}>Loading Plant Assignments...</Title>\n          <p>Please wait while we load your plant assignments.</p>\n        </div>\n      </PlantOnly>\n    );\n  }\n\n  // Show message if user has no plant assignments\n  if (userPlantData && (!userPlantData.assignedPlants || userPlantData.assignedPlants.length === 0)) {\n    return (\n      <PlantOnly>\n        <div style={{ padding: 24, textAlign: 'center' }}>\n          <Title level={3}>No Plant Assignments</Title>\n          <p>You are not assigned to any plants. Please contact your administrator to assign plants to your user account.</p>\n          <div style={{ marginTop: 16, padding: 16, background: '#f5f5f5', borderRadius: 4 }}>\n            <p><strong>Debug Info:</strong></p>\n            <p>Current User: {getCurrentUser()}</p>\n            <p>Is Authenticated: {isAuthenticated().toString()}</p>\n            <p>User Plant Data: {JSON.stringify(userPlantData, null, 2)}</p>\n            <Space>\n              <Button\n                onClick={() => {\n                  console.log('Current user:', getCurrentUser());\n                  console.log('User plant data:', userPlantData);\n                  console.log('Available plants:', availablePlants);\n                  loadUserPlantData();\n                }}\n              >\n                Debug & Retry\n              </Button>\n              <Button\n                type=\"primary\"\n                onClick={async () => {\n                  try {\n                    const currentUser = getCurrentUser();\n                    if (!currentUser) {\n                      message.error('No current user found');\n                      return;\n                    }\n\n                    // Try to fix the plant assignments by setting assignedPlants to match primaryPlant\n                    const primaryPlant = '1102'; // From the token validation response\n                    const assignedPlants = [primaryPlant];\n\n                    await userAPI.updateUserPlantAssignments(currentUser, {\n                      assignedPlants,\n                      primaryPlant\n                    });\n\n                    message.success('Plant assignments fixed! Please refresh the page or log out and log back in.');\n                    await loadUserPlantData();\n                  } catch (error) {\n                    console.error('Failed to assign plants:', error);\n                    if (error.status === 403) {\n                      message.error('You need admin permissions to assign plants. Please ask an administrator to assign plants to your user account.');\n                    } else {\n                      message.error(`Failed to assign plants: ${error.message}`);\n                    }\n                  }\n                }}\n              >\n                Fix Plant Assignments (Admin Required)\n              </Button>\n              <Button\n                onClick={() => {\n                  message.info('Logging out to refresh token...');\n                  localStorage.clear();\n                  sessionStorage.clear();\n                  window.location.href = '/qrmfg/login';\n                }}\n              >\n                Logout & Re-login\n              </Button>\n            </Space>\n          </div>\n        </div>\n      </PlantOnly>\n    );\n  }\n\n  return (\n    <PlantOnly>\n      <PlantErrorBoundary plantCode={currentPlant}>\n        <div style={{ padding: 24 }}>\n          {/* Header */}\n          <div\n            style={{\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'center',\n              marginBottom: 24\n            }}\n          >\n            <Title level={2} style={{ margin: 0 }}>\n              Plant Dashboard\n            </Title>\n            <div style={{ display: 'flex', alignItems: 'center', gap: 16 }}>\n              <div style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\n                <span style={{ fontSize: '14px', fontWeight: '500' }}>Plant:</span>\n                <Select\n                  value={currentPlant}\n                  onChange={handlePlantChange}\n                  style={{ width: 250 }}\n                  size=\"small\"\n                  disabled={!userPlantData || availablePlants.length <= 1}\n                  showSearch\n                  filterOption={(input, option) =>\n                    option?.children?.toLowerCase().includes(input.toLowerCase())\n                  }\n                  placeholder=\"Select assigned plant\"\n                >\n                  {availablePlants.map(plant => (\n                    <Option key={plant.value} value={plant.value}>\n                      {plant.label}\n                    </Option>\n                  ))}\n                </Select>\n              </div>\n              <Space>\n                <Button onClick={refreshWorkflows} loading={loading}>\n                  Refresh Data\n                </Button>\n              </Space>\n            </div>\n          </div>\n\n          {/* Dashboard Statistics */}\n          {currentPlant ? (\n            <PlantDashboard\n              dashboardStats={dashboardStats}\n              loading={loading}\n              error={error}\n              currentPlant={currentPlant}\n              onRefresh={refreshWorkflows}\n            />\n          ) : (\n            <div style={{ textAlign: 'center', padding: '40px 0', color: '#999' }}>\n              <Title level={4}>Select a Plant</Title>\n              <p>Please select a plant from the dropdown above to view the dashboard and assigned materials.</p>\n            </div>\n          )}\n\n          {/* Filter Panel and Workflows Table - only show when plant is selected */}\n          {currentPlant && (\n            <>\n              <FilterPanel\n                searchText={searchText}\n                statusFilter={statusFilter}\n                completionFilter={completionFilter}\n                onSearchTextChange={updateSearchText}\n                onStatusFilterChange={updateStatusFilter}\n                onCompletionFilterChange={updateCompletionFilter}\n                onClearFilters={clearAllFilters}\n                onApplyPreset={applyPreset}\n                onSaveFilters={saveFilters}\n                filterPresets={filterPresets}\n                filterSummary={filterSummary}\n              />\n\n              <WorkflowTable\n                workflows={filteredWorkflows}\n                loading={loading}\n                onStartQuestionnaire={handleStartQuestionnaire}\n                onRefresh={refreshWorkflows}\n              />\n            </>\n          )}\n\n          {/* Questionnaire Modal */}\n          <Modal\n            title={`Material Questionnaire - ${selectedWorkflow?.materialCode}`}\n            open={questionnaireVisible}\n            onCancel={() => {\n              setQuestionnaireVisible(false);\n              setSelectedWorkflow(null);\n            }}\n            footer={null}\n            width=\"95%\"\n            style={{ top: 20 }}\n            destroyOnClose\n          >\n            {selectedWorkflow && (\n              <PlantQuestionnaire\n                workflowId={selectedWorkflow.id}\n                onComplete={handleQuestionnaireComplete}\n                onSaveDraft={handleSaveDraft}\n              />\n            )}\n          </Modal>\n        </div>\n      </PlantErrorBoundary>\n    </PlantOnly>\n  );\n};\n\nexport default PlantView;\n","import { message } from 'antd';\nimport { useState, useEffect, useCallback } from 'react';\n\nimport { WORKFLOW_SPECIFIC_STATES, WORKFLOW_STATES } from '../constants';\nimport { getCurrentUser } from '../services/auth';\nimport { workflowAPI } from '../services/workflowAPI';\nimport { recalculateWorkflowProgress, getTemplateFieldCounts, calculateCorrectFieldCounts } from '../utils/questionnaireUtils';\n\n/**\n * Custom hook for managing plant workflow data and operations\n * Handles workflow fetching, state management, and dashboard statistics\n */\nexport const usePlantWorkflows = (currentPlant, userPlantData) => {\n  const [workflows, setWorkflows] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [dashboardStats, setDashboardStats] = useState({\n    totalWorkflows: 0,\n    completedCount: 0,\n    inProgressCount: 0,\n    draftCount: 0,\n    averageCompletion: 0,\n    completedToday: 0\n  });\n\n    /**\n   * Get current plant from localStorage or default\n   */\n    const getCurrentPlant = useCallback(() => {\n        const storedPlant = localStorage.getItem('userPlant');\n        const storedUser = localStorage.getItem('username');\n    \n        console.log('Plant detection:', {\n          storedPlant,\n          storedUser,\n          localStorage: Object.keys(localStorage)\n        });\n    \n        return storedPlant || '1102';\n      }, []);\n    \n\n  /**\n   * Load plant workflows with proper error handling and AbortController cleanup\n   */\n  const loadPlantWorkflows = useCallback(async (signal) => {\n    try {\n      setLoading(true);\n      setError(null);\n      \n      const plantCode = currentPlant || getCurrentPlant();\n\n      if (!plantCode) {\n        console.warn('No plant code available for loading workflows');\n        setWorkflows([]);\n        setDashboardStats({\n          totalWorkflows: 0,\n          completedCount: 0,\n          inProgressCount: 0,\n          draftCount: 0,\n          averageCompletion: 0,\n          completedToday: 0\n        });\n        return;\n      }\n\n      console.log('Loading workflows for plant:', plantCode);\n\n      let dashboardData;\n      let workflowsWithProgress = [];\n\n      try {\n        // Try to get plant dashboard data with progress information\n        dashboardData = await workflowAPI.getPlantDashboardData(plantCode, { signal });\n        console.log('Received dashboard data:', dashboardData);\n\n        // Transform the data to match the expected format and filter by current plant\n        workflowsWithProgress = dashboardData.workflows\n          .filter(workflow => workflow.plantCode === plantCode) // Only show workflows for current plant\n          .map(workflow => {\n            // Recalculate progress with correct field counts (excluding CQS auto-populated fields)\n            const correctedWorkflow = recalculateWorkflowProgress(workflow, workflow.plantInputs);\n            \n            // Determine the correct completion status based on actual progress\n            let completionStatus;\n            if (workflow.isSubmitted) {\n              completionStatus = 'SUBMITTED';\n            } else if (correctedWorkflow.completionPercentage === 100) {\n              completionStatus = 'COMPLETED';\n            } else if (correctedWorkflow.completionPercentage > 0) {\n              completionStatus = 'IN_PROGRESS';\n            } else {\n              completionStatus = 'DRAFT';\n            }\n\n            return {\n              id: workflow.workflowId,\n              materialCode: workflow.materialCode,\n              plantCode: workflow.plantCode,\n              currentState: workflow.isSubmitted\n                ? WORKFLOW_STATES.COMPLETED\n                : WORKFLOW_SPECIFIC_STATES.PLANT_PENDING,\n              completionStatus,\n              completionPercentage: correctedWorkflow.completionPercentage,\n              totalFields: correctedWorkflow.totalFields,\n              completedFields: correctedWorkflow.completedFields,\n              requiredFields: workflow.requiredFields || 0,\n              completedRequiredFields: workflow.completedRequiredFields || 0,\n              lastModified: workflow.lastModified,\n              submittedAt: workflow.submittedAt,\n              submittedBy: workflow.submittedBy,\n              isSubmitted: workflow.isSubmitted,\n              isCompleted: workflow.isCompleted,\n              openQueries: 0, // TODO: Add query count from backend\n              assignedPlant: workflow.plantCode,\n              materialName: workflow.materialName,\n              itemDescription: workflow.itemDescription\n            };\n          });\n      } catch (plantDataError) {\n        console.warn(\n          'Failed to load plant-specific data, falling back to regular workflows:',\n          plantDataError\n        );\n\n        // Fallback: Load workflows by plant directly\n        try {\n          const plantWorkflows = await workflowAPI.getWorkflowsByPlant(plantCode, { signal });\n          console.log('Fallback: Loaded plant workflows:', plantWorkflows);\n\n          // Add mock progress data to plant workflows and filter by current plant\n          const { totalUserEditableFields } = getTemplateFieldCounts();\n          \n          workflowsWithProgress = plantWorkflows\n            .filter(workflow => {\n              const workflowPlant = workflow.plantCode || workflow.assignedPlant;\n              return workflowPlant === plantCode; // Only show workflows for current plant\n            })\n            .map(workflow => {\n              // Calculate progress if plant inputs are available\n              const plantInputs = workflow.plantInputs || workflow.plantData?.plantInputs || {};\n              const { completionPercentage, completedFields } = calculateCorrectFieldCounts(plantInputs);\n              \n              // Determine the correct completion status based on actual progress\n              let completionStatus;\n              const isSubmitted = workflow.isSubmitted || workflow.submittedAt;\n              if (isSubmitted) {\n                completionStatus = 'SUBMITTED';\n              } else if (completionPercentage === 100) {\n                completionStatus = 'COMPLETED';\n              } else if (completionPercentage > 0) {\n                completionStatus = 'IN_PROGRESS';\n              } else {\n                completionStatus = 'DRAFT';\n              }\n\n              return {\n                id: workflow.id,\n                materialCode: workflow.materialCode,\n                plantCode: workflow.plantCode || workflow.assignedPlant,\n                currentState: workflow.currentState || workflow.state,\n                completionStatus,\n                completionPercentage,\n                totalFields: totalUserEditableFields, // Correct total user-editable fields\n                completedFields,\n                requiredFields: 50, // Default required\n                completedRequiredFields: 0, // Default completed required\n                lastModified: workflow.lastModified,\n                submittedAt: workflow.submittedAt || null,\n                submittedBy: workflow.submittedBy || null,\n                isSubmitted,\n                isCompleted: workflow.isCompleted || false,\n                openQueries: workflow.openQueries || 0,\n                assignedPlant: workflow.plantCode || workflow.assignedPlant,\n                materialName: workflow.materialName,\n                itemDescription: workflow.itemDescription\n              };\n            });\n\n          console.log('Fallback: Processed workflows:', workflowsWithProgress);\n        } catch (fallbackError) {\n          console.error('Fallback also failed:', fallbackError);\n          workflowsWithProgress = [];\n        }\n\n        // Set default dashboard data for fallback\n        dashboardData = {\n          totalWorkflows: workflowsWithProgress.length,\n          completedCount: 0,\n          inProgressCount: 0,\n          draftCount: workflowsWithProgress.length,\n          averageCompletion: 0\n        };\n      }\n\n      setWorkflows(workflowsWithProgress);\n\n      // Set dashboard stats\n      setDashboardStats({\n        totalWorkflows: dashboardData.totalWorkflows || 0,\n        completedCount: dashboardData.completedCount || 0,\n        inProgressCount: dashboardData.inProgressCount || 0,\n        draftCount: dashboardData.draftCount || 0,\n        averageCompletion: dashboardData.averageCompletion || 0,\n        completedToday: 0 // TODO: Calculate from submittedAt dates\n      });\n    } catch (error) {\n      console.error('Failed to load plant workflows:', error);\n      setError(error.message);\n      message.error('Failed to load workflows');\n      setWorkflows([]);\n      setDashboardStats({\n        totalWorkflows: 0,\n        completedCount: 0,\n        inProgressCount: 0,\n        draftCount: 0,\n        averageCompletion: 0,\n        completedToday: 0\n      });\n    } finally {\n      setLoading(false);\n    }\n  }, [currentPlant, getCurrentPlant]);\n\n\n\n  /**\n   * Refresh workflows data\n   */\n  const refreshWorkflows = useCallback(async () => {\n    const controller = new AbortController();\n    await loadPlantWorkflows(controller.signal);\n  }, [loadPlantWorkflows]);\n\n\n  // Load workflows when plant or user data changes\n  useEffect(() => {\n    const controller = new AbortController();\n\n    const fetchWorkflows = async () => {\n      if (userPlantData && currentPlant) {\n        try {\n          await loadPlantWorkflows(controller.signal);\n        } catch (error) {\n          if (!controller.signal.aborted) {\n            console.error('Error loading plant workflows:', error);\n          }\n        }\n      } else {\n        // Clear workflows if no plant is selected\n        setWorkflows([]);\n        setDashboardStats({\n          totalWorkflows: 0,\n          completedCount: 0,\n          inProgressCount: 0,\n          draftCount: 0,\n          averageCompletion: 0,\n          completedToday: 0\n        });\n        setLoading(false);\n      }\n    };\n\n    fetchWorkflows();\n\n    return () => {\n      controller.abort();\n    };\n  }, [userPlantData, currentPlant, loadPlantWorkflows]);\n\n  return {\n    workflows,\n    loading,\n    error,\n    dashboardStats,\n    loadPlantWorkflows,\n    refreshWorkflows\n  };\n};","import { useState, useEffect, useMemo, useCallback } from 'react';\nimport { useSearchParams } from 'react-router-dom';\n\nimport { COMPLETION_FILTERS } from '../constants';\n\n/**\n * Custom hook for managing workflow filters with URL synchronization\n * Handles filter state, application, and persistence\n */\nexport const useWorkflowFilters = (workflows = []) => {\n  const [searchParams, setSearchParams] = useSearchParams();\n  \n  // Filter state\n  const [searchText, setSearchText] = useState(searchParams.get('search') || '');\n  const [statusFilter, setStatusFilter] = useState(searchParams.get('status') || 'all');\n  const [completionFilter, setCompletionFilter] = useState(searchParams.get('completion') || 'all');\n\n  /**\n   * Apply all filters to the workflows data\n   */\n  const filteredWorkflows = useMemo(() => {\n    let filtered = [...workflows];\n\n    // Apply search filter\n    if (searchText) {\n      const searchLower = searchText.toLowerCase();\n      filtered = filtered.filter(\n        workflow =>\n          workflow.materialCode?.toLowerCase().includes(searchLower) ||\n          workflow.plantCode?.toLowerCase().includes(searchLower) ||\n          workflow.materialName?.toLowerCase().includes(searchLower) ||\n          workflow.itemDescription?.toLowerCase().includes(searchLower)\n      );\n    }\n\n    // Apply status filter\n    if (statusFilter !== 'all') {\n      filtered = filtered.filter(workflow => workflow.completionStatus === statusFilter);\n    }\n\n    // Apply completion filter\n    if (completionFilter !== 'all') {\n      if (completionFilter === COMPLETION_FILTERS.COMPLETED) {\n        filtered = filtered.filter(workflow => workflow.completionPercentage === 100);\n      } else if (completionFilter === COMPLETION_FILTERS.IN_PROGRESS) {\n        filtered = filtered.filter(\n          workflow => workflow.completionPercentage > 0 && workflow.completionPercentage < 100\n        );\n      } else if (completionFilter === COMPLETION_FILTERS.NOT_STARTED) {\n        filtered = filtered.filter(workflow => workflow.completionPercentage === 0);\n      }\n    }\n\n    return filtered;\n  }, [workflows, searchText, statusFilter, completionFilter]);\n\n  /**\n   * Update search text filter\n   */\n  const updateSearchText = useCallback((value) => {\n    setSearchText(value);\n  }, []);\n\n  /**\n   * Update status filter\n   */\n  const updateStatusFilter = useCallback((value) => {\n    setStatusFilter(value);\n  }, []);\n\n  /**\n   * Update completion filter\n   */\n  const updateCompletionFilter = useCallback((value) => {\n    setCompletionFilter(value);\n  }, []);\n\n  /**\n   * Clear all filters\n   */\n  const clearAllFilters = useCallback(() => {\n    setSearchText('');\n    setStatusFilter('all');\n    setCompletionFilter('all');\n  }, []);\n\n  /**\n   * Apply multiple filters at once\n   */\n  const applyFilters = useCallback((filters) => {\n    if (filters.searchText !== undefined) {\n      setSearchText(filters.searchText);\n    }\n    if (filters.statusFilter !== undefined) {\n      setStatusFilter(filters.statusFilter);\n    }\n    if (filters.completionFilter !== undefined) {\n      setCompletionFilter(filters.completionFilter);\n    }\n  }, []);\n\n  /**\n   * Get filter presets\n   */\n  const filterPresets = useMemo(() => [\n    {\n      name: 'All Workflows',\n      filters: { searchText: '', statusFilter: 'all', completionFilter: 'all' }\n    },\n    {\n      name: 'In Progress',\n      filters: { searchText: '', statusFilter: 'IN_PROGRESS', completionFilter: 'in-progress' }\n    },\n    {\n      name: 'Completed',\n      filters: { searchText: '', statusFilter: 'COMPLETED', completionFilter: 'completed' }\n    },\n    {\n      name: 'Not Started',\n      filters: { searchText: '', statusFilter: 'DRAFT', completionFilter: 'not-started' }\n    },\n    {\n      name: 'Overdue',\n      filters: { searchText: '', statusFilter: 'all', completionFilter: 'all' }\n    }\n  ], []);\n\n  /**\n   * Apply a filter preset\n   */\n  const applyPreset = useCallback((presetName) => {\n    const preset = filterPresets.find(p => p.name === presetName);\n    if (preset) {\n      applyFilters(preset.filters);\n    }\n  }, [filterPresets, applyFilters]);\n\n  /**\n   * Get current filter summary\n   */\n  const filterSummary = useMemo(() => {\n    const activeFilters = [];\n    \n    if (searchText) {\n      activeFilters.push(`Search: \"${searchText}\"`);\n    }\n    if (statusFilter !== 'all') {\n      activeFilters.push(`Status: ${statusFilter.replace('_', ' ')}`);\n    }\n    if (completionFilter !== 'all') {\n      activeFilters.push(`Completion: ${completionFilter.replace('-', ' ')}`);\n    }\n\n    return {\n      activeFilters,\n      hasActiveFilters: activeFilters.length > 0,\n      totalFiltered: filteredWorkflows.length,\n      totalOriginal: workflows.length\n    };\n  }, [searchText, statusFilter, completionFilter, filteredWorkflows.length, workflows.length]);\n\n  /**\n   * Save current filters to localStorage\n   */\n  const saveFilters = useCallback(() => {\n    const filters = {\n      searchText,\n      statusFilter,\n      completionFilter\n    };\n    localStorage.setItem('workflowFilters', JSON.stringify(filters));\n  }, [searchText, statusFilter, completionFilter]);\n\n  /**\n   * Load filters from localStorage\n   */\n  const loadSavedFilters = useCallback(() => {\n    try {\n      const saved = localStorage.getItem('workflowFilters');\n      if (saved) {\n        const filters = JSON.parse(saved);\n        applyFilters(filters);\n      }\n    } catch (error) {\n      console.warn('Failed to load saved filters:', error);\n    }\n  }, [applyFilters]);\n\n  // Sync filters with URL parameters\n  useEffect(() => {\n    const params = new URLSearchParams();\n    \n    if (searchText) {\n      params.set('search', searchText);\n    }\n    if (statusFilter !== 'all') {\n      params.set('status', statusFilter);\n    }\n    if (completionFilter !== 'all') {\n      params.set('completion', completionFilter);\n    }\n\n    // Update URL without triggering navigation\n    setSearchParams(params, { replace: true });\n  }, [searchText, statusFilter, completionFilter, setSearchParams]);\n\n  return {\n    // Filter state\n    searchText,\n    statusFilter,\n    completionFilter,\n    \n    // Filtered data\n    filteredWorkflows,\n    \n    // Filter actions\n    updateSearchText,\n    updateStatusFilter,\n    updateCompletionFilter,\n    clearAllFilters,\n    applyFilters,\n    \n    // Presets\n    filterPresets,\n    applyPreset,\n    \n    // Persistence\n    saveFilters,\n    loadSavedFilters,\n    \n    // Summary\n    filterSummary\n  };\n};","import { useState, useEffect, useCallback } from 'react';\n\nimport { \n  isAuthenticated, \n  isAdmin, \n  isJvcUser, \n  isCqsUser, \n  isTechUser, \n  isPlantUser, \n  isViewer,\n  hasRole,\n  getPrimaryRoleType,\n  getUserPlantCodes,\n  getPrimaryPlantCode,\n  getCurrentUser\n} from '../services/auth';\nimport RBACService from '../services/rbacService';\n\n/**\n * Custom hook for role-based access control\n * Provides reactive access to user roles and permissions\n */\nexport const useRoleBasedAccess = () => {\n  const [accessSummary, setAccessSummary] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // Load user access summary\n  const loadAccessSummary = useCallback(async () => {\n    if (!isAuthenticated()) {\n      setAccessSummary(null);\n      setLoading(false);\n      return;\n    }\n\n    try {\n      setLoading(true);\n      setError(null);\n      \n      const summary = await RBACService.getUserAccessSummary();\n      setAccessSummary(summary);\n    } catch (err) {\n      console.warn('Failed to load access summary, using fallback:', err);\n      setError(err);\n      \n      // Use fallback data\n      const fallbackSummary = RBACService.getFallbackAccessSummary();\n      setAccessSummary(fallbackSummary);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    loadAccessSummary();\n  }, [loadAccessSummary]);\n\n  // Check screen access\n  const checkScreenAccess = useCallback(async (screenRoute) => {\n    try {\n      return await RBACService.hasScreenAccess(screenRoute);\n    } catch (error) {\n      console.warn('Screen access check failed, using fallback:', error);\n      return RBACService.getFallbackScreenAccess(screenRoute);\n    }\n  }, []);\n\n  // Check data access\n  const checkDataAccess = useCallback(async (dataType, context = {}) => {\n    try {\n      return await RBACService.hasDataAccess(dataType, context);\n    } catch (error) {\n      console.warn('Data access check failed, using fallback:', error);\n      return RBACService.getFallbackDataAccess(dataType, context);\n    }\n  }, []);\n\n  // Check plant data access\n  const checkPlantDataAccess = useCallback(async (dataType, plantCode, context = {}) => {\n    try {\n      return await RBACService.hasPlantDataAccess(dataType, plantCode, context);\n    } catch (error) {\n      console.warn('Plant data access check failed, using fallback:', error);\n      return RBACService.getFallbackPlantDataAccess(dataType, plantCode, context);\n    }\n  }, []);\n\n  // Make access decision\n  const makeAccessDecision = useCallback(async (resourceType, resourceId, action, context = {}) => {\n    try {\n      return await RBACService.makeAccessDecision(resourceType, resourceId, action, context);\n    } catch (error) {\n      console.warn('Access decision failed, using fallback:', error);\n      return RBACService.getFallbackAccessDecision(resourceType, resourceId, action, context);\n    }\n  }, []);\n\n  // Filter data by plant access\n  const filterByPlantAccess = useCallback((data, plantExtractor) => {\n    return RBACService.filterDataByPlantAccess(data, plantExtractor);\n  }, []);\n\n  return {\n    // Loading states\n    loading,\n    error,\n    \n    // User info\n    isAuthenticated: isAuthenticated(),\n    currentUser: getCurrentUser(),\n    primaryRole: getPrimaryRoleType(),\n    userPlants: getUserPlantCodes(),\n    primaryPlant: getPrimaryPlantCode(),\n    \n    // Role checks\n    isAdmin: isAdmin(),\n    isJvcUser: isJvcUser(),\n    isCqsUser: isCqsUser(),\n    isTechUser: isTechUser(),\n    isPlantUser: isPlantUser(),\n    isViewer: isViewer(),\n    \n    // Access summary\n    accessSummary,\n    \n    // Helper functions\n    hasRole: (role) => hasRole(role),\n    hasAnyRole: (roles) => roles.some(role => hasRole(role)),\n    hasAllRoles: (roles) => roles.every(role => hasRole(role)),\n    \n    // Async access checks\n    checkScreenAccess,\n    checkDataAccess,\n    checkPlantDataAccess,\n    makeAccessDecision,\n    \n    // Data filtering\n    filterByPlantAccess,\n    \n    // Refresh function\n    refresh: loadAccessSummary\n  };\n};\n\n/**\n * Hook for checking specific screen access\n */\nexport const useScreenAccess = (screenRoute) => {\n  const [hasAccess, setHasAccess] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const checkAccess = async () => {\n      if (!isAuthenticated() || !screenRoute) {\n        setHasAccess(false);\n        setLoading(false);\n        return;\n      }\n\n      try {\n        setLoading(true);\n        setError(null);\n        \n        const access = await RBACService.hasScreenAccess(screenRoute);\n        setHasAccess(access);\n      } catch (err) {\n        console.warn('Screen access check failed:', err);\n        setError(err);\n        \n        // Use fallback\n        const fallbackAccess = RBACService.getFallbackScreenAccess(screenRoute);\n        setHasAccess(fallbackAccess);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    checkAccess();\n  }, [screenRoute]);\n\n  return { hasAccess, loading, error };\n};\n\n/**\n * Hook for checking data access\n */\nexport const useDataAccess = (dataType, context = {}) => {\n  const [hasAccess, setHasAccess] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const checkAccess = async () => {\n      if (!isAuthenticated() || !dataType) {\n        setHasAccess(false);\n        setLoading(false);\n        return;\n      }\n\n      try {\n        setLoading(true);\n        setError(null);\n        \n        const access = await RBACService.hasDataAccess(dataType, context);\n        setHasAccess(access);\n      } catch (err) {\n        console.warn('Data access check failed:', err);\n        setError(err);\n        \n        // Use fallback\n        const fallbackAccess = RBACService.getFallbackDataAccess(dataType, context);\n        setHasAccess(fallbackAccess);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    checkAccess();\n  }, [dataType, context]);\n\n  return { hasAccess, loading, error };\n};\n\n/**\n * Hook for plant-specific data filtering\n */\nexport const usePlantDataFilter = (data, plantExtractor) => {\n  const [filteredData, setFilteredData] = useState([]);\n\n  useEffect(() => {\n    if (!Array.isArray(data)) {\n      setFilteredData([]);\n      return;\n    }\n\n    const filtered = RBACService.filterDataByPlantAccess(data, plantExtractor);\n    setFilteredData(filtered);\n  }, [data, plantExtractor]);\n\n  return filteredData;\n};\n\nexport default useRoleBasedAccess;","/**\n * SecureForm Component\n * \n * A wrapper component that provides enhanced security features for forms including:\n * - Input validation and sanitization\n * - XSS prevention\n * - Security audit logging\n * - Real-time validation feedback\n * \n * @component\n * @since 1.0.0\n * @author QRMFG Security Team\n */\n\nimport { Form, Input, message } from 'antd';\nimport PropTypes from 'prop-types';\nimport React, { useCallback, useEffect, useState } from 'react';\n\nimport { \n  InputSanitizer, \n  ValidationRules, \n  useInputValidation, \n  SecurityAuditLogger \n} from '../utils/inputValidation';\n\nconst { TextArea } = Input;\n\n/**\n * SecureInput Component - Enhanced input with validation and sanitization\n */\nconst SecureInput = React.memo(({ \n  value, \n  onChange, \n  validationType = 'text',\n  componentName = 'SecureInput',\n  fieldName = 'input',\n  onValidationChange,\n  ...props \n}) => {\n  const { validateInput } = useInputValidation();\n  const [validationState, setValidationState] = useState({\n    isValid: true,\n    errors: [],\n    wasModified: false\n  });\n\n  const handleChange = useCallback((e) => {\n    const inputValue = e.target.value;\n    const validation = validateInput(inputValue, validationType);\n    \n    setValidationState(validation);\n    \n    // Log potential security issues\n    if (validation.wasModified) {\n      SecurityAuditLogger.logXSSAttempt(\n        inputValue,\n        validation.sanitizedValue,\n        componentName,\n        fieldName\n      );\n      \n      message.warning('Input was sanitized for security reasons');\n    }\n    \n    // Call parent onChange with sanitized value\n    if (onChange) {\n      onChange({\n        ...e,\n        target: {\n          ...e.target,\n          value: validation.sanitizedValue\n        }\n      });\n    }\n    \n    // Notify parent of validation state\n    if (onValidationChange) {\n      onValidationChange(validation);\n    }\n  }, [onChange, validationType, componentName, fieldName, onValidationChange, validateInput]);\n\n  return (\n    <Input\n      {...props}\n      value={value}\n      onChange={handleChange}\n      status={validationState.isValid ? '' : 'error'}\n      title={validationState.errors.join(', ')}\n    />\n  );\n});\n\n/**\n * SecureTextArea Component - Enhanced textarea with validation and sanitization\n */\nconst SecureTextArea = React.memo(({ \n  value, \n  onChange, \n  validationType = 'richtext',\n  componentName = 'SecureTextArea',\n  fieldName = 'textarea',\n  onValidationChange,\n  ...props \n}) => {\n  const { validateInput } = useInputValidation();\n  const [validationState, setValidationState] = useState({\n    isValid: true,\n    errors: [],\n    wasModified: false\n  });\n\n  const handleChange = useCallback((e) => {\n    const inputValue = e.target.value;\n    const validation = validateInput(inputValue, validationType);\n    \n    setValidationState(validation);\n    \n    // Log potential security issues\n    if (validation.wasModified) {\n      SecurityAuditLogger.logXSSAttempt(\n        inputValue,\n        validation.sanitizedValue,\n        componentName,\n        fieldName\n      );\n      \n      message.warning('Input was sanitized for security reasons');\n    }\n    \n    // Call parent onChange with sanitized value\n    if (onChange) {\n      onChange({\n        ...e,\n        target: {\n          ...e.target,\n          value: validation.sanitizedValue\n        }\n      });\n    }\n    \n    // Notify parent of validation state\n    if (onValidationChange) {\n      onValidationChange(validation);\n    }\n  }, [onChange, validationType, componentName, fieldName, onValidationChange, validateInput]);\n\n  return (\n    <TextArea\n      {...props}\n      value={value}\n      onChange={handleChange}\n      status={validationState.isValid ? '' : 'error'}\n      title={validationState.errors.join(', ')}\n    />\n  );\n});\n\n/**\n * SecureForm Component - Enhanced form with security features\n */\nconst SecureForm = React.memo(({ \n  children, \n  onFinish, \n  componentName = 'SecureForm',\n  enableSecurityLogging = true,\n  ...props \n}) => {\n  const [securityEvents, setSecurityEvents] = useState([]);\n\n  // Handle form submission with security validation\n  const handleFinish = useCallback(async (values) => {\n    try {\n      // Sanitize all form values before submission\n      const sanitizedValues = {};\n      const securityIssues = [];\n\n      Object.keys(values).forEach(key => {\n        const originalValue = values[key];\n        \n        if (typeof originalValue === 'string') {\n          const sanitizedValue = InputSanitizer.sanitizeText(originalValue);\n          sanitizedValues[key] = sanitizedValue;\n          \n          if (sanitizedValue !== originalValue) {\n            securityIssues.push({\n              field: key,\n              originalValue: originalValue.substring(0, 50),\n              sanitizedValue: sanitizedValue.substring(0, 50)\n            });\n          }\n        } else {\n          sanitizedValues[key] = originalValue;\n        }\n      });\n\n      // Log security issues if any\n      if (securityIssues.length > 0 && enableSecurityLogging) {\n        securityIssues.forEach(issue => {\n          SecurityAuditLogger.logXSSAttempt(\n            issue.originalValue,\n            issue.sanitizedValue,\n            componentName,\n            issue.field\n          );\n        });\n        \n        message.warning(`${securityIssues.length} field(s) were sanitized for security`);\n      }\n\n      // Call original onFinish with sanitized values\n      if (onFinish) {\n        await onFinish(sanitizedValues);\n      }\n    } catch (error) {\n      console.error('SecureForm submission error:', error);\n      message.error('Form submission failed');\n      throw error;\n    }\n  }, [onFinish, componentName, enableSecurityLogging]);\n\n  // Track security events\n  useEffect(() => {\n    if (enableSecurityLogging) {\n      const events = SecurityAuditLogger.getRecentEvents();\n      setSecurityEvents(events.slice(-10)); // Keep last 10 events\n    }\n  }, [enableSecurityLogging]);\n\n  return (\n    <Form\n      {...props}\n      onFinish={handleFinish}\n      validateTrigger={['onChange', 'onBlur']}\n    >\n      {children}\n      \n      {/* Development mode security info */}\n      {process.env.NODE_ENV === 'development' && securityEvents.length > 0 && (\n        <div style={{ \n          marginTop: 16, \n          padding: 8, \n          background: '#fff7e6', \n          border: '1px solid #ffd591',\n          borderRadius: 4,\n          fontSize: 12\n        }}>\n          <strong>Security Events (Dev Mode):</strong>\n          <ul style={{ margin: '4px 0', paddingLeft: 16 }}>\n            {securityEvents.slice(-3).map((event, index) => (\n              <li key={index}>\n                {event.type} in {event.component}.{event.field} at {new Date(event.timestamp).toLocaleTimeString()}\n              </li>\n            ))}\n          </ul>\n        </div>\n      )}\n    </Form>\n  );\n});\n\n// Form.Item wrapper with enhanced validation\nconst SecureFormItem = React.memo(({ \n  children, \n  validationType = 'text',\n  name,\n  rules = [],\n  ...props \n}) => {\n  // Combine custom rules with security validation rules\n  const securityRules = React.useMemo(() => {\n    let baseRules = [];\n    \n    switch (validationType) {\n      case 'username':\n        baseRules = ValidationRules.username;\n        break;\n      case 'email':\n        baseRules = ValidationRules.email;\n        break;\n      case 'password':\n        baseRules = ValidationRules.password;\n        break;\n      case 'projectCode':\n        baseRules = ValidationRules.projectCode;\n        break;\n      case 'materialCode':\n        baseRules = ValidationRules.materialCode;\n        break;\n      case 'plantCode':\n        baseRules = ValidationRules.plantCode;\n        break;\n      case 'text':\n        baseRules = ValidationRules.text(false, 0, 255);\n        break;\n      case 'richtext':\n        baseRules = ValidationRules.richText(false, 0, 1000);\n        break;\n      default:\n        baseRules = [];\n    }\n    \n    return [...baseRules, ...rules];\n  }, [validationType, rules]);\n\n  return (\n    <Form.Item\n      {...props}\n      name={name}\n      rules={securityRules}\n    >\n      {children}\n    </Form.Item>\n  );\n});\n\n// PropTypes\nSecureInput.propTypes = {\n  value: PropTypes.string,\n  onChange: PropTypes.func,\n  validationType: PropTypes.oneOf(['text', 'username', 'email', 'sql', 'filename', 'url']),\n  componentName: PropTypes.string,\n  fieldName: PropTypes.string,\n  onValidationChange: PropTypes.func\n};\n\nSecureTextArea.propTypes = {\n  value: PropTypes.string,\n  onChange: PropTypes.func,\n  validationType: PropTypes.oneOf(['text', 'richtext']),\n  componentName: PropTypes.string,\n  fieldName: PropTypes.string,\n  onValidationChange: PropTypes.func\n};\n\nSecureForm.propTypes = {\n  children: PropTypes.node.isRequired,\n  onFinish: PropTypes.func,\n  componentName: PropTypes.string,\n  enableSecurityLogging: PropTypes.bool\n};\n\nSecureFormItem.propTypes = {\n  children: PropTypes.node.isRequired,\n  validationType: PropTypes.string,\n  name: PropTypes.string,\n  rules: PropTypes.array\n};\n\n// Display names\nSecureInput.displayName = 'SecureInput';\nSecureTextArea.displayName = 'SecureTextArea';\nSecureForm.displayName = 'SecureForm';\nSecureFormItem.displayName = 'SecureFormItem';\n\n// Exports\nexport { SecureInput, SecureTextArea, SecureFormItem };\nexport default SecureForm;","/**\r\n * Utility functions for questionnaire field calculations\r\n * Handles CQS auto-populated field exclusions and progress calculations\r\n */\r\n\r\n/**\r\n * Get the default questionnaire template with CQS field markings\r\n * This should match the template structure in PlantQuestionnaire.js\r\n */\r\nexport const getDefaultQuestionnaireTemplate = () => [\r\n  {\r\n    title: 'General',\r\n    fields: [\r\n      { name: 'msds_available', isCqsAutoPopulated: false },\r\n      { name: 'missing_info', isCqsAutoPopulated: false },\r\n      { name: 'sourcing_asked', isCqsAutoPopulated: false },\r\n      { name: 'cas_available', isCqsAutoPopulated: false },\r\n      { name: 'mixture_ingredients', isCqsAutoPopulated: false },\r\n      { name: 'composition_percentage', isCqsAutoPopulated: false },\r\n      { name: 'total_percentage_1', isCqsAutoPopulated: false },\r\n      { name: 'total_percentage', isCqsAutoPopulated: false }\r\n    ]\r\n  },\r\n  {\r\n    title: 'Physical',\r\n    fields: [\r\n      { name: 'is_corrosive', isCqsAutoPopulated: true },\r\n      { name: 'corrosive_storage', isCqsAutoPopulated: false },\r\n      { name: 'highly_toxic', isCqsAutoPopulated: true },\r\n      { name: 'toxic_powder_handling', isCqsAutoPopulated: false },\r\n      { name: 'crushing_facilities', isCqsAutoPopulated: false },\r\n      { name: 'heating_facilities', isCqsAutoPopulated: false },\r\n      { name: 'paste_preparation', isCqsAutoPopulated: false }\r\n    ]\r\n  },\r\n  {\r\n    title: 'Flammability and Explosivity',\r\n    fields: [\r\n      { name: 'flash_point_65', isCqsAutoPopulated: true },\r\n      { name: 'petroleum_class', isCqsAutoPopulated: true },\r\n      { name: 'storage_license', isCqsAutoPopulated: false },\r\n      { name: 'ccoe_license', isCqsAutoPopulated: false },\r\n      { name: 'flash_point_21', isCqsAutoPopulated: true },\r\n      { name: 'flammable_infrastructure', isCqsAutoPopulated: false }\r\n    ]\r\n  },\r\n  {\r\n    title: 'Toxicity',\r\n    fields: [\r\n      { name: 'ld50_oral', isCqsAutoPopulated: true },\r\n      { name: 'ld50_dermal', isCqsAutoPopulated: true },\r\n      { name: 'lc50_inhalation', isCqsAutoPopulated: true },\r\n      { name: 'exposure_minimization', isCqsAutoPopulated: false },\r\n      { name: 'carcinogenic', isCqsAutoPopulated: true },\r\n      { name: 'carcinogenic_control', isCqsAutoPopulated: false }\r\n    ]\r\n  },\r\n  {\r\n    title: 'Storage and Handling',\r\n    fields: [\r\n      { name: 'storage_conditions_stores', isCqsAutoPopulated: false },\r\n      { name: 'storage_conditions_floor', isCqsAutoPopulated: false },\r\n      { name: 'closed_loop_required', isCqsAutoPopulated: false },\r\n      { name: 'work_permit_available', isCqsAutoPopulated: false },\r\n      { name: 'procedures_details', isCqsAutoPopulated: false }\r\n    ]\r\n  },\r\n  {\r\n    title: 'PPE',\r\n    fields: [\r\n      { name: 'recommended_ppe', isCqsAutoPopulated: true },\r\n      { name: 'ppe_in_use', isCqsAutoPopulated: false },\r\n      { name: 'ppe_procurement_date', isCqsAutoPopulated: false }\r\n    ]\r\n  },\r\n  {\r\n    title: 'First Aid',\r\n    fields: [\r\n      { name: 'is_poisonous', isCqsAutoPopulated: true },\r\n      { name: 'antidote_specified', isCqsAutoPopulated: true },\r\n      { name: 'antidote_available', isCqsAutoPopulated: false },\r\n      { name: 'antidote_source', isCqsAutoPopulated: false },\r\n      { name: 'first_aid_capability', isCqsAutoPopulated: false }\r\n    ]\r\n  },\r\n  {\r\n    title: 'Statutory',\r\n    fields: [\r\n      { name: 'cmvr_listed', isCqsAutoPopulated: true },\r\n      { name: 'msihc_listed', isCqsAutoPopulated: true },\r\n      { name: 'factories_act_listed', isCqsAutoPopulated: true },\r\n      { name: 'permissible_concentration', isCqsAutoPopulated: false },\r\n      { name: 'monitoring_details', isCqsAutoPopulated: false }\r\n    ]\r\n  },\r\n  {\r\n    title: 'Others',\r\n    fields: [\r\n      { name: 'plant_inputs_required', isCqsAutoPopulated: false },\r\n      { name: 'gaps_identified', isCqsAutoPopulated: false },\r\n      { name: 'additional_input_1', isCqsAutoPopulated: false },\r\n      { name: 'additional_input_2', isCqsAutoPopulated: false }\r\n    ]\r\n  }\r\n];\r\n\r\n/**\r\n * Calculate correct field counts excluding CQS auto-populated fields\r\n * @param {Object} plantInputs - The plant input data\r\n * @param {Array} template - Optional template, uses default if not provided\r\n * @returns {Object} - { totalUserEditableFields, completedUserEditableFields, completionPercentage }\r\n */\r\nexport const calculateCorrectFieldCounts = (plantInputs = {}, template = null) => {\r\n  const questionnaireTemplate = template || getDefaultQuestionnaireTemplate();\r\n  \r\n  let totalUserEditableFields = 0;\r\n  let completedUserEditableFields = 0;\r\n\r\n  questionnaireTemplate.forEach(step => {\r\n    const stepFields = step.fields || [];\r\n    \r\n    // Filter out CQS auto-populated fields\r\n    const userEditableFields = stepFields.filter(field => !field.isCqsAutoPopulated && !field.disabled);\r\n    totalUserEditableFields += userEditableFields.length;\r\n\r\n    // Count completed user-editable fields\r\n    const completedFields = userEditableFields.filter(field => {\r\n      const value = plantInputs[field.name];\r\n      if (Array.isArray(value)) {\r\n        return value.length > 0;\r\n      }\r\n      return value && value !== '' && value !== null && value !== undefined;\r\n    });\r\n\r\n    completedUserEditableFields += completedFields.length;\r\n  });\r\n\r\n  const completionPercentage = totalUserEditableFields > 0 \r\n    ? Math.round((completedUserEditableFields / totalUserEditableFields) * 100) \r\n    : 0;\r\n\r\n  return {\r\n    totalUserEditableFields,\r\n    completedUserEditableFields,\r\n    completionPercentage\r\n  };\r\n};\r\n\r\n/**\r\n * Get total field counts for the questionnaire template\r\n * @param {Array} template - Optional template, uses default if not provided\r\n * @returns {Object} - { totalFields, totalUserEditableFields, totalCqsFields }\r\n */\r\nexport const getTemplateFieldCounts = (template = null) => {\r\n  const questionnaireTemplate = template || getDefaultQuestionnaireTemplate();\r\n  \r\n  let totalFields = 0;\r\n  let totalUserEditableFields = 0;\r\n  let totalCqsFields = 0;\r\n\r\n  questionnaireTemplate.forEach(step => {\r\n    const stepFields = step.fields || [];\r\n    totalFields += stepFields.length;\r\n    \r\n    stepFields.forEach(field => {\r\n      if (field.isCqsAutoPopulated || field.disabled) {\r\n        totalCqsFields++;\r\n      } else {\r\n        totalUserEditableFields++;\r\n      }\r\n    });\r\n  });\r\n\r\n  return {\r\n    totalFields,\r\n    totalUserEditableFields,\r\n    totalCqsFields\r\n  };\r\n};\r\n\r\n/**\r\n * Recalculate workflow progress with correct field counts\r\n * @param {Object} workflow - The workflow object from backend\r\n * @param {Object} plantInputs - The plant input data (optional)\r\n * @returns {Object} - Updated workflow with correct field counts\r\n */\r\nexport const recalculateWorkflowProgress = (workflow, plantInputs = null) => {\r\n  // If we have plant inputs, calculate based on actual data\r\n  if (plantInputs) {\r\n    const { totalUserEditableFields, completedUserEditableFields, completionPercentage } = \r\n      calculateCorrectFieldCounts(plantInputs);\r\n    \r\n    return {\r\n      ...workflow,\r\n      totalFields: totalUserEditableFields,\r\n      completedFields: completedUserEditableFields,\r\n      completionPercentage\r\n    };\r\n  }\r\n\r\n  // Otherwise, just fix the total field count and recalculate percentage\r\n  const { totalUserEditableFields } = getTemplateFieldCounts();\r\n  \r\n  // Assume the backend's completed count is correct but total is wrong\r\n  const backendCompletedFields = workflow.completedFields || 0;\r\n  const correctedCompletionPercentage = totalUserEditableFields > 0 \r\n    ? Math.round((backendCompletedFields / totalUserEditableFields) * 100) \r\n    : 0;\r\n\r\n  return {\r\n    ...workflow,\r\n    totalFields: totalUserEditableFields,\r\n    completionPercentage: correctedCompletionPercentage\r\n  };\r\n};","import apiClient from '../api/client';\nimport { getToken, isAuthenticated } from '../services/auth';\n\n/**\n * User API service providing user management functionality\n * Migrated to use unified APIClient with standardized error handling\n *\n * @namespace userAPI\n */\nexport const userAPI = {\n  /**\n   * Get current user's plant assignments from backend API\n   * @param {string} username - Username to get plant assignments for\n   * @param {Object} options - Additional options including signal for AbortController\n   * @returns {Promise<Object>} Plant assignment data\n   */\n  getUserPlantAssignments: async (username, options = {}) => {\n    try {\n      console.log('Getting plant assignments for user:', username);\n      console.log('Is authenticated:', isAuthenticated());\n\n      // Check if user is authenticated first\n      if (!isAuthenticated()) {\n        console.warn('User is not authenticated, cannot get plant assignments');\n        return {\n          assignedPlants: [],\n          primaryPlant: null,\n          effectivePlant: null,\n          isPlantUser: false\n        };\n      }\n\n      // Primary method: Get plant info from JWT token validation\n      const token = getToken();\n      console.log('Retrieved token:', token ? 'Token found' : 'No token found');\n\n      if (token) {\n        try {\n          const validationResponse = await apiClient.post('/auth/validate', { token }, options);\n          console.log('Token validation response:', validationResponse);\n          console.log('Plant codes in token:', validationResponse.plantCodes);\n          console.log('Primary plant in token:', validationResponse.primaryPlant);\n          console.log('Is plant user:', validationResponse.isPlantUser);\n\n          if (validationResponse.valid) {\n            // Check if we have plant data in the token\n            if (validationResponse.plantCodes && validationResponse.plantCodes.length > 0) {\n              console.log('Plant assignments from token:', validationResponse);\n              return {\n                assignedPlants: validationResponse.plantCodes || [],\n                primaryPlant: validationResponse.primaryPlant || null,\n                effectivePlant: validationResponse.primaryPlant || (validationResponse.plantCodes && validationResponse.plantCodes[0]) || null,\n                isPlantUser: validationResponse.isPlantUser || false\n              };\n            }\n\n            // Handle case where user has primaryPlant but empty plantCodes array\n            if (validationResponse.primaryPlant && validationResponse.isPlantUser) {\n              console.log('User has primary plant but empty plantCodes, using primary plant as assigned plant:', validationResponse.primaryPlant);\n              return {\n                assignedPlants: [validationResponse.primaryPlant],\n                primaryPlant: validationResponse.primaryPlant,\n                effectivePlant: validationResponse.primaryPlant,\n                isPlantUser: validationResponse.isPlantUser || false\n              };\n            }\n\n            // If no plant data in token but token is valid, user might not have plants assigned\n            console.log('Token is valid but no plant data found in token');\n          }\n        } catch (tokenError) {\n          console.warn('Failed to validate token for plant assignments:', tokenError);\n        }\n      }\n\n      // Fallback: try to get from stored user data (check multiple storage keys)\n      const possibleKeys = ['userData', 'qrmfg_user_data', 'user_info'];\n      for (const key of possibleKeys) {\n        const storedUserData = localStorage.getItem(key) || sessionStorage.getItem(key);\n        if (storedUserData) {\n          try {\n            const userData = JSON.parse(storedUserData);\n            if (userData.plantCodes || userData.assignedPlants) {\n              console.log('Plant assignments from stored data:', userData);\n              return {\n                assignedPlants: userData.plantCodes || userData.assignedPlants || [],\n                primaryPlant: userData.primaryPlant || null,\n                effectivePlant: userData.primaryPlant || ((userData.plantCodes || userData.assignedPlants) && (userData.plantCodes || userData.assignedPlants)[0]) || null,\n                isPlantUser: userData.isPlantUser || false\n              };\n            }\n          } catch (parseError) {\n            console.warn(`Failed to parse stored user data from ${key}:`, parseError);\n          }\n        }\n      }\n\n      // Last resort: Try admin endpoints only if user might have admin access\n      try {\n        // Only try admin endpoints if we think the user might be an admin\n        const adminToken = getToken();\n        const validationResponse = await apiClient.post('/auth/validate', { token: adminToken }, options);\n        if (validationResponse.valid && validationResponse.isAdmin) {\n          console.log('User appears to be admin, trying admin endpoints...');\n\n          const userDetails = await apiClient.get('/admin/users', options);\n          const currentUser = userDetails.users?.find(user => user.username === username);\n\n          if (currentUser && currentUser.assignedPlants) {\n            console.log('Admin endpoint: Using user details for plant assignments:', currentUser);\n\n            return {\n              assignedPlants: currentUser.assignedPlants || [],\n              primaryPlant: currentUser.primaryPlant || null,\n              effectivePlant: currentUser.primaryPlant || (currentUser.assignedPlants && currentUser.assignedPlants[0]) || null,\n              isPlantUser: (currentUser.assignedPlants && currentUser.assignedPlants.length > 0) || false\n            };\n          }\n        }\n      } catch (adminError) {\n        console.warn('Admin endpoints not accessible (expected for non-admin users):', adminError.message);\n      }\n\n      // If no plant data available, return empty structure\n      console.warn('No plant assignment data available for user:', username);\n      return {\n        assignedPlants: [],\n        primaryPlant: null,\n        effectivePlant: null,\n        isPlantUser: false\n      };\n    } catch (error) {\n      console.error('Error getting user plant assignments:', error);\n      // Return empty structure on error to prevent crashes\n      return {\n        assignedPlants: [],\n        primaryPlant: null,\n        effectivePlant: null,\n        isPlantUser: false\n      };\n    }\n  },\n\n  /**\n   * Update user's plant assignments\n   * @param {string} username - Username to update plant assignments for\n   * @param {Object} plantData - Plant assignment data\n   * @returns {Promise<Object>} Updated plant assignments\n   */\n  updateUserPlantAssignments: (username, plantData) =>\n    apiClient.put(`/admin/users/${encodeURIComponent(username)}/plants`, plantData),\n\n  /**\n   * Check if user is assigned to a specific plant\n   * @param {string} username - Username to check\n   * @param {string} plantCode - Plant code to check assignment for\n   * @returns {Promise<boolean>} True if user is assigned to plant\n   */\n  checkUserPlantAssignment: (username, plantCode) =>\n    apiClient.get(\n      `/admin/users/${encodeURIComponent(username)}/plants/${encodeURIComponent(plantCode)}/check`\n    ),\n\n  /**\n   * Get user information by ID\n   * @param {string} id - User ID\n   * @returns {Promise<Object>} User information\n   */\n  getUserById: id => apiClient.get(`/admin/users/${id}`),\n\n  /**\n   * Get all users (cached for 5 minutes)\n   * @param {Object} options - Additional options including signal for AbortController\n   * @returns {Promise<Array>} Array of all users\n   */\n  getAllUsers: (options = {}) => apiClient.get('/admin/users', {\n    cacheTTL: 5 * 60 * 1000, // Cache for 5 minutes\n    ...options\n  }),\n\n  /**\n   * Get all users without cache (for real-time data)\n   * @param {Object} options - Additional options including signal for AbortController\n   * @returns {Promise<Array>} Array of all users\n   */\n  getAllUsersRealTime: (options = {}) => apiClient.get('/admin/users', {\n    useCache: false,\n    ...options\n  })\n};\n","import apiClient from '../api/client';\n\nexport const masterDataAPI = {\n  // Location Master (Plants) endpoints\n  getAllLocations: async () => {\n    try {\n      return await apiClient.get('/master-data/locations');\n    } catch (error) {\n      console.warn('Main locations endpoint failed, trying fallback:', error);\n      try {\n        return await apiClient.get('/master-data/locations/fallback');\n      } catch (fallbackError) {\n        console.warn('Fallback endpoint failed, trying simple endpoint:', fallbackError);\n        try {\n          return await apiClient.get('/simple-locations');\n        } catch (simpleError) {\n          console.error('All locations endpoints failed:', simpleError);\n          throw simpleError;\n        }\n      }\n    }\n  },\n\n  getLocationByCode: locationCode =>\n    apiClient.get(`/master-data/locations/${encodeURIComponent(locationCode)}`),\n\n  searchLocations: searchTerm =>\n    apiClient.get(`/master-data/locations/search?term=${encodeURIComponent(searchTerm)}`),\n\n  createLocation: locationData => apiClient.post('/master-data/locations', locationData),\n\n  updateLocation: (locationCode, locationData) =>\n    apiClient.put(`/master-data/locations/${encodeURIComponent(locationCode)}`, locationData),\n\n  deleteLocation: locationCode =>\n    apiClient.delete(`/master-data/locations/${encodeURIComponent(locationCode)}`),\n\n\n\n  // Project Item Master endpoints\n  getAllProjectItems: () => apiClient.get('/master-data/project-items'),\n\n  getItemsByProject: projectCode =>\n    apiClient.get(`/master-data/project-items/projects/${encodeURIComponent(projectCode)}`),\n\n  getProjectsByItem: itemCode =>\n    apiClient.get(`/master-data/project-items/items/${encodeURIComponent(itemCode)}`),\n\n  getAllProjectCodes: () => apiClient.get('/master-data/project-codes'),\n\n  getAllItemCodes: () => apiClient.get('/master-data/item-codes'),\n\n  getItemCodesByProject: projectCode =>\n    apiClient.get(`/master-data/project-codes/${encodeURIComponent(projectCode)}/items`),\n\n  // Test endpoints\n  testLocationMaster: () => apiClient.get('/master-data/locations/test'),\n\n  testSimpleLocation: () => apiClient.get('/simple-locations/test'),\n\n  diagnosticLocationMaster: () => apiClient.get('/master-data/locations/diagnostic'),\n\n  getSimpleLocationCount: () => apiClient.get('/simple-locations/count')\n};\n"],"names":["_ref","children","plantCode","_jsx","RouteErrorBoundary","routeName","errorContext","feature","level","Search","Input","Option","Select","FilterPanel","React","searchText","statusFilter","completionFilter","onSearchTextChange","onStatusFilterChange","onCompletionFilterChange","onClearFilters","onApplyPreset","onSaveFilters","filterPresets","filterSummary","handleSearchChange","useCallback","value","handleStatusChange","handleCompletionChange","handleClearFilters","handlePresetClick","presetName","handleSaveFilters","_jsxs","Card","title","style","display","alignItems","gap","FilterOutlined","hasActiveFilters","Tag","color","marginLeft","activeFilters","length","size","marginBottom","extra","Space","Button","icon","SaveOutlined","onClick","disabled","ClearOutlined","Row","gutter","Col","xs","sm","md","lg","fontSize","fontWeight","placeholder","onChange","e","target","width","allowClear","enterButton","SearchOutlined","_Fragment","Divider","margin","wrap","map","preset","type","name","filter","index","marginTop","totalFiltered","totalOriginal","textAlign","displayName","defaultProps","PlantDashboard","dashboardStats","loading","error","currentPlant","onRefresh","getProgressColor","useMemo","percentage","completionStats","totalWorkflows","completedCount","inProgressCount","draftCount","completionRate","inProgressRate","draftRate","Math","round","getStatisticColor","total","inProgress","completed","average","Alert","message","description","showIcon","action","border","background","cursor","Statistic","prefix","ClockCircleOutlined","valueStyle","ExclamationCircleOutlined","CheckCircleOutlined","averageCompletion","suffix","BarChartOutlined","Progress","percent","strokeColor","format","WorkflowTable","workflows","onStartQuestionnaire","onViewWorkflow","getStatusColor","status","DRAFT","IN_PROGRESS","COMPLETED","SUBMITTED","getCompletionColor","getDaysInState","lastModified","now","Date","modified","diffTime","abs","ceil","handleStartQuestionnaire","workflow","handleViewWorkflow","console","log","id","columns","dataIndex","key","sorter","a","b","materialCode","localeCompare","filterDropdown","_ref2","setSelectedKeys","selectedKeys","confirm","clearFilters","padding","onPressEnter","filterIcon","filtered","undefined","onFilter","record","toLowerCase","includes","render","text","materialName","itemDescription","_ref3","filters","completionStatus","replace","completionPercentage","_","completedFields","totalFields","days","openQueries","count","FormOutlined","isSubmitted","EyeOutlined","getRowClassName","paginationConfig","pageSize","PAGINATION","DEFAULT_PAGE_SIZE","showSizeChanger","showQuickJumper","showTotal","range","pageSizeOptions","Table","dataSource","rowKey","pagination","rowClassName","scroll","x","bordered","justifyContent","Panel","Collapse","Text","Typography","workflowData","setLoading","useState","jvcDocuments","setJvcDocuments","expanded","setExpanded","loadJvcDocuments","async","projectCode","documents","workflowAPI","getReusableDocuments","getWorkflowDocuments","useEffect","formatDate","dateString","toLocaleDateString","year","month","day","hour","minute","height","daysInCurrentState","calculateDaysInState","isOverdue","InfoCircleOutlined","Badge","position","top","activeKey","ghost","header","FileTextOutlined","Descriptions","column","Item","label","strong","assignedPlant","TeamOutlined","initiatedBy","CalendarOutlined","createdAt","WarningOutlined","direction","state","JVC_PENDING","PLANT_PENDING","CQS_PENDING","TECH_PENDING","getStateName","totalQueries","Spin","doc","_doc$fileType","styles","body","originalFileName","fileName","sourceDescription","documentSource","fileType","toUpperCase","fileSize","toFixed","uploadedBy","Tooltip","DownloadOutlined","documentId","filename","blob","downloadDocument","url","window","URL","createObjectURL","link","document","createElement","href","download","appendChild","click","removeChild","revokeObjectURL","success","handleDocumentDownload","materialCategory","supplierName","supplierCode","supplierContact","purchaseOrder","quantityOrdered","expectedDelivery","expectedUsage","applicationArea","processRequirements","backgroundColor","borderRadius","regulatoryRequirements","specialInstructions","urgencyLevel","businessImpact","costCenter","jvcNotes","whiteSpace","knownProperties","Object","keys","entries","str","specifications","JSON","stringify","String","safetyNotes","TextArea","open","visible","onCancel","onSubmit","workflowId","fieldContext","form","Form","useForm","uploadedDocuments","setUploadedDocuments","createdQueryId","setCreatedQueryId","handleCancel","resetFields","getPriorityColor","priority","LOW","MEDIUM","HIGH","URGENT","Modal","QuestionCircleOutlined","footer","documentMessage","queryToReturn","submit","destroyOnClose","stepTitle","SecureForm","layout","onFinish","queryData","question","values","assignedTeam","priorityLevel","fieldName","stepNumber","queryCategory","createdQuery","queryAPI","createQuery","initialValues","componentName","enableSecurityLogging","_fieldContext$stepTit","_fieldContext$label","fieldLabel","cqsScore","forEach","keyword","techScore","jvcScore","maxScore","max","primaryTeam","confidence","CQS","TECH","JVC","getRecommendedTeam","rules","required","help","showSearch","optionFilterProp","filterOption","input","option","props","indexOf","SecureFormItem","validationType","SecureInput","Radio","SecureTextArea","rows","showCount","maxLength","QueryDocumentUpload","queryId","context","onUploadComplete","prev","maxFiles","items","PaperClipOutlined","paddingLeft","Title","Paragraph","onComplete","onSaveDraft","currentStep","setCurrentStep","saving","setSaving","submitting","setSubmitting","setWorkflowData","formData","setFormData","completedSteps","setCompletedSteps","Set","queryModalVisible","setQueryModalVisible","selectedField","setSelectedField","queries","setQueries","autoSaveEnabled","setAutoSaveEnabled","isOffline","setIsOffline","navigator","onLine","pendingChanges","setPendingChanges","sidebarVisible","setSidebarVisible","_progressUpdateTrigger","_setProgressUpdateTrigger","isMobile","useResponsive","screenSize","setScreenSize","innerWidth","UI_CONFIG","MOBILE_BREAKPOINT","isTablet","TABLET_BREAKPOINT","isDesktop","handleResize","addEventListener","removeEventListener","questionnaireSteps","setQuestionnaireSteps","templateLoading","setTemplateLoading","_cqsData","setCqsData","_plantSpecificData","setPlantSpecificData","stepIcons","General","Physical","ExperimentOutlined","FireOutlined","Toxicity","SafetyOutlined","BookOutlined","PPE","MedicineBoxOutlined","Statutory","Others","SettingOutlined","Safety","Environmental","BulbOutlined","Quality","RocketOutlined","loadQuestionnaireTemplate","warn","getDefaultTemplate","template","getQuestionnaireTemplate","templateType","steps","Array","isArray","Error","processedSteps","step","fields","field","isCqsAutoPopulated","cqsAutoPopulated","cqsValue","cqsResponse","getCqsData","data","cqsFormData","setFieldsValue","plantData","getOrCreatePlantSpecificData","plantInputs","options","handleNext","handlePrevious","handleStepChange","getOverallCompletionPercentage","currentFormValues","getFieldsValue","currentData","_index","userEditableFields","completedStepFields","getTotalFieldsPopulated","populated","populatedFields","populatedStepFields","handleSaveDraft","silent","arguments","currentValues","updatedFormData","validatedFormData","draftKey","draftData","timestamp","from","version","lastSyncAttempt","syncStatus","sessionId","localStorage","setItem","localStorageError","info","responses","modifiedBy","saveDraftPlantResponses","serverError","warning","handleOnline","notification","WifiOutlined","duration","handleOffline","DisconnectOutlined","handleKeyDown","event","ctrlKey","metaKey","preventDefault","content","loadWorkflowData","getWorkflow","initialData","existingData","response","fieldValue","add","loadQueries","workflowQueries","getQueriesByWorkflow","autoSaveTimer","setTimeout","AUTO_SAVE","INTERVAL","clearTimeout","newCompletedSteps","requiredFields","completedRequiredFields","completedOptionalFields","recoverDraftData","savedDraft","getItem","parse","draftTimestamp","currentTime","_ref4","recoveredFields","draftAge","placement","removeItem","removeError","getStepCompletionStatus","stepIndex","optional","requiredCompleted","optionalCompleted","isComplete","hasOpenQueries","hasResolvedQueries","openQueriesCount","resolvedQueriesCount","requiredCompletionPercentage","optionalFields","stepQueries","q","resolvedQueries","handleRaiseQuery","find","f","currentValue","getFieldValue","materialContext","materialType","scrollToResolvedQuery","fieldElement","querySelector","scrollIntoView","behavior","block","inline","transition","resolvedQueriesInCurrentStep","hasBeenViewed","latestResolvedQuery","sort","resolvedAt","proceedWithSubmission","allRequiredFields","flatMap","validateFields","finalData","Promise","resolve","okText","cancelText","onOk","submissionData","submittedBy","submitPlantQuestionnaire","renderField","_field$options","_field$options2","_field$options3","fieldQueries","hasOpenQuery","some","hasResolvedQuery","resolvedQuery","isFieldCompleted","className","align","validationRules","push","pattern","min","getFieldValidationRules","helpContent","resolvedBy","msds_available","cas_available","is_corrosive","highly_toxic","flash_point_65","petroleum_class","ld50_oral","ld50_dermal","lc50_inhalation","carcinogenic","recommended_ppe","is_poisonous","cmvr_listed","msihc_listed","factories_act_listed","getFieldHelpText","commonProps","inputProps","autoSize","minRows","maxRows","valuePropName","Checkbox","Group","flexDirection","minHeight","boxShadow","maxWidth","overflow","animation","location","reload","currentStepData","Avatar","DashboardOutlined","x1","y1","x2","y2","offset","stopColor","cx","cy","r","inset","MenuOutlined","fieldStats","stepStatus","isActive","isCompleted","flex","minWidth","MaterialContextPanel","showInfo","trailColor","closable","onValuesChange","changedValues","allValues","animationDelay","ArrowLeftOutlined","opacity","ArrowRightOutlined","Drawer","onClose","Timeline","dot","FloatButton","trigger","right","tooltip","summaryData","CloudSyncOutlined","QueryRaisingModal","_queryData","PlantView","selectedWorkflow","setSelectedWorkflow","questionnaireVisible","setQuestionnaireVisible","setCurrentPlant","userPlantData","setUserPlantData","availablePlants","setAvailablePlants","isPlantUser","isAdmin","userPlants","primaryPlant","filterByPlantAccess","useRoleBasedAccess","refreshWorkflows","usePlantWorkflows","setWorkflows","setError","setDashboardStats","completedToday","getCurrentPlant","storedPlant","storedUser","loadPlantWorkflows","dashboardData","workflowsWithProgress","getPlantDashboardData","signal","correctedWorkflow","recalculateWorkflowProgress","currentState","WORKFLOW_STATES","WORKFLOW_SPECIFIC_STATES","submittedAt","plantDataError","plantWorkflows","getWorkflowsByPlant","totalUserEditableFields","getTemplateFieldCounts","_workflow$plantData","calculateCorrectFieldCounts","fallbackError","controller","AbortController","aborted","fetchWorkflows","abort","filteredWorkflows","updateSearchText","updateStatusFilter","updateCompletionFilter","clearAllFilters","applyPreset","saveFilters","searchParams","setSearchParams","useSearchParams","setSearchText","get","setStatusFilter","setCompletionFilter","searchLower","_workflow$materialCod","_workflow$plantCode","_workflow$materialNam","_workflow$itemDescrip","COMPLETION_FILTERS","NOT_STARTED","applyFilters","p","loadSavedFilters","saved","params","URLSearchParams","set","useWorkflowFilters","loadUserPlantData","fetchData","isAuthenticated","currentUser","getCurrentUser","locations","all","userAPI","getUserPlantAssignments","masterDataAPI","getAllLocations","assignedPlants","effectivePlant","firstPlant","plantOptions","loc","locationCode","isPrimary","handlePlantChange","newPlantCode","handleQuestionnaireComplete","_formData","PlantOnly","PlantErrorBoundary","_option$children","plant","PlantQuestionnaire","toString","updateUserPlantAssignments","clear","sessionStorage","accessSummary","setAccessSummary","loadAccessSummary","summary","RBACService","getUserAccessSummary","err","fallbackSummary","getFallbackAccessSummary","checkScreenAccess","hasScreenAccess","screenRoute","getFallbackScreenAccess","checkDataAccess","dataType","hasDataAccess","getFallbackDataAccess","checkPlantDataAccess","hasPlantDataAccess","getFallbackPlantDataAccess","makeAccessDecision","resourceType","resourceId","getFallbackAccessDecision","plantExtractor","filterDataByPlantAccess","primaryRole","getPrimaryRoleType","getUserPlantCodes","getPrimaryPlantCode","isJvcUser","isCqsUser","isTechUser","isViewer","hasRole","role","hasAnyRole","roles","hasAllRoles","every","refresh","onValidationChange","validateInput","useInputValidation","validationState","setValidationState","isValid","errors","wasModified","handleChange","inputValue","validation","SecurityAuditLogger","logXSSAttempt","sanitizedValue","join","securityEvents","setSecurityEvents","handleFinish","sanitizedValues","securityIssues","originalValue","InputSanitizer","sanitizeText","substring","issue","events","getRecentEvents","slice","validateTrigger","process","securityRules","baseRules","ValidationRules","username","email","password","richText","completedUserEditableFields","totalCqsFields","stepFields","backendCompletedFields","correctedCompletionPercentage","token","getToken","validationResponse","apiClient","post","plantCodes","valid","tokenError","possibleKeys","storedUserData","userData","parseError","adminToken","_userDetails$users","users","user","adminError","put","encodeURIComponent","checkUserPlantAssignment","getUserById","getAllUsers","cacheTTL","getAllUsersRealTime","useCache","simpleError","getLocationByCode","searchLocations","searchTerm","createLocation","locationData","updateLocation","deleteLocation","delete","getAllProjectItems","getItemsByProject","getProjectsByItem","itemCode","getAllProjectCodes","getAllItemCodes","getItemCodesByProject","testLocationMaster","testSimpleLocation","diagnosticLocationMaster","getSimpleLocationCount"],"sourceRoot":""}