"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[173],{173:(e,s,l)=>{l.d(s,{A:()=>xe});var r=l(6833),t=l(6191),i=l(3117),n=l(119),a=l(6237),o=l(9470),d=l(617),c=l(8463),x=l(5444),h=l(6553),u=l(3927),j=l(9098),y=l(6569),p=l(6051),m=l(6399),A=l(7692),g=l(5206),v=l(2261),f=l(7419),w=l(1645),C=l(9073),S=l(6612),b=l(3217),T=l(2751),I=l(8918),k=l(8354),R=l(5043),z=l(6649),N=l(2868),D=l(1780),E=l(4786),L=l(1334),Q=l(6091),q=l(4228),P=l(7326),M=l(1686),B=l(691),O=l(579);const{Panel:F}=P.A,{Text:H}=u.A,$=e=>{var s;let{materialCode:l,workflowId:r,compact:t=!1}=e;const[i,n]=(0,R.useState)(!1),[a,o]=(0,R.useState)(null),[d,c]=(0,R.useState)(null),[x,h]=(0,R.useState)(null),u=(0,R.useCallback)(async()=>{try{n(!0),h(null);const e=[];r&&e.push(z.default.get(`/workflows/${r}`).then(e=>c(e))),l&&e.push(Promise.resolve({id:l,name:`Material ${l}`,description:"Sample material description",category:"Chemical",supplier:"Sample Supplier",hazardClass:"Class 3",physicalState:"Liquid",flashPoint:"25\xb0C",autoIgnitionTemp:"300\xb0C",density:"0.85 g/cm\xb3",solubility:"Soluble in water",ph:"7.2",viscosity:"2.5 cP"}).then(e=>o(e))),await Promise.all(e)}catch(x){console.error("Failed to load material context:",x),h("Failed to load material information")}finally{n(!1)}},[r,l]);(0,R.useEffect)(()=>{(l||r)&&u()},[l,r,u]);const j=e=>({JVC_PENDING:"blue",PLANT_PENDING:"orange",CQS_PENDING:"red",TECH_PENDING:"purple",COMPLETED:"green"}[e]||"default"),y=e=>({"Class 1":"red","Class 2":"orange","Class 3":"yellow","Class 4":"blue","Class 5":"green","Class 6":"purple","Class 7":"magenta","Class 8":"cyan","Class 9":"lime"}[e]||"default");return i?(0,O.jsx)(C.A,{size:"small",children:(0,O.jsxs)("div",{style:{textAlign:"center",padding:"20px"},children:[(0,O.jsx)(M.A,{size:"small"}),(0,O.jsx)("div",{style:{marginTop:8},children:"Loading material context..."})]})}):x?(0,O.jsx)(v.A,{message:"Context Error",description:x,type:"warning",showIcon:!0,size:"small"}):t?(0,O.jsx)(C.A,{size:"small",title:"Material Context",style:{marginBottom:16},children:(0,O.jsxs)(p.A,{direction:"vertical",style:{width:"100%"},children:[a&&(0,O.jsxs)("div",{children:[(0,O.jsx)(H,{strong:!0,children:"Material:"})," ",a.name," (",a.id,")",(0,O.jsx)("br",{}),(0,O.jsx)(H,{strong:!0,children:"Category:"})," ",a.category,(0,O.jsx)("br",{}),(0,O.jsx)(H,{strong:!0,children:"Hazard Class:"})," ",(0,O.jsx)(m.A,{color:y(a.hazardClass),children:a.hazardClass})]}),d&&(0,O.jsxs)("div",{children:[(0,O.jsx)(H,{strong:!0,children:"Workflow State:"})," ",(0,O.jsx)(m.A,{color:j(d.state),children:null===(A=d.state)||void 0===A?void 0:A.replace("_"," ")}),(0,O.jsx)("br",{}),(0,O.jsx)(H,{strong:!0,children:"Plant:"})," ",d.assignedPlant]})]})}):(0,O.jsxs)(C.A,{title:(0,O.jsxs)(p.A,{children:[(0,O.jsx)(E.A,{}),(0,O.jsx)("span",{children:"Material Context"})]}),size:"small",style:{marginBottom:16},children:[(0,O.jsxs)(P.A,{size:"small",ghost:!0,children:[a&&(0,O.jsxs)(F,{header:(0,O.jsxs)(p.A,{children:[(0,O.jsx)(L.A,{}),(0,O.jsx)("span",{children:"Material Properties"})]}),children:[(0,O.jsxs)(B.A,{size:"small",column:2,bordered:!0,children:[(0,O.jsx)(B.A.Item,{label:"Material ID",children:a.id}),(0,O.jsx)(B.A.Item,{label:"Name",children:a.name}),(0,O.jsx)(B.A.Item,{label:"Category",children:(0,O.jsx)(m.A,{color:"blue",children:a.category})}),(0,O.jsx)(B.A.Item,{label:"Supplier",children:a.supplier}),(0,O.jsx)(B.A.Item,{label:"Hazard Class",children:(0,O.jsx)(m.A,{color:y(a.hazardClass),children:a.hazardClass})}),(0,O.jsx)(B.A.Item,{label:"Physical State",children:a.physicalState}),(0,O.jsx)(B.A.Item,{label:"Flash Point",children:(0,O.jsx)(H,{type:"danger",children:a.flashPoint})}),(0,O.jsx)(B.A.Item,{label:"Auto-Ignition Temp",children:(0,O.jsx)(H,{type:"danger",children:a.autoIgnitionTemp})}),(0,O.jsx)(B.A.Item,{label:"Density",children:a.density}),(0,O.jsx)(B.A.Item,{label:"Solubility",children:a.solubility}),(0,O.jsx)(B.A.Item,{label:"pH",children:a.ph}),(0,O.jsx)(B.A.Item,{label:"Viscosity",children:a.viscosity})]}),a.description&&(0,O.jsxs)("div",{style:{marginTop:12},children:[(0,O.jsx)(H,{strong:!0,children:"Description:"}),(0,O.jsx)("div",{style:{marginTop:4,padding:8,background:"#f5f5f5",borderRadius:4},children:a.description})]})]},"material"),d&&(0,O.jsx)(F,{header:(0,O.jsxs)(p.A,{children:[(0,O.jsx)(Q.A,{}),(0,O.jsx)("span",{children:"Workflow Information"})]}),children:(0,O.jsxs)(B.A,{size:"small",column:2,bordered:!0,children:[(0,O.jsx)(B.A.Item,{label:"Workflow ID",children:d.id}),(0,O.jsx)(B.A.Item,{label:"Current State",children:(0,O.jsx)(m.A,{color:j(d.state),children:null===(s=d.state)||void 0===s?void 0:s.replace("_"," ")})}),(0,O.jsx)(B.A.Item,{label:"Assigned Plant",children:d.assignedPlant}),(0,O.jsx)(B.A.Item,{label:"Initiated By",children:d.initiatedBy}),(0,O.jsx)(B.A.Item,{label:"Created",children:d.createdAt&&new Date(d.createdAt).toLocaleString()}),(0,O.jsx)(B.A.Item,{label:"Last Modified",children:d.lastModified&&new Date(d.lastModified).toLocaleString()})]})},"workflow"),(0,O.jsx)(F,{header:(0,O.jsxs)(p.A,{children:[(0,O.jsx)(q.A,{}),(0,O.jsx)("span",{children:"Safety Guidelines"})]}),children:(0,O.jsx)(v.A,{message:"Safety Reminders",description:(0,O.jsxs)("ul",{style:{marginBottom:0,paddingLeft:20},children:[(0,O.jsx)("li",{children:"Always verify material properties before providing guidance"}),(0,O.jsx)("li",{children:"Consider plant-specific safety protocols and equipment"}),(0,O.jsx)("li",{children:"Reference latest SDS (Safety Data Sheet) when available"}),(0,O.jsx)("li",{children:"Escalate to safety team for Class 1-2 hazardous materials"}),(0,O.jsx)("li",{children:"Ensure compliance with local and international regulations"})]}),type:"info",showIcon:!0})},"safety")]}),(0,O.jsx)("div",{style:{marginTop:12,textAlign:"right"},children:(0,O.jsx)(g.Ay,{size:"small",icon:(0,O.jsx)(E.A,{}),onClick:u,children:"Refresh Context"})})]});var A};var U=l(6523),G=l(6989),_=l(9330),V=l(2878),W=l(1966),J=l(1210),K=l(3722),Y=l(9472),Z=l(4522),X=l(6651),ee=l(647),se=l(3661);const{Text:le,Title:re}=u.A,te=e=>{let{queryId:s,allowDelete:l=!1,onDocumentDeleted:r,showBulkActions:t=!0,currentUser:n}=e;const[a,o]=(0,R.useState)([]),[d,c]=(0,R.useState)(!0),[x,h]=(0,R.useState)(new Set),[u,j]=(0,R.useState)(new Set);(0,R.useEffect)(()=>{s&&A()},[s,A]);const A=(0,R.useCallback)(async()=>{try{c(!0);const e=await se.B.getQueryDocuments(s);o(e||[])}catch(e){console.error("Error fetching query documents:",e),y.Ay.error("Failed to load documents. Please try again."),o([])}finally{c(!1)}},[s]),f=e=>{if(!e||0===e)return"0 Bytes";const s=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,s)).toFixed(2))} ${["Bytes","KB","MB","GB"][s]}`},w=e=>{if(!e)return"Unknown";try{return new Date(e).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(s){return"Invalid Date"}},S=e=>{if(!e)return(0,O.jsx)(U.A,{});const s={fontSize:"16px"};switch(e.toLowerCase().split(".").pop()){case"pdf":return(0,O.jsx)(Q.A,{style:{...s,color:"#ff4d4f"}});case"doc":case"docx":return(0,O.jsx)(Q.A,{style:{...s,color:"#1890ff"}});case"xls":case"xlsx":return(0,O.jsx)(Q.A,{style:{...s,color:"#52c41a"}});case"jpg":case"jpeg":case"png":return(0,O.jsx)(U.A,{style:{...s,color:"#722ed1"}});default:return(0,O.jsx)(U.A,{style:s})}},b=async e=>{try{h(s=>new Set([...s,e.id]));const l=await se.B.downloadQueryDocument(s,e.id),r=window.URL.createObjectURL(l),t=e.createElement("a");t.href=r,t.download=e.originalFileName||e.fileName,e.body.appendChild(t),t.click(),window.URL.revokeObjectURL(r),e.body.removeChild(t),y.Ay.success(`Downloaded ${e.originalFileName||e.fileName}`)}catch(l){console.error("Error downloading document:",l),y.Ay.error("Failed to download document. Please try again.")}finally{h(s=>{const l=new Set(s);return l.delete(e.id),l})}},T=async e=>{try{j(s=>new Set([...s,e.id])),await se.B.deleteQueryDocument(s,e.id),y.Ay.success(`Deleted ${e.originalFileName||e.fileName}`),o(s=>s.filter(s=>s.id!==e.id)),r&&r(e)}catch(l){console.error("Error deleting document:",l),y.Ay.error("Failed to delete document. Please try again.")}finally{j(s=>{const l=new Set(s);return l.delete(e.id),l})}},I=a.reduce((e,s)=>{const l=s.responseId?"response":"query";return e[l]||(e[l]=[]),e[l].push(s),e},{}),z=e=>!!l&&(!!n&&(e.uploadedBy===n||"ADMIN"===n.role));return d?(0,O.jsx)(C.A,{children:(0,O.jsxs)("div",{style:{textAlign:"center",padding:"20px"},children:[(0,O.jsx)(M.A,{size:"large"}),(0,O.jsx)("div",{style:{marginTop:"16px"},children:(0,O.jsx)(le,{type:"secondary",children:"Loading documents..."})})]})}):0===a.length?(0,O.jsx)(C.A,{children:(0,O.jsx)(Y.A,{image:Y.A.PRESENTED_IMAGE_SIMPLE,description:(0,O.jsxs)(p.A,{direction:"vertical",children:[(0,O.jsx)(le,{type:"secondary",children:"No documents attached to this query"}),(0,O.jsx)(le,{type:"secondary",style:{fontSize:"12px"},children:"Documents can be attached when creating queries or responding to them"})]})})}):(0,O.jsx)(C.A,{title:(0,O.jsxs)(p.A,{children:[(0,O.jsx)(G.A,{}),(0,O.jsxs)("span",{children:["Query Documents (",a.length,")"]})]}),extra:t&&a.length>0&&(0,O.jsx)(p.A,{children:(0,O.jsx)(g.Ay,{icon:(0,O.jsx)(_.A,{}),onClick:async()=>{if(0!==a.length){y.Ay.info(`Starting download of ${a.length} documents...`);for(const s of a)try{await b(s),await new Promise(e=>setTimeout(e,500))}catch(e){console.error(`Failed to download ${s.originalFileName}:`,e)}}else y.Ay.warning("No documents to download.")},size:"small",children:"Download All"})}),children:(0,O.jsxs)(p.A,{direction:"vertical",style:{width:"100%"},children:[(0,O.jsx)(v.A,{message:`${a.length} document(s) attached to this query`,description:(0,O.jsxs)(p.A,{children:[I.query&&(0,O.jsxs)(le,{type:"secondary",children:[I.query.length," from original query"]}),I.response&&(0,O.jsxs)(le,{type:"secondary",children:[I.response.length," from responses"]})]}),type:"info",showIcon:!0,size:"small"}),I.query&&I.query.length>0&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(re,{level:5,children:[(0,O.jsx)(V.A,{style:{color:"#1890ff"}}),(0,O.jsxs)("span",{style:{marginLeft:"8px"},children:["Original Query Documents (",I.query.length,")"]})]}),(0,O.jsx)(Z.A,{size:"small",dataSource:I.query,renderItem:e=>(0,O.jsx)(Z.A.Item,{actions:[(0,O.jsx)(X.A,{title:"Download document",children:(0,O.jsx)(g.Ay,{type:"text",icon:(0,O.jsx)(_.A,{}),onClick:()=>b(e),loading:x.has(e.id),size:"small"})},"download"),...z(e)?[(0,O.jsx)(ee.A,{title:"Delete Document",description:"Are you sure you want to delete this document?",onConfirm:()=>T(e),okText:"Yes",cancelText:"No",icon:(0,O.jsx)(V.A,{style:{color:"red"}}),children:(0,O.jsx)(X.A,{title:"Delete document",children:(0,O.jsx)(g.Ay,{type:"text",danger:!0,icon:(0,O.jsx)(W.A,{}),loading:u.has(e.id),size:"small"})})},"delete")]:[]],children:(0,O.jsx)(Z.A.Item.Meta,{avatar:S(e.originalFileName),title:(0,O.jsxs)(p.A,{children:[(0,O.jsx)(le,{strong:!0,children:e.originalFileName||e.fileName}),(0,O.jsx)(m.A,{color:"blue",size:"small",children:"Query"})]}),description:(0,O.jsx)(p.A,{direction:"vertical",size:"small",children:(0,O.jsxs)(p.A,{size:"large",children:[(0,O.jsxs)(le,{type:"secondary",children:[(0,O.jsx)(U.A,{style:{marginRight:"4px"}}),f(e.fileSize)]}),(0,O.jsxs)(le,{type:"secondary",children:[(0,O.jsx)(J.A,{style:{marginRight:"4px"}}),w(e.uploadedAt)]}),(0,O.jsxs)(le,{type:"secondary",children:[(0,O.jsx)(K.A,{style:{marginRight:"4px"}}),e.uploadedBy||"Unknown"]})]})})})})})]}),I.response&&I.response.length>0&&(0,O.jsxs)(O.Fragment,{children:[I.query&&(0,O.jsx)(k.A,{}),(0,O.jsxs)(re,{level:5,children:[(0,O.jsx)(i.A,{style:{color:"#52c41a"}}),(0,O.jsxs)("span",{style:{marginLeft:"8px"},children:["Response Documents (",I.response.length,")"]})]}),(0,O.jsx)(Z.A,{size:"small",dataSource:I.response,renderItem:e=>(0,O.jsx)(Z.A.Item,{actions:[(0,O.jsx)(X.A,{title:"Download document",children:(0,O.jsx)(g.Ay,{type:"text",icon:(0,O.jsx)(_.A,{}),onClick:()=>b(e),loading:x.has(e.id),size:"small"})},"download"),...z(e)?[(0,O.jsx)(ee.A,{title:"Delete Document",description:"Are you sure you want to delete this document?",onConfirm:()=>T(e),okText:"Yes",cancelText:"No",icon:(0,O.jsx)(V.A,{style:{color:"red"}}),children:(0,O.jsx)(X.A,{title:"Delete document",children:(0,O.jsx)(g.Ay,{type:"text",danger:!0,icon:(0,O.jsx)(W.A,{}),loading:u.has(e.id),size:"small"})})},"delete")]:[]],children:(0,O.jsx)(Z.A.Item.Meta,{avatar:S(e.originalFileName),title:(0,O.jsxs)(p.A,{children:[(0,O.jsx)(le,{strong:!0,children:e.originalFileName||e.fileName}),(0,O.jsx)(m.A,{color:"green",size:"small",children:"Response"}),e.responseId&&(0,O.jsxs)(m.A,{color:"orange",size:"small",children:["#",e.responseId]})]}),description:(0,O.jsx)(p.A,{direction:"vertical",size:"small",children:(0,O.jsxs)(p.A,{size:"large",children:[(0,O.jsxs)(le,{type:"secondary",children:[(0,O.jsx)(U.A,{style:{marginRight:"4px"}}),f(e.fileSize)]}),(0,O.jsxs)(le,{type:"secondary",children:[(0,O.jsx)(J.A,{style:{marginRight:"4px"}}),w(e.uploadedAt)]}),(0,O.jsxs)(le,{type:"secondary",children:[(0,O.jsx)(K.A,{style:{marginRight:"4px"}}),e.uploadedBy||"Unknown"]})]})})})})})]})]})})};var ie=l(7933),ne=l(8365);const{TextArea:ae}=x.A,{Option:oe}=h.A,{Text:de,Title:ce}=u.A,xe=e=>{let{team:s}=e;const[l,u]=(0,R.useState)(!1),[E,L]=(0,R.useState)([]),[Q,q]=(0,R.useState)([]),[P,M]=(0,R.useState)(null),[B,F]=(0,R.useState)(!1),[H,U]=(0,R.useState)("view"),[G]=j.A.useForm(),[_,V]=(0,R.useState)([]),[W,J]=(0,R.useState)(null),[K,Y]=(0,R.useState)([]),[Z,X]=(0,R.useState)({status:"all",priority:"all",material:"",daysOpen:"all",project:"",plant:"",assignedTeam:"all",hasAttachments:"all"}),[ee,se]=(0,R.useState)({total:0,open:0,resolved:0,resolvedToday:0,overdue:0,avgResolutionTime:0}),le=(0,R.useCallback)(async e=>{try{u(!0);const l=await z.default.get(`/queries/inbox/${s}`,{signal:e});null!==e&&void 0!==e&&e.aborted||L(l)}catch(l){null!==e&&void 0!==e&&e.aborted||(console.error("Failed to load queries:",l),y.Ay.error("Failed to load queries"))}finally{u(!1)}},[s]),re=(0,R.useCallback)(async e=>{try{const[l,r,t,i,n]=await Promise.all([z.default.get(`/queries/stats/count-open/${s}`,{signal:e}).catch(()=>0),z.default.get(`/queries/stats/count-resolved/${s}`,{signal:e}).catch(()=>0),z.default.get(`/queries/stats/resolved-today/${s}`,{signal:e}).catch(()=>0),z.default.get(`/queries/stats/overdue-count/${s}`,{signal:e}).catch(()=>0),z.default.get(`/queries/stats/avg-resolution-time/${s}`,{signal:e}).catch(()=>0)]);null!==e&&void 0!==e&&e.aborted||se({total:l+r,open:l,resolved:r,resolvedToday:t,overdue:i,avgResolutionTime:n})}catch(l){null!==e&&void 0!==e&&e.aborted||console.error("Failed to load stats:",l)}},[s]),xe=(0,R.useCallback)(()=>{let e=[...E];if("all"!==Z.status&&(e=e.filter(e=>e.status===Z.status)),"all"!==Z.priority&&(e=e.filter(e=>e.priorityLevel===Z.priority)),Z.material&&(e=e.filter(e=>{var s,l;return(null===(s=e.materialCode)||void 0===s?void 0:s.toLowerCase().includes(Z.material.toLowerCase()))||(null===(l=e.materialName)||void 0===l?void 0:l.toLowerCase().includes(Z.material.toLowerCase()))})),Z.project&&(e=e.filter(e=>{var s;return null===(s=e.projectCode)||void 0===s?void 0:s.toLowerCase().includes(Z.project.toLowerCase())})),Z.plant&&(e=e.filter(e=>{var s;return null===(s=e.plantCode)||void 0===s?void 0:s.toLowerCase().includes(Z.plant.toLowerCase())})),"all"!==Z.assignedTeam&&(e=e.filter(e=>e.assignedTeam===Z.assignedTeam)),"all"!==Z.daysOpen){const s=parseInt(Z.daysOpen);e=e.filter(e=>e.daysOpen>=s)}"all"!==Z.hasAttachments&&("with"===Z.hasAttachments?e=e.filter(e=>(e.documentCount||0)>0):"without"===Z.hasAttachments&&(e=e.filter(e=>0===(e.documentCount||0)))),q(e)},[E,Z]);(0,R.useEffect)(()=>{const e=new AbortController;return(async()=>{try{await Promise.all([le(e.signal),re(e.signal)])}catch(s){e.signal.aborted||console.error("Error loading query inbox data:",s)}})(),()=>{e.abort()}},[s,le,re]),(0,R.useEffect)(()=>{xe()},[E,Z,xe]);const he=(0,R.useCallback)(async e=>{try{const s=await z.default.get(`/queries/${e}/documents`);Y(s)}catch(s){console.error("Failed to load query documents:",s),Y([])}},[]),ue=e=>e===N.cS.OPEN?"red":"green",je=e=>({LOW:"blue",MEDIUM:"orange",HIGH:"red",URGENT:"purple"}[e]||"default"),ye=e=>e>=3?"#ff4d4f":e>=2?"#faad14":"#52c41a",pe=[{title:"Material Context",dataIndex:"materialCode",key:"materialContext",width:180,render:(e,s)=>(0,O.jsxs)("div",{children:[(0,O.jsx)(de,{strong:!0,children:e}),s.materialName&&(0,O.jsx)("div",{style:{fontSize:"12px",color:"#666"},children:s.materialName}),s.projectCode&&(0,O.jsxs)("div",{style:{fontSize:"11px",color:"#999"},children:["Project: ",s.projectCode]}),s.plantCode&&(0,O.jsxs)("div",{style:{fontSize:"11px",color:"#999"},children:["Plant: ",s.plantCode]})]})},{title:"Query",dataIndex:"question",key:"question",width:300,ellipsis:!0,render:e=>(0,O.jsx)("div",{children:(0,O.jsx)(de,{style:{color:"#1890ff"},children:e||"No query text available"})})},{title:"Attachments",key:"attachments",width:100,render:(e,s)=>{const l=s.documentCount||0;return l>0?(0,O.jsxs)(p.A,{children:[(0,O.jsx)(r.A,{style:{color:"#1890ff"}}),(0,O.jsx)(de,{type:"secondary",children:l})]}):(0,O.jsx)(de,{type:"secondary",children:"-"})}},{title:"Field",dataIndex:"fieldName",key:"fieldName",width:120,render:e=>e?(0,O.jsx)(m.A,{color:"blue",children:e}):(0,O.jsx)(de,{type:"secondary",children:"-"})},{title:"Priority",dataIndex:"priorityLevel",key:"priorityLevel",width:80,render:e=>(0,O.jsx)(m.A,{color:je(e),children:e||N.fz.MEDIUM})},{title:"Status",dataIndex:"status",key:"status",width:80,render:e=>(0,O.jsx)(m.A,{color:ue(e),children:e})},{title:"Days Open",dataIndex:"daysOpen",key:"daysOpen",width:100,render:(e,s)=>{const{progress:l,status:r}=(e=>{const s=Math.min(e/3*100,100);let l="normal";return s>=100?l="exception":s>=80&&(l="active"),{progress:s,status:l}})(e);return(0,O.jsxs)("div",{children:[(0,O.jsxs)(de,{style:{color:ye(e)},children:[e," days"]}),(0,O.jsx)(A.A,{percent:l,status:r,size:"small",showInfo:!1,style:{marginTop:4}})]})}},{title:"Raised By",dataIndex:"raisedBy",key:"raisedBy",width:100},{title:"Actions",key:"actions",width:120,render:(e,s)=>(0,O.jsx)(p.A,{children:(0,O.jsx)(g.Ay,{size:"small",icon:(0,O.jsx)(t.A,{}),onClick:()=>{M(s),U("view"),F(!0),he(s.id)},children:"View"})})}];return(0,O.jsx)(D.qw,{componentName:"QueryInbox",children:(0,O.jsxs)("div",{children:[(0,O.jsx)(v.A,{message:`${s} Team Statistics`,description:"All statistics below are specific to your team and update in real-time.",type:"info",showIcon:!0,style:{marginBottom:16}}),(0,O.jsx)(D.pE,{operation:"query statistics loading",onRetry:re,maxRetries:3,children:(0,O.jsxs)(f.A,{gutter:16,style:{marginBottom:16},children:[(0,O.jsx)(w.A,{span:5,children:(0,O.jsx)(C.A,{children:(0,O.jsx)(S.A,{title:"Total Queries",value:ee.total,prefix:(0,O.jsx)(i.A,{})})})}),(0,O.jsx)(w.A,{span:5,children:(0,O.jsx)(C.A,{children:(0,O.jsx)(S.A,{title:"Open Queries",value:ee.open,valueStyle:{color:"#cf1322"},prefix:(0,O.jsx)(n.A,{})})})}),(0,O.jsx)(w.A,{span:5,children:(0,O.jsx)(C.A,{children:(0,O.jsx)(S.A,{title:"Resolved Today",value:ee.resolvedToday,valueStyle:{color:"#3f8600"},prefix:(0,O.jsx)(a.A,{})})})}),(0,O.jsx)(w.A,{span:5,children:(0,O.jsx)(C.A,{children:(0,O.jsx)(S.A,{title:"Overdue",value:ee.overdue,valueStyle:{color:ee.overdue>0?"#cf1322":"#3f8600"},prefix:(0,O.jsx)(o.A,{})})})}),(0,O.jsx)(w.A,{span:4,children:(0,O.jsx)(C.A,{children:(0,O.jsx)(S.A,{title:"Avg Resolution Time",value:ee.avgResolutionTime,suffix:"hrs",precision:1,prefix:(0,O.jsx)(a.A,{})})})})]})}),(0,O.jsx)(C.A,{size:"small",style:{marginBottom:16},children:(0,O.jsxs)(f.A,{gutter:[16,8],align:"middle",children:[(0,O.jsx)(w.A,{span:4,children:(0,O.jsxs)(h.A,{placeholder:"Status",value:Z.status,onChange:e=>X({...Z,status:e}),style:{width:"100%"},children:[(0,O.jsx)(oe,{value:"all",children:"All Status"}),(0,O.jsx)(oe,{value:"OPEN",children:"Open"}),(0,O.jsx)(oe,{value:"RESOLVED",children:"Resolved"})]})}),(0,O.jsx)(w.A,{span:4,children:(0,O.jsxs)(h.A,{placeholder:"Priority",value:Z.priority,onChange:e=>X({...Z,priority:e}),style:{width:"100%"},children:[(0,O.jsx)(oe,{value:"all",children:"All Priority"}),(0,O.jsx)(oe,{value:"LOW",children:"Low"}),(0,O.jsx)(oe,{value:"MEDIUM",children:"Medium"}),(0,O.jsx)(oe,{value:"HIGH",children:"High"}),(0,O.jsx)(oe,{value:"URGENT",children:"Urgent"})]})}),(0,O.jsx)(w.A,{span:4,children:(0,O.jsx)(x.A,{placeholder:"Material ID/Name",value:Z.material,onChange:e=>X({...Z,material:e.target.value})})}),(0,O.jsx)(w.A,{span:4,children:(0,O.jsx)(x.A,{placeholder:"Project Code",value:Z.project,onChange:e=>X({...Z,project:e.target.value})})}),(0,O.jsx)(w.A,{span:4,children:(0,O.jsx)(x.A,{placeholder:"Plant",value:Z.plant,onChange:e=>X({...Z,plant:e.target.value})})}),(0,O.jsx)(w.A,{span:4,children:(0,O.jsxs)(h.A,{placeholder:"Team",value:Z.assignedTeam,onChange:e=>X({...Z,assignedTeam:e}),style:{width:"100%"},children:[(0,O.jsx)(oe,{value:"all",children:"All Teams"}),(0,O.jsx)(oe,{value:"CQS",children:"CQS"}),(0,O.jsx)(oe,{value:"TECH",children:"Tech"}),(0,O.jsx)(oe,{value:"JVC",children:"JVC"})]})}),(0,O.jsx)(w.A,{span:4,children:(0,O.jsxs)(h.A,{placeholder:"Attachments",value:Z.hasAttachments,onChange:e=>X({...Z,hasAttachments:e}),style:{width:"100%"},children:[(0,O.jsx)(oe,{value:"all",children:"All Queries"}),(0,O.jsx)(oe,{value:"with",children:"With Attachments"}),(0,O.jsx)(oe,{value:"without",children:"Without Attachments"})]})}),(0,O.jsx)(w.A,{span:4,children:(0,O.jsxs)(h.A,{placeholder:"Days Open",value:Z.daysOpen,onChange:e=>X({...Z,daysOpen:e}),style:{width:"100%"},children:[(0,O.jsx)(oe,{value:"all",children:"All"}),(0,O.jsx)(oe,{value:"1",children:"1+ days"}),(0,O.jsx)(oe,{value:"2",children:"2+ days"}),(0,O.jsx)(oe,{value:"3",children:"3+ days (Overdue)"})]})}),(0,O.jsx)(w.A,{span:8,children:(0,O.jsxs)(p.A,{children:[(0,O.jsx)(g.Ay,{icon:(0,O.jsx)(d.A,{}),onClick:()=>{le(),re()},children:"Refresh"}),(0,O.jsx)(g.Ay,{icon:(0,O.jsx)(c.A,{}),onClick:()=>X({status:"all",priority:"all",material:"",daysOpen:"all",project:"",plant:"",assignedTeam:"all",hasAttachments:"all"}),children:"Clear Filters"})]})})]})}),(0,O.jsx)(D.pE,{operation:"query data loading",onRetry:le,maxRetries:3,children:(0,O.jsxs)(C.A,{title:(0,O.jsxs)("div",{children:[(0,O.jsxs)(ce,{level:4,style:{margin:0},children:[s," Team Query Inbox"]}),(0,O.jsxs)(de,{type:"secondary",children:[Q.length," of ",E.length," queries"]})]}),children:[ee.overdue>0&&(0,O.jsx)(v.A,{message:`${ee.overdue} queries are overdue (>3 days)`,type:"warning",showIcon:!0,style:{marginBottom:16}}),(0,O.jsx)(b.A,{dataSource:Q,columns:pe,loading:l,pagination:{pageSize:N.Bq.DEFAULT_PAGE_SIZE,showSizeChanger:!0,showQuickJumper:!0,showTotal:(e,s)=>`${s[0]}-${s[1]} of ${e} queries`},rowKey:"id",size:"small",rowClassName:e=>e.daysOpen>=3?"overdue-row":""})]})}),(0,O.jsx)(T.A,{title:`Query #${null===P||void 0===P?void 0:P.id} ${"resolve"===H?"- Resolve":"- Details"}`,open:B,onCancel:()=>{F(!1),M(null),Y([]),U("view"),G.resetFields(),V([]),J(null)},footer:"resolve"===H?[(0,O.jsx)(g.Ay,{onClick:()=>{F(!1),M(null),Y([]),U("view"),G.resetFields(),V([]),J(null)},children:"Cancel"},"cancel"),(0,O.jsx)(g.Ay,{type:"primary",onClick:()=>G.submit(),size:"large",children:"Resolve Query"},"resolve")]:[(0,O.jsx)(g.Ay,{onClick:()=>{F(!1),M(null),Y([]),U("view")},children:"Close"},"close"),(null===P||void 0===P?void 0:P.status)===N.cS.OPEN&&(0,O.jsx)(g.Ay,{type:"primary",onClick:()=>U("resolve"),children:"Resolve Query"},"resolve")],width:"resolve"===H?1400:1200,children:P&&(0,O.jsxs)(f.A,{gutter:16,children:[(0,O.jsxs)(w.A,{span:"resolve"===H?16:14,children:[(0,O.jsx)(I.A,{activeKey:H,onChange:U,items:[{key:"view",label:(0,O.jsxs)(p.A,{children:[(0,O.jsx)(t.A,{}),"View Details"]}),children:(0,O.jsxs)("div",{children:[(0,O.jsxs)(f.A,{gutter:16,children:[(0,O.jsxs)(w.A,{span:12,children:[(0,O.jsx)(de,{strong:!0,children:"Material Code:"})," ",P.materialCode,P.materialName&&(0,O.jsx)("div",{style:{fontSize:"12px",color:"#666"},children:P.materialName})]}),(0,O.jsxs)(w.A,{span:12,children:[(0,O.jsx)(de,{strong:!0,children:"Status:"})," ",(0,O.jsx)(m.A,{color:ue(P.status),children:P.status})]})]}),(0,O.jsx)(k.A,{}),(0,O.jsxs)(f.A,{gutter:16,children:[(0,O.jsxs)(w.A,{span:8,children:[(0,O.jsx)(de,{strong:!0,children:"Priority:"})," ",(0,O.jsx)(m.A,{color:je(P.priorityLevel),children:P.priorityLevel||N.fz.MEDIUM})]}),(0,O.jsxs)(w.A,{span:8,children:[(0,O.jsx)(de,{strong:!0,children:"Team:"})," ",(0,O.jsx)(m.A,{color:P.assignedTeam===N.r0.CQS?"blue":P.assignedTeam===N.r0.TECH?"purple":"orange",children:P.assignedTeam})]}),(0,O.jsxs)(w.A,{span:8,children:[(0,O.jsx)(de,{strong:!0,children:"Days Open:"})," ",(0,O.jsxs)(de,{style:{color:ye(P.daysOpen)},children:[P.daysOpen," days"]})]})]}),(0,O.jsx)(k.A,{}),(P.projectCode||P.plantCode)&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(f.A,{gutter:16,children:[P.projectCode&&(0,O.jsxs)(w.A,{span:8,children:[(0,O.jsx)(de,{strong:!0,children:"Project:"})," ",P.projectCode]}),P.plantCode&&(0,O.jsxs)(w.A,{span:8,children:[(0,O.jsx)(de,{strong:!0,children:"Plant:"})," ",P.plantCode]})]}),(0,O.jsx)(k.A,{})]}),P.fieldName&&(0,O.jsxs)("div",{style:{marginBottom:16},children:[(0,O.jsx)(de,{strong:!0,style:{fontSize:"16px",color:"#1890ff"},children:"Field Context"}),(0,O.jsxs)("div",{style:{marginTop:8,padding:12,background:"#e6f7ff",borderRadius:6,border:"1px solid #91d5ff"},children:[(0,O.jsx)("div",{style:{fontSize:"14px",fontWeight:"bold"},children:P.fieldName}),P.stepNumber&&(0,O.jsxs)("div",{style:{fontSize:"12px",color:"#666",marginTop:4},children:["Step ",P.stepNumber,P.stepTitle&&`: ${P.stepTitle}`]})]})]}),P.originalQuestion&&(0,O.jsxs)("div",{style:{marginBottom:16},children:[(0,O.jsx)(de,{strong:!0,style:{fontSize:"16px",color:"#52c41a"},children:"Original Questionnaire Question"}),(0,O.jsx)("div",{style:{marginTop:8,padding:12,background:"#f6ffed",borderRadius:6,border:"1px solid #b7eb8f",fontStyle:"italic"},children:P.originalQuestion})]}),P.queryCategory&&(0,O.jsxs)("div",{style:{marginBottom:16},children:[(0,O.jsx)(de,{strong:!0,style:{fontSize:"16px",color:"#722ed1"},children:"Query Category"}),(0,O.jsx)("div",{style:{marginTop:8,padding:8,background:"#f9f0ff",borderRadius:6,border:"1px solid #d3adf7"},children:(0,O.jsx)(m.A,{color:"purple",children:P.queryCategory})})]}),(0,O.jsxs)("div",{style:{marginBottom:16},children:[(0,O.jsx)(de,{strong:!0,style:{fontSize:"16px",color:"#fa8c16"},children:"Query Text (What was asked)"}),(0,O.jsx)("div",{style:{marginTop:8,padding:12,background:"#fff7e6",borderRadius:6,border:"1px solid #ffd591",whiteSpace:"pre-wrap",minHeight:"60px"},children:P.question||"No query text available"})]}),P.response&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(k.A,{}),(0,O.jsx)(de,{strong:!0,children:"Response:"}),(0,O.jsx)("div",{style:{marginTop:8,padding:12,background:"#f0f9ff",borderRadius:4,whiteSpace:"pre-wrap"},children:P.response}),(0,O.jsxs)("div",{style:{marginTop:8,fontSize:"12px",color:"#666"},children:["Resolved by: ",P.resolvedBy," on"," ",P.resolvedAt&&new Date(P.resolvedAt).toLocaleString()]})]}),(0,O.jsx)(k.A,{}),(0,O.jsxs)("div",{style:{fontSize:"12px",color:"#666"},children:[(0,O.jsxs)("div",{children:["Raised by: ",P.raisedBy]}),(0,O.jsxs)("div",{children:["Created:"," ",P.createdAt&&new Date(P.createdAt).toLocaleString()]})]})]})},...(null===P||void 0===P?void 0:P.status)===N.cS.OPEN?[{key:"resolve",label:(0,O.jsxs)(p.A,{children:[(0,O.jsx)(a.A,{}),"Resolve Query"]}),children:(0,O.jsxs)("div",{children:[(0,O.jsxs)("div",{style:{marginBottom:16,padding:16,background:"#f5f5f5",borderRadius:6,border:"1px solid #d9d9d9"},children:[(0,O.jsxs)(f.A,{gutter:16,style:{marginBottom:12},children:[(0,O.jsxs)(w.A,{span:12,children:[(0,O.jsx)(de,{strong:!0,children:"Material:"})," ",P.materialCode,P.materialName&&(0,O.jsx)("div",{style:{fontSize:"12px",color:"#666"},children:P.materialName})]}),(0,O.jsx)(w.A,{span:12,children:(0,O.jsxs)(p.A,{children:[(0,O.jsx)(de,{strong:!0,children:"Team:"}),(0,O.jsx)(m.A,{color:P.assignedTeam===N.r0.CQS?"blue":P.assignedTeam===N.r0.TECH?"purple":"orange",children:P.assignedTeam}),(0,O.jsx)(de,{strong:!0,children:"Priority:"}),(0,O.jsx)(m.A,{color:je(P.priorityLevel),children:P.priorityLevel||"MEDIUM"})]})})]}),(P.projectCode||P.plantCode)&&(0,O.jsxs)(f.A,{gutter:16,style:{marginBottom:12},children:[P.projectCode&&(0,O.jsxs)(w.A,{span:8,children:[(0,O.jsx)(de,{strong:!0,children:"Project:"})," ",P.projectCode]}),P.plantCode&&(0,O.jsxs)(w.A,{span:8,children:[(0,O.jsx)(de,{strong:!0,children:"Plant:"})," ",P.plantCode]})]}),(0,O.jsx)(de,{strong:!0,children:"Question:"}),(0,O.jsx)("div",{style:{marginTop:8,whiteSpace:"pre-wrap",fontSize:"14px"},children:P.question}),P.fieldName&&(0,O.jsxs)("div",{style:{marginTop:8},children:[(0,O.jsx)(de,{strong:!0,children:"Field Context:"})," ",P.fieldName,P.stepNumber&&` (Step ${P.stepNumber})`]}),(0,O.jsx)("div",{style:{marginTop:8,fontSize:"12px",color:"#666"},children:(0,O.jsxs)(p.A,{children:[(0,O.jsxs)("span",{children:["Raised by: ",P.raisedBy]}),(0,O.jsx)("span",{children:"\u2022"}),(0,O.jsx)("span",{children:P.createdAt&&new Date(P.createdAt).toLocaleString()}),(0,O.jsx)("span",{children:"\u2022"}),(0,O.jsxs)("span",{style:{color:ye(P.daysOpen)},children:[P.daysOpen," days open"]})]})})]}),(0,O.jsxs)(j.A,{form:G,layout:"vertical",onFinish:async e=>{try{const s={response:e.response,priorityLevel:e.priorityLevel},l=await z.default.put(`/queries/${P.id}/resolve`,s);l.responseId&&J(l.responseId);const r=_.length>0?` with ${_.length} document(s) attached`:"";y.Ay.success(`Query resolved successfully${r}`),F(!1),U("view"),G.resetFields(),M(null),V([]),J(null),Y([]),le(),re()}catch(s){console.error("Failed to resolve query:",s),y.Ay.error("Failed to resolve query")}},children:[(0,O.jsx)(j.A.Item,{name:"response",label:(0,O.jsxs)(p.A,{children:[(0,O.jsx)("span",{children:"Resolution Response"}),(0,O.jsx)(de,{type:"secondary",children:"(Required)"})]}),rules:[{required:!0,message:"Please provide a resolution response"}],children:(0,O.jsx)(ae,{rows:8,placeholder:"Provide detailed resolution or answer to the query. Include any relevant technical details, safety considerations, or references to documentation...",showCount:!0,maxLength:2e3,style:{direction:"ltr",textAlign:"left",fontFamily:"inherit"}})}),(0,O.jsxs)(f.A,{gutter:16,children:[(0,O.jsx)(w.A,{span:12,children:(0,O.jsx)(j.A.Item,{name:"priorityLevel",label:"Update Priority (Optional)",initialValue:P.priorityLevel||"MEDIUM",children:(0,O.jsxs)(h.A,{size:"large",children:[(0,O.jsx)(oe,{value:"LOW",children:"Low Priority"}),(0,O.jsx)(oe,{value:"MEDIUM",children:"Medium Priority"}),(0,O.jsx)(oe,{value:"HIGH",children:"High Priority"}),(0,O.jsx)(oe,{value:"URGENT",children:"Urgent Priority"})]})})}),(0,O.jsx)(w.A,{span:12,children:(0,O.jsx)("div",{style:{marginTop:30},children:(0,O.jsx)(de,{type:"secondary",children:"This resolution will be sent to the plant team and the workflow will continue."})})})]})]})]})}]:[]]}),(0,O.jsx)(k.A,{}),(0,O.jsxs)("div",{children:[K.length>0&&(0,O.jsxs)("div",{style:{marginBottom:16},children:[(0,O.jsx)(de,{strong:!0,children:(0,O.jsxs)(p.A,{children:[(0,O.jsx)(r.A,{}),"Attached Documents (",K.length,")"]})}),(0,O.jsx)("div",{style:{marginTop:8},children:(0,O.jsx)(te,{documents:K,showActions:"view"===H,compact:"resolve"===H})})]}),"resolve"===H&&(null===P||void 0===P?void 0:P.status)===N.cS.OPEN&&(0,O.jsxs)("div",{children:[(0,O.jsx)(de,{strong:!0,children:(0,O.jsxs)(p.A,{children:[(0,O.jsx)(r.A,{}),"Attach Documents to Response",(0,O.jsx)(de,{type:"secondary",children:"(Optional)"})]})}),(0,O.jsx)("div",{style:{marginTop:8},children:(0,O.jsx)(ie.A,{queryId:null===P||void 0===P?void 0:P.id,responseId:W,context:"response",onUploadComplete:e=>{V(s=>[...s,...e]),y.Ay.success(`${e.length} document(s) uploaded to response`)},maxFiles:5,disabled:!1})})]})]})]}),(0,O.jsxs)(w.A,{span:"resolve"===H?8:10,children:[(0,O.jsx)(D.qw,{componentName:"MaterialContextDisplay",children:(0,O.jsx)($,{materialCode:P.materialCode,workflowId:P.workflowId,compact:!0})}),(0,O.jsx)(D.qw,{componentName:"QueryHistoryTracker",children:(0,O.jsx)(ne.A,{materialCode:P.materialCode,workflowId:P.workflowId,compact:!0})})]})]})}),(0,O.jsx)("style",{children:"\n          .overdue-row {\n            background-color: #fff2f0;\n          }\n          .overdue-row:hover {\n            background-color: #ffebe6 !important;\n          }\n        "})]})})}},8365:(e,s,l)=>{l.d(s,{A:()=>S});var r=l(6237),t=l(119),i=l(3889),n=l(3117),a=l(3722),o=l(5206),d=l(9073),c=l(1645),x=l(9472),h=l(7419),u=l(6051),j=l(1686),y=l(6612),p=l(6399),m=l(6263),A=l(3927),g=l(5043),v=l(6649),f=l(3719),w=l(579);const{Text:C}=A.A,S=e=>{let{queryId:s,materialCode:l,workflowId:A,compact:S=!1}=e;const[b,T]=(0,g.useState)(!1),[I,k]=(0,g.useState)([]),[R,z]=(0,g.useState)({totalQueries:0,resolvedQueries:0,avgResolutionTime:0,currentSLA:0}),N=(0,g.useCallback)(async()=>{try{T(!0);const e=(0,f.uG)();console.log("QueryHistoryTracker - userRole:",e);let r="/queries";if(s)r+=`/${s}/history`;else if(A)r+=`/workflow/${A}`;else if(l)r+=`/material/${l}`;else if(e){const s={CQS_USER:"CQS",TECH_USER:"TECH",JVC_USER:"JVC"}[e];console.log("QueryHistoryTracker - mapped team:",s),s?r+=`/resolved/${s}`:(console.warn("QueryHistoryTracker - unknown role, using CQS fallback"),r+="/resolved/CQS")}else r+="/resolved/CQS";console.log("QueryHistoryTracker - endpoint:",r);const t=await v.default.get(r);console.log("QueryHistoryTracker - received data:",t),console.log("QueryHistoryTracker - data type:",typeof t),console.log("QueryHistoryTracker - is array:",Array.isArray(t)),console.log("QueryHistoryTracker - data length:",null===t||void 0===t?void 0:t.length);const i=Array.isArray(t)?t:t?[t]:[];console.log("QueryHistoryTracker - setting history:",i),k(i);const n=Array.isArray(t)?t:t?[t]:[],a=n.filter(e=>"RESOLVED"===e.status),o=a.length>0?a.reduce((e,s)=>e+(s.daysOpen||0),0)/a.length:0;console.log("QueryHistoryTracker - stats calculation:",{dataArray:n.length,resolved:a.length,avgTime:o}),z({totalQueries:n.length,resolvedQueries:a.length,avgResolutionTime:o,currentSLA:n.filter(e=>e.daysOpen>3).length})}catch(e){console.error("Failed to load query history:",e)}finally{T(!1)}},[s,l,A]);(0,g.useEffect)(()=>{N()},[s,l,A,N]);return b?(0,w.jsx)(d.A,{size:"small",children:(0,w.jsxs)("div",{style:{textAlign:"center",padding:"20px"},children:[(0,w.jsx)(j.A,{size:"small"}),(0,w.jsx)("div",{style:{marginTop:8},children:"Loading query history..."})]})}):S?(0,w.jsx)(d.A,{size:"small",title:(0,w.jsxs)(u.A,{children:[(0,w.jsx)(i.A,{}),(0,w.jsx)("span",{children:s?"Query History":A?"Workflow Queries":l?"Material Queries":"Team History"})]}),style:{marginBottom:16},children:(0,w.jsxs)(h.A,{gutter:16,children:[(0,w.jsx)(c.A,{span:6,children:(0,w.jsx)(y.A,{title:"Total",value:R.totalQueries,prefix:(0,w.jsx)(n.A,{})})}),(0,w.jsx)(c.A,{span:6,children:(0,w.jsx)(y.A,{title:"Resolved",value:R.resolvedQueries,prefix:(0,w.jsx)(r.A,{}),valueStyle:{color:"#3f8600"}})}),(0,w.jsx)(c.A,{span:6,children:(0,w.jsx)(y.A,{title:"Avg Days",value:R.avgResolutionTime,precision:1,prefix:(0,w.jsx)(t.A,{})})}),(0,w.jsx)(c.A,{span:6,children:(0,w.jsx)(y.A,{title:"Overdue",value:R.currentSLA,prefix:(0,w.jsx)(t.A,{}),valueStyle:{color:R.currentSLA>0?"#cf1322":"#3f8600"}})})]})}):(0,w.jsxs)(d.A,{title:(0,w.jsxs)(u.A,{children:[(0,w.jsx)(i.A,{}),(0,w.jsx)("span",{children:s?"Query History":A?"Workflow Query History":l?"Material Query History":"Team Resolved Queries"})]}),size:"small",extra:(0,w.jsx)(o.Ay,{size:"small",icon:(0,w.jsx)(i.A,{}),onClick:N,children:"Refresh"}),children:[(0,w.jsxs)(h.A,{gutter:16,style:{marginBottom:16},children:[(0,w.jsx)(c.A,{span:6,children:(0,w.jsx)(y.A,{title:"Total Queries",value:R.totalQueries,prefix:(0,w.jsx)(n.A,{})})}),(0,w.jsx)(c.A,{span:6,children:(0,w.jsx)(y.A,{title:"Resolved",value:R.resolvedQueries,prefix:(0,w.jsx)(r.A,{}),valueStyle:{color:"#3f8600"}})}),(0,w.jsx)(c.A,{span:6,children:(0,w.jsx)(y.A,{title:"Avg Resolution Time",value:R.avgResolutionTime,precision:1,suffix:"days",prefix:(0,w.jsx)(t.A,{})})}),(0,w.jsx)(c.A,{span:6,children:(0,w.jsx)(y.A,{title:"Overdue Queries",value:R.currentSLA,prefix:(0,w.jsx)(t.A,{}),valueStyle:{color:R.currentSLA>0?"#cf1322":"#3f8600"}})})]}),I.length>0?(0,w.jsx)(m.A,{items:I.map(e=>{const s="RESOLVED"===e.status;return{dot:s?(0,w.jsx)(r.A,{style:{color:"#52c41a"}}):(0,w.jsx)(t.A,{style:{color:"#faad14"}}),color:s?"green":"blue",children:(0,w.jsxs)("div",{children:[(0,w.jsx)("div",{style:{marginBottom:8},children:(0,w.jsxs)(u.A,{wrap:!0,children:[(0,w.jsxs)(C,{strong:!0,children:["Query #",e.id]}),(0,w.jsx)(p.A,{color:(n=e.status,"OPEN"===n?"red":"green"),children:e.status}),(0,w.jsx)(p.A,{color:(i=e.assignedTeam,{CQS:"blue",TECH:"purple",JVC:"orange"}[i]||"default"),children:e.assignedTeam}),e.priorityLevel&&(0,w.jsx)(p.A,{color:(l=e.priorityLevel,{LOW:"blue",MEDIUM:"orange",HIGH:"red",URGENT:"purple"}[l]||"default"),children:e.priorityLevel})]})}),(0,w.jsx)("div",{style:{marginBottom:8},children:(0,w.jsx)(C,{children:e.question})}),e.fieldName&&(0,w.jsxs)("div",{style:{marginBottom:4,fontSize:"12px",color:"#666"},children:["Field: ",e.fieldName," ",e.stepNumber&&`(Step ${e.stepNumber})`]}),(0,w.jsx)("div",{style:{fontSize:"12px",color:"#666",marginBottom:8},children:(0,w.jsxs)(u.A,{children:[(0,w.jsxs)("span",{children:[(0,w.jsx)(a.A,{})," Raised by: ",e.raisedBy]}),(0,w.jsxs)("span",{children:[(0,w.jsx)(t.A,{})," ",e.createdAt&&new Date(e.createdAt).toLocaleString()]}),(0,w.jsxs)("span",{children:["Days open: ",e.daysOpen]})]})}),e.response&&(0,w.jsxs)("div",{style:{marginTop:8,padding:8,background:"#f0f9ff",borderRadius:4,borderLeft:"3px solid #1890ff"},children:[(0,w.jsx)("div",{style:{marginBottom:4},children:(0,w.jsx)(C,{strong:!0,children:"Resolution:"})}),(0,w.jsx)("div",{style:{marginBottom:4},children:(0,w.jsx)(C,{children:e.response})}),(0,w.jsxs)("div",{style:{fontSize:"11px",color:"#666"},children:["Resolved by: ",e.resolvedBy," on"," ",e.resolvedAt&&new Date(e.resolvedAt).toLocaleString()]})]})]})};var l,i,n}),mode:"left"}):(0,w.jsx)(x.A,{description:"No query history available",image:x.A.PRESENTED_IMAGE_SIMPLE})]})}}}]);
//# sourceMappingURL=173.3cbf4a0e.chunk.js.map