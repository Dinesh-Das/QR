"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[471],{647:(e,t,n)=>{n.d(t,{A:()=>w});var l=n(5043),o=n(1376),s=n(8139),r=n.n(s),a=n(8678),i=n(8574),c=n(5296),d=n(6282),u=n(8046),m=n(8986),p=n(5206),y=n(4160),f=n(370),v=n(6970),g=n(4382),b=n(8855);const x=(0,b.OF)("Popconfirm",e=>(e=>{const{componentCls:t,iconCls:n,antCls:l,zIndexPopup:o,colorText:s,colorWarning:r,marginXXS:a,marginXS:i,fontSize:c,fontWeightStrong:d,colorTextHeading:u}=e;return{[t]:{zIndex:o,[`&${l}-popover`]:{fontSize:c},[`${t}-message`]:{marginBottom:i,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${t}-message-icon ${n}`]:{color:r,fontSize:c,lineHeight:1,marginInlineEnd:i},[`${t}-title`]:{fontWeight:d,color:u,"&:only-child":{fontWeight:"normal"}},[`${t}-description`]:{marginTop:a,color:s}},[`${t}-buttons`]:{textAlign:"end",whiteSpace:"nowrap",button:{marginInlineStart:i}}}}})(e),e=>{const{zIndexPopupBase:t}=e;return{zIndexPopup:t+60}},{resetStyle:!1});var h=function(e,t){var n={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(n[l]=e[l]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(l=Object.getOwnPropertySymbols(e);o<l.length;o++)t.indexOf(l[o])<0&&Object.prototype.propertyIsEnumerable.call(e,l[o])&&(n[l[o]]=e[l[o]])}return n};const A=e=>{const{prefixCls:t,okButtonProps:n,cancelButtonProps:s,title:r,description:a,cancelText:i,okText:d,okType:g="primary",icon:b=l.createElement(o.A,null),showCancel:x=!0,close:h,onConfirm:A,onCancel:C,onPopupClick:O}=e,{getPrefixCls:j}=l.useContext(c.QO),[w]=(0,f.A)("Popconfirm",v.A.Popconfirm),E=(0,m.b)(r),P=(0,m.b)(a);return l.createElement("div",{className:`${t}-inner-content`,onClick:O},l.createElement("div",{className:`${t}-message`},b&&l.createElement("span",{className:`${t}-message-icon`},b),l.createElement("div",{className:`${t}-message-text`},E&&l.createElement("div",{className:`${t}-title`},E),P&&l.createElement("div",{className:`${t}-description`},P))),l.createElement("div",{className:`${t}-buttons`},x&&l.createElement(p.Ay,Object.assign({onClick:C,size:"small"},s),i||(null===w||void 0===w?void 0:w.cancelText)),l.createElement(u.A,{buttonProps:Object.assign(Object.assign({size:"small"},(0,y.DU)(g)),n),actionFn:A,close:h,prefixCls:j("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},d||(null===w||void 0===w?void 0:w.okText))))},C=e=>{const{prefixCls:t,placement:n,className:o,style:s}=e,a=h(e,["prefixCls","placement","className","style"]),{getPrefixCls:i}=l.useContext(c.QO),d=i("popconfirm",t),[u]=x(d);return u(l.createElement(g.Ay,{placement:n,className:r()(d,o),style:s,content:l.createElement(A,Object.assign({prefixCls:d},a))}))};var O=function(e,t){var n={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(n[l]=e[l]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(l=Object.getOwnPropertySymbols(e);o<l.length;o++)t.indexOf(l[o])<0&&Object.prototype.propertyIsEnumerable.call(e,l[o])&&(n[l[o]]=e[l[o]])}return n};const j=l.forwardRef((e,t)=>{var n,s;const{prefixCls:u,placement:m="top",trigger:p="click",okType:y="primary",icon:f=l.createElement(o.A,null),children:v,overlayClassName:g,onOpenChange:b,onVisibleChange:h,overlayStyle:C,styles:j,classNames:w}=e,E=O(e,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange","overlayStyle","styles","classNames"]),{getPrefixCls:P,className:k,style:N,classNames:S,styles:T}=(0,c.TP)("popconfirm"),[$,I]=(0,a.A)(!1,{value:null!==(n=e.open)&&void 0!==n?n:e.visible,defaultValue:null!==(s=e.defaultOpen)&&void 0!==s?s:e.defaultVisible}),z=(e,t)=>{I(e,!0),null===h||void 0===h||h(e),null===b||void 0===b||b(e,t)},F=P("popconfirm",u),R=r()(F,k,g,S.root,null===w||void 0===w?void 0:w.root),B=r()(S.body,null===w||void 0===w?void 0:w.body),[H]=x(F);return H(l.createElement(d.A,Object.assign({},(0,i.A)(E,["title"]),{trigger:p,placement:m,onOpenChange:(t,n)=>{const{disabled:l=!1}=e;l||z(t,n)},open:$,ref:t,classNames:{root:R,body:B},styles:{root:Object.assign(Object.assign(Object.assign(Object.assign({},T.root),N),C),null===j||void 0===j?void 0:j.root),body:Object.assign(Object.assign({},T.body),null===j||void 0===j?void 0:j.body)},content:l.createElement(A,Object.assign({okType:y,icon:f},e,{prefixCls:F,close:e=>{z(!1,e)},onConfirm:t=>{var n;return null===(n=e.onConfirm)||void 0===n?void 0:n.call(void 0,t)},onCancel:t=>{var n;z(!1,t),null===(n=e.onCancel)||void 0===n||n.call(void 0,t)}})),"data-popover-inject":!0}),v))});j._InternalPanelDoNotUseOrYouWillBeFired=C;const w=j},1966:(e,t,n)=>{n.d(t,{A:()=>i});var l=n(8168),o=n(5043);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"};var r=n(2172),a=function(e,t){return o.createElement(r.A,(0,l.A)({},e,{ref:t,icon:s}))};const i=o.forwardRef(a)},8471:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var l=n(1966),o=n(7407),s=n(5337),r=n(5206),a=n(9098),i=n(5444),c=n(6569),d=n(2751),u=n(647),m=n(6051),p=n(3258),y=n(3927),f=n(5043),v=n(6649),g=n(579);const{Title:b}=y.A,x=()=>{const[e,t]=(0,f.useState)([]),[n,y]=(0,f.useState)(!1),[x,h]=(0,f.useState)(!1),[A,C]=(0,f.useState)(null),[O]=a.A.useForm(),j=async e=>{y(!0);try{const n=await v.default.get("/admin/roles",{signal:e});if(null===e||void 0===e||!e.aborted){const e=Array.isArray(n)?n:[];t(e)}}catch(n){null!==e&&void 0!==e&&e.aborted||(c.Ay.error("Failed to fetch roles"),console.error("Error fetching roles:",n),t([]))}finally{null!==e&&void 0!==e&&e.aborted||y(!1)}};(0,f.useEffect)(()=>{const e=new AbortController;return j(e.signal),()=>{e.abort()}},[]);const w=[{title:"Name",dataIndex:"name",key:"name"},{title:"Description",dataIndex:"description",key:"description"},{title:"Actions",key:"actions",render:(e,t)=>(0,g.jsxs)(m.A,{children:[(0,g.jsx)(r.Ay,{icon:(0,g.jsx)(o.A,{}),onClick:()=>{return C(e=t),O.setFieldsValue(e),void h(!0);var e}}),(0,g.jsx)(u.A,{title:"Are you sure you want to delete this role?",onConfirm:()=>(async e=>{try{await v.default.delete(`/admin/roles/${e}`),c.Ay.success("Role deleted successfully"),j()}catch(t){c.Ay.error("Failed to delete role")}})(t.id),okText:"Yes",cancelText:"No",children:(0,g.jsx)(r.Ay,{icon:(0,g.jsx)(l.A,{}),danger:!0})})]})}];return(0,g.jsxs)("div",{children:[(0,g.jsx)(b,{level:2,children:"Roles"}),(0,g.jsx)(r.Ay,{type:"primary",icon:(0,g.jsx)(s.A,{}),onClick:()=>{C(null),O.resetFields(),h(!0)},style:{marginBottom:16},children:"Add Role"}),(0,g.jsx)(p.A,{columns:w,dataSource:e,rowKey:"id",loading:n}),(0,g.jsx)(d.A,{title:A?"Edit Role":"Add Role",open:x,onOk:async()=>{try{const e=await O.validateFields();A?(await v.default.put(`/admin/roles/${A.id}`,e),c.Ay.success("Role updated successfully")):(await v.default.post("/admin/roles",e),c.Ay.success("Role created successfully")),h(!1),O.resetFields(),j()}catch(e){e.errorFields||c.Ay.error("Failed to save role")}},onCancel:()=>h(!1),children:(0,g.jsxs)(a.A,{form:O,layout:"vertical",children:[(0,g.jsx)(a.A.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please input the role name!"}],children:(0,g.jsx)(i.A,{})}),(0,g.jsx)(a.A.Item,{name:"description",label:"Description",rules:[{required:!0,message:"Please input the role description!"}],children:(0,g.jsx)(i.A.TextArea,{})})]})})]})}}}]);
//# sourceMappingURL=471.23ff63f0.chunk.js.map