"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[106],{5106:(e,t,r)=>{r.r(t),r.d(t,{default:()=>P});var i=r(3927),s=r(8918),n=r(9073),a=r(6603),l=r(5043),o=r(8502),d=r(8168);const c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"}}]},name:"mail",theme:"outlined"};var u=r(2172),m=function(e,t){return l.createElement(u.A,(0,d.A)({},e,{ref:t,icon:c}))};const h=l.forwardRef(m);var f=r(4524),y=r(6553),x=r(9098),p=r(6569),g=r(6051),w=r(2624),v=r(5444),j=r(8354),A=r(5206),k=r(6649),b=r(3719),S=r(579);const{Title:W,Text:q}=i.A,{Option:C}=y.A,E=()=>{const[e]=x.A.useForm(),[t,r]=(0,l.useState)(!1),[i,s]=(0,l.useState)({email:{enabled:!0,address:"",workflowCreated:!0,workflowExtended:!0,workflowCompleted:!0,workflowStateChanged:!0,workflowOverdue:!0,queryRaised:!0,queryResolved:!0,queryAssigned:!0,queryOverdue:!0},general:{frequency:"immediate",quietHours:{enabled:!1,start:"18:00",end:"08:00"}}});(0,l.useEffect)(()=>{const t=new AbortController;return(async()=>{r(!0);try{const r=(0,b.HW)();if(!r)return console.error("No authenticated user found"),void p.Ay.error("Please log in to view notification preferences");const i=await k.default.get(`/users/${r}/notification-preferences`,{signal:t.signal});t.signal.aborted||(console.log("API Response:",i),console.log("Email preferences from API:",i.email),s(i),e.resetFields(),e.setFieldsValue(i),console.log("Form values after setting:",e.getFieldsValue()))}catch(i){t.signal.aborted||(console.error("Failed to load notification preferences:",i),p.Ay.error("Failed to load notification preferences"))}finally{t.signal.aborted||r(!1)}})(),()=>{t.abort()}},[e]);return(0,S.jsxs)("div",{style:{padding:"24px",maxWidth:"800px",margin:"0 auto"},children:[(0,S.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,S.jsxs)(W,{level:2,children:[(0,S.jsx)(o.A,{style:{marginRight:"8px"}}),"Notification Preferences"]}),(0,S.jsx)(q,{type:"secondary",children:"Configure how and when you receive notifications about MSDS workflow events."})]}),(0,S.jsxs)(x.A,{form:e,layout:"vertical",onFinish:e=>{(async e=>{r(!0);try{const t=(0,b.HW)();if(!t)return console.error("No authenticated user found"),void p.Ay.error("Please log in to save notification preferences");await k.default.put(`/users/${t}/notification-preferences`,e),s(e),p.Ay.success("Notification preferences saved successfully")}catch(t){console.error("Failed to save notification preferences:",t),p.Ay.error("Failed to save notification preferences")}finally{r(!1)}})(e)},children:[(0,S.jsxs)(n.A,{title:(0,S.jsxs)(g.A,{children:[(0,S.jsx)(h,{}),"Email Notifications"]}),style:{marginBottom:"16px"},children:[(0,S.jsx)(x.A.Item,{name:["email","enabled"],valuePropName:"checked",children:(0,S.jsx)(w.A,{checkedChildren:"Enabled",unCheckedChildren:"Disabled"})}),(0,S.jsx)(x.A.Item,{name:["email","address"],label:"Email Address",rules:[{type:"email",message:"Please enter a valid email address"}],children:(0,S.jsx)(v.A,{type:"email"})}),(0,S.jsx)(j.A,{orientation:"left",children:"Email Notification Types"}),[{key:"workflowCreated",label:"Workflow Created",description:"When a new MSDS workflow is created"},{key:"workflowExtended",label:"Workflow Extended",description:"When a workflow is extended to your team"},{key:"workflowCompleted",label:"Workflow Completed",description:"When a workflow is completed"},{key:"workflowStateChanged",label:"Workflow State Changed",description:"When workflow state transitions occur"},{key:"workflowOverdue",label:"Workflow Overdue",description:"When workflows become overdue"},{key:"queryRaised",label:"Query Raised",description:"When new queries are raised"},{key:"queryResolved",label:"Query Resolved",description:"When queries are resolved"},{key:"queryAssigned",label:"Query Assigned",description:"When queries are assigned to your team"},{key:"queryOverdue",label:"Query Overdue",description:"When queries become overdue"}].map(e=>(0,S.jsx)("div",{style:{marginBottom:"16px"},children:(0,S.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,S.jsxs)("div",{children:[(0,S.jsx)(q,{strong:!0,children:e.label}),(0,S.jsx)("br",{}),(0,S.jsx)(q,{type:"secondary",style:{fontSize:"12px"},children:e.description})]}),(0,S.jsx)(x.A.Item,{name:["email",e.key],valuePropName:"checked",style:{margin:0},children:(0,S.jsx)(w.A,{size:"small"})})]})},e.key))]}),(0,S.jsxs)(n.A,{title:(0,S.jsxs)(g.A,{children:[(0,S.jsx)(f.A,{}),"General Settings"]}),style:{marginBottom:"24px"},children:[(0,S.jsx)(x.A.Item,{name:["general","frequency"],label:"Notification Frequency",help:"How often you want to receive notifications",children:(0,S.jsxs)(y.A,{children:[(0,S.jsx)(C,{value:"immediate",children:"Immediate"}),(0,S.jsx)(C,{value:"daily",children:"Daily Digest"}),(0,S.jsx)(C,{value:"weekly",children:"Weekly Summary"})]})}),(0,S.jsx)(x.A.Item,{name:["general","quietHours","enabled"],valuePropName:"checked",label:"Quiet Hours",help:"Disable notifications during specified hours",children:(0,S.jsx)(w.A,{})}),(0,S.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[(0,S.jsx)(x.A.Item,{name:["general","quietHours","start"],label:"Start Time",style:{flex:1},children:(0,S.jsx)(v.A,{type:"time",style:{width:"100%"}})}),(0,S.jsx)(x.A.Item,{name:["general","quietHours","end"],label:"End Time",style:{flex:1},children:(0,S.jsx)(v.A,{type:"time",style:{width:"100%"}})})]})]}),(0,S.jsx)(x.A.Item,{children:(0,S.jsx)(A.Ay,{type:"primary",htmlType:"submit",loading:t,size:"large",children:"Save Preferences"})})]})]})},{Title:I}=i.A,{TabPane:F}=s.A,N="themeMode",P=()=>{const[e,t]=(0,l.useState)(()=>localStorage.getItem(N)||"system");return(0,l.useEffect)(()=>{let t=e;if("system"===e&&(t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),document.body.setAttribute("data-theme",t),localStorage.setItem(N,e),"system"===e){const e=window.matchMedia("(prefers-color-scheme: dark)"),t=e=>{const t=e.matches?"dark":"light";document.body.setAttribute("data-theme",t)};return e.addEventListener("change",t),()=>{e.removeEventListener("change",t)}}},[e]),(0,S.jsxs)("div",{style:{padding:"24px",maxWidth:"1200px",margin:"0 auto"},children:[(0,S.jsx)(I,{level:2,children:"Settings"}),(0,S.jsxs)(s.A,{defaultActiveKey:"notifications",type:"card",children:[(0,S.jsx)(F,{tab:"Notifications",children:(0,S.jsx)(E,{})},"notifications"),(0,S.jsx)(F,{tab:"Appearance",children:(0,S.jsxs)(n.A,{style:{maxWidth:400},children:[(0,S.jsx)(I,{level:4,children:"Theme Settings"}),(0,S.jsx)("div",{style:{marginBottom:16},children:"Theme Mode:"}),(0,S.jsxs)(a.Ay.Group,{value:e,onChange:e=>t(e.target.value),buttonStyle:"solid",children:[(0,S.jsx)(a.Ay.Button,{value:"system",children:"System"}),(0,S.jsx)(a.Ay.Button,{value:"light",children:"Light"}),(0,S.jsx)(a.Ay.Button,{value:"dark",children:"Dark"})]})]})},"appearance")]})]})}}}]);
//# sourceMappingURL=106.5ac776e7.chunk.js.map