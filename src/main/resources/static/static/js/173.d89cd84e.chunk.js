"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[173],{173:(e,s,l)=>{l.d(s,{A:()=>ce});var t=l(6833),r=l(6191),i=l(6237),n=l(3117),a=l(119),o=l(9470),d=l(617),c=l(8463),x=l(5444),h=l(6553),u=l(3927),j=l(9098),p=l(6569),y=l(6651),m=l(6051),A=l(6399),g=l(7692),v=l(5206),f=l(2261),w=l(7419),C=l(1645),S=l(9073),b=l(6612),I=l(3217),T=l(2751),k=l(8354),D=l(5043),N=l(6649),z=l(2868),L=l(1780),R=l(4786),E=l(1334),P=l(6091),q=l(4228),M=l(7326),O=l(1686),B=l(691),F=l(579);const{Panel:Q}=M.A,{Text:$}=u.A,U=e=>{var s;let{materialCode:l,workflowId:t,compact:r=!1}=e;const[i,n]=(0,D.useState)(!1),[a,o]=(0,D.useState)(null),[d,c]=(0,D.useState)(null),[x,h]=(0,D.useState)(null),u=(0,D.useCallback)(async()=>{try{n(!0),h(null);const e=[];t&&e.push(N.default.get(`/workflows/${t}`).then(e=>c(e))),l&&e.push(Promise.resolve({id:l,name:`Material ${l}`,description:"Sample material description",category:"Chemical",supplier:"Sample Supplier",hazardClass:"Class 3",physicalState:"Liquid",flashPoint:"25\xb0C",autoIgnitionTemp:"300\xb0C",density:"0.85 g/cm\xb3",solubility:"Soluble in water",ph:"7.2",viscosity:"2.5 cP"}).then(e=>o(e))),await Promise.all(e)}catch(x){console.error("Failed to load material context:",x),h("Failed to load material information")}finally{n(!1)}},[t,l]);(0,D.useEffect)(()=>{(l||t)&&u()},[l,t,u]);const j=e=>({JVC_PENDING:"blue",PLANT_PENDING:"orange",CQS_PENDING:"red",TECH_PENDING:"purple",COMPLETED:"green"}[e]||"default"),p=e=>({"Class 1":"red","Class 2":"orange","Class 3":"yellow","Class 4":"blue","Class 5":"green","Class 6":"purple","Class 7":"magenta","Class 8":"cyan","Class 9":"lime"}[e]||"default");return i?(0,F.jsx)(S.A,{size:"small",children:(0,F.jsxs)("div",{style:{textAlign:"center",padding:"20px"},children:[(0,F.jsx)(O.A,{size:"small"}),(0,F.jsx)("div",{style:{marginTop:8},children:"Loading material context..."})]})}):x?(0,F.jsx)(f.A,{message:"Context Error",description:x,type:"warning",showIcon:!0,size:"small"}):r?(0,F.jsx)(S.A,{size:"small",title:"Material Context",style:{marginBottom:16},children:(0,F.jsxs)(m.A,{direction:"vertical",style:{width:"100%"},children:[a&&(0,F.jsxs)("div",{children:[(0,F.jsx)($,{strong:!0,children:"Material:"})," ",a.name," (",a.id,")",(0,F.jsx)("br",{}),(0,F.jsx)($,{strong:!0,children:"Category:"})," ",a.category,(0,F.jsx)("br",{}),(0,F.jsx)($,{strong:!0,children:"Hazard Class:"})," ",(0,F.jsx)(A.A,{color:p(a.hazardClass),children:a.hazardClass})]}),d&&(0,F.jsxs)("div",{children:[(0,F.jsx)($,{strong:!0,children:"Workflow State:"})," ",(0,F.jsx)(A.A,{color:j(d.state),children:null===(y=d.state)||void 0===y?void 0:y.replace("_"," ")}),(0,F.jsx)("br",{}),(0,F.jsx)($,{strong:!0,children:"Plant:"})," ",d.assignedPlant]})]})}):(0,F.jsxs)(S.A,{title:(0,F.jsxs)(m.A,{children:[(0,F.jsx)(R.A,{}),(0,F.jsx)("span",{children:"Material Context"})]}),size:"small",style:{marginBottom:16},children:[(0,F.jsxs)(M.A,{size:"small",ghost:!0,children:[a&&(0,F.jsxs)(Q,{header:(0,F.jsxs)(m.A,{children:[(0,F.jsx)(E.A,{}),(0,F.jsx)("span",{children:"Material Properties"})]}),children:[(0,F.jsxs)(B.A,{size:"small",column:2,bordered:!0,children:[(0,F.jsx)(B.A.Item,{label:"Material ID",children:a.id}),(0,F.jsx)(B.A.Item,{label:"Name",children:a.name}),(0,F.jsx)(B.A.Item,{label:"Category",children:(0,F.jsx)(A.A,{color:"blue",children:a.category})}),(0,F.jsx)(B.A.Item,{label:"Supplier",children:a.supplier}),(0,F.jsx)(B.A.Item,{label:"Hazard Class",children:(0,F.jsx)(A.A,{color:p(a.hazardClass),children:a.hazardClass})}),(0,F.jsx)(B.A.Item,{label:"Physical State",children:a.physicalState}),(0,F.jsx)(B.A.Item,{label:"Flash Point",children:(0,F.jsx)($,{type:"danger",children:a.flashPoint})}),(0,F.jsx)(B.A.Item,{label:"Auto-Ignition Temp",children:(0,F.jsx)($,{type:"danger",children:a.autoIgnitionTemp})}),(0,F.jsx)(B.A.Item,{label:"Density",children:a.density}),(0,F.jsx)(B.A.Item,{label:"Solubility",children:a.solubility}),(0,F.jsx)(B.A.Item,{label:"pH",children:a.ph}),(0,F.jsx)(B.A.Item,{label:"Viscosity",children:a.viscosity})]}),a.description&&(0,F.jsxs)("div",{style:{marginTop:12},children:[(0,F.jsx)($,{strong:!0,children:"Description:"}),(0,F.jsx)("div",{style:{marginTop:4,padding:8,background:"#f5f5f5",borderRadius:4},children:a.description})]})]},"material"),d&&(0,F.jsx)(Q,{header:(0,F.jsxs)(m.A,{children:[(0,F.jsx)(P.A,{}),(0,F.jsx)("span",{children:"Workflow Information"})]}),children:(0,F.jsxs)(B.A,{size:"small",column:2,bordered:!0,children:[(0,F.jsx)(B.A.Item,{label:"Workflow ID",children:d.id}),(0,F.jsx)(B.A.Item,{label:"Current State",children:(0,F.jsx)(A.A,{color:j(d.state),children:null===(s=d.state)||void 0===s?void 0:s.replace("_"," ")})}),(0,F.jsx)(B.A.Item,{label:"Assigned Plant",children:d.assignedPlant}),(0,F.jsx)(B.A.Item,{label:"Initiated By",children:d.initiatedBy}),(0,F.jsx)(B.A.Item,{label:"Created",children:d.createdAt&&new Date(d.createdAt).toLocaleString()}),(0,F.jsx)(B.A.Item,{label:"Last Modified",children:d.lastModified&&new Date(d.lastModified).toLocaleString()})]})},"workflow"),(0,F.jsx)(Q,{header:(0,F.jsxs)(m.A,{children:[(0,F.jsx)(q.A,{}),(0,F.jsx)("span",{children:"Safety Guidelines"})]}),children:(0,F.jsx)(f.A,{message:"Safety Reminders",description:(0,F.jsxs)("ul",{style:{marginBottom:0,paddingLeft:20},children:[(0,F.jsx)("li",{children:"Always verify material properties before providing guidance"}),(0,F.jsx)("li",{children:"Consider plant-specific safety protocols and equipment"}),(0,F.jsx)("li",{children:"Reference latest SDS (Safety Data Sheet) when available"}),(0,F.jsx)("li",{children:"Escalate to safety team for Class 1-2 hazardous materials"}),(0,F.jsx)("li",{children:"Ensure compliance with local and international regulations"})]}),type:"info",showIcon:!0})},"safety")]}),(0,F.jsx)("div",{style:{marginTop:12,textAlign:"right"},children:(0,F.jsx)(v.Ay,{size:"small",icon:(0,F.jsx)(R.A,{}),onClick:u,children:"Refresh Context"})})]});var y};var H=l(6523),G=l(6989),_=l(9330),V=l(2878),W=l(1966),J=l(1210),K=l(3722),Y=l(9472),Z=l(4522),X=l(647),ee=l(3661);const{Text:se,Title:le}=u.A,te=e=>{let{queryId:s,allowDelete:l=!1,onDocumentDeleted:t,showBulkActions:r=!0,currentUser:i}=e;const[a,o]=(0,D.useState)([]),[d,c]=(0,D.useState)(!0),[x,h]=(0,D.useState)(new Set),[u,j]=(0,D.useState)(new Set);(0,D.useEffect)(()=>{s&&g()},[s,g]);const g=(0,D.useCallback)(async()=>{try{c(!0);const e=await ee.B.getQueryDocuments(s);o(e||[])}catch(e){console.error("Error fetching query documents:",e),p.Ay.error("Failed to load documents. Please try again."),o([])}finally{c(!1)}},[s]),w=e=>{if(!e||0===e)return"0 Bytes";const s=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,s)).toFixed(2))} ${["Bytes","KB","MB","GB"][s]}`},C=e=>{if(!e)return"Unknown";try{return new Date(e).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(s){return"Invalid Date"}},b=e=>{if(!e)return(0,F.jsx)(H.A,{});const s={fontSize:"16px"};switch(e.toLowerCase().split(".").pop()){case"pdf":return(0,F.jsx)(P.A,{style:{...s,color:"#ff4d4f"}});case"doc":case"docx":return(0,F.jsx)(P.A,{style:{...s,color:"#1890ff"}});case"xls":case"xlsx":return(0,F.jsx)(P.A,{style:{...s,color:"#52c41a"}});case"jpg":case"jpeg":case"png":return(0,F.jsx)(H.A,{style:{...s,color:"#722ed1"}});default:return(0,F.jsx)(H.A,{style:s})}},I=async e=>{try{h(s=>new Set([...s,e.id]));const l=await ee.B.downloadQueryDocument(s,e.id),t=window.URL.createObjectURL(l),r=e.createElement("a");r.href=t,r.download=e.originalFileName||e.fileName,e.body.appendChild(r),r.click(),window.URL.revokeObjectURL(t),e.body.removeChild(r),p.Ay.success(`Downloaded ${e.originalFileName||e.fileName}`)}catch(l){console.error("Error downloading document:",l),p.Ay.error("Failed to download document. Please try again.")}finally{h(s=>{const l=new Set(s);return l.delete(e.id),l})}},T=async e=>{try{j(s=>new Set([...s,e.id])),await ee.B.deleteQueryDocument(s,e.id),p.Ay.success(`Deleted ${e.originalFileName||e.fileName}`),o(s=>s.filter(s=>s.id!==e.id)),t&&t(e)}catch(l){console.error("Error deleting document:",l),p.Ay.error("Failed to delete document. Please try again.")}finally{j(s=>{const l=new Set(s);return l.delete(e.id),l})}},N=a.reduce((e,s)=>{const l=s.responseId?"response":"query";return e[l]||(e[l]=[]),e[l].push(s),e},{}),z=e=>!!l&&(!!i&&(e.uploadedBy===i||"ADMIN"===i.role));return d?(0,F.jsx)(S.A,{children:(0,F.jsxs)("div",{style:{textAlign:"center",padding:"20px"},children:[(0,F.jsx)(O.A,{size:"large"}),(0,F.jsx)("div",{style:{marginTop:"16px"},children:(0,F.jsx)(se,{type:"secondary",children:"Loading documents..."})})]})}):0===a.length?(0,F.jsx)(S.A,{children:(0,F.jsx)(Y.A,{image:Y.A.PRESENTED_IMAGE_SIMPLE,description:(0,F.jsxs)(m.A,{direction:"vertical",children:[(0,F.jsx)(se,{type:"secondary",children:"No documents attached to this query"}),(0,F.jsx)(se,{type:"secondary",style:{fontSize:"12px"},children:"Documents can be attached when creating queries or responding to them"})]})})}):(0,F.jsx)(S.A,{title:(0,F.jsxs)(m.A,{children:[(0,F.jsx)(G.A,{}),(0,F.jsxs)("span",{children:["Query Documents (",a.length,")"]})]}),extra:r&&a.length>0&&(0,F.jsx)(m.A,{children:(0,F.jsx)(v.Ay,{icon:(0,F.jsx)(_.A,{}),onClick:async()=>{if(0!==a.length){p.Ay.info(`Starting download of ${a.length} documents...`);for(const s of a)try{await I(s),await new Promise(e=>setTimeout(e,500))}catch(e){console.error(`Failed to download ${s.originalFileName}:`,e)}}else p.Ay.warning("No documents to download.")},size:"small",children:"Download All"})}),children:(0,F.jsxs)(m.A,{direction:"vertical",style:{width:"100%"},children:[(0,F.jsx)(f.A,{message:`${a.length} document(s) attached to this query`,description:(0,F.jsxs)(m.A,{children:[N.query&&(0,F.jsxs)(se,{type:"secondary",children:[N.query.length," from original query"]}),N.response&&(0,F.jsxs)(se,{type:"secondary",children:[N.response.length," from responses"]})]}),type:"info",showIcon:!0,size:"small"}),N.query&&N.query.length>0&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(le,{level:5,children:[(0,F.jsx)(V.A,{style:{color:"#1890ff"}}),(0,F.jsxs)("span",{style:{marginLeft:"8px"},children:["Original Query Documents (",N.query.length,")"]})]}),(0,F.jsx)(Z.A,{size:"small",dataSource:N.query,renderItem:e=>(0,F.jsx)(Z.A.Item,{actions:[(0,F.jsx)(y.A,{title:"Download document",children:(0,F.jsx)(v.Ay,{type:"text",icon:(0,F.jsx)(_.A,{}),onClick:()=>I(e),loading:x.has(e.id),size:"small"})},"download"),...z(e)?[(0,F.jsx)(X.A,{title:"Delete Document",description:"Are you sure you want to delete this document?",onConfirm:()=>T(e),okText:"Yes",cancelText:"No",icon:(0,F.jsx)(V.A,{style:{color:"red"}}),children:(0,F.jsx)(y.A,{title:"Delete document",children:(0,F.jsx)(v.Ay,{type:"text",danger:!0,icon:(0,F.jsx)(W.A,{}),loading:u.has(e.id),size:"small"})})},"delete")]:[]],children:(0,F.jsx)(Z.A.Item.Meta,{avatar:b(e.originalFileName),title:(0,F.jsxs)(m.A,{children:[(0,F.jsx)(se,{strong:!0,children:e.originalFileName||e.fileName}),(0,F.jsx)(A.A,{color:"blue",size:"small",children:"Query"})]}),description:(0,F.jsx)(m.A,{direction:"vertical",size:"small",children:(0,F.jsxs)(m.A,{size:"large",children:[(0,F.jsxs)(se,{type:"secondary",children:[(0,F.jsx)(H.A,{style:{marginRight:"4px"}}),w(e.fileSize)]}),(0,F.jsxs)(se,{type:"secondary",children:[(0,F.jsx)(J.A,{style:{marginRight:"4px"}}),C(e.uploadedAt)]}),(0,F.jsxs)(se,{type:"secondary",children:[(0,F.jsx)(K.A,{style:{marginRight:"4px"}}),e.uploadedBy||"Unknown"]})]})})})})})]}),N.response&&N.response.length>0&&(0,F.jsxs)(F.Fragment,{children:[N.query&&(0,F.jsx)(k.A,{}),(0,F.jsxs)(le,{level:5,children:[(0,F.jsx)(n.A,{style:{color:"#52c41a"}}),(0,F.jsxs)("span",{style:{marginLeft:"8px"},children:["Response Documents (",N.response.length,")"]})]}),(0,F.jsx)(Z.A,{size:"small",dataSource:N.response,renderItem:e=>(0,F.jsx)(Z.A.Item,{actions:[(0,F.jsx)(y.A,{title:"Download document",children:(0,F.jsx)(v.Ay,{type:"text",icon:(0,F.jsx)(_.A,{}),onClick:()=>I(e),loading:x.has(e.id),size:"small"})},"download"),...z(e)?[(0,F.jsx)(X.A,{title:"Delete Document",description:"Are you sure you want to delete this document?",onConfirm:()=>T(e),okText:"Yes",cancelText:"No",icon:(0,F.jsx)(V.A,{style:{color:"red"}}),children:(0,F.jsx)(y.A,{title:"Delete document",children:(0,F.jsx)(v.Ay,{type:"text",danger:!0,icon:(0,F.jsx)(W.A,{}),loading:u.has(e.id),size:"small"})})},"delete")]:[]],children:(0,F.jsx)(Z.A.Item.Meta,{avatar:b(e.originalFileName),title:(0,F.jsxs)(m.A,{children:[(0,F.jsx)(se,{strong:!0,children:e.originalFileName||e.fileName}),(0,F.jsx)(A.A,{color:"green",size:"small",children:"Response"}),e.responseId&&(0,F.jsxs)(A.A,{color:"orange",size:"small",children:["#",e.responseId]})]}),description:(0,F.jsx)(m.A,{direction:"vertical",size:"small",children:(0,F.jsxs)(m.A,{size:"large",children:[(0,F.jsxs)(se,{type:"secondary",children:[(0,F.jsx)(H.A,{style:{marginRight:"4px"}}),w(e.fileSize)]}),(0,F.jsxs)(se,{type:"secondary",children:[(0,F.jsx)(J.A,{style:{marginRight:"4px"}}),C(e.uploadedAt)]}),(0,F.jsxs)(se,{type:"secondary",children:[(0,F.jsx)(K.A,{style:{marginRight:"4px"}}),e.uploadedBy||"Unknown"]})]})})})})})]})]})})};var re=l(7933),ie=l(8365);const{TextArea:ne}=x.A,{Option:ae}=h.A,{Text:oe,Title:de}=u.A,ce=e=>{let{team:s}=e;const[l,u]=(0,D.useState)(!1),[R,E]=(0,D.useState)([]),[P,q]=(0,D.useState)([]),[M,O]=(0,D.useState)(null),[B,Q]=(0,D.useState)(!1),[$,H]=(0,D.useState)(!1),[G]=j.A.useForm(),[_,V]=(0,D.useState)([]),[W,J]=(0,D.useState)(null),[K,Y]=(0,D.useState)([]),[Z,X]=(0,D.useState)({status:"all",priority:"all",material:"",daysOpen:"all",project:"",plant:"",assignedTeam:"all",hasAttachments:"all"}),[ee,se]=(0,D.useState)({total:0,open:0,resolved:0,resolvedToday:0,overdue:0,avgResolutionTime:0}),le=(0,D.useCallback)(async e=>{try{u(!0);const l=await N.default.get(`/queries/inbox/${s}`,{signal:e});null!==e&&void 0!==e&&e.aborted||E(l)}catch(l){null!==e&&void 0!==e&&e.aborted||(console.error("Failed to load queries:",l),p.Ay.error("Failed to load queries"))}finally{u(!1)}},[s]),ce=(0,D.useCallback)(async e=>{try{const[l,t,r,i,n]=await Promise.all([N.default.get(`/queries/stats/count-open/${s}`,{signal:e}).catch(()=>0),N.default.get(`/queries/stats/count-resolved/${s}`,{signal:e}).catch(()=>0),N.default.get(`/queries/stats/resolved-today/${s}`,{signal:e}).catch(()=>0),N.default.get(`/queries/stats/overdue-count/${s}`,{signal:e}).catch(()=>0),N.default.get(`/queries/stats/avg-resolution-time/${s}`,{signal:e}).catch(()=>0)]);null!==e&&void 0!==e&&e.aborted||se({total:l+t,open:l,resolved:t,resolvedToday:r,overdue:i,avgResolutionTime:n})}catch(l){null!==e&&void 0!==e&&e.aborted||console.error("Failed to load stats:",l)}},[s]),xe=(0,D.useCallback)(()=>{let e=[...R];if("all"!==Z.status&&(e=e.filter(e=>e.status===Z.status)),"all"!==Z.priority&&(e=e.filter(e=>e.priorityLevel===Z.priority)),Z.material&&(e=e.filter(e=>{var s,l;return(null===(s=e.materialCode)||void 0===s?void 0:s.toLowerCase().includes(Z.material.toLowerCase()))||(null===(l=e.materialName)||void 0===l?void 0:l.toLowerCase().includes(Z.material.toLowerCase()))})),Z.project&&(e=e.filter(e=>{var s;return null===(s=e.projectCode)||void 0===s?void 0:s.toLowerCase().includes(Z.project.toLowerCase())})),Z.plant&&(e=e.filter(e=>{var s;return null===(s=e.plantCode)||void 0===s?void 0:s.toLowerCase().includes(Z.plant.toLowerCase())})),"all"!==Z.assignedTeam&&(e=e.filter(e=>e.assignedTeam===Z.assignedTeam)),"all"!==Z.daysOpen){const s=parseInt(Z.daysOpen);e=e.filter(e=>e.daysOpen>=s)}"all"!==Z.hasAttachments&&("with"===Z.hasAttachments?e=e.filter(e=>(e.documentCount||0)>0):"without"===Z.hasAttachments&&(e=e.filter(e=>0===(e.documentCount||0)))),q(e)},[R,Z]);(0,D.useEffect)(()=>{const e=new AbortController;return(async()=>{try{await Promise.all([le(e.signal),ce(e.signal)])}catch(s){e.signal.aborted||console.error("Error loading query inbox data:",s)}})(),()=>{e.abort()}},[s,le,ce]),(0,D.useEffect)(()=>{xe()},[R,Z,xe]);const he=(0,D.useCallback)(async e=>{try{const s=await N.default.get(`/queries/${e}/documents`);Y(s)}catch(s){console.error("Failed to load query documents:",s),Y([])}},[]),ue=e=>e===z.cS.OPEN?"red":"green",je=e=>({LOW:"blue",MEDIUM:"orange",HIGH:"red",URGENT:"purple"}[e]||"default"),pe=e=>e>=3?"#ff4d4f":e>=2?"#faad14":"#52c41a",ye=[{title:"Material Context",dataIndex:"materialCode",key:"materialContext",width:180,render:(e,s)=>(0,F.jsxs)("div",{children:[(0,F.jsx)(oe,{strong:!0,children:e}),s.materialName&&(0,F.jsx)("div",{style:{fontSize:"12px",color:"#666"},children:s.materialName}),s.projectCode&&(0,F.jsxs)("div",{style:{fontSize:"11px",color:"#999"},children:["Project: ",s.projectCode]}),s.plantCode&&(0,F.jsxs)("div",{style:{fontSize:"11px",color:"#999"},children:["Plant: ",s.plantCode]})]})},{title:"Question",dataIndex:"question",key:"question",ellipsis:!0,render:e=>(0,F.jsx)(y.A,{title:e,children:(0,F.jsx)(oe,{children:e})})},{title:"Attachments",key:"attachments",width:100,render:(e,s)=>{const l=s.documentCount||0;return l>0?(0,F.jsxs)(m.A,{children:[(0,F.jsx)(t.A,{style:{color:"#1890ff"}}),(0,F.jsx)(oe,{type:"secondary",children:l})]}):(0,F.jsx)(oe,{type:"secondary",children:"-"})}},{title:"Field Context",dataIndex:"fieldContext",key:"fieldContext",width:120,render:(e,s)=>(0,F.jsxs)("div",{children:[e&&(0,F.jsx)(A.A,{color:"blue",children:e}),s.stepNumber&&(0,F.jsxs)("div",{style:{fontSize:"12px",color:"#666"},children:["Step ",s.stepNumber]})]})},{title:"Priority",dataIndex:"priorityLevel",key:"priorityLevel",width:80,render:e=>(0,F.jsx)(A.A,{color:je(e),children:e||z.fz.MEDIUM})},{title:"Status",dataIndex:"status",key:"status",width:80,render:e=>(0,F.jsx)(A.A,{color:ue(e),children:e})},{title:"Days Open",dataIndex:"daysOpen",key:"daysOpen",width:100,render:(e,s)=>{const{progress:l,status:t}=(e=>{const s=Math.min(e/3*100,100);let l="normal";return s>=100?l="exception":s>=80&&(l="active"),{progress:s,status:l}})(e);return(0,F.jsxs)("div",{children:[(0,F.jsxs)(oe,{style:{color:pe(e)},children:[e," days"]}),(0,F.jsx)(g.A,{percent:l,status:t,size:"small",showInfo:!1,style:{marginTop:4}})]})}},{title:"Raised By",dataIndex:"raisedBy",key:"raisedBy",width:100},{title:"Actions",key:"actions",width:120,render:(e,s)=>(0,F.jsxs)(m.A,{children:[(0,F.jsx)(v.Ay,{size:"small",icon:(0,F.jsx)(r.A,{}),onClick:()=>{O(s),H(!0),he(s.id)},children:"View"}),s.status===z.cS.OPEN&&(0,F.jsx)(v.Ay,{size:"small",type:"primary",icon:(0,F.jsx)(i.A,{}),onClick:()=>{O(s),Q(!0),he(s.id)},children:"Resolve"})]})}];return(0,F.jsx)(L.qw,{componentName:"QueryInbox",children:(0,F.jsxs)("div",{children:[(0,F.jsx)(f.A,{message:`${s} Team Statistics`,description:"All statistics below are specific to your team and update in real-time.",type:"info",showIcon:!0,style:{marginBottom:16}}),(0,F.jsx)(L.pE,{operation:"query statistics loading",onRetry:ce,maxRetries:3,children:(0,F.jsxs)(w.A,{gutter:16,style:{marginBottom:16},children:[(0,F.jsx)(C.A,{span:5,children:(0,F.jsx)(S.A,{children:(0,F.jsx)(b.A,{title:"Total Queries",value:ee.total,prefix:(0,F.jsx)(n.A,{})})})}),(0,F.jsx)(C.A,{span:5,children:(0,F.jsx)(S.A,{children:(0,F.jsx)(b.A,{title:"Open Queries",value:ee.open,valueStyle:{color:"#cf1322"},prefix:(0,F.jsx)(a.A,{})})})}),(0,F.jsx)(C.A,{span:5,children:(0,F.jsx)(S.A,{children:(0,F.jsx)(b.A,{title:"Resolved Today",value:ee.resolvedToday,valueStyle:{color:"#3f8600"},prefix:(0,F.jsx)(i.A,{})})})}),(0,F.jsx)(C.A,{span:5,children:(0,F.jsx)(S.A,{children:(0,F.jsx)(b.A,{title:"Overdue",value:ee.overdue,valueStyle:{color:ee.overdue>0?"#cf1322":"#3f8600"},prefix:(0,F.jsx)(o.A,{})})})}),(0,F.jsx)(C.A,{span:4,children:(0,F.jsx)(S.A,{children:(0,F.jsx)(b.A,{title:"Avg Resolution Time",value:ee.avgResolutionTime,suffix:"hrs",precision:1,prefix:(0,F.jsx)(i.A,{})})})})]})}),(0,F.jsx)(S.A,{size:"small",style:{marginBottom:16},children:(0,F.jsxs)(w.A,{gutter:[16,8],align:"middle",children:[(0,F.jsx)(C.A,{span:4,children:(0,F.jsxs)(h.A,{placeholder:"Status",value:Z.status,onChange:e=>X({...Z,status:e}),style:{width:"100%"},children:[(0,F.jsx)(ae,{value:"all",children:"All Status"}),(0,F.jsx)(ae,{value:"OPEN",children:"Open"}),(0,F.jsx)(ae,{value:"RESOLVED",children:"Resolved"})]})}),(0,F.jsx)(C.A,{span:4,children:(0,F.jsxs)(h.A,{placeholder:"Priority",value:Z.priority,onChange:e=>X({...Z,priority:e}),style:{width:"100%"},children:[(0,F.jsx)(ae,{value:"all",children:"All Priority"}),(0,F.jsx)(ae,{value:"LOW",children:"Low"}),(0,F.jsx)(ae,{value:"MEDIUM",children:"Medium"}),(0,F.jsx)(ae,{value:"HIGH",children:"High"}),(0,F.jsx)(ae,{value:"URGENT",children:"Urgent"})]})}),(0,F.jsx)(C.A,{span:4,children:(0,F.jsx)(x.A,{placeholder:"Material ID/Name",value:Z.material,onChange:e=>X({...Z,material:e.target.value})})}),(0,F.jsx)(C.A,{span:4,children:(0,F.jsx)(x.A,{placeholder:"Project Code",value:Z.project,onChange:e=>X({...Z,project:e.target.value})})}),(0,F.jsx)(C.A,{span:4,children:(0,F.jsx)(x.A,{placeholder:"Plant",value:Z.plant,onChange:e=>X({...Z,plant:e.target.value})})}),(0,F.jsx)(C.A,{span:4,children:(0,F.jsxs)(h.A,{placeholder:"Team",value:Z.assignedTeam,onChange:e=>X({...Z,assignedTeam:e}),style:{width:"100%"},children:[(0,F.jsx)(ae,{value:"all",children:"All Teams"}),(0,F.jsx)(ae,{value:"CQS",children:"CQS"}),(0,F.jsx)(ae,{value:"TECH",children:"Tech"}),(0,F.jsx)(ae,{value:"JVC",children:"JVC"})]})}),(0,F.jsx)(C.A,{span:4,children:(0,F.jsxs)(h.A,{placeholder:"Attachments",value:Z.hasAttachments,onChange:e=>X({...Z,hasAttachments:e}),style:{width:"100%"},children:[(0,F.jsx)(ae,{value:"all",children:"All Queries"}),(0,F.jsx)(ae,{value:"with",children:"With Attachments"}),(0,F.jsx)(ae,{value:"without",children:"Without Attachments"})]})}),(0,F.jsx)(C.A,{span:4,children:(0,F.jsxs)(h.A,{placeholder:"Days Open",value:Z.daysOpen,onChange:e=>X({...Z,daysOpen:e}),style:{width:"100%"},children:[(0,F.jsx)(ae,{value:"all",children:"All"}),(0,F.jsx)(ae,{value:"1",children:"1+ days"}),(0,F.jsx)(ae,{value:"2",children:"2+ days"}),(0,F.jsx)(ae,{value:"3",children:"3+ days (Overdue)"})]})}),(0,F.jsx)(C.A,{span:8,children:(0,F.jsxs)(m.A,{children:[(0,F.jsx)(v.Ay,{icon:(0,F.jsx)(d.A,{}),onClick:()=>{le(),ce()},children:"Refresh"}),(0,F.jsx)(v.Ay,{icon:(0,F.jsx)(c.A,{}),onClick:()=>X({status:"all",priority:"all",material:"",daysOpen:"all",project:"",plant:"",assignedTeam:"all",hasAttachments:"all"}),children:"Clear Filters"})]})})]})}),(0,F.jsx)(L.pE,{operation:"query data loading",onRetry:le,maxRetries:3,children:(0,F.jsxs)(S.A,{title:(0,F.jsxs)("div",{children:[(0,F.jsxs)(de,{level:4,style:{margin:0},children:[s," Team Query Inbox"]}),(0,F.jsxs)(oe,{type:"secondary",children:[P.length," of ",R.length," queries"]})]}),children:[ee.overdue>0&&(0,F.jsx)(f.A,{message:`${ee.overdue} queries are overdue (>3 days)`,type:"warning",showIcon:!0,style:{marginBottom:16}}),(0,F.jsx)(I.A,{dataSource:P,columns:ye,loading:l,pagination:{pageSize:z.Bq.DEFAULT_PAGE_SIZE,showSizeChanger:!0,showQuickJumper:!0,showTotal:(e,s)=>`${s[0]}-${s[1]} of ${e} queries`},rowKey:"id",size:"small",rowClassName:e=>e.daysOpen>=3?"overdue-row":""})]})}),(0,F.jsx)(T.A,{title:`Query #${null===M||void 0===M?void 0:M.id} Details`,open:$,onCancel:()=>{H(!1),O(null),Y([])},footer:[(0,F.jsx)(v.Ay,{onClick:()=>H(!1),children:"Close"},"close"),(null===M||void 0===M?void 0:M.status)===z.cS.OPEN&&(0,F.jsx)(v.Ay,{type:"primary",onClick:()=>{H(!1),Q(!0),he(M.id)},children:"Resolve Query"},"resolve")],width:1200,children:M&&(0,F.jsxs)(w.A,{gutter:16,children:[(0,F.jsx)(C.A,{span:14,children:(0,F.jsxs)("div",{children:[(0,F.jsxs)(w.A,{gutter:16,children:[(0,F.jsxs)(C.A,{span:12,children:[(0,F.jsx)(oe,{strong:!0,children:"Material Code:"})," ",M.materialCode,M.materialName&&(0,F.jsx)("div",{style:{fontSize:"12px",color:"#666"},children:M.materialName})]}),(0,F.jsxs)(C.A,{span:12,children:[(0,F.jsx)(oe,{strong:!0,children:"Status:"})," ",(0,F.jsx)(A.A,{color:ue(M.status),children:M.status})]})]}),(0,F.jsx)(k.A,{}),(0,F.jsxs)(w.A,{gutter:16,children:[(0,F.jsxs)(C.A,{span:8,children:[(0,F.jsx)(oe,{strong:!0,children:"Priority:"})," ",(0,F.jsx)(A.A,{color:je(M.priorityLevel),children:M.priorityLevel||z.fz.MEDIUM})]}),(0,F.jsxs)(C.A,{span:8,children:[(0,F.jsx)(oe,{strong:!0,children:"Team:"})," ",(0,F.jsx)(A.A,{color:M.assignedTeam===z.r0.CQS?"blue":M.assignedTeam===z.r0.TECH?"purple":"orange",children:M.assignedTeam})]}),(0,F.jsxs)(C.A,{span:8,children:[(0,F.jsx)(oe,{strong:!0,children:"Days Open:"})," ",(0,F.jsxs)(oe,{style:{color:pe(M.daysOpen)},children:[M.daysOpen," days"]})]})]}),(0,F.jsx)(k.A,{}),(M.projectCode||M.plantCode)&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(w.A,{gutter:16,children:[M.projectCode&&(0,F.jsxs)(C.A,{span:8,children:[(0,F.jsx)(oe,{strong:!0,children:"Project:"})," ",M.projectCode]}),M.plantCode&&(0,F.jsxs)(C.A,{span:8,children:[(0,F.jsx)(oe,{strong:!0,children:"Plant:"})," ",M.plantCode]})]}),(0,F.jsx)(k.A,{})]}),M.fieldName&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(oe,{strong:!0,children:"Field Context:"})," ",M.fieldName,M.stepNumber&&` (Step ${M.stepNumber})`,(0,F.jsx)(k.A,{})]}),(0,F.jsx)(oe,{strong:!0,children:"Question:"}),(0,F.jsx)("div",{style:{marginTop:8,padding:12,background:"#f5f5f5",borderRadius:4,whiteSpace:"pre-wrap"},children:M.question}),M.response&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(k.A,{}),(0,F.jsx)(oe,{strong:!0,children:"Response:"}),(0,F.jsx)("div",{style:{marginTop:8,padding:12,background:"#f0f9ff",borderRadius:4,whiteSpace:"pre-wrap"},children:M.response}),(0,F.jsxs)("div",{style:{marginTop:8,fontSize:"12px",color:"#666"},children:["Resolved by: ",M.resolvedBy," on"," ",M.resolvedAt&&new Date(M.resolvedAt).toLocaleString()]})]}),K.length>0&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(k.A,{}),(0,F.jsx)(oe,{strong:!0,children:(0,F.jsxs)(m.A,{children:[(0,F.jsx)(t.A,{}),"Attached Documents (",K.length,")"]})}),(0,F.jsx)("div",{style:{marginTop:8},children:(0,F.jsx)(te,{documents:K,showActions:!0,compact:!1})})]}),(0,F.jsx)(k.A,{}),(0,F.jsxs)("div",{style:{fontSize:"12px",color:"#666"},children:[(0,F.jsxs)("div",{children:["Raised by: ",M.raisedBy]}),(0,F.jsxs)("div",{children:["Created:"," ",M.createdAt&&new Date(M.createdAt).toLocaleString()]})]})]})}),(0,F.jsxs)(C.A,{span:10,children:[(0,F.jsx)(L.qw,{componentName:"MaterialContextDisplay",children:(0,F.jsx)(U,{materialCode:M.materialCode,workflowId:M.workflowId,compact:!0})}),(0,F.jsx)(L.qw,{componentName:"QueryHistoryTracker",children:(0,F.jsx)(ie.A,{materialCode:M.materialCode,workflowId:M.workflowId,compact:!0})})]})]})}),(0,F.jsx)(T.A,{title:`Resolve Query #${null===M||void 0===M?void 0:M.id}`,open:B,onCancel:()=>{Q(!1),G.resetFields(),O(null),V([]),J(null),Y([])},onOk:()=>G.submit(),width:1400,okText:"Resolve Query",okButtonProps:{type:"primary",size:"large"},cancelButtonProps:{size:"large"},children:M&&(0,F.jsxs)(w.A,{gutter:16,children:[(0,F.jsxs)(C.A,{span:16,children:[(0,F.jsxs)("div",{style:{marginBottom:16,padding:16,background:"#f5f5f5",borderRadius:6,border:"1px solid #d9d9d9"},children:[(0,F.jsxs)(w.A,{gutter:16,style:{marginBottom:12},children:[(0,F.jsxs)(C.A,{span:12,children:[(0,F.jsx)(oe,{strong:!0,children:"Material:"})," ",M.materialCode,M.materialName&&(0,F.jsx)("div",{style:{fontSize:"12px",color:"#666"},children:M.materialName})]}),(0,F.jsx)(C.A,{span:12,children:(0,F.jsxs)(m.A,{children:[(0,F.jsx)(oe,{strong:!0,children:"Team:"}),(0,F.jsx)(A.A,{color:M.assignedTeam===z.r0.CQS?"blue":M.assignedTeam===z.r0.TECH?"purple":"orange",children:M.assignedTeam}),(0,F.jsx)(oe,{strong:!0,children:"Priority:"}),(0,F.jsx)(A.A,{color:je(M.priorityLevel),children:M.priorityLevel||"MEDIUM"})]})})]}),(M.projectCode||M.plantCode)&&(0,F.jsxs)(w.A,{gutter:16,style:{marginBottom:12},children:[M.projectCode&&(0,F.jsxs)(C.A,{span:8,children:[(0,F.jsx)(oe,{strong:!0,children:"Project:"})," ",M.projectCode]}),M.plantCode&&(0,F.jsxs)(C.A,{span:8,children:[(0,F.jsx)(oe,{strong:!0,children:"Plant:"})," ",M.plantCode]})]}),(0,F.jsx)(oe,{strong:!0,children:"Question:"}),(0,F.jsx)("div",{style:{marginTop:8,whiteSpace:"pre-wrap",fontSize:"14px"},children:M.question}),M.fieldName&&(0,F.jsxs)("div",{style:{marginTop:8},children:[(0,F.jsx)(oe,{strong:!0,children:"Field Context:"})," ",M.fieldName,M.stepNumber&&` (Step ${M.stepNumber})`]}),(0,F.jsx)("div",{style:{marginTop:8,fontSize:"12px",color:"#666"},children:(0,F.jsxs)(m.A,{children:[(0,F.jsxs)("span",{children:["Raised by: ",M.raisedBy]}),(0,F.jsx)("span",{children:"\u2022"}),(0,F.jsx)("span",{children:M.createdAt&&new Date(M.createdAt).toLocaleString()}),(0,F.jsx)("span",{children:"\u2022"}),(0,F.jsxs)("span",{style:{color:pe(M.daysOpen)},children:[M.daysOpen," days open"]})]})})]}),(0,F.jsxs)(j.A,{form:G,layout:"vertical",onFinish:async e=>{try{const s={response:e.response,priorityLevel:e.priorityLevel},l=await N.default.put(`/queries/${M.id}/resolve`,s);l.responseId&&J(l.responseId);const t=_.length>0?` with ${_.length} document(s) attached`:"";p.Ay.success(`Query resolved successfully${t}`),Q(!1),G.resetFields(),O(null),V([]),J(null),Y([]),le(),ce()}catch(s){console.error("Failed to resolve query:",s),p.Ay.error("Failed to resolve query")}},children:[(0,F.jsx)(j.A.Item,{name:"response",label:(0,F.jsxs)(m.A,{children:[(0,F.jsx)("span",{children:"Resolution Response"}),(0,F.jsx)(oe,{type:"secondary",children:"(Required)"})]}),rules:[{required:!0,message:"Please provide a resolution response"}],children:(0,F.jsx)(ne,{rows:8,placeholder:"Provide detailed resolution or answer to the query. Include any relevant technical details, safety considerations, or references to documentation...",showCount:!0,maxLength:2e3,style:{direction:"ltr",textAlign:"left",fontFamily:"inherit"}})}),K.length>0&&(0,F.jsx)(j.A.Item,{label:(0,F.jsxs)(m.A,{children:[(0,F.jsx)(t.A,{}),(0,F.jsx)("span",{children:"Query Documents"}),(0,F.jsx)(oe,{type:"secondary",children:"(For context while responding)"})]}),children:(0,F.jsx)(te,{documents:K,showActions:!1,compact:!0})}),(0,F.jsx)(j.A.Item,{label:(0,F.jsxs)(m.A,{children:[(0,F.jsx)(t.A,{}),(0,F.jsx)("span",{children:"Attach Documents to Response"}),(0,F.jsx)(oe,{type:"secondary",children:"(Optional)"})]}),children:(0,F.jsx)(re.A,{queryId:null===M||void 0===M?void 0:M.id,responseId:W,context:"response",onUploadComplete:e=>{V(s=>[...s,...e]),p.Ay.success(`${e.length} document(s) uploaded to response`)},maxFiles:5,disabled:!1})}),(0,F.jsxs)(w.A,{gutter:16,children:[(0,F.jsx)(C.A,{span:12,children:(0,F.jsx)(j.A.Item,{name:"priorityLevel",label:"Update Priority (Optional)",initialValue:M.priorityLevel||"MEDIUM",children:(0,F.jsxs)(h.A,{size:"large",children:[(0,F.jsx)(ae,{value:"LOW",children:"Low Priority"}),(0,F.jsx)(ae,{value:"MEDIUM",children:"Medium Priority"}),(0,F.jsx)(ae,{value:"HIGH",children:"High Priority"}),(0,F.jsx)(ae,{value:"URGENT",children:"Urgent Priority"})]})})}),(0,F.jsx)(C.A,{span:12,children:(0,F.jsx)("div",{style:{marginTop:30},children:(0,F.jsx)(oe,{type:"secondary",children:"This resolution will be sent to the plant team and the workflow will continue."})})})]})]})]}),(0,F.jsxs)(C.A,{span:8,children:[(0,F.jsx)(L.qw,{componentName:"MaterialContextDisplay",children:(0,F.jsx)(U,{materialCode:M.materialCode,workflowId:M.workflowId,compact:!0})}),(0,F.jsx)(L.qw,{componentName:"QueryHistoryTracker",children:(0,F.jsx)(ie.A,{materialCode:M.materialCode,workflowId:M.workflowId,compact:!0})})]})]})}),(0,F.jsx)("style",{children:"\n          .overdue-row {\n            background-color: #fff2f0;\n          }\n          .overdue-row:hover {\n            background-color: #ffebe6 !important;\n          }\n        "})]})})}},8365:(e,s,l)=>{l.d(s,{A:()=>C});var t=l(6237),r=l(119),i=l(3889),n=l(3117),a=l(3722),o=l(5206),d=l(9073),c=l(1645),x=l(9472),h=l(7419),u=l(6051),j=l(1686),p=l(6612),y=l(6399),m=l(6263),A=l(3927),g=l(5043),v=l(6649),f=l(579);const{Text:w}=A.A,C=e=>{let{queryId:s,materialCode:l,workflowId:A,compact:C=!1}=e;const[S,b]=(0,g.useState)(!1),[I,T]=(0,g.useState)([]),[k,D]=(0,g.useState)({totalQueries:0,resolvedQueries:0,avgResolutionTime:0,currentSLA:0}),N=(0,g.useCallback)(async()=>{try{b(!0);let e="/queries";s?e+=`/${s}/history`:A?e+=`/workflow/${A}`:l&&(e+=`/material/${l}`);const t=await v.default.get(e);T(Array.isArray(t)?t:[t]);const r=t.filter(e=>"RESOLVED"===e.status),i=r.length>0?r.reduce((e,s)=>e+(s.daysOpen||0),0)/r.length:0;D({totalQueries:t.length,resolvedQueries:r.length,avgResolutionTime:i,currentSLA:t.filter(e=>e.daysOpen>3).length})}catch(e){console.error("Failed to load query history:",e)}finally{b(!1)}},[s,l,A]);(0,g.useEffect)(()=>{(s||l||A)&&N()},[s,l,A,N]);return S?(0,f.jsx)(d.A,{size:"small",children:(0,f.jsxs)("div",{style:{textAlign:"center",padding:"20px"},children:[(0,f.jsx)(j.A,{size:"small"}),(0,f.jsx)("div",{style:{marginTop:8},children:"Loading query history..."})]})}):C?(0,f.jsx)(d.A,{size:"small",title:(0,f.jsxs)(u.A,{children:[(0,f.jsx)(i.A,{}),(0,f.jsx)("span",{children:"Query History"})]}),style:{marginBottom:16},children:(0,f.jsxs)(h.A,{gutter:16,children:[(0,f.jsx)(c.A,{span:6,children:(0,f.jsx)(p.A,{title:"Total",value:k.totalQueries,prefix:(0,f.jsx)(n.A,{})})}),(0,f.jsx)(c.A,{span:6,children:(0,f.jsx)(p.A,{title:"Resolved",value:k.resolvedQueries,prefix:(0,f.jsx)(t.A,{}),valueStyle:{color:"#3f8600"}})}),(0,f.jsx)(c.A,{span:6,children:(0,f.jsx)(p.A,{title:"Avg Days",value:k.avgResolutionTime,precision:1,prefix:(0,f.jsx)(r.A,{})})}),(0,f.jsx)(c.A,{span:6,children:(0,f.jsx)(p.A,{title:"Overdue",value:k.currentSLA,prefix:(0,f.jsx)(r.A,{}),valueStyle:{color:k.currentSLA>0?"#cf1322":"#3f8600"}})})]})}):(0,f.jsxs)(d.A,{title:(0,f.jsxs)(u.A,{children:[(0,f.jsx)(i.A,{}),(0,f.jsx)("span",{children:"Query History & Resolution Tracking"})]}),size:"small",extra:(0,f.jsx)(o.Ay,{size:"small",icon:(0,f.jsx)(i.A,{}),onClick:N,children:"Refresh"}),children:[(0,f.jsxs)(h.A,{gutter:16,style:{marginBottom:16},children:[(0,f.jsx)(c.A,{span:6,children:(0,f.jsx)(p.A,{title:"Total Queries",value:k.totalQueries,prefix:(0,f.jsx)(n.A,{})})}),(0,f.jsx)(c.A,{span:6,children:(0,f.jsx)(p.A,{title:"Resolved",value:k.resolvedQueries,prefix:(0,f.jsx)(t.A,{}),valueStyle:{color:"#3f8600"}})}),(0,f.jsx)(c.A,{span:6,children:(0,f.jsx)(p.A,{title:"Avg Resolution Time",value:k.avgResolutionTime,precision:1,suffix:"days",prefix:(0,f.jsx)(r.A,{})})}),(0,f.jsx)(c.A,{span:6,children:(0,f.jsx)(p.A,{title:"Overdue Queries",value:k.currentSLA,prefix:(0,f.jsx)(r.A,{}),valueStyle:{color:k.currentSLA>0?"#cf1322":"#3f8600"}})})]}),I.length>0?(0,f.jsx)(m.A,{items:I.map(e=>{const s="RESOLVED"===e.status;return{dot:s?(0,f.jsx)(t.A,{style:{color:"#52c41a"}}):(0,f.jsx)(r.A,{style:{color:"#faad14"}}),color:s?"green":"blue",children:(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{style:{marginBottom:8},children:(0,f.jsxs)(u.A,{wrap:!0,children:[(0,f.jsxs)(w,{strong:!0,children:["Query #",e.id]}),(0,f.jsx)(y.A,{color:(n=e.status,"OPEN"===n?"red":"green"),children:e.status}),(0,f.jsx)(y.A,{color:(i=e.assignedTeam,{CQS:"blue",TECH:"purple",JVC:"orange"}[i]||"default"),children:e.assignedTeam}),e.priorityLevel&&(0,f.jsx)(y.A,{color:(l=e.priorityLevel,{LOW:"blue",MEDIUM:"orange",HIGH:"red",URGENT:"purple"}[l]||"default"),children:e.priorityLevel})]})}),(0,f.jsx)("div",{style:{marginBottom:8},children:(0,f.jsx)(w,{children:e.question})}),e.fieldName&&(0,f.jsxs)("div",{style:{marginBottom:4,fontSize:"12px",color:"#666"},children:["Field: ",e.fieldName," ",e.stepNumber&&`(Step ${e.stepNumber})`]}),(0,f.jsx)("div",{style:{fontSize:"12px",color:"#666",marginBottom:8},children:(0,f.jsxs)(u.A,{children:[(0,f.jsxs)("span",{children:[(0,f.jsx)(a.A,{})," Raised by: ",e.raisedBy]}),(0,f.jsxs)("span",{children:[(0,f.jsx)(r.A,{})," ",e.createdAt&&new Date(e.createdAt).toLocaleString()]}),(0,f.jsxs)("span",{children:["Days open: ",e.daysOpen]})]})}),e.response&&(0,f.jsxs)("div",{style:{marginTop:8,padding:8,background:"#f0f9ff",borderRadius:4,borderLeft:"3px solid #1890ff"},children:[(0,f.jsx)("div",{style:{marginBottom:4},children:(0,f.jsx)(w,{strong:!0,children:"Resolution:"})}),(0,f.jsx)("div",{style:{marginBottom:4},children:(0,f.jsx)(w,{children:e.response})}),(0,f.jsxs)("div",{style:{fontSize:"11px",color:"#666"},children:["Resolved by: ",e.resolvedBy," on"," ",e.resolvedAt&&new Date(e.resolvedAt).toLocaleString()]})]})]})};var l,i,n}),mode:"left"}):(0,f.jsx)(x.A,{description:"No query history available",image:x.A.PRESENTED_IMAGE_SIMPLE})]})}}}]);
//# sourceMappingURL=173.d89cd84e.chunk.js.map