"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[180],{2868:(e,t,o)=>{o.d(t,{aZ:()=>u,lX:()=>f,rb:()=>l,Bq:()=>c,fz:()=>s,cS:()=>i,tS:()=>p,r0:()=>d,EW:()=>r,sB:()=>n,Fv:()=>a});const r={MOBILE_BREAKPOINT:768,TABLET_BREAKPOINT:1024,PAGE_SIZE:10,DEBOUNCE_DELAY:300},a={INITIATED:"INITIATED",IN_PROGRESS:"IN_PROGRESS",PENDING_REVIEW:"PENDING_REVIEW",APPROVED:"APPROVED",REJECTED:"REJECTED",COMPLETED:"COMPLETED"},s={LOW:"LOW",MEDIUM:"MEDIUM",HIGH:"HIGH",URGENT:"URGENT",CRITICAL:"CRITICAL"},l=(a.INITIATED,a.IN_PROGRESS,a.PENDING_REVIEW,a.APPROVED,a.REJECTED,a.COMPLETED,s.LOW,s.MEDIUM,s.HIGH,s.URGENT,s.CRITICAL,{MAX_UPLOAD_SIZE:26214400,BYTES_PER_KB:1024,BYTES_PER_MB:1048576,BYTES_PER_GB:1073741824}),n={JVC_PENDING:"JVC_PENDING",PLANT_PENDING:"PLANT_PENDING",CQS_PENDING:"CQS_PENDING",TECH_PENDING:"TECH_PENDING",DRAFT:"DRAFT",IN_PROGRESS:"IN_PROGRESS",SUBMITTED:"SUBMITTED"},i={OPEN:"OPEN",RESOLVED:"RESOLVED",CLOSED:"CLOSED"},d={CQS:"CQS",TECH:"TECH",JVC:"JVC",PLANT:"PLANT"},u={INTERVAL:3e4,DEBOUNCE_DELAY:2e3},c={DEFAULT_PAGE_SIZE:10,SMALL_PAGE_SIZE:5,LARGE_PAGE_SIZE:15,SHOW_SIZE_CHANGER:!0,SHOW_QUICK_JUMPER:!0},f={ALL:"all",COMPLETED:"completed",IN_PROGRESS:"in-progress",NOT_STARTED:"not-started"},p={INITIATE:"initiate",PENDING:"pending",COMPLETED:"completed",QUERIES:"queries",HISTORY:"history"}},3661:(e,t,o)=>{o.d(t,{B:()=>a});var r=o(6649);const a={createQuery:(e,t)=>r.default.post(`/queries/workflow/${e}`,t),getQuery:e=>r.default.get(`/queries/${e}`),updateQuery:(e,t)=>r.default.put(`/queries/${e}`,t),deleteQuery:e=>r.default.delete(`/queries/${e}`),resolveQuery:(e,t)=>r.default.post(`/queries/${e}/resolve`,t),reopenQuery:(e,t)=>r.default.post(`/queries/${e}/reopen`,{reason:t}),assignQuery:(e,t)=>r.default.post(`/queries/${e}/assign`,t),reassignQuery:(e,t,o)=>r.default.put(`/queries/${e}/assign`,{team:t,reason:o}),getQueriesByWorkflow:e=>r.default.get(`/queries/workflow/${e}`),getQueriesByTeam:e=>r.default.get(`/queries/team/${e}`),getQueriesByStatus:e=>r.default.get(`/queries/status/${e}`),getQueriesByUser:e=>r.default.get("/queries/my-raised"),searchQueries:e=>{const t=new URLSearchParams(e).toString();return r.default.get(`/queries/search?${t}`)},getQueryStats:e=>r.default.get(`/queries/recent?days=${e}`),getQueryCountsByTeam:e=>r.default.get(`/queries/stats/count-open/${e}`),getAvgResolutionTimeByTeam:e=>r.default.get(`/queries/stats/avg-resolution-time/${e}`),getOverdueQueries:function(){return r.default.get("/queries/overdue")},getOverdueQueriesCountByTeam:e=>r.default.get(`/queries/stats/overdue-count/${e}`),getQueriesResolvedTodayByTeam:e=>r.default.get(`/queries/stats/resolved-today/${e}`),getQuerySLAStatus:e=>r.default.get(`/queries/${e}/is-overdue`),getQueriesNearingSLA:function(){return r.default.get("/queries/needing-attention")},addQueryComment:(e,t)=>r.default.post(`/queries/${e}/comments`,{comment:t}),getQueryComments:e=>r.default.get(`/queries/${e}/comments`),updateQueryPriority:(e,t)=>r.default.put(`/queries/${e}/priority`,{priority:t}),escalateQuery:(e,t)=>r.default.put(`/queries/${e}/priority`,{priorityLevel:"HIGH"}),uploadQueryDocuments:(e,t)=>r.default.upload(`/queries/${e}/documents`,t),uploadResponseDocuments:(e,t,o)=>r.default.upload(`/queries/${e}/responses/${t}/documents`,o),getQueryDocuments:e=>r.default.get(`/queries/${e}/documents`),downloadQueryDocument:(e,t)=>r.default.download(`/queries/${e}/documents/${t}/download`),deleteQueryDocument:(e,t)=>r.default.delete(`/queries/${e}/documents/${t}`)}},5423:(e,t,o)=>{o.d(t,{PK:()=>f,kz:()=>u,m6:()=>c,ww:()=>d,yE:()=>p});var r=o(4135),a=o(1686),s=(o(5043),o(3719)),l=o(1028),n=o(579);const i=e=>{let{children:t,roles:o=[],requireAll:l=!1,fallback:i=null,loading:d=!1,showFallback:u=!0}=e;if(d)return(0,n.jsx)(a.A,{size:"large"});if(!(0,s.wR)())return u?(0,n.jsx)(r.Ay,{status:"warning",title:"Authentication Required",subTitle:"Please log in to access this content."}):null;if(!o||0===o.length)return t;const c=(0,s.qc)(),f=l?o.every(e=>(0,s.hf)(e)):o.some(e=>(0,s.hf)(e));return c||f?t:i||(u?(0,n.jsx)(r.Ay,{status:"403",title:"Access Denied",subTitle:`This content requires one of the following roles: ${o.join(", ")} or ADMIN privileges`}):null)},d=e=>{let{children:t,fallback:o=null,showFallback:a=!0}=e;if(!(0,s.wR)())return a?(0,n.jsx)(r.Ay,{status:"warning",title:"Authentication Required",subTitle:"Please log in to access this content."}):null;const i=(0,s.HW)(),d=(0,s.qc)(),u=(0,s.hf)("ADMIN"),c=(0,s.hf)("admin"),f=(0,s.hf)("ROLE_ADMIN"),p=(0,s.gf)();let m=!1,w=!1;if(p)try{var g,y;const e=l.A.getTokenPayload(p);m=!0===(null===e||void 0===e?void 0:e.isAdmin),w=(null===e||void 0===e||null===(g=e.roles)||void 0===g?void 0:g.includes("ADMIN"))||(null===e||void 0===e||null===(y=e.authorities)||void 0===y?void 0:y.includes("ADMIN"))}catch(E){console.error("Error checking token in AdminOnly:",E)}const h=d||u||c||f||m||w;return console.log("AdminOnly Enhanced Debug:",{currentUser:i,adminStatus:d,hasAdminRole:u,hasAdminRoleLower:c,hasRoleAdmin:f,tokenIsAdmin:m,tokenHasAdminRole:w,finalHasAccess:h,token:p?"present":"missing"}),h?t:o||(a?(0,n.jsx)(r.Ay,{status:"403",title:"Access Denied",subTitle:`This content requires administrator privileges. Debug: user=${i}, isAdmin=${d}, hasRole=${u}, tokenAdmin=${m}`}):null)},u=e=>{let{children:t,fallback:o=null,showFallback:r=!0}=e;return(0,n.jsx)(i,{roles:["JVC_USER","JVC_ROLE","ADMIN"],fallback:o,showFallback:r,children:t})},c=e=>{let{children:t,fallback:o=null,showFallback:r=!0}=e;return(0,n.jsx)(i,{roles:["CQS_USER","CQS_ROLE","ADMIN"],fallback:o,showFallback:r,children:t})},f=e=>{let{children:t,fallback:o=null,showFallback:r=!0}=e;return(0,n.jsx)(i,{roles:["TECH_USER","TECH_ROLE","ADMIN"],fallback:o,showFallback:r,children:t})},p=e=>{let{children:t,fallback:o=null,showFallback:r=!0}=e;return(0,n.jsx)(i,{roles:["PLANT_USER","PLANT_ROLE","ADMIN"],fallback:o,showFallback:r,children:t})}},7933:(e,t,o)=>{o.d(t,{A:()=>k});var r=o(6237),a=o(1966),s=o(9470),l=o(132),n=o(4733),i=o(2261),d=o(5206),u=o(9073),c=o(4522),f=o(6569),p=o(7692),m=o(6051),w=o(3927),g=o(9677),y=o(5043),h=o(2868),E=o(3661),C=o(579);const{Text:A}=w.A,{Dragger:I}=g.A,k=e=>{let{queryId:t,responseId:o,onUploadComplete:w,maxFiles:g=5,disabled:k=!1,context:D="query"}=e;const[R,$]=(0,y.useState)([]),[T,P]=(0,y.useState)(!1),[x,S]=(0,y.useState)(0),N=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,t)).toFixed(2))} ${["Bytes","KB","MB","GB"][t]}`},O="response"===D?"Response":"Query",_=R.filter(e=>"done"===e.status).length;return(0,C.jsx)(u.A,{size:"small",title:(0,C.jsxs)(m.A,{children:[(0,C.jsx)(n.A,{}),(0,C.jsxs)("span",{children:["Upload Documents to ",O]})]}),style:{backgroundColor:"#fafafa",border:"1px dashed #d9d9d9"},children:(0,C.jsxs)(m.A,{direction:"vertical",style:{width:"100%"},children:[(0,C.jsx)(i.A,{message:`Document Upload for ${O}`,description:(0,C.jsxs)("ul",{style:{margin:0,paddingLeft:20},children:[(0,C.jsx)("li",{children:"Supported formats: PDF, Word (.doc, .docx), Excel (.xls, .xlsx), Images (JPG, PNG)"}),(0,C.jsx)("li",{children:"Maximum file size: 25MB per file"}),(0,C.jsxs)("li",{children:["Maximum ",g," files allowed"]}),(0,C.jsxs)("li",{children:["Files will be attached to this ",D.toLowerCase()]})]}),type:"info",showIcon:!0,size:"small",style:{marginBottom:16}}),(0,C.jsxs)(I,{multiple:!0,fileList:R,onChange:e=>{let{fileList:t}=e;t.length>g&&(f.Ay.warning(`Maximum ${g} files allowed. Only the first ${g} files will be processed.`),t=t.slice(0,g));const o=t.map(e=>{if(e.originFileObj){const t=(e=>{const t=h.rb.MAX_UPLOAD_SIZE,o=e.name.toLowerCase().substring(e.name.lastIndexOf("."));return{isValidType:["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","image/jpeg","image/jpg","image/png"].includes(e.type)||[".pdf",".doc",".docx",".xls",".xlsx",".jpg",".jpeg",".png"].includes(o),isValidSize:e.size<=t,type:e.type,size:e.size,extension:o}})(e.originFileObj);t.isValidType?t.isValidSize?(e.status="done",e.percent=100):(e.status="error",e.response=`File size exceeds 25MB limit (${(e.originFileObj.size/1024/1024).toFixed(2)}MB).`):(e.status="error",e.response="Invalid file type. Only PDF, Word, Excel, and image files (JPG, PNG) are allowed."),e.size=e.originFileObj.size,e.type=e.originFileObj.type,e.lastModified=e.originFileObj.lastModified}return e});$(o);const r=o.filter(e=>"done"===e.status).length,a=o.filter(e=>"error"===e.status).length;a>0?f.Ay.warning(`${a} file(s) have validation errors. Please check file types and sizes.`):r>0&&f.Ay.success(`${r} file(s) ready for upload.`)},beforeUpload:()=>!1,accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png",disabled:k||T,style:{marginBottom:16},children:[(0,C.jsx)("p",{className:"ant-upload-drag-icon",children:(0,C.jsx)(l.A,{})}),(0,C.jsx)("p",{className:"ant-upload-text",children:"Click or drag files to this area to upload"}),(0,C.jsx)("p",{className:"ant-upload-hint",children:"Support for PDF, Word, Excel, and image files. Maximum 25MB each."})]}),T&&x>0&&(0,C.jsx)(u.A,{size:"small",style:{marginBottom:16},children:(0,C.jsxs)(m.A,{direction:"vertical",style:{width:"100%"},children:[(0,C.jsx)(A,{children:"Uploading documents..."}),(0,C.jsx)(p.A,{percent:x,status:100===x?"success":"active",strokeColor:{"0%":"#108ee9","100%":"#87d068"}})]})}),R.length>0&&(0,C.jsx)(u.A,{size:"small",title:`Selected Files (${R.length}/${g})`,style:{marginBottom:16},children:(0,C.jsx)(c.A,{size:"small",dataSource:R,renderItem:e=>(0,C.jsx)(c.A.Item,{actions:[(0,C.jsx)(d.Ay,{type:"text",danger:!0,icon:(0,C.jsx)(a.A,{}),onClick:()=>(e=>{const t=R.filter(t=>t.uid!==e.uid);$(t)})(e),size:"small",disabled:T,children:"Remove"},"remove")],children:(0,C.jsx)(c.A.Item.Meta,{avatar:"done"===e.status?(0,C.jsx)(r.A,{style:{color:"#52c41a"}}):(0,C.jsx)(s.A,{style:{color:"#ff4d4f"}}),title:(0,C.jsxs)(m.A,{children:[(0,C.jsx)(A,{strong:"done"===e.status,type:"error"===e.status?"danger":"default",children:e.name}),e.size&&(0,C.jsxs)(A,{type:"secondary",children:["(",N(e.size),")"]})]}),description:"error"===e.status?(0,C.jsx)(A,{type:"danger",children:e.response}):(0,C.jsx)(A,{type:"secondary",children:"Ready for upload"})})})})}),(0,C.jsx)("div",{style:{textAlign:"center"},children:(0,C.jsx)(d.Ay,{type:"primary",icon:(0,C.jsx)(n.A,{}),onClick:async()=>{const e=R.filter(e=>"done"===e.status);if(0!==e.length)if(t)try{P(!0),S(0);const r=e.map(e=>e.originFileObj||e),a=setInterval(()=>{S(e=>e>=90?(clearInterval(a),90):e+10)},200);let s;s="response"===D&&o?await E.B.uploadResponseDocuments(t,o,r):await E.B.uploadQueryDocuments(t,r),clearInterval(a),S(100),f.Ay.success(`Successfully uploaded ${e.length} document(s) to the ${D}.`),$([]),S(0),w&&w(s)}catch(r){console.error("Error uploading documents:",r),f.Ay.error(`Failed to upload documents to ${D}. Please try again.`),S(0)}finally{P(!1)}else f.Ay.error("Query ID is required for document upload.");else f.Ay.error("Please select at least one valid file to upload.")},loading:T,disabled:k||0===_,size:"large",children:T?`Uploading ${_} Document(s)...`:`Upload ${_} Document(s) to ${O}`})}),R.length>0&&(0,C.jsx)(i.A,{message:"File Validation Summary",description:(0,C.jsxs)(m.A,{direction:"vertical",size:"small",children:[(0,C.jsxs)(A,{children:[(0,C.jsx)(r.A,{style:{color:"#52c41a",marginRight:4}}),"Valid files: ",_]}),R.filter(e=>"error"===e.status).length>0&&(0,C.jsxs)(A,{type:"danger",children:[(0,C.jsx)(s.A,{style:{marginRight:4}}),"Files with errors: ",R.filter(e=>"error"===e.status).length]})]}),type:R.filter(e=>"error"===e.status).length>0?"warning":"success",showIcon:!0,size:"small"})]})})}},9394:(e,t,o)=>{o.d(t,{S:()=>a});var r=o(6649);const a={getDashboardSummary:()=>r.default.get("/dashboard/summary"),getOverdueWorkflows:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;return r.default.get(`/workflows/overdue?days=${e}`)},getRecentActivity:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7;return r.default.get(`/workflows/recent/created?days=${e}`)},getWorkflowCountsByState:()=>r.default.get("/dashboard/counts-by-state"),getWorkflowsByPlant:e=>r.default.get(`/workflows/plant/${encodeURIComponent(e)}`),createWorkflow:e=>r.default.post("/workflows",e),getWorkflow:e=>r.default.get(`/workflows/${e}`),updateWorkflow:(e,t)=>r.default.put(`/workflows/${e}`,t),deleteWorkflow:e=>r.default.delete(`/workflows/${e}`),transitionWorkflowState:(e,t,o)=>r.default.put(`/workflows/${e}/transition`,{newState:t,comment:o}),extendWorkflow:(e,t)=>r.default.put(`/workflows/${e}/extend`,t),completeWorkflow:(e,t)=>r.default.put(`/workflows/${e}/complete`,t),extendToMultiplePlantsSmartly:async e=>{try{const t=await r.default.withRetry(()=>r.default.post("/workflows/extend-to-plants",e),3,1e3);return{...t,documentReuse:t.documentReuse||{totalReusedDocuments:0,reusedDocuments:[],reuseStrategy:"NONE",sourceDescription:"No documents available for reuse"}}}catch(t){throw console.error("[WorkflowAPI] Smart extension failed:",t),{...t,context:"SMART_PLANT_EXTENSION",extensionData:e}}},searchWorkflows:e=>r.default.post("/workflows/search",e),getWorkflowsByState:e=>r.default.get(`/workflows/state/${e}`),getWorkflowsByUser:e=>r.default.get(`/workflows/initiated-by/${encodeURIComponent(e)}`),canTransitionTo:(e,t)=>r.default.get(`/workflows/${e}/can-transition/${t}`),isReadyForCompletion:e=>r.default.get(`/workflows/${e}/ready-for-completion`),checkWorkflowExists:(e,t,o)=>r.default.get(`/workflows/check-exists?projectCode=${encodeURIComponent(e)}&materialCode=${encodeURIComponent(t)}&plantCode=${encodeURIComponent(o)}`),getWorkflowStats:e=>r.default.get(`/workflows/stats?range=${e}`),getCompletionRateByPlant:()=>r.default.get("/workflows/completion-rate-by-plant"),getWorkflowCompletionTrend:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6;return r.default.get(`/workflows/completion-trend?months=${e}`)},getPendingWorkflows:()=>r.default.get("/workflows/pending"),getWorkflowsWithOpenQueries:()=>r.default.get("/workflows/with-open-queries"),getCountByState:e=>r.default.get(`/workflows/stats/count-by-state/${e}`),getOverdueCount:()=>r.default.get("/workflows/stats/overdue-count"),getWorkflowsWithOpenQueriesCount:()=>r.default.get("/workflows/stats/with-open-queries-count"),getRecentlyCreated:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7;return r.default.get(`/workflows/recent/created?days=${e}`)},getRecentlyCompleted:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7;return r.default.get(`/workflows/recent/completed?days=${e}`)},saveDraftResponses:(e,t)=>r.default.post(`/workflows/${e}/draft-responses`,t),getDraftResponses:e=>r.default.get(`/workflows/${e}/draft-responses`),submitQuestionnaire:(e,t)=>r.default.post(`/workflows/${e}/submit-questionnaire`,t),getWorkflowDocuments:e=>r.default.get(`/workflows/${e}/documents`),getAllWorkflowRelatedDocuments:async e=>{try{return await r.default.withRetry(()=>r.default.get(`/workflows/${e}/documents/all`),2,500)}catch(t){throw console.error(`[WorkflowAPI] Failed to get all documents for workflow ${e}:`,t),{...t,context:"GET_ALL_WORKFLOW_DOCUMENTS",workflowId:e}}},exportWorkflowDocuments:async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{return await r.default.withRetry(()=>r.default.download(`/workflows/${e}/documents/export?includeQueryDocuments=${t}`),2,1e3)}catch(o){throw console.error(`[WorkflowAPI] Failed to export documents for workflow ${e}:`,o),{...o,context:"EXPORT_WORKFLOW_DOCUMENTS",workflowId:e,includeQueryDocuments:t}}},searchUnifiedDocuments:async e=>{try{return await r.default.withRetry(()=>r.default.post("/documents/search/unified",e),2,500)}catch(t){throw console.error("[WorkflowAPI] Unified document search failed:",t),{...t,context:"UNIFIED_DOCUMENT_SEARCH",searchParams:e}}},getUnifiedDocumentInfo:async(e,t)=>{try{return await r.default.withRetry(()=>r.default.get(`/documents/unified-info?projectCode=${encodeURIComponent(e)}&materialCode=${encodeURIComponent(t)}`),2,500)}catch(o){throw console.error(`[WorkflowAPI] Failed to get unified document info for ${e}/${t}:`,o),{...o,context:"GET_UNIFIED_DOCUMENT_INFO",projectCode:e,materialCode:t}}},getReusableDocuments:async(e,t)=>{try{return await r.default.withRetry(()=>r.default.get(`/workflows/documents/reusable?projectCode=${encodeURIComponent(e)}&materialCode=${encodeURIComponent(t)}`),2,500)}catch(o){throw console.error(`[WorkflowAPI] Failed to get reusable documents for ${e}/${t}:`,o),{...o,context:"GET_REUSABLE_DOCUMENTS",projectCode:e,materialCode:t}}},downloadDocument:async e=>{try{return await r.default.withRetry(()=>r.default.download(`/workflows/documents/${e}/download`),3,1e3)}catch(t){throw console.error(`[WorkflowAPI] Failed to download document ${e}:`,t),{...t,context:"DOWNLOAD_DOCUMENT",documentId:e}}},uploadDocument:async(e,t,o)=>{try{return await r.default.withRetry(()=>r.default.upload(`/workflows/${e}/documents`,t,{metadata:JSON.stringify(o)}),2,1e3)}catch(a){throw console.error(`[WorkflowAPI] Failed to upload document to workflow ${e}:`,a),{...a,context:"UPLOAD_DOCUMENT",workflowId:e,fileName:(null===t||void 0===t?void 0:t.name)||"unknown"}}},uploadMultipleDocuments:async function(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=[],s=[];for(const n of t)try{const t=await a.uploadDocument(e,n,o);r.push({file:n.name,result:t,success:!0})}catch(l){console.error(`[WorkflowAPI] Failed to upload ${n.name}:`,l),s.push({file:n.name,error:l,success:!1})}return{successful:r,failed:s,totalFiles:t.length,successCount:r.length,failureCount:s.length}},retryDocumentOperation:async function(e,t){let o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;for(let l=1;l<=r;l++)try{switch(e){case"UPLOAD":return await a.uploadDocument(t.workflowId,t.file,t.metadata);case"DOWNLOAD":return await a.downloadDocument(t.documentId);case"GET_DOCUMENTS":return await a.getAllWorkflowRelatedDocuments(t.workflowId);default:throw new Error(`Unknown operation type: ${e}`)}}catch(s){if(o=s,console.warn(`[WorkflowAPI] Retry attempt ${l}/${r} failed for ${e}:`,s),l<r){const e=1e3*Math.pow(2,l);await new Promise(t=>setTimeout(t,e))}}throw{...o,context:"RETRY_OPERATION_FAILED",operationType:e,maxRetries:r,finalAttempt:!0}},updateAllMaterialNamesFromProjectItemMaster:()=>r.default.post("/workflows/update-material-names"),updateMaterialNameFromProjectItemMaster:e=>r.default.post(`/workflows/${e}/update-material-name`),getQuestionnaireTemplate:e=>{let{materialCode:t,plantCode:o,templateType:a="PLANT_QUESTIONNAIRE"}=e;return r.default.get(`/plant-questionnaire/template?materialCode=${encodeURIComponent(t)}&plantCode=${encodeURIComponent(o)}&templateType=${encodeURIComponent(a)}`)},getCqsData:e=>{let{materialCode:t,plantCode:o}=e;return r.default.get(`/plant-questionnaire/cqs-data?materialCode=${encodeURIComponent(t)}&plantCode=${encodeURIComponent(o)}`)},getPlantSpecificData:e=>{let{plantCode:t,materialCode:o}=e;return r.default.get(`/plant-questionnaire/plant-data?plantCode=${encodeURIComponent(t)}&materialCode=${encodeURIComponent(o)}`)},getOrCreatePlantSpecificData:e=>{let{plantCode:t,materialCode:o,workflowId:a}=e;return r.default.post(`/plant-questionnaire/plant-data/init?plantCode=${encodeURIComponent(t)}&materialCode=${encodeURIComponent(o)}&workflowId=${a}`)},savePlantSpecificData:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SYSTEM";return r.default.post(`/plant-questionnaire/plant-data/save?modifiedBy=${encodeURIComponent(t)}`,e)},saveDraftPlantResponses:(e,t)=>r.default.post(`/plant-questionnaire/draft?workflowId=${e}`,t),submitPlantQuestionnaire:(e,t)=>r.default.post(`/plant-questionnaire/submit?workflowId=${e}`,t),getPlantQuestionnaireStats:e=>{let{plantCode:t,materialCode:o}=e;const a=new URLSearchParams({plantCode:t});return o&&a.append("materialCode",o),r.default.get(`/plant-questionnaire/stats?${a.toString()}`)},getPlantDashboardData:e=>r.default.get(`/plant-questionnaire/dashboard?plantCode=${encodeURIComponent(e)}`),initializeSamplePlantData:e=>r.default.post(`/plant-questionnaire/init-sample-data?plantCode=${encodeURIComponent(e)}`),getDocumentReuseStats:async(e,t)=>{try{return await r.default.withRetry(()=>r.default.get(`/workflows/documents/reuse-stats?projectCode=${encodeURIComponent(e)}&materialCode=${encodeURIComponent(t)}`),2,500)}catch(o){throw console.error(`[WorkflowAPI] Failed to get document reuse stats for ${e}/${t}:`,o),{...o,context:"GET_DOCUMENT_REUSE_STATS",projectCode:e,materialCode:t}}},validateDocumentReuse:async(e,t,o)=>{try{return await r.default.withRetry(()=>r.default.post("/workflows/documents/validate-reuse",{projectCode:e,materialCode:t,plantCodes:o}),2,500)}catch(a){throw console.error(`[WorkflowAPI] Failed to validate document reuse for ${e}/${t}:`,a),{...a,context:"VALIDATE_DOCUMENT_REUSE",projectCode:e,materialCode:t,plantCodes:o}}},getDocumentAuditLog:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const o=new URLSearchParams(t).toString();return await r.default.withRetry(()=>r.default.get(`/workflows/${e}/documents/audit-log?${o}`),2,500)}catch(o){throw console.error(`[WorkflowAPI] Failed to get document audit log for workflow ${e}:`,o),{...o,context:"GET_DOCUMENT_AUDIT_LOG",workflowId:e,options:t}}},handleDocumentError:(e,t)=>{const o={originalError:e,operation:t,timestamp:(new Date).toISOString(),userMessage:"An error occurred with document operation",technicalMessage:e.message,recoveryActions:[],retryable:!1};switch(e.context){case"UPLOAD_DOCUMENT":o.userMessage="Failed to upload document. Please check file size and format.",o.recoveryActions=["Verify file is under 25MB","Check file format is supported (PDF, DOCX, XLSX, JPG, PNG)","Try uploading again","Contact support if problem persists"],o.retryable=!0;break;case"DOWNLOAD_DOCUMENT":o.userMessage="Failed to download document. Please try again.",o.recoveryActions=["Check your internet connection","Try downloading again","Contact support if document is corrupted"],o.retryable=!0;break;case"GET_ALL_WORKFLOW_DOCUMENTS":o.userMessage="Failed to load workflow documents.",o.recoveryActions=["Refresh the page","Check your internet connection","Contact support if problem persists"],o.retryable=!0;break;case"SMART_PLANT_EXTENSION":o.userMessage="Failed to extend workflow to plants. Some documents may not have been reused.",o.recoveryActions=["Check if workflows were created successfully","Manually upload documents if needed","Try the extension again","Contact support for assistance"],o.retryable=!0;break;case"UNIFIED_DOCUMENT_SEARCH":o.userMessage="Document search failed. Please try again.",o.recoveryActions=["Simplify your search terms","Try searching again","Use individual document lists instead"],o.retryable=!0;break;default:"NETWORK"===e.type?(o.userMessage="Network error occurred. Please check your connection.",o.retryable=!0):"TIMEOUT"===e.type?(o.userMessage="Operation timed out. Please try again.",o.retryable=!0):413===e.status?(o.userMessage="File is too large. Please use a smaller file.",o.retryable=!1):415===e.status&&(o.userMessage="File type not supported. Please use PDF, DOCX, XLSX, JPG, or PNG.",o.retryable=!1)}return o}}}}]);
//# sourceMappingURL=180.406c628a.chunk.js.map