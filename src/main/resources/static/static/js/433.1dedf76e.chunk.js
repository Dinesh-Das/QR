"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[433],{6433:(e,r,t)=>{t.r(r),t.d(r,{default:()=>p});var s=t(5206),o=t(6569),a=t(3258),n=t(8918),l=t(3927),i=t(5043),c=t(6649),d=t(579);const{Title:y}=l.A,{TabPane:u}=n.A,g=(e,r)=>{if(!e||!e.length)return;const t=Object.keys(e[0]),s=[t.join(",")].concat(e.map(e=>t.map(r=>{var t;return JSON.stringify(null!==(t=e[r])&&void 0!==t?t:"")}).join(","))).join("\n"),o=new Blob([s],{type:"text/csv"}),a=window.URL.createObjectURL(o),n=document.createElement("a");n.href=a,n.download=r,n.click(),window.URL.revokeObjectURL(a)},p=()=>{const[e,r]=(0,i.useState)([]),[t,l]=(0,i.useState)([]),[p,x]=(0,i.useState)([]),[A,b]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{const e=new AbortController;return(async()=>{b(!0);try{const[t,s,o]=await Promise.all([c.default.get("/reports/users",{signal:e.signal}),c.default.get("/reports/roles",{signal:e.signal}),c.default.get("/reports/activity",{signal:e.signal})]);e.signal.aborted||(r(Array.isArray(t)?t:[]),l(Array.isArray(s)?s:[]),x(Array.isArray(o)?o:[]))}catch(t){e.signal.aborted||(o.Ay.error("Failed to fetch reports"),console.error("Error fetching reports:",t),r([]),l([]),x([]))}finally{e.signal.aborted||b(!1)}})(),()=>{e.abort()}},[]),(0,d.jsxs)("div",{style:{padding:24},children:[(0,d.jsx)(y,{level:2,children:"Reports"}),(0,d.jsxs)(n.A,{defaultActiveKey:"users",children:[(0,d.jsxs)(u,{tab:"Users",children:[(0,d.jsx)(s.Ay,{onClick:()=>g(e,"users_report.csv"),style:{marginBottom:8},children:"Export CSV"}),(0,d.jsx)(a.A,{dataSource:e,rowKey:"id",loading:A,bordered:!0,scroll:{x:!0}})]},"users"),(0,d.jsxs)(u,{tab:"Roles",children:[(0,d.jsx)(s.Ay,{onClick:()=>g(t,"roles_report.csv"),style:{marginBottom:8},children:"Export CSV"}),(0,d.jsx)(a.A,{dataSource:t,rowKey:"id",loading:A,bordered:!0,scroll:{x:!0}})]},"roles"),(0,d.jsxs)(u,{tab:"Activity",children:[(0,d.jsx)(s.Ay,{onClick:()=>g(p,"activity_report.csv"),style:{marginBottom:8},children:"Export CSV"}),(0,d.jsx)(a.A,{dataSource:p,rowKey:"id",loading:A,bordered:!0,scroll:{x:!0}})]},"activity")]})]})}}}]);
//# sourceMappingURL=433.1dedf76e.chunk.js.map