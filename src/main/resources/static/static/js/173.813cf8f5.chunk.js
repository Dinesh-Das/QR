"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[173],{173:(e,s,l)=>{l.d(s,{A:()=>ce});var t=l(6833),r=l(6191),i=l(3117),n=l(119),o=l(6237),a=l(9470),d=l(617),c=l(8463),x=l(5444),h=l(6553),u=l(3927),p=l(9098),j=l(6569),y=l(6051),m=l(6399),g=l(7692),A=l(5206),f=l(2261),v=l(7419),w=l(1645),C=l(9073),S=l(6612),b=l(3217),T=l(2751),z=l(8354),I=l(5043),k=l(6649),R=l(2868),Q=l(1780),E=l(4786),D=l(1334),N=l(6091),q=l(4228),L=l(7326),P=l(1686),B=l(691),M=l(579);const{Panel:O}=L.A,{Text:F}=u.A,H=e=>{var s;let{materialCode:l,workflowId:t,compact:r=!1}=e;const[i,n]=(0,I.useState)(!1),[o,a]=(0,I.useState)(null),[d,c]=(0,I.useState)(null),[x,h]=(0,I.useState)(null),u=(0,I.useCallback)(async()=>{try{n(!0),h(null);const e=[];t&&e.push(k.default.get(`/workflows/${t}`).then(e=>c(e))),l&&e.push(Promise.resolve({id:l,name:`Material ${l}`,description:"Sample material description",category:"Chemical",supplier:"Sample Supplier",hazardClass:"Class 3",physicalState:"Liquid",flashPoint:"25\xb0C",autoIgnitionTemp:"300\xb0C",density:"0.85 g/cm\xb3",solubility:"Soluble in water",ph:"7.2",viscosity:"2.5 cP"}).then(e=>a(e))),await Promise.all(e)}catch(x){console.error("Failed to load material context:",x),h("Failed to load material information")}finally{n(!1)}},[t,l]);(0,I.useEffect)(()=>{(l||t)&&u()},[l,t,u]);const p=e=>({JVC_PENDING:"blue",PLANT_PENDING:"orange",CQS_PENDING:"red",TECH_PENDING:"purple",COMPLETED:"green"}[e]||"default"),j=e=>({"Class 1":"red","Class 2":"orange","Class 3":"yellow","Class 4":"blue","Class 5":"green","Class 6":"purple","Class 7":"magenta","Class 8":"cyan","Class 9":"lime"}[e]||"default");return i?(0,M.jsx)(C.A,{size:"small",children:(0,M.jsxs)("div",{style:{textAlign:"center",padding:"20px"},children:[(0,M.jsx)(P.A,{size:"small"}),(0,M.jsx)("div",{style:{marginTop:8},children:"Loading material context..."})]})}):x?(0,M.jsx)(f.A,{message:"Context Error",description:x,type:"warning",showIcon:!0,size:"small"}):r?(0,M.jsx)(C.A,{size:"small",title:"Material Context",style:{marginBottom:16},children:(0,M.jsxs)(y.A,{direction:"vertical",style:{width:"100%"},children:[o&&(0,M.jsxs)("div",{children:[(0,M.jsx)(F,{strong:!0,children:"Material:"})," ",o.name," (",o.id,")",(0,M.jsx)("br",{}),(0,M.jsx)(F,{strong:!0,children:"Category:"})," ",o.category,(0,M.jsx)("br",{}),(0,M.jsx)(F,{strong:!0,children:"Hazard Class:"})," ",(0,M.jsx)(m.A,{color:j(o.hazardClass),children:o.hazardClass})]}),d&&(0,M.jsxs)("div",{children:[(0,M.jsx)(F,{strong:!0,children:"Workflow State:"})," ",(0,M.jsx)(m.A,{color:p(d.state),children:null===(g=d.state)||void 0===g?void 0:g.replace("_"," ")}),(0,M.jsx)("br",{}),(0,M.jsx)(F,{strong:!0,children:"Plant:"})," ",d.assignedPlant]})]})}):(0,M.jsxs)(C.A,{title:(0,M.jsxs)(y.A,{children:[(0,M.jsx)(E.A,{}),(0,M.jsx)("span",{children:"Material Context"})]}),size:"small",style:{marginBottom:16},children:[(0,M.jsxs)(L.A,{size:"small",ghost:!0,children:[o&&(0,M.jsxs)(O,{header:(0,M.jsxs)(y.A,{children:[(0,M.jsx)(D.A,{}),(0,M.jsx)("span",{children:"Material Properties"})]}),children:[(0,M.jsxs)(B.A,{size:"small",column:2,bordered:!0,children:[(0,M.jsx)(B.A.Item,{label:"Material ID",children:o.id}),(0,M.jsx)(B.A.Item,{label:"Name",children:o.name}),(0,M.jsx)(B.A.Item,{label:"Category",children:(0,M.jsx)(m.A,{color:"blue",children:o.category})}),(0,M.jsx)(B.A.Item,{label:"Supplier",children:o.supplier}),(0,M.jsx)(B.A.Item,{label:"Hazard Class",children:(0,M.jsx)(m.A,{color:j(o.hazardClass),children:o.hazardClass})}),(0,M.jsx)(B.A.Item,{label:"Physical State",children:o.physicalState}),(0,M.jsx)(B.A.Item,{label:"Flash Point",children:(0,M.jsx)(F,{type:"danger",children:o.flashPoint})}),(0,M.jsx)(B.A.Item,{label:"Auto-Ignition Temp",children:(0,M.jsx)(F,{type:"danger",children:o.autoIgnitionTemp})}),(0,M.jsx)(B.A.Item,{label:"Density",children:o.density}),(0,M.jsx)(B.A.Item,{label:"Solubility",children:o.solubility}),(0,M.jsx)(B.A.Item,{label:"pH",children:o.ph}),(0,M.jsx)(B.A.Item,{label:"Viscosity",children:o.viscosity})]}),o.description&&(0,M.jsxs)("div",{style:{marginTop:12},children:[(0,M.jsx)(F,{strong:!0,children:"Description:"}),(0,M.jsx)("div",{style:{marginTop:4,padding:8,background:"#f5f5f5",borderRadius:4},children:o.description})]})]},"material"),d&&(0,M.jsx)(O,{header:(0,M.jsxs)(y.A,{children:[(0,M.jsx)(N.A,{}),(0,M.jsx)("span",{children:"Workflow Information"})]}),children:(0,M.jsxs)(B.A,{size:"small",column:2,bordered:!0,children:[(0,M.jsx)(B.A.Item,{label:"Workflow ID",children:d.id}),(0,M.jsx)(B.A.Item,{label:"Current State",children:(0,M.jsx)(m.A,{color:p(d.state),children:null===(s=d.state)||void 0===s?void 0:s.replace("_"," ")})}),(0,M.jsx)(B.A.Item,{label:"Assigned Plant",children:d.assignedPlant}),(0,M.jsx)(B.A.Item,{label:"Initiated By",children:d.initiatedBy}),(0,M.jsx)(B.A.Item,{label:"Created",children:d.createdAt&&new Date(d.createdAt).toLocaleString()}),(0,M.jsx)(B.A.Item,{label:"Last Modified",children:d.lastModified&&new Date(d.lastModified).toLocaleString()})]})},"workflow"),(0,M.jsx)(O,{header:(0,M.jsxs)(y.A,{children:[(0,M.jsx)(q.A,{}),(0,M.jsx)("span",{children:"Safety Guidelines"})]}),children:(0,M.jsx)(f.A,{message:"Safety Reminders",description:(0,M.jsxs)("ul",{style:{marginBottom:0,paddingLeft:20},children:[(0,M.jsx)("li",{children:"Always verify material properties before providing guidance"}),(0,M.jsx)("li",{children:"Consider plant-specific safety protocols and equipment"}),(0,M.jsx)("li",{children:"Reference latest SDS (Safety Data Sheet) when available"}),(0,M.jsx)("li",{children:"Escalate to safety team for Class 1-2 hazardous materials"}),(0,M.jsx)("li",{children:"Ensure compliance with local and international regulations"})]}),type:"info",showIcon:!0})},"safety")]}),(0,M.jsx)("div",{style:{marginTop:12,textAlign:"right"},children:(0,M.jsx)(A.Ay,{size:"small",icon:(0,M.jsx)(E.A,{}),onClick:u,children:"Refresh Context"})})]});var g};var $=l(6523),U=l(6989),G=l(9330),W=l(2878),_=l(1966),V=l(1210),J=l(3722),K=l(9472),Y=l(4522),Z=l(6651),X=l(647),ee=l(3661);const{Text:se,Title:le}=u.A,te=e=>{let{queryId:s,allowDelete:l=!1,onDocumentDeleted:t,showBulkActions:r=!0,currentUser:n}=e;const[o,a]=(0,I.useState)([]),[d,c]=(0,I.useState)(!0),[x,h]=(0,I.useState)(new Set),[u,p]=(0,I.useState)(new Set);(0,I.useEffect)(()=>{s&&g()},[s,g]);const g=(0,I.useCallback)(async()=>{try{c(!0);const e=await ee.B.getQueryDocuments(s);a(e||[])}catch(e){console.error("Error fetching query documents:",e),j.Ay.error("Failed to load documents. Please try again."),a([])}finally{c(!1)}},[s]),v=e=>{if(!e||0===e)return"0 Bytes";const s=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,s)).toFixed(2))} ${["Bytes","KB","MB","GB"][s]}`},w=e=>{if(!e)return"Unknown";try{return new Date(e).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(s){return"Invalid Date"}},S=e=>{if(!e)return(0,M.jsx)($.A,{});const s={fontSize:"16px"};switch(e.toLowerCase().split(".").pop()){case"pdf":return(0,M.jsx)(N.A,{style:{...s,color:"#ff4d4f"}});case"doc":case"docx":return(0,M.jsx)(N.A,{style:{...s,color:"#1890ff"}});case"xls":case"xlsx":return(0,M.jsx)(N.A,{style:{...s,color:"#52c41a"}});case"jpg":case"jpeg":case"png":return(0,M.jsx)($.A,{style:{...s,color:"#722ed1"}});default:return(0,M.jsx)($.A,{style:s})}},b=async e=>{try{h(s=>new Set([...s,e.id]));const l=await ee.B.downloadQueryDocument(s,e.id),t=window.URL.createObjectURL(l),r=e.createElement("a");r.href=t,r.download=e.originalFileName||e.fileName,e.body.appendChild(r),r.click(),window.URL.revokeObjectURL(t),e.body.removeChild(r),j.Ay.success(`Downloaded ${e.originalFileName||e.fileName}`)}catch(l){console.error("Error downloading document:",l),j.Ay.error("Failed to download document. Please try again.")}finally{h(s=>{const l=new Set(s);return l.delete(e.id),l})}},T=async e=>{try{p(s=>new Set([...s,e.id])),await ee.B.deleteQueryDocument(s,e.id),j.Ay.success(`Deleted ${e.originalFileName||e.fileName}`),a(s=>s.filter(s=>s.id!==e.id)),t&&t(e)}catch(l){console.error("Error deleting document:",l),j.Ay.error("Failed to delete document. Please try again.")}finally{p(s=>{const l=new Set(s);return l.delete(e.id),l})}},k=o.reduce((e,s)=>{const l=s.responseId?"response":"query";return e[l]||(e[l]=[]),e[l].push(s),e},{}),R=e=>!!l&&(!!n&&(e.uploadedBy===n||"ADMIN"===n.role));return d?(0,M.jsx)(C.A,{children:(0,M.jsxs)("div",{style:{textAlign:"center",padding:"20px"},children:[(0,M.jsx)(P.A,{size:"large"}),(0,M.jsx)("div",{style:{marginTop:"16px"},children:(0,M.jsx)(se,{type:"secondary",children:"Loading documents..."})})]})}):0===o.length?(0,M.jsx)(C.A,{children:(0,M.jsx)(K.A,{image:K.A.PRESENTED_IMAGE_SIMPLE,description:(0,M.jsxs)(y.A,{direction:"vertical",children:[(0,M.jsx)(se,{type:"secondary",children:"No documents attached to this query"}),(0,M.jsx)(se,{type:"secondary",style:{fontSize:"12px"},children:"Documents can be attached when creating queries or responding to them"})]})})}):(0,M.jsx)(C.A,{title:(0,M.jsxs)(y.A,{children:[(0,M.jsx)(U.A,{}),(0,M.jsxs)("span",{children:["Query Documents (",o.length,")"]})]}),extra:r&&o.length>0&&(0,M.jsx)(y.A,{children:(0,M.jsx)(A.Ay,{icon:(0,M.jsx)(G.A,{}),onClick:async()=>{if(0!==o.length){j.Ay.info(`Starting download of ${o.length} documents...`);for(const s of o)try{await b(s),await new Promise(e=>setTimeout(e,500))}catch(e){console.error(`Failed to download ${s.originalFileName}:`,e)}}else j.Ay.warning("No documents to download.")},size:"small",children:"Download All"})}),children:(0,M.jsxs)(y.A,{direction:"vertical",style:{width:"100%"},children:[(0,M.jsx)(f.A,{message:`${o.length} document(s) attached to this query`,description:(0,M.jsxs)(y.A,{children:[k.query&&(0,M.jsxs)(se,{type:"secondary",children:[k.query.length," from original query"]}),k.response&&(0,M.jsxs)(se,{type:"secondary",children:[k.response.length," from responses"]})]}),type:"info",showIcon:!0,size:"small"}),k.query&&k.query.length>0&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)(le,{level:5,children:[(0,M.jsx)(W.A,{style:{color:"#1890ff"}}),(0,M.jsxs)("span",{style:{marginLeft:"8px"},children:["Original Query Documents (",k.query.length,")"]})]}),(0,M.jsx)(Y.A,{size:"small",dataSource:k.query,renderItem:e=>(0,M.jsx)(Y.A.Item,{actions:[(0,M.jsx)(Z.A,{title:"Download document",children:(0,M.jsx)(A.Ay,{type:"text",icon:(0,M.jsx)(G.A,{}),onClick:()=>b(e),loading:x.has(e.id),size:"small"})},"download"),...R(e)?[(0,M.jsx)(X.A,{title:"Delete Document",description:"Are you sure you want to delete this document?",onConfirm:()=>T(e),okText:"Yes",cancelText:"No",icon:(0,M.jsx)(W.A,{style:{color:"red"}}),children:(0,M.jsx)(Z.A,{title:"Delete document",children:(0,M.jsx)(A.Ay,{type:"text",danger:!0,icon:(0,M.jsx)(_.A,{}),loading:u.has(e.id),size:"small"})})},"delete")]:[]],children:(0,M.jsx)(Y.A.Item.Meta,{avatar:S(e.originalFileName),title:(0,M.jsxs)(y.A,{children:[(0,M.jsx)(se,{strong:!0,children:e.originalFileName||e.fileName}),(0,M.jsx)(m.A,{color:"blue",size:"small",children:"Query"})]}),description:(0,M.jsx)(y.A,{direction:"vertical",size:"small",children:(0,M.jsxs)(y.A,{size:"large",children:[(0,M.jsxs)(se,{type:"secondary",children:[(0,M.jsx)($.A,{style:{marginRight:"4px"}}),v(e.fileSize)]}),(0,M.jsxs)(se,{type:"secondary",children:[(0,M.jsx)(V.A,{style:{marginRight:"4px"}}),w(e.uploadedAt)]}),(0,M.jsxs)(se,{type:"secondary",children:[(0,M.jsx)(J.A,{style:{marginRight:"4px"}}),e.uploadedBy||"Unknown"]})]})})})})})]}),k.response&&k.response.length>0&&(0,M.jsxs)(M.Fragment,{children:[k.query&&(0,M.jsx)(z.A,{}),(0,M.jsxs)(le,{level:5,children:[(0,M.jsx)(i.A,{style:{color:"#52c41a"}}),(0,M.jsxs)("span",{style:{marginLeft:"8px"},children:["Response Documents (",k.response.length,")"]})]}),(0,M.jsx)(Y.A,{size:"small",dataSource:k.response,renderItem:e=>(0,M.jsx)(Y.A.Item,{actions:[(0,M.jsx)(Z.A,{title:"Download document",children:(0,M.jsx)(A.Ay,{type:"text",icon:(0,M.jsx)(G.A,{}),onClick:()=>b(e),loading:x.has(e.id),size:"small"})},"download"),...R(e)?[(0,M.jsx)(X.A,{title:"Delete Document",description:"Are you sure you want to delete this document?",onConfirm:()=>T(e),okText:"Yes",cancelText:"No",icon:(0,M.jsx)(W.A,{style:{color:"red"}}),children:(0,M.jsx)(Z.A,{title:"Delete document",children:(0,M.jsx)(A.Ay,{type:"text",danger:!0,icon:(0,M.jsx)(_.A,{}),loading:u.has(e.id),size:"small"})})},"delete")]:[]],children:(0,M.jsx)(Y.A.Item.Meta,{avatar:S(e.originalFileName),title:(0,M.jsxs)(y.A,{children:[(0,M.jsx)(se,{strong:!0,children:e.originalFileName||e.fileName}),(0,M.jsx)(m.A,{color:"green",size:"small",children:"Response"}),e.responseId&&(0,M.jsxs)(m.A,{color:"orange",size:"small",children:["#",e.responseId]})]}),description:(0,M.jsx)(y.A,{direction:"vertical",size:"small",children:(0,M.jsxs)(y.A,{size:"large",children:[(0,M.jsxs)(se,{type:"secondary",children:[(0,M.jsx)($.A,{style:{marginRight:"4px"}}),v(e.fileSize)]}),(0,M.jsxs)(se,{type:"secondary",children:[(0,M.jsx)(V.A,{style:{marginRight:"4px"}}),w(e.uploadedAt)]}),(0,M.jsxs)(se,{type:"secondary",children:[(0,M.jsx)(J.A,{style:{marginRight:"4px"}}),e.uploadedBy||"Unknown"]})]})})})})})]})]})})};var re=l(7933),ie=l(8365);const{TextArea:ne}=x.A,{Option:oe}=h.A,{Text:ae,Title:de}=u.A,ce=e=>{let{team:s}=e;const[l,u]=(0,I.useState)(!1),[E,D]=(0,I.useState)([]),[N,q]=(0,I.useState)([]),[L,P]=(0,I.useState)(null),[B,O]=(0,I.useState)(!1),[F]=p.A.useForm(),[$,U]=(0,I.useState)([]),[G,W]=(0,I.useState)(null),[_,V]=(0,I.useState)([]),[J,K]=(0,I.useState)({status:"all",priority:"all",material:"",daysOpen:"all",project:"",plant:"",assignedTeam:"all",hasAttachments:"all"}),[Y,Z]=(0,I.useState)({total:0,open:0,resolved:0,resolvedToday:0,overdue:0,avgResolutionTime:0}),X=(0,I.useCallback)(async e=>{try{u(!0);const l=await k.default.get(`/queries/inbox/${s}`,{signal:e});null!==e&&void 0!==e&&e.aborted||D(l)}catch(l){null!==e&&void 0!==e&&e.aborted||(console.error("Failed to load queries:",l),j.Ay.error("Failed to load queries"))}finally{u(!1)}},[s]),ee=(0,I.useCallback)(async e=>{try{const[l,t,r,i,n]=await Promise.all([k.default.get(`/queries/stats/count-open/${s}`,{signal:e}).catch(()=>0),k.default.get(`/queries/stats/count-resolved/${s}`,{signal:e}).catch(()=>0),k.default.get(`/queries/stats/resolved-today/${s}`,{signal:e}).catch(()=>0),k.default.get(`/queries/stats/overdue-count/${s}`,{signal:e}).catch(()=>0),k.default.get(`/queries/stats/avg-resolution-time/${s}`,{signal:e}).catch(()=>0)]);null!==e&&void 0!==e&&e.aborted||Z({total:l+t,open:l,resolved:t,resolvedToday:r,overdue:i,avgResolutionTime:n})}catch(l){null!==e&&void 0!==e&&e.aborted||console.error("Failed to load stats:",l)}},[s]),se=(0,I.useCallback)(()=>{let e=[...E];if("all"!==J.status&&(e=e.filter(e=>e.status===J.status)),"all"!==J.priority&&(e=e.filter(e=>e.priorityLevel===J.priority)),J.material&&(e=e.filter(e=>{var s,l;return(null===(s=e.materialCode)||void 0===s?void 0:s.toLowerCase().includes(J.material.toLowerCase()))||(null===(l=e.materialName)||void 0===l?void 0:l.toLowerCase().includes(J.material.toLowerCase()))})),J.project&&(e=e.filter(e=>{var s;return null===(s=e.projectCode)||void 0===s?void 0:s.toLowerCase().includes(J.project.toLowerCase())})),J.plant&&(e=e.filter(e=>{var s;return null===(s=e.plantCode)||void 0===s?void 0:s.toLowerCase().includes(J.plant.toLowerCase())})),"all"!==J.assignedTeam&&(e=e.filter(e=>e.assignedTeam===J.assignedTeam)),"all"!==J.daysOpen){const s=parseInt(J.daysOpen);e=e.filter(e=>e.daysOpen>=s)}"all"!==J.hasAttachments&&("with"===J.hasAttachments?e=e.filter(e=>(e.documentCount||0)>0):"without"===J.hasAttachments&&(e=e.filter(e=>0===(e.documentCount||0)))),q(e)},[E,J]);(0,I.useEffect)(()=>{const e=new AbortController;return(async()=>{try{await Promise.all([X(e.signal),ee(e.signal)])}catch(s){e.signal.aborted||console.error("Error loading query inbox data:",s)}})(),()=>{e.abort()}},[s,X,ee]),(0,I.useEffect)(()=>{se()},[E,J,se]);const le=(0,I.useCallback)(async e=>{try{const s=await k.default.get(`/queries/${e}/documents`);V(s)}catch(s){console.error("Failed to load query documents:",s),V([])}},[]),ce=e=>e===R.cS.OPEN?"red":"green",xe=e=>({LOW:"blue",MEDIUM:"orange",HIGH:"red",URGENT:"purple"}[e]||"default"),he=e=>e>=3?"#ff4d4f":e>=2?"#faad14":"#52c41a",ue=[{title:"Material Context",dataIndex:"materialCode",key:"materialContext",width:180,render:(e,s)=>(0,M.jsxs)("div",{children:[(0,M.jsx)(ae,{strong:!0,children:e}),s.materialName&&(0,M.jsx)("div",{style:{fontSize:"12px",color:"#666"},children:s.materialName}),s.projectCode&&(0,M.jsxs)("div",{style:{fontSize:"11px",color:"#999"},children:["Project: ",s.projectCode]}),s.plantCode&&(0,M.jsxs)("div",{style:{fontSize:"11px",color:"#999"},children:["Plant: ",s.plantCode]})]})},{title:"Query",dataIndex:"question",key:"question",width:300,ellipsis:!0,render:e=>(0,M.jsx)("div",{children:(0,M.jsx)(ae,{style:{color:"#1890ff"},children:e||"No query text available"})})},{title:"Attachments",key:"attachments",width:100,render:(e,s)=>{const l=s.documentCount||0;return l>0?(0,M.jsxs)(y.A,{children:[(0,M.jsx)(t.A,{style:{color:"#1890ff"}}),(0,M.jsx)(ae,{type:"secondary",children:l})]}):(0,M.jsx)(ae,{type:"secondary",children:"-"})}},{title:"Field",dataIndex:"fieldName",key:"fieldName",width:120,render:e=>e?(0,M.jsx)(m.A,{color:"blue",children:e}):(0,M.jsx)(ae,{type:"secondary",children:"-"})},{title:"Priority",dataIndex:"priorityLevel",key:"priorityLevel",width:80,render:e=>(0,M.jsx)(m.A,{color:xe(e),children:e||R.fz.MEDIUM})},{title:"Status",dataIndex:"status",key:"status",width:80,render:e=>(0,M.jsx)(m.A,{color:ce(e),children:e})},{title:"Days Open",dataIndex:"daysOpen",key:"daysOpen",width:100,render:(e,s)=>{const{progress:l,status:t}=(e=>{const s=Math.min(e/3*100,100);let l="normal";return s>=100?l="exception":s>=80&&(l="active"),{progress:s,status:l}})(e);return(0,M.jsxs)("div",{children:[(0,M.jsxs)(ae,{style:{color:he(e)},children:[e," days"]}),(0,M.jsx)(g.A,{percent:l,status:t,size:"small",showInfo:!1,style:{marginTop:4}})]})}},{title:"Raised By",dataIndex:"raisedBy",key:"raisedBy",width:100},{title:"Actions",key:"actions",width:120,render:(e,s)=>(0,M.jsx)(y.A,{children:(0,M.jsx)(A.Ay,{size:"small",icon:(0,M.jsx)(r.A,{}),onClick:()=>{P(s),O(!0),le(s.id)},children:"View"})})}];return(0,M.jsx)(Q.qw,{componentName:"QueryInbox",children:(0,M.jsxs)("div",{children:[(0,M.jsx)(f.A,{message:`${s} Team Statistics`,description:"All statistics below are specific to your team and update in real-time.",type:"info",showIcon:!0,style:{marginBottom:16}}),(0,M.jsx)(Q.pE,{operation:"query statistics loading",onRetry:ee,maxRetries:3,children:(0,M.jsxs)(v.A,{gutter:16,style:{marginBottom:16},children:[(0,M.jsx)(w.A,{span:5,children:(0,M.jsx)(C.A,{children:(0,M.jsx)(S.A,{title:"Total Queries",value:Y.total,prefix:(0,M.jsx)(i.A,{})})})}),(0,M.jsx)(w.A,{span:5,children:(0,M.jsx)(C.A,{children:(0,M.jsx)(S.A,{title:"Open Queries",value:Y.open,valueStyle:{color:"#cf1322"},prefix:(0,M.jsx)(n.A,{})})})}),(0,M.jsx)(w.A,{span:5,children:(0,M.jsx)(C.A,{children:(0,M.jsx)(S.A,{title:"Resolved Today",value:Y.resolvedToday,valueStyle:{color:"#3f8600"},prefix:(0,M.jsx)(o.A,{})})})}),(0,M.jsx)(w.A,{span:5,children:(0,M.jsx)(C.A,{children:(0,M.jsx)(S.A,{title:"Overdue",value:Y.overdue,valueStyle:{color:Y.overdue>0?"#cf1322":"#3f8600"},prefix:(0,M.jsx)(a.A,{})})})}),(0,M.jsx)(w.A,{span:4,children:(0,M.jsx)(C.A,{children:(0,M.jsx)(S.A,{title:"Avg Resolution Time",value:Y.avgResolutionTime,suffix:"hrs",precision:1,prefix:(0,M.jsx)(o.A,{})})})})]})}),(0,M.jsx)(C.A,{size:"small",style:{marginBottom:16},children:(0,M.jsxs)(v.A,{gutter:[16,8],align:"middle",children:[(0,M.jsx)(w.A,{span:4,children:(0,M.jsxs)(h.A,{placeholder:"Status",value:J.status,onChange:e=>K({...J,status:e}),style:{width:"100%"},children:[(0,M.jsx)(oe,{value:"all",children:"All Status"}),(0,M.jsx)(oe,{value:"OPEN",children:"Open"}),(0,M.jsx)(oe,{value:"RESOLVED",children:"Resolved"})]})}),(0,M.jsx)(w.A,{span:4,children:(0,M.jsxs)(h.A,{placeholder:"Priority",value:J.priority,onChange:e=>K({...J,priority:e}),style:{width:"100%"},children:[(0,M.jsx)(oe,{value:"all",children:"All Priority"}),(0,M.jsx)(oe,{value:"LOW",children:"Low"}),(0,M.jsx)(oe,{value:"MEDIUM",children:"Medium"}),(0,M.jsx)(oe,{value:"HIGH",children:"High"}),(0,M.jsx)(oe,{value:"URGENT",children:"Urgent"})]})}),(0,M.jsx)(w.A,{span:4,children:(0,M.jsx)(x.A,{placeholder:"Material ID/Name",value:J.material,onChange:e=>K({...J,material:e.target.value})})}),(0,M.jsx)(w.A,{span:4,children:(0,M.jsx)(x.A,{placeholder:"Project Code",value:J.project,onChange:e=>K({...J,project:e.target.value})})}),(0,M.jsx)(w.A,{span:4,children:(0,M.jsx)(x.A,{placeholder:"Plant",value:J.plant,onChange:e=>K({...J,plant:e.target.value})})}),(0,M.jsx)(w.A,{span:4,children:(0,M.jsxs)(h.A,{placeholder:"Team",value:J.assignedTeam,onChange:e=>K({...J,assignedTeam:e}),style:{width:"100%"},children:[(0,M.jsx)(oe,{value:"all",children:"All Teams"}),(0,M.jsx)(oe,{value:"CQS",children:"CQS"}),(0,M.jsx)(oe,{value:"TECH",children:"Tech"}),(0,M.jsx)(oe,{value:"JVC",children:"JVC"})]})}),(0,M.jsx)(w.A,{span:4,children:(0,M.jsxs)(h.A,{placeholder:"Attachments",value:J.hasAttachments,onChange:e=>K({...J,hasAttachments:e}),style:{width:"100%"},children:[(0,M.jsx)(oe,{value:"all",children:"All Queries"}),(0,M.jsx)(oe,{value:"with",children:"With Attachments"}),(0,M.jsx)(oe,{value:"without",children:"Without Attachments"})]})}),(0,M.jsx)(w.A,{span:4,children:(0,M.jsxs)(h.A,{placeholder:"Days Open",value:J.daysOpen,onChange:e=>K({...J,daysOpen:e}),style:{width:"100%"},children:[(0,M.jsx)(oe,{value:"all",children:"All"}),(0,M.jsx)(oe,{value:"1",children:"1+ days"}),(0,M.jsx)(oe,{value:"2",children:"2+ days"}),(0,M.jsx)(oe,{value:"3",children:"3+ days (Overdue)"})]})}),(0,M.jsx)(w.A,{span:8,children:(0,M.jsxs)(y.A,{children:[(0,M.jsx)(A.Ay,{icon:(0,M.jsx)(d.A,{}),onClick:()=>{X(),ee()},children:"Refresh"}),(0,M.jsx)(A.Ay,{icon:(0,M.jsx)(c.A,{}),onClick:()=>K({status:"all",priority:"all",material:"",daysOpen:"all",project:"",plant:"",assignedTeam:"all",hasAttachments:"all"}),children:"Clear Filters"})]})})]})}),(0,M.jsx)(Q.pE,{operation:"query data loading",onRetry:X,maxRetries:3,children:(0,M.jsxs)(C.A,{title:(0,M.jsxs)("div",{children:[(0,M.jsxs)(de,{level:4,style:{margin:0},children:[s," Team Query Inbox"]}),(0,M.jsxs)(ae,{type:"secondary",children:[N.length," of ",E.length," queries"]})]}),children:[Y.overdue>0&&(0,M.jsx)(f.A,{message:`${Y.overdue} queries are overdue (>3 days)`,type:"warning",showIcon:!0,style:{marginBottom:16}}),(0,M.jsx)(b.A,{dataSource:N,columns:ue,loading:l,pagination:{pageSize:R.Bq.DEFAULT_PAGE_SIZE,showSizeChanger:!0,showQuickJumper:!0,showTotal:(e,s)=>`${s[0]}-${s[1]} of ${e} queries`},rowKey:"id",size:"small",rowClassName:e=>e.daysOpen>=3?"overdue-row":""})]})}),(0,M.jsx)(T.A,{title:`Query #${null===L||void 0===L?void 0:L.id} - Details`,open:B,onCancel:()=>{O(!1),P(null),V([]),F.resetFields(),U([]),W(null)},footer:[(0,M.jsx)(A.Ay,{onClick:()=>{O(!1),P(null),V([]),F.resetFields(),U([]),W(null)},children:"Close"},"close"),(null===L||void 0===L?void 0:L.status)===R.cS.OPEN&&(0,M.jsx)(A.Ay,{type:"primary",onClick:()=>F.submit(),size:"large",children:"Resolve Query"},"resolve")],width:1400,children:L&&(0,M.jsxs)(v.A,{gutter:16,children:[(0,M.jsxs)(w.A,{span:16,children:[(0,M.jsxs)("div",{style:{marginBottom:24},children:[(0,M.jsxs)(v.A,{gutter:16,children:[(0,M.jsxs)(w.A,{span:12,children:[(0,M.jsx)(ae,{strong:!0,children:"Material Code:"})," ",L.materialCode,L.materialName&&(0,M.jsx)("div",{style:{fontSize:"12px",color:"#666"},children:L.materialName})]}),(0,M.jsxs)(w.A,{span:12,children:[(0,M.jsx)(ae,{strong:!0,children:"Status:"})," ",(0,M.jsx)(m.A,{color:ce(L.status),children:L.status})]})]}),(0,M.jsx)(z.A,{}),(0,M.jsxs)(v.A,{gutter:16,children:[(0,M.jsxs)(w.A,{span:8,children:[(0,M.jsx)(ae,{strong:!0,children:"Priority:"})," ",(0,M.jsx)(m.A,{color:xe(L.priorityLevel),children:L.priorityLevel||R.fz.MEDIUM})]}),(0,M.jsxs)(w.A,{span:8,children:[(0,M.jsx)(ae,{strong:!0,children:"Team:"})," ",(0,M.jsx)(m.A,{color:L.assignedTeam===R.r0.CQS?"blue":L.assignedTeam===R.r0.TECH?"purple":"orange",children:L.assignedTeam})]}),(0,M.jsxs)(w.A,{span:8,children:[(0,M.jsx)(ae,{strong:!0,children:"Days Open:"})," ",(0,M.jsxs)(ae,{style:{color:he(L.daysOpen)},children:[L.daysOpen," days"]})]})]}),(0,M.jsx)(z.A,{}),(L.projectCode||L.plantCode)&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)(v.A,{gutter:16,children:[L.projectCode&&(0,M.jsxs)(w.A,{span:8,children:[(0,M.jsx)(ae,{strong:!0,children:"Project:"})," ",L.projectCode]}),L.plantCode&&(0,M.jsxs)(w.A,{span:8,children:[(0,M.jsx)(ae,{strong:!0,children:"Plant:"})," ",L.plantCode]})]}),(0,M.jsx)(z.A,{})]}),L.fieldName&&(0,M.jsxs)("div",{style:{marginBottom:16},children:[(0,M.jsx)(ae,{strong:!0,style:{fontSize:"16px",color:"#1890ff"},children:"Field Context"}),(0,M.jsxs)("div",{style:{marginTop:8,padding:12,background:"#e6f7ff",borderRadius:6,border:"1px solid #91d5ff"},children:[(0,M.jsx)("div",{style:{fontSize:"14px",fontWeight:"bold"},children:L.fieldName}),L.stepNumber&&(0,M.jsxs)("div",{style:{fontSize:"12px",color:"#666",marginTop:4},children:["Step ",L.stepNumber,L.stepTitle&&`: ${L.stepTitle}`]})]})]}),L.originalQuestion&&(0,M.jsxs)("div",{style:{marginBottom:16},children:[(0,M.jsx)(ae,{strong:!0,style:{fontSize:"16px",color:"#52c41a"},children:"Original Questionnaire Question"}),(0,M.jsx)("div",{style:{marginTop:8,padding:12,background:"#f6ffed",borderRadius:6,border:"1px solid #b7eb8f",fontStyle:"italic"},children:L.originalQuestion})]}),L.queryCategory&&(0,M.jsxs)("div",{style:{marginBottom:16},children:[(0,M.jsx)(ae,{strong:!0,style:{fontSize:"16px",color:"#722ed1"},children:"Query Category"}),(0,M.jsx)("div",{style:{marginTop:8,padding:8,background:"#f9f0ff",borderRadius:6,border:"1px solid #d3adf7"},children:(0,M.jsx)(m.A,{color:"purple",children:L.queryCategory})})]}),(0,M.jsxs)("div",{style:{marginBottom:16},children:[(0,M.jsx)(ae,{strong:!0,style:{fontSize:"16px",color:"#fa8c16"},children:"Query Text (What was asked)"}),(0,M.jsx)("div",{style:{marginTop:8,padding:12,background:"#fff7e6",borderRadius:6,border:"1px solid #ffd591",whiteSpace:"pre-wrap",minHeight:"60px"},children:L.question||"No query text available"})]}),L.response&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(z.A,{}),(0,M.jsx)(ae,{strong:!0,children:"Response:"}),(0,M.jsx)("div",{style:{marginTop:8,padding:12,background:"#f0f9ff",borderRadius:4,whiteSpace:"pre-wrap"},children:L.response}),(0,M.jsxs)("div",{style:{marginTop:8,fontSize:"12px",color:"#666"},children:["Resolved by: ",L.resolvedBy," on"," ",L.resolvedAt&&new Date(L.resolvedAt).toLocaleString()]})]}),(0,M.jsx)(z.A,{}),(0,M.jsxs)("div",{style:{fontSize:"12px",color:"#666"},children:[(0,M.jsxs)("div",{children:["Raised by: ",L.raisedBy]}),(0,M.jsxs)("div",{children:["Created:"," ",L.createdAt&&new Date(L.createdAt).toLocaleString()]})]})]}),_.length>0&&(0,M.jsxs)("div",{style:{marginBottom:24},children:[(0,M.jsx)(ae,{strong:!0,style:{fontSize:"16px",color:"#1890ff"},children:(0,M.jsxs)(y.A,{children:[(0,M.jsx)(t.A,{}),"Attached Documents (",_.length,")"]})}),(0,M.jsx)("div",{style:{marginTop:8},children:(0,M.jsx)(te,{documents:_,showActions:!0,compact:!1})})]}),(null===L||void 0===L?void 0:L.status)===R.cS.OPEN&&(0,M.jsxs)("div",{children:[(0,M.jsx)(z.A,{}),(0,M.jsx)(ae,{strong:!0,style:{fontSize:"18px",color:"#52c41a"},children:(0,M.jsxs)(y.A,{children:[(0,M.jsx)(o.A,{}),"Resolve Query"]})}),(0,M.jsxs)(p.A,{form:F,layout:"vertical",onFinish:async e=>{try{const s={response:e.response,priorityLevel:e.priorityLevel},l=await k.default.put(`/queries/${L.id}/resolve`,s);l.responseId&&W(l.responseId);const t=$.length>0?` with ${$.length} document(s) attached`:"";j.Ay.success(`Query resolved successfully${t}`),O(!1),F.resetFields(),P(null),U([]),W(null),V([]),X(),ee()}catch(s){console.error("Failed to resolve query:",s),j.Ay.error("Failed to resolve query")}},style:{marginTop:16},children:[(0,M.jsx)(p.A.Item,{name:"response",label:(0,M.jsxs)(y.A,{children:[(0,M.jsx)("span",{children:"Resolution Response"}),(0,M.jsx)(ae,{type:"secondary",children:"(Required)"})]}),rules:[{required:!0,message:"Please provide a resolution response"}],children:(0,M.jsx)(ne,{rows:6,placeholder:"Provide detailed resolution or answer to the query. Include any relevant technical details, safety considerations, or references to documentation...",showCount:!0,maxLength:2e3,style:{direction:"ltr",textAlign:"left",fontFamily:"inherit"}})}),(0,M.jsx)(p.A.Item,{label:(0,M.jsxs)(y.A,{children:[(0,M.jsx)(t.A,{}),(0,M.jsx)("span",{children:"Attach Documents to Response"}),(0,M.jsx)(ae,{type:"secondary",children:"(Optional)"})]}),children:(0,M.jsx)(re.A,{queryId:null===L||void 0===L?void 0:L.id,responseId:G,context:"response",onUploadComplete:e=>{U(s=>[...s,...e]),j.Ay.success(`${e.length} document(s) uploaded to response`)},maxFiles:5,disabled:!1})}),(0,M.jsxs)(v.A,{gutter:16,children:[(0,M.jsx)(w.A,{span:12,children:(0,M.jsx)(p.A.Item,{name:"priorityLevel",label:"Update Priority (Optional)",initialValue:L.priorityLevel||"MEDIUM",children:(0,M.jsxs)(h.A,{size:"large",children:[(0,M.jsx)(oe,{value:"LOW",children:"Low Priority"}),(0,M.jsx)(oe,{value:"MEDIUM",children:"Medium Priority"}),(0,M.jsx)(oe,{value:"HIGH",children:"High Priority"}),(0,M.jsx)(oe,{value:"URGENT",children:"Urgent Priority"})]})})}),(0,M.jsx)(w.A,{span:12,children:(0,M.jsx)("div",{style:{marginTop:30},children:(0,M.jsx)(ae,{type:"secondary",children:"This resolution will be sent to the plant team and the workflow will continue."})})})]})]})]})]}),(0,M.jsxs)(w.A,{span:8,children:[(0,M.jsx)(Q.qw,{componentName:"MaterialContextDisplay",children:(0,M.jsx)(H,{materialCode:L.materialCode,workflowId:L.workflowId,compact:!0})}),(0,M.jsx)(Q.qw,{componentName:"QueryHistoryTracker",children:(0,M.jsx)(ie.A,{materialCode:L.materialCode,workflowId:L.workflowId,compact:!0})})]})]})}),(0,M.jsx)("style",{children:"\n          .overdue-row {\n            background-color: #fff2f0;\n          }\n          .overdue-row:hover {\n            background-color: #ffebe6 !important;\n          }\n        "})]})})}},8365:(e,s,l)=>{l.d(s,{A:()=>S});var t=l(6237),r=l(119),i=l(3889),n=l(3117),o=l(3722),a=l(5206),d=l(9073),c=l(1645),x=l(9472),h=l(7419),u=l(6051),p=l(1686),j=l(6612),y=l(6399),m=l(6263),g=l(3927),A=l(5043),f=l(6649),v=l(3719),w=l(579);const{Text:C}=g.A,S=e=>{let{queryId:s,materialCode:l,workflowId:g,compact:S=!1}=e;const[b,T]=(0,A.useState)(!1),[z,I]=(0,A.useState)([]),[k,R]=(0,A.useState)({totalQueries:0,resolvedQueries:0,avgResolutionTime:0,currentSLA:0}),Q=(0,A.useCallback)(async()=>{try{T(!0);const e=(0,v.uG)();console.log("QueryHistoryTracker - userRole:",e);let t="/queries";if(s)t+=`/${s}/history`;else if(g)t+=`/workflow/${g}`;else if(l)t+=`/material/${l}`;else if(e){const s={CQS_USER:"CQS",TECH_USER:"TECH",JVC_USER:"JVC"}[e];console.log("QueryHistoryTracker - mapped team:",s),s?t+=`/resolved/${s}`:(console.warn("QueryHistoryTracker - unknown role, using CQS fallback"),t+="/resolved/CQS")}else t+="/resolved/CQS";console.log("QueryHistoryTracker - endpoint:",t);const r=await f.default.get(t);console.log("QueryHistoryTracker - received data:",r),console.log("QueryHistoryTracker - data type:",typeof r),console.log("QueryHistoryTracker - is array:",Array.isArray(r)),console.log("QueryHistoryTracker - data length:",null===r||void 0===r?void 0:r.length);const i=Array.isArray(r)?r:r?[r]:[];console.log("QueryHistoryTracker - setting history:",i),I(i);const n=Array.isArray(r)?r:r?[r]:[],o=n.filter(e=>"RESOLVED"===e.status),a=o.length>0?o.reduce((e,s)=>e+(s.daysOpen||0),0)/o.length:0;console.log("QueryHistoryTracker - stats calculation:",{dataArray:n.length,resolved:o.length,avgTime:a}),R({totalQueries:n.length,resolvedQueries:o.length,avgResolutionTime:a,currentSLA:n.filter(e=>e.daysOpen>3).length})}catch(e){console.error("Failed to load query history:",e)}finally{T(!1)}},[s,l,g]);(0,A.useEffect)(()=>{Q()},[s,l,g,Q]);const E=e=>"OPEN"===e?"red":"green",D=e=>({CQS:"blue",TECH:"purple",JVC:"orange"}[e]||"default");return b?(0,w.jsx)(d.A,{size:"small",children:(0,w.jsxs)("div",{style:{textAlign:"center",padding:"20px"},children:[(0,w.jsx)(p.A,{size:"small"}),(0,w.jsx)("div",{style:{marginTop:8},children:"Loading query history..."})]})}):S?(0,w.jsxs)(d.A,{size:"small",title:(0,w.jsxs)(u.A,{children:[(0,w.jsx)(i.A,{}),(0,w.jsx)("span",{children:s?"Query History":g?"Workflow Queries":l?"Material Queries":"Team History"})]}),style:{marginBottom:16},children:[(0,w.jsxs)(h.A,{gutter:16,style:{marginBottom:16},children:[(0,w.jsx)(c.A,{span:6,children:(0,w.jsx)(j.A,{title:"Total",value:k.totalQueries,prefix:(0,w.jsx)(n.A,{})})}),(0,w.jsx)(c.A,{span:6,children:(0,w.jsx)(j.A,{title:"Resolved",value:k.resolvedQueries,prefix:(0,w.jsx)(t.A,{}),valueStyle:{color:"#3f8600"}})}),(0,w.jsx)(c.A,{span:6,children:(0,w.jsx)(j.A,{title:"Avg Days",value:k.avgResolutionTime,precision:1,prefix:(0,w.jsx)(r.A,{})})}),(0,w.jsx)(c.A,{span:6,children:(0,w.jsx)(j.A,{title:"Overdue",value:k.currentSLA,prefix:(0,w.jsx)(r.A,{}),valueStyle:{color:k.currentSLA>0?"#cf1322":"#3f8600"}})})]}),z.length>0&&(0,w.jsxs)("div",{children:[(0,w.jsxs)(C,{strong:!0,style:{fontSize:"14px",marginBottom:"8px",display:"block"},children:["Recent Queries (",Math.min(z.length,3),")"]}),(0,w.jsx)(m.A,{size:"small",items:z.slice(0,3).map(e=>({dot:"RESOLVED"===e.status?(0,w.jsx)(t.A,{style:{color:"#52c41a",fontSize:"12px"}}):(0,w.jsx)(r.A,{style:{color:"#faad14",fontSize:"12px"}}),children:(0,w.jsxs)("div",{style:{fontSize:"12px"},children:[(0,w.jsx)("div",{style:{marginBottom:"4px"},children:(0,w.jsxs)(u.A,{size:"small",children:[(0,w.jsxs)(C,{strong:!0,children:["#",e.id]}),(0,w.jsx)(y.A,{size:"small",color:E(e.status),children:e.status}),(0,w.jsx)(y.A,{size:"small",color:D(e.assignedTeam),children:e.assignedTeam})]})}),(0,w.jsxs)("div",{style:{color:"#666",marginBottom:"2px"},children:[e.materialCode&&`${e.materialCode} \u2022 `,e.projectCode&&`${e.projectCode} \u2022 `,e.plantCode]}),(0,w.jsx)("div",{style:{color:"#333",marginBottom:"4px"},children:e.question&&e.question.length>60?`${e.question.substring(0,60)}...`:e.question}),e.response&&(0,w.jsx)("div",{style:{background:"#f0f9ff",padding:"4px 8px",borderRadius:"4px",marginTop:"4px",borderLeft:"2px solid #1890ff"},children:(0,w.jsxs)(C,{style:{fontSize:"11px",color:"#666"},children:["Resolved by ",e.resolvedBy,": ",e.response.length>50?`${e.response.substring(0,50)}...`:e.response]})})]})}))}),z.length>3&&(0,w.jsxs)(C,{type:"secondary",style:{fontSize:"11px"},children:["... and ",z.length-3," more queries"]})]})]}):(0,w.jsxs)(d.A,{title:(0,w.jsxs)(u.A,{children:[(0,w.jsx)(i.A,{}),(0,w.jsx)("span",{children:s?"Query History":g?"Workflow Query History":l?"Material Query History":"Team Resolved Queries"})]}),size:"small",extra:(0,w.jsx)(a.Ay,{size:"small",icon:(0,w.jsx)(i.A,{}),onClick:Q,children:"Refresh"}),children:[(0,w.jsxs)(h.A,{gutter:16,style:{marginBottom:16},children:[(0,w.jsx)(c.A,{span:6,children:(0,w.jsx)(j.A,{title:"Total Queries",value:k.totalQueries,prefix:(0,w.jsx)(n.A,{})})}),(0,w.jsx)(c.A,{span:6,children:(0,w.jsx)(j.A,{title:"Resolved",value:k.resolvedQueries,prefix:(0,w.jsx)(t.A,{}),valueStyle:{color:"#3f8600"}})}),(0,w.jsx)(c.A,{span:6,children:(0,w.jsx)(j.A,{title:"Avg Resolution Time",value:k.avgResolutionTime,precision:1,suffix:"days",prefix:(0,w.jsx)(r.A,{})})}),(0,w.jsx)(c.A,{span:6,children:(0,w.jsx)(j.A,{title:"Overdue Queries",value:k.currentSLA,prefix:(0,w.jsx)(r.A,{}),valueStyle:{color:k.currentSLA>0?"#cf1322":"#3f8600"}})})]}),z.length>0?(0,w.jsx)(m.A,{items:z.map(e=>{const s="RESOLVED"===e.status;return{dot:s?(0,w.jsx)(t.A,{style:{color:"#52c41a"}}):(0,w.jsx)(r.A,{style:{color:"#faad14"}}),color:s?"green":"blue",children:(0,w.jsxs)("div",{style:{padding:"12px",border:"1px solid #f0f0f0",borderRadius:"8px",marginBottom:"8px"},children:[(0,w.jsx)("div",{style:{marginBottom:12},children:(0,w.jsxs)(u.A,{wrap:!0,children:[(0,w.jsxs)(C,{strong:!0,style:{fontSize:"16px"},children:["Query #",e.id]}),(0,w.jsx)(y.A,{color:E(e.status),children:e.status}),(0,w.jsx)(y.A,{color:D(e.assignedTeam),children:e.assignedTeam}),e.priorityLevel&&(0,w.jsx)(y.A,{color:(l=e.priorityLevel,{LOW:"blue",MEDIUM:"orange",HIGH:"red",URGENT:"purple"}[l]||"default"),children:e.priorityLevel})]})}),(0,w.jsx)("div",{style:{marginBottom:12,padding:"8px",background:"#fafafa",borderRadius:"4px"},children:(0,w.jsxs)(h.A,{gutter:16,children:[e.materialCode&&(0,w.jsxs)(c.A,{span:8,children:[(0,w.jsx)(C,{strong:!0,style:{color:"#1890ff"},children:"Material:"}),(0,w.jsx)("div",{style:{fontSize:"14px"},children:e.materialCode}),e.materialName&&(0,w.jsx)("div",{style:{fontSize:"12px",color:"#666"},children:e.materialName})]}),e.projectCode&&(0,w.jsxs)(c.A,{span:8,children:[(0,w.jsx)(C,{strong:!0,style:{color:"#1890ff"},children:"Project:"}),(0,w.jsx)("div",{style:{fontSize:"14px"},children:e.projectCode})]}),e.plantCode&&(0,w.jsxs)(c.A,{span:8,children:[(0,w.jsx)(C,{strong:!0,style:{color:"#1890ff"},children:"Plant:"}),(0,w.jsx)("div",{style:{fontSize:"14px"},children:e.plantCode})]})]})}),e.fieldName&&(0,w.jsxs)("div",{style:{marginBottom:12,padding:"8px",background:"#e6f7ff",borderRadius:"4px",border:"1px solid #91d5ff"},children:[(0,w.jsx)(C,{strong:!0,style:{color:"#1890ff"},children:"Field Context:"}),(0,w.jsx)("div",{style:{fontSize:"14px",fontWeight:"bold"},children:e.fieldName}),e.stepNumber&&(0,w.jsxs)("div",{style:{fontSize:"12px",color:"#666"},children:["Step ",e.stepNumber," ",e.stepTitle&&`: ${e.stepTitle}`]})]}),e.originalQuestion&&(0,w.jsxs)("div",{style:{marginBottom:12,padding:"8px",background:"#f6ffed",borderRadius:"4px",border:"1px solid #b7eb8f"},children:[(0,w.jsx)(C,{strong:!0,style:{color:"#52c41a"},children:"Original Questionnaire Question:"}),(0,w.jsx)("div",{style:{fontSize:"14px",fontStyle:"italic",marginTop:"4px"},children:e.originalQuestion})]}),(0,w.jsxs)("div",{style:{marginBottom:12,padding:"8px",background:"#fff7e6",borderRadius:"4px",border:"1px solid #ffd591"},children:[(0,w.jsx)(C,{strong:!0,style:{color:"#fa8c16"},children:"Query Text (What was asked):"}),(0,w.jsx)("div",{style:{fontSize:"14px",marginTop:"4px",whiteSpace:"pre-wrap"},children:e.question||"No query text available"})]}),(0,w.jsx)("div",{style:{fontSize:"12px",color:"#666",marginBottom:12},children:(0,w.jsxs)(h.A,{gutter:16,children:[(0,w.jsxs)(c.A,{span:8,children:[(0,w.jsx)(o.A,{})," ",(0,w.jsx)("strong",{children:"Raised by:"})," ",e.raisedBy]}),(0,w.jsxs)(c.A,{span:8,children:[(0,w.jsx)(r.A,{})," ",(0,w.jsx)("strong",{children:"Created:"})," ",e.createdAt&&new Date(e.createdAt).toLocaleString()]}),(0,w.jsxs)(c.A,{span:8,children:[(0,w.jsx)("strong",{children:"Days open:"})," ",e.daysOpen||0]})]})}),e.response&&(0,w.jsxs)("div",{style:{marginTop:12,padding:"12px",background:"#f0f9ff",borderRadius:"6px",borderLeft:"4px solid #1890ff"},children:[(0,w.jsx)("div",{style:{marginBottom:8},children:(0,w.jsx)(C,{strong:!0,style:{fontSize:"15px",color:"#1890ff"},children:"Resolution:"})}),(0,w.jsx)("div",{style:{marginBottom:8,fontSize:"14px",whiteSpace:"pre-wrap"},children:e.response}),(0,w.jsx)("div",{style:{fontSize:"12px",color:"#666"},children:(0,w.jsxs)(h.A,{gutter:16,children:[(0,w.jsxs)(c.A,{span:12,children:[(0,w.jsx)(o.A,{})," ",(0,w.jsx)("strong",{children:"Resolved by:"})," ",e.resolvedBy]}),(0,w.jsxs)(c.A,{span:12,children:[(0,w.jsx)(r.A,{})," ",(0,w.jsx)("strong",{children:"Resolved on:"})," ",e.resolvedAt&&new Date(e.resolvedAt).toLocaleString()]})]})})]}),e.queryCategory&&(0,w.jsxs)("div",{style:{marginTop:8},children:[(0,w.jsx)(C,{strong:!0,style:{fontSize:"12px",color:"#722ed1"},children:"Category: "}),(0,w.jsx)(y.A,{color:"purple",children:e.queryCategory})]})]})};var l}),mode:"left"}):(0,w.jsx)(x.A,{description:"No query history available",image:x.A.PRESENTED_IMAGE_SIMPLE})]})}}}]);
//# sourceMappingURL=173.813cf8f5.chunk.js.map