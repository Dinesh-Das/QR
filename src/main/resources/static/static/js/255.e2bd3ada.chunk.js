"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[255],{1255:(e,t,r)=>{r.r(t),r.d(t,{default:()=>B});var l=r(1199),a=r(6237),o=r(119),n=r(9330),i=r(9470),s=r(2878),d=r(5206),c=r(9073),u=r(1645),x=r(487),p=r(6569),h=r(7692),A=r(7419),y=r(1686),g=r(6612),j=r(3217),m=r(8918),v=r(3927),b=r(7304),f=r(5043),k=r(6058),w=r(6649),S=r(579);b.t1.register(...b.$L);const{Title:T,Text:C}=v.A,{RangePicker:R}=x.A,{TabPane:O}=m.A,B=()=>{var e,t,r,x;const[v,b]=(0,f.useState)(!0),[B,W]=(0,f.useState)(null),[I,F]=(0,f.useState)([null,null]),[Q,L]=(0,f.useState)(null),[P,D]=(0,f.useState)(!1),[$,E]=(0,f.useState)(!1),[M,q]=(0,f.useState)(null),[U,G]=(0,f.useState)(!1),[H,z]=(0,f.useState)(null),[K,N]=(0,f.useState)(!1);(0,f.useEffect)(()=>{const e=new AbortController;return(async()=>{try{await Promise.all([Z(e.signal),V(e.signal),X(e.signal)])}catch(t){e.signal.aborted||console.error("Error fetching workflow monitoring data:",t)}})(),()=>{e.abort()}},[Z,V,X]);const Z=(0,f.useCallback)(async e=>{b(!0);try{const t=await w.default.get("/admin/monitoring/dashboard",{signal:e});null!==e&&void 0!==e&&e.aborted||W(t)}catch(t){null!==e&&void 0!==e&&e.aborted||(p.Ay.error("Failed to load dashboard data"),console.error("Error fetching dashboard data:",t))}finally{null!==e&&void 0!==e&&e.aborted||b(!1)}},[]),J=async()=>{D(!0);try{let e="/admin/monitoring/query-sla";I[0]&&I[1]&&(e+=`?startDate=${I[0].toISOString()}&endDate=${I[1].toISOString()}`);const t=await w.default.get(e);L(t)}catch(e){p.Ay.error("Failed to load SLA report"),console.error("Error fetching SLA report:",e)}finally{D(!1)}},V=(0,f.useCallback)(async e=>{G(!0);try{const t=await w.default.get("/admin/monitoring/bottlenecks",{signal:e});null!==e&&void 0!==e&&e.aborted||q(t)}catch(t){null!==e&&void 0!==e&&e.aborted||(p.Ay.error("Failed to load bottlenecks analysis"),console.error("Error fetching bottlenecks:",t))}finally{null!==e&&void 0!==e&&e.aborted||G(!1)}},[]),X=(0,f.useCallback)(async e=>{N(!0);try{let t="/admin/monitoring/performance";I[0]&&I[1]&&(t+=`?startDate=${I[0].toISOString()}&endDate=${I[1].toISOString()}`);const r=await w.default.get(t,{signal:e});null!==e&&void 0!==e&&e.aborted||z(r)}catch(t){null!==e&&void 0!==e&&e.aborted||(p.Ay.error("Failed to load performance metrics"),console.error("Error fetching performance metrics:",t))}finally{null!==e&&void 0!==e&&e.aborted||N(!1)}},[I]);return v&&!B?(0,S.jsxs)("div",{style:{textAlign:"center",padding:"50px"},children:[(0,S.jsx)(y.A,{size:"large"}),(0,S.jsx)("p",{children:"Loading dashboard data..."})]}):(0,S.jsxs)("div",{children:[(0,S.jsx)(T,{level:2,children:"Workflow Monitoring Dashboard"}),(0,S.jsx)(A.A,{gutter:[16,16],style:{marginBottom:16},children:(0,S.jsx)(u.A,{span:24,children:(0,S.jsx)(c.A,{children:(0,S.jsxs)(A.A,{gutter:16,children:[(0,S.jsx)(u.A,{span:8,children:(0,S.jsx)(R,{onChange:e=>{F(e)},style:{width:"100%"}})}),(0,S.jsx)(u.A,{span:4,children:(0,S.jsx)(d.Ay,{type:"primary",onClick:()=>{J(),X()},children:"Apply Filter"})}),(0,S.jsxs)(u.A,{span:12,style:{textAlign:"right"},children:[(0,S.jsx)(d.Ay,{icon:(0,S.jsx)(n.A,{}),onClick:async()=>{E(!0);try{let e="/admin/monitoring/audit-logs/export";I[0]&&I[1]&&(e+=`?startDate=${I[0].toISOString()}&endDate=${I[1].toISOString()}`);const t=await w.default.get(e,{responseType:"blob"}),r=window.URL.createObjectURL(t),l=document.createElement("a");l.href=r,l.setAttribute("download",`audit-logs-${(new Date).toISOString().split("T")[0]}.csv`),document.body.appendChild(l),l.click(),l.remove(),p.Ay.success("Audit logs exported successfully")}catch(e){p.Ay.error("Failed to export audit logs"),console.error("Error exporting audit logs:",e)}finally{E(!1)}},loading:$,style:{marginRight:8},children:"Export Audit Logs"}),(0,S.jsx)(d.Ay,{icon:(0,S.jsx)(n.A,{}),onClick:()=>async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;E(!0);try{let t="/admin/monitoring/workflows/export";const r=[];I[0]&&I[1]&&(r.push(`startDate=${I[0].toISOString()}`),r.push(`endDate=${I[1].toISOString()}`)),e&&r.push(`state=${e}`),r.length>0&&(t+=`?${r.join("&")}`);const l=await w.default.get(t,{responseType:"blob"}),a=window.URL.createObjectURL(l),o=document.createElement("a");o.href=a,o.setAttribute("download",`workflow-report-${(new Date).toISOString().split("T")[0]}.csv`),document.body.appendChild(o),o.click(),o.remove(),p.Ay.success("Workflow report exported successfully")}catch(t){p.Ay.error("Failed to export workflow report"),console.error("Error exporting workflow report:",t)}finally{E(!1)}}(),loading:$,children:"Export Workflow Report"})]})]})})})}),(0,S.jsxs)(A.A,{gutter:[16,16],children:[(0,S.jsx)(u.A,{span:6,children:(0,S.jsx)(c.A,{children:(0,S.jsx)(g.A,{title:"Total Workflows",value:(null===B||void 0===B?void 0:B.totalWorkflows)||0,prefix:(0,S.jsx)(l.A,{})})})}),(0,S.jsx)(u.A,{span:6,children:(0,S.jsx)(c.A,{children:(0,S.jsx)(g.A,{title:"Active Workflows",value:(null===B||void 0===B?void 0:B.activeWorkflows)||0,prefix:(0,S.jsx)(o.A,{}),valueStyle:{color:"#1890ff"}})})}),(0,S.jsx)(u.A,{span:6,children:(0,S.jsx)(c.A,{children:(0,S.jsx)(g.A,{title:"Completed Workflows",value:(null===B||void 0===B?void 0:B.completedWorkflows)||0,prefix:(0,S.jsx)(a.A,{}),valueStyle:{color:"#3f8600"}})})}),(0,S.jsx)(u.A,{span:6,children:(0,S.jsx)(c.A,{children:(0,S.jsx)(g.A,{title:"Overdue Workflows",value:(null===B||void 0===B?void 0:B.overdueWorkflows)||0,prefix:(0,S.jsx)(i.A,{}),valueStyle:{color:"#cf1322"}})})})]}),(0,S.jsxs)(A.A,{gutter:[16,16],style:{marginTop:16},children:[(0,S.jsx)(u.A,{span:6,children:(0,S.jsx)(c.A,{children:(0,S.jsx)(g.A,{title:"Total Queries",value:(null===B||void 0===B?void 0:B.totalQueries)||0,prefix:(0,S.jsx)(s.A,{})})})}),(0,S.jsx)(u.A,{span:6,children:(0,S.jsx)(c.A,{children:(0,S.jsx)(g.A,{title:"Open Queries",value:(null===B||void 0===B?void 0:B.openQueries)||0,valueStyle:{color:"#1890ff"}})})}),(0,S.jsx)(u.A,{span:6,children:(0,S.jsx)(c.A,{children:(0,S.jsx)(g.A,{title:"Overdue Queries",value:(null===B||void 0===B?void 0:B.overdueQueries)||0,valueStyle:{color:"#cf1322"}})})}),(0,S.jsx)(u.A,{span:6,children:(0,S.jsx)(c.A,{children:(0,S.jsx)(g.A,{title:"Avg. Completion Time (hrs)",value:(null===B||void 0===B||null===(e=B.averageCompletionTimeHours)||void 0===e?void 0:e.toFixed(1))||0,precision:1})})})]}),(0,S.jsxs)(m.A,{defaultActiveKey:"1",style:{marginTop:16},children:[(0,S.jsxs)(O,{tab:"Workflow Status",children:[(0,S.jsxs)(A.A,{gutter:[16,16],children:[(0,S.jsx)(u.A,{span:12,children:(0,S.jsx)(c.A,{title:"Workflow Status Distribution",children:B&&B.workflowsByState&&(0,S.jsx)(k.Fq,{data:(()=>{if(!B||!B.workflowsByState)return null;return{labels:Object.keys(B.workflowsByState),datasets:[{label:"Workflows by State",data:Object.values(B.workflowsByState),backgroundColor:["rgba(54, 162, 235, 0.6)","rgba(255, 206, 86, 0.6)","rgba(75, 192, 192, 0.6)","rgba(153, 102, 255, 0.6)","rgba(255, 159, 64, 0.6)"],borderColor:["rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]}})(),options:{responsive:!0,maintainAspectRatio:!1},height:300})})}),(0,S.jsx)(u.A,{span:12,children:(0,S.jsx)(c.A,{title:"Recent Activity",children:B&&B.recentActivity&&(0,S.jsx)(k.N1,{data:(()=>{if(!B||!B.recentActivity)return null;const e=Object.keys(B.recentActivity).sort(),t=e.map(e=>B.recentActivity[e]);return{labels:e,datasets:[{label:"Workflow Activity",data:t,fill:!1,backgroundColor:"rgba(54, 162, 235, 0.6)",borderColor:"rgba(54, 162, 235, 1)",tension:.1}]}})(),options:{responsive:!0,maintainAspectRatio:!1},height:300})})})]}),(0,S.jsx)(A.A,{gutter:[16,16],style:{marginTop:16},children:(0,S.jsx)(u.A,{span:24,children:(0,S.jsx)(c.A,{title:"Workflows by Plant",children:(0,S.jsx)(j.A,{dataSource:B&&B.workflowsByPlant?Object.entries(B.workflowsByPlant).map(e=>{let[t,r]=e;return{key:t,plant:t,count:r}}):[],columns:[{title:"Plant",dataIndex:"plant",key:"plant"},{title:"Workflow Count",dataIndex:"count",key:"count"}],pagination:!1})})})})]},"1"),(0,S.jsxs)(O,{tab:"Query SLA Reports",children:[(0,S.jsx)(d.Ay,{type:"primary",onClick:J,loading:P,style:{marginBottom:16},children:"Generate SLA Report"}),P?(0,S.jsxs)("div",{style:{textAlign:"center",padding:"50px"},children:[(0,S.jsx)(y.A,{}),(0,S.jsx)("p",{children:"Generating SLA report..."})]}):Q?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(A.A,{gutter:[16,16],children:[(0,S.jsx)(u.A,{span:8,children:(0,S.jsxs)(c.A,{children:[(0,S.jsx)(g.A,{title:"Overall SLA Compliance",value:Q.overallSlaCompliance.toFixed(1),suffix:"%",precision:1}),(0,S.jsx)(h.A,{percent:Q.overallSlaCompliance,status:Q.overallSlaCompliance>=90?"success":"active"})]})}),(0,S.jsx)(u.A,{span:8,children:(0,S.jsx)(c.A,{children:(0,S.jsx)(g.A,{title:"Average Resolution Time",value:Q.overallAverageResolutionTime.toFixed(1),suffix:"hours",precision:1})})}),(0,S.jsx)(u.A,{span:8,children:(0,S.jsx)(c.A,{children:(0,S.jsx)(g.A,{title:"Resolution Rate",value:(Q.totalResolvedQueries/Q.totalQueries*100).toFixed(1),suffix:"%",precision:1})})})]}),(0,S.jsxs)(A.A,{gutter:[16,16],style:{marginTop:16},children:[(0,S.jsx)(u.A,{span:12,children:(0,S.jsx)(c.A,{title:"SLA Compliance by Team",children:(0,S.jsx)(k.yP,{data:(()=>{if(!Q||!Q.slaComplianceByTeam)return null;return{labels:Object.keys(Q.slaComplianceByTeam),datasets:[{label:"SLA Compliance (%)",data:Object.values(Q.slaComplianceByTeam),backgroundColor:"rgba(75, 192, 192, 0.6)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}]}})(),options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,max:100}}},height:300})})}),(0,S.jsx)(u.A,{span:12,children:(0,S.jsx)(c.A,{title:"Average Resolution Times by Team",children:(0,S.jsx)(k.yP,{data:(()=>{if(!Q||!Q.averageResolutionTimesByTeam)return null;return{labels:Object.keys(Q.averageResolutionTimesByTeam),datasets:[{label:"Average Resolution Time (hours)",data:Object.values(Q.averageResolutionTimesByTeam),backgroundColor:"rgba(255, 159, 64, 0.6)",borderColor:"rgba(255, 159, 64, 1)",borderWidth:1}]}})(),options:{responsive:!0,maintainAspectRatio:!1},height:300})})})]}),(0,S.jsx)(A.A,{gutter:[16,16],style:{marginTop:16},children:(0,S.jsx)(u.A,{span:24,children:(0,S.jsx)(c.A,{title:"Query Metrics by Team",children:(0,S.jsx)(j.A,{dataSource:Q.totalQueriesByTeam?Object.keys(Q.totalQueriesByTeam).map(e=>{var t,r;return{key:e,team:e,total:Q.totalQueriesByTeam[e],resolved:Q.resolvedQueriesByTeam[e],overdue:Q.overdueQueriesByTeam[e],avgTime:null===(t=Q.averageResolutionTimesByTeam[e])||void 0===t?void 0:t.toFixed(1),compliance:null===(r=Q.slaComplianceByTeam[e])||void 0===r?void 0:r.toFixed(1)}}):[],columns:[{title:"Team",dataIndex:"team",key:"team"},{title:"Total Queries",dataIndex:"total",key:"total"},{title:"Resolved",dataIndex:"resolved",key:"resolved"},{title:"Overdue",dataIndex:"overdue",key:"overdue"},{title:"Avg. Resolution Time (hrs)",dataIndex:"avgTime",key:"avgTime"},{title:"SLA Compliance",dataIndex:"compliance",key:"compliance",render:e=>`${e}%`}],pagination:!1})})})})]}):(0,S.jsx)("div",{style:{textAlign:"center",padding:"50px"},children:(0,S.jsx)(C,{type:"secondary",children:'Click "Generate SLA Report" to view query SLA metrics'})})]},"2"),(0,S.jsxs)(O,{tab:"Bottlenecks Analysis",children:[(0,S.jsx)(d.Ay,{type:"primary",onClick:V,loading:U,style:{marginBottom:16},children:"Refresh Bottlenecks Analysis"}),U?(0,S.jsxs)("div",{style:{textAlign:"center",padding:"50px"},children:[(0,S.jsx)(y.A,{}),(0,S.jsx)("p",{children:"Analyzing bottlenecks..."})]}):M?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(A.A,{gutter:[16,16],children:[(0,S.jsx)(u.A,{span:12,children:(0,S.jsx)(c.A,{title:"Average Time in Each State (hours)",children:(0,S.jsx)(j.A,{dataSource:M.averageTimeInState?Object.entries(M.averageTimeInState).map(e=>{let[t,r]=e;return{key:t,state:t,hours:r.toFixed(1)}}):[],columns:[{title:"Workflow State",dataIndex:"state",key:"state"},{title:"Average Hours",dataIndex:"hours",key:"hours"}],pagination:!1})})}),(0,S.jsx)(u.A,{span:12,children:(0,S.jsx)(c.A,{title:"Overdue Workflows by State",children:(0,S.jsx)(j.A,{dataSource:M.overdueByState?Object.entries(M.overdueByState).map(e=>{let[t,r]=e;return{key:t,state:t,count:r}}):[],columns:[{title:"Workflow State",dataIndex:"state",key:"state"},{title:"Overdue Count",dataIndex:"count",key:"count"}],pagination:!1})})})]}),(0,S.jsxs)(A.A,{gutter:[16,16],style:{marginTop:16},children:[(0,S.jsx)(u.A,{span:12,children:(0,S.jsx)(c.A,{title:"Open Queries by Team",children:(0,S.jsx)(j.A,{dataSource:M.openQueriesByTeam?Object.entries(M.openQueriesByTeam).map(e=>{let[t,r]=e;return{key:t,team:t,count:r}}):[],columns:[{title:"Team",dataIndex:"team",key:"team"},{title:"Open Queries",dataIndex:"count",key:"count"}],pagination:!1})})}),(0,S.jsx)(u.A,{span:12,children:(0,S.jsx)(c.A,{title:"Delayed Workflows by Plant",children:(0,S.jsx)(j.A,{dataSource:M.delayedByPlant?Object.entries(M.delayedByPlant).map(e=>{let[t,r]=e;return{key:t,plant:t,count:r}}):[],columns:[{title:"Plant",dataIndex:"plant",key:"plant"},{title:"Delayed Count",dataIndex:"count",key:"count"}],pagination:!1})})})]})]}):(0,S.jsx)("div",{style:{textAlign:"center",padding:"50px"},children:(0,S.jsx)(C,{type:"secondary",children:'Click "Refresh Bottlenecks Analysis" to view workflow bottlenecks'})})]},"3"),(0,S.jsxs)(O,{tab:"Performance Metrics",children:[(0,S.jsx)(d.Ay,{type:"primary",onClick:X,loading:K,style:{marginBottom:16},children:"Refresh Performance Metrics"}),K?(0,S.jsxs)("div",{style:{textAlign:"center",padding:"50px"},children:[(0,S.jsx)(y.A,{}),(0,S.jsx)("p",{children:"Loading performance metrics..."})]}):H?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(A.A,{gutter:[16,16],children:[(0,S.jsx)(u.A,{span:8,children:(0,S.jsxs)(c.A,{children:[(0,S.jsx)(g.A,{title:"Completion Rate",value:null===(t=H.completionRate)||void 0===t?void 0:t.toFixed(1),suffix:"%",precision:1}),(0,S.jsx)(h.A,{percent:H.completionRate,status:H.completionRate>=80?"success":"active"})]})}),(0,S.jsx)(u.A,{span:8,children:(0,S.jsx)(c.A,{children:(0,S.jsx)(g.A,{title:"Average Completion Time",value:null===(r=H.averageCompletionTimeHours)||void 0===r?void 0:r.toFixed(1),suffix:"hours",precision:1})})}),(0,S.jsx)(u.A,{span:8,children:(0,S.jsx)(c.A,{children:(0,S.jsx)(g.A,{title:"Queries Per Workflow",value:null===(x=H.queriesPerWorkflow)||void 0===x?void 0:x.toFixed(1),precision:1})})})]}),(0,S.jsx)(A.A,{gutter:[16,16],style:{marginTop:16},children:(0,S.jsx)(u.A,{span:24,children:(0,S.jsx)(c.A,{title:"Monthly Workflow Throughput",children:H.throughputByMonth&&(0,S.jsx)(k.yP,{data:{labels:Object.keys(H.throughputByMonth),datasets:[{label:"Completed Workflows",data:Object.values(H.throughputByMonth),backgroundColor:"rgba(75, 192, 192, 0.6)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1},height:300})})})})]}):(0,S.jsx)("div",{style:{textAlign:"center",padding:"50px"},children:(0,S.jsx)(C,{type:"secondary",children:'Click "Refresh Performance Metrics" to view workflow performance data'})})]},"4")]})]})}}}]);
//# sourceMappingURL=255.e2bd3ada.chunk.js.map