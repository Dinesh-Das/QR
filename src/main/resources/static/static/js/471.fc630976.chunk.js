"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[471],{1966:(e,t,s)=>{s.d(t,{A:()=>i});var l=s(8168),r=s(5043);const a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"};var n=s(2172),o=function(e,t){return r.createElement(n.A,(0,l.A)({},e,{ref:t,icon:a}))};const i=r.forwardRef(o)},8471:(e,t,s)=>{s.r(t),s.d(t,{default:()=>p});var l=s(1966),r=s(7407),a=s(5337),n=s(5206),o=s(9098),i=s(5444),c=s(6569),d=s(2751),u=s(647),A=s(6051),h=s(3217),y=s(3927),m=s(5043),f=s(6649),v=s(579);const{Title:x}=y.A,p=()=>{const[e,t]=(0,m.useState)([]),[s,y]=(0,m.useState)(!1),[p,j]=(0,m.useState)(!1),[g,w]=(0,m.useState)(null),[k]=o.A.useForm(),b=async e=>{y(!0);try{const s=await f.default.get("/admin/roles",{signal:e});if(null===e||void 0===e||!e.aborted){const e=Array.isArray(s)?s:[];t(e)}}catch(s){null!==e&&void 0!==e&&e.aborted||(c.Ay.error("Failed to fetch roles"),console.error("Error fetching roles:",s),t([]))}finally{null!==e&&void 0!==e&&e.aborted||y(!1)}};(0,m.useEffect)(()=>{const e=new AbortController;return b(e.signal),()=>{e.abort()}},[]);const F=[{title:"Name",dataIndex:"name",key:"name"},{title:"Description",dataIndex:"description",key:"description"},{title:"Actions",key:"actions",render:(e,t)=>(0,v.jsxs)(A.A,{children:[(0,v.jsx)(n.Ay,{icon:(0,v.jsx)(r.A,{}),onClick:()=>{return w(e=t),k.setFieldsValue(e),void j(!0);var e}}),(0,v.jsx)(u.A,{title:"Are you sure you want to delete this role?",onConfirm:()=>(async e=>{try{await f.default.delete(`/admin/roles/${e}`),c.Ay.success("Role deleted successfully"),b()}catch(t){c.Ay.error("Failed to delete role")}})(t.id),okText:"Yes",cancelText:"No",children:(0,v.jsx)(n.Ay,{icon:(0,v.jsx)(l.A,{}),danger:!0})})]})}];return(0,v.jsxs)("div",{children:[(0,v.jsx)(x,{level:2,children:"Roles"}),(0,v.jsx)(n.Ay,{type:"primary",icon:(0,v.jsx)(a.A,{}),onClick:()=>{w(null),k.resetFields(),j(!0)},style:{marginBottom:16},children:"Add Role"}),(0,v.jsx)(h.A,{columns:F,dataSource:e,rowKey:"id",loading:s}),(0,v.jsx)(d.A,{title:g?"Edit Role":"Add Role",open:p,onOk:async()=>{try{const e=await k.validateFields();g?(await f.default.put(`/admin/roles/${g.id}`,e),c.Ay.success("Role updated successfully")):(await f.default.post("/admin/roles",e),c.Ay.success("Role created successfully")),j(!1),k.resetFields(),b()}catch(e){e.errorFields||c.Ay.error("Failed to save role")}},onCancel:()=>j(!1),children:(0,v.jsxs)(o.A,{form:k,layout:"vertical",children:[(0,v.jsx)(o.A.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please input the role name!"}],children:(0,v.jsx)(i.A,{})}),(0,v.jsx)(o.A.Item,{name:"description",label:"Description",rules:[{required:!0,message:"Please input the role description!"}],children:(0,v.jsx)(i.A.TextArea,{})})]})})]})}}}]);
//# sourceMappingURL=471.fc630976.chunk.js.map