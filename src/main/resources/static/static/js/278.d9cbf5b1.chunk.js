"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[278,878],{278:(e,t,a)=>{a.r(t),a.d(t,{default:()=>F});var l=a(8168),r=a(5043);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M468 128H160c-17.7 0-32 14.3-32 32v308c0 4.4 3.6 8 8 8h332c4.4 0 8-3.6 8-8V136c0-4.4-3.6-8-8-8zm-56 284H192V192h220v220zm-138-74h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm194 210H136c-4.4 0-8 3.6-8 8v308c0 17.7 14.3 32 32 32h308c4.4 0 8-3.6 8-8V556c0-4.4-3.6-8-8-8zm-56 284H192V612h220v220zm-138-74h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm590-630H556c-4.4 0-8 3.6-8 8v332c0 4.4 3.6 8 8 8h332c4.4 0 8-3.6 8-8V160c0-17.7-14.3-32-32-32zm-32 284H612V192h220v220zm-138-74h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm194 210h-48c-4.4 0-8 3.6-8 8v134h-78V556c0-4.4-3.6-8-8-8H556c-4.4 0-8 3.6-8 8v332c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V644h78v102c0 4.4 3.6 8 8 8h190c4.4 0 8-3.6 8-8V556c0-4.4-3.6-8-8-8zM746 832h-48c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm142 0h-48c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"qrcode",theme:"outlined"};var s=a(2172),o=function(e,t){return r.createElement(s.A,(0,l.A)({},e,{ref:t,icon:n}))};const i=r.forwardRef(o);var c=a(9470),d=a(9330),u=a(1199),p=a(119),y=a(6237),x=a(2878),h=a(3927),m=a(487),A=a(8918),g=a(6569),v=a(1686),j=a(5206),f=a(7419),b=a(1645),k=a(9073),C=a(6553),w=a(6612),S=a(3258),T=a(7692),R=a(7304),P=a(6058),I=a(6649),O=a(5123),$=a(579);R.t1.register(...R.$L);const{Title:Q,Text:W}=h.A,{RangePicker:B}=m.A,{TabPane:D}=A.A,F=()=>{var e,t,a,l,n,s,o,h,m,R,F,N,z,L,q;const[E,U]=(0,r.useState)(!0),[M,V]=(0,r.useState)(null),[H,_]=(0,r.useState)([null,null]),[Z,G]=(0,r.useState)(null),[J,K]=(0,r.useState)(!1),[X,Y]=(0,r.useState)(!1),[ee,te]=(0,r.useState)(null),[ae,le]=(0,r.useState)(!1),[re,ne]=(0,r.useState)(null),[se,oe]=(0,r.useState)(!1),[ie,ce]=(0,r.useState)(null),[de,ue]=(0,r.useState)(!1),[pe,ye]=(0,r.useState)(null),[xe,he]=(0,r.useState)(!1),[me,Ae]=(0,r.useState)(null),{isAdmin:ge,isPlantUser:ve,primaryPlant:je}=(0,O.hm)(),fe=(0,r.useCallback)(async e=>{U(!0);try{var t,a;const l=null===(t=H[0])||void 0===t?void 0:t.toISOString(),r=null===(a=H[1])||void 0===a?void 0:a.toISOString(),n=ve&&!ge?je:me,s=await I.default.get(`/test-analytics/dashboard${l||r||n?"?":""}${l?`startDate=${l}&`:""}${r?`endDate=${r}&`:""}${n?`plantCode=${n}`:""}`.replace(/&$/,""));null!==e&&void 0!==e&&e.aborted||V(s)}catch(l){null!==e&&void 0!==e&&e.aborted||(console.error("Failed to fetch QR Analytics dashboard data:",l),g.Ay.error("Failed to load dashboard data. Please check your connection and try again."),V(null))}finally{null!==e&&void 0!==e&&e.aborted||U(!1)}},[H,ge,ve,je,me]),be=async()=>{K(!0);try{var e,t;const a=null===(e=H[0])||void 0===e?void 0:e.toISOString(),l=null===(t=H[1])||void 0===t?void 0:t.toISOString(),r=ve&&!ge?je:null,n=await I.default.get(`/test-analytics/sla-metrics${a||l||r?"?":""}${a?`startDate=${a}&`:""}${l?`endDate=${l}&`:""}${r?`plantCode=${r}`:""}`.replace(/&$/,""));G(n)}catch(a){console.error("Failed to fetch SLA metrics:",a),g.Ay.error("Failed to load SLA report. Please check your connection and try again."),G(null)}finally{K(!1)}},ke=(0,r.useCallback)(async e=>{le(!0);try{var t,a;const l=null===(t=H[0])||void 0===t?void 0:t.toISOString(),r=null===(a=H[1])||void 0===a?void 0:a.toISOString(),n=ve&&!ge?je:null,s=await I.default.get(`/test-analytics/bottlenecks${l||r||n?"?":""}${l?`startDate=${l}&`:""}${r?`endDate=${r}&`:""}${n?`plantCode=${n}`:""}`.replace(/&$/,""));null!==e&&void 0!==e&&e.aborted||te(s)}catch(l){null!==e&&void 0!==e&&e.aborted||(console.error("Failed to fetch bottlenecks data:",l),g.Ay.error("Failed to load bottlenecks analysis. Please check your connection and try again."),te(null))}finally{null!==e&&void 0!==e&&e.aborted||le(!1)}},[H,ge,ve,je]),Ce=(0,r.useCallback)(async e=>{oe(!0);try{var t,a;const l=null===(t=H[0])||void 0===t?void 0:t.toISOString(),r=null===(a=H[1])||void 0===a?void 0:a.toISOString(),n=ve&&!ge?je:null,s=await I.default.get(`/test-analytics/performance-metrics${l||r||n?"?":""}${l?`startDate=${l}&`:""}${r?`endDate=${r}&`:""}${n?`plantCode=${n}`:""}`.replace(/&$/,""));null!==e&&void 0!==e&&e.aborted||ne(s)}catch(l){null!==e&&void 0!==e&&e.aborted||(console.error("Failed to fetch performance metrics:",l),g.Ay.error("Failed to load performance metrics. Please check your connection and try again."),ne(null))}finally{null!==e&&void 0!==e&&e.aborted||oe(!1)}},[H,ge,ve,je]),we=(0,r.useCallback)(async e=>{ue(!0);try{var t,a;const l=null===(t=H[0])||void 0===t?void 0:t.toISOString(),r=null===(a=H[1])||void 0===a?void 0:a.toISOString(),n=ve&&!ge?je:null,s=await I.default.get(`/test-analytics/query-status-breakdown${l||r||n?"?":""}${l?`startDate=${l}&`:""}${r?`endDate=${r}&`:""}${n?`plantCode=${n}`:""}`.replace(/&$/,""));null!==e&&void 0!==e&&e.aborted||ce(s)}catch(l){null!==e&&void 0!==e&&e.aborted||(console.error("Failed to fetch query status breakdown:",l),g.Ay.error("Failed to load query status breakdown. Please check your connection and try again."),ce(null))}finally{null!==e&&void 0!==e&&e.aborted||ue(!1)}},[H,ge,ve,je]),Se=(0,r.useCallback)(async e=>{he(!0);try{var t,a;const l=null===(t=H[0])||void 0===t?void 0:t.toISOString(),r=null===(a=H[1])||void 0===a?void 0:a.toISOString(),n=ve&&!ge?je:null,s=await I.default.get(`/test-analytics/performance-rankings${l||r||n?"?":""}${l?`startDate=${l}&`:""}${r?`endDate=${r}&`:""}${n?`plantCode=${n}`:""}`.replace(/&$/,""));null!==e&&void 0!==e&&e.aborted||ye(s)}catch(l){null!==e&&void 0!==e&&e.aborted||(console.error("Failed to fetch performance rankings:",l),g.Ay.error("Failed to load performance rankings. Please check your connection and try again."),ye(null))}finally{null!==e&&void 0!==e&&e.aborted||he(!1)}},[H,ge,ve,je]);(0,r.useEffect)(()=>{const e=new AbortController;return(async()=>{try{await Promise.all([fe(e.signal),ke(e.signal),Ce(e.signal),we(e.signal),Se(e.signal)])}catch(t){e.signal.aborted||console.error("Error fetching QR analytics data:",t)}})(),()=>{e.abort()}},[fe,ke,Ce,we,Se]);return E&&!M?(0,$.jsxs)("div",{style:{textAlign:"center",padding:"50px"},children:[(0,$.jsx)(v.A,{size:"large"}),(0,$.jsx)("p",{children:"Loading QR Analytics dashboard..."})]}):E||M?(0,$.jsxs)("div",{children:[(0,$.jsxs)(Q,{level:2,children:[(0,$.jsx)(i,{style:{marginRight:8}}),"QR Analytics Dashboard"]}),(null===M||void 0===M?void 0:M.userContext)&&(0,$.jsx)(f.A,{gutter:[16,16],style:{marginBottom:16},children:(0,$.jsx)(b.A,{span:24,children:(0,$.jsx)(k.A,{size:"small",style:{backgroundColor:"#f6ffed",border:"1px solid #b7eb8f"},children:(0,$.jsxs)(f.A,{gutter:16,align:"middle",children:[(0,$.jsxs)(b.A,{children:[(0,$.jsx)(W,{strong:!0,children:"User: "}),(0,$.jsx)(W,{children:M.userContext.username})]}),(0,$.jsxs)(b.A,{children:[(0,$.jsx)(W,{strong:!0,children:"Role: "}),(0,$.jsx)(W,{style:{color:"ADMIN"===M.userContext.role?"#1890ff":"PLANT_USER"===M.userContext.role?"#52c41a":"#722ed1",fontWeight:"bold"},children:M.userContext.role})]}),M.userContext.plantCode&&(0,$.jsxs)(b.A,{children:[(0,$.jsx)(W,{strong:!0,children:"Plant: "}),(0,$.jsx)(W,{children:M.userContext.plantCode})]}),M.userContext.hasPlantRestriction&&(0,$.jsx)(b.A,{children:(0,$.jsx)(W,{type:"warning",style:{fontSize:"12px"},children:"(Data filtered by plant access)"})})]})})})}),(0,$.jsx)(f.A,{gutter:[16,16],style:{marginBottom:16},children:(0,$.jsx)(b.A,{span:24,children:(0,$.jsx)(k.A,{children:(0,$.jsxs)(f.A,{gutter:16,children:[(0,$.jsx)(b.A,{span:6,children:(0,$.jsx)(B,{onChange:e=>{_(e)},style:{width:"100%"}})}),ge&&!ve&&(0,$.jsx)(b.A,{span:4,children:(0,$.jsx)(C.A,{placeholder:"Select Plant",allowClear:!0,style:{width:"100%"},value:me,onChange:Ae,options:[{value:"PLANT_A",label:"Plant A"},{value:"PLANT_B",label:"Plant B"},{value:"PLANT_C",label:"Plant C"},{value:"PLANT_D",label:"Plant D"}]})}),(0,$.jsx)(b.A,{span:4,children:(0,$.jsx)(j.Ay,{type:"primary",onClick:()=>{const e=new AbortController;Promise.all([fe(e.signal),ke(e.signal),Ce(e.signal),we(e.signal),Se(e.signal)]),be()},children:"Apply Filter"})}),(0,$.jsxs)(b.A,{span:12,style:{textAlign:"right"},children:[(0,$.jsx)(j.Ay,{icon:(0,$.jsx)(d.A,{}),onClick:async()=>{Y(!0);try{let e="/test-analytics/export";H[0]&&H[1]&&(e+=`?startDate=${H[0].toISOString()}&endDate=${H[1].toISOString()}`);const t=await I.default.get(e,{responseType:"blob"}),a=window.URL.createObjectURL(t),l=document.createElement("a");l.href=a,l.setAttribute("download",`qr-analytics-${(new Date).toISOString().split("T")[0]}.csv`),document.body.appendChild(l),l.click(),l.remove(),g.Ay.success("QR Analytics report exported successfully")}catch(e){g.Ay.error("Failed to export QR Analytics report"),console.error("Error exporting QR Analytics report:",e)}finally{Y(!1)}},loading:X,style:{marginRight:8},children:"Export Analytics"}),(0,$.jsx)(j.Ay,{icon:(0,$.jsx)(d.A,{}),onClick:()=>async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Y(!0);try{let t="/test-analytics/export";const a=[];H[0]&&H[1]&&(a.push(`startDate=${H[0].toISOString()}`),a.push(`endDate=${H[1].toISOString()}`)),e&&a.push(`state=${e}`),a.length>0&&(t+=`?${a.join("&")}`);const l=await I.default.get(t,{responseType:"blob"}),r=window.URL.createObjectURL(l),n=document.createElement("a");n.href=r,n.setAttribute("download",`workflow-report-${(new Date).toISOString().split("T")[0]}.csv`),document.body.appendChild(n),n.click(),n.remove(),g.Ay.success("Workflow report exported successfully")}catch(t){g.Ay.error("Failed to export workflow report"),console.error("Error exporting workflow report:",t)}finally{Y(!1)}}(),loading:X,children:"Export Workflow Report"})]})]})})})}),(0,$.jsxs)(f.A,{gutter:[16,16],children:[(0,$.jsx)(b.A,{span:6,children:(0,$.jsx)(k.A,{children:(0,$.jsx)(w.A,{title:"Total Workflows",value:(null===M||void 0===M?void 0:M.totalWorkflows)||0,prefix:(0,$.jsx)(u.A,{})})})}),(0,$.jsx)(b.A,{span:6,children:(0,$.jsx)(k.A,{children:(0,$.jsx)(w.A,{title:"Active Workflows",value:(null===M||void 0===M?void 0:M.activeWorkflows)||0,prefix:(0,$.jsx)(p.A,{}),valueStyle:{color:"#1890ff"}})})}),(0,$.jsx)(b.A,{span:6,children:(0,$.jsx)(k.A,{children:(0,$.jsx)(w.A,{title:"Completed Workflows",value:(null===M||void 0===M?void 0:M.completedWorkflows)||0,prefix:(0,$.jsx)(y.A,{}),valueStyle:{color:"#3f8600"}})})}),(0,$.jsx)(b.A,{span:6,children:(0,$.jsx)(k.A,{children:(0,$.jsx)(w.A,{title:"Overdue Workflows",value:(null===M||void 0===M?void 0:M.overdueWorkflows)||0,prefix:(0,$.jsx)(c.A,{}),valueStyle:{color:"#cf1322"}})})})]}),(0,$.jsxs)(f.A,{gutter:[16,16],style:{marginTop:16},children:[(0,$.jsx)(b.A,{span:6,children:(0,$.jsx)(k.A,{children:(0,$.jsx)(w.A,{title:"Total Queries",value:(null===M||void 0===M?void 0:M.totalQueries)||0,prefix:(0,$.jsx)(x.A,{})})})}),(0,$.jsx)(b.A,{span:6,children:(0,$.jsx)(k.A,{children:(0,$.jsx)(w.A,{title:"Open Queries",value:(null===M||void 0===M?void 0:M.openQueries)||0,valueStyle:{color:"#1890ff"}})})}),(0,$.jsx)(b.A,{span:6,children:(0,$.jsx)(k.A,{children:(0,$.jsx)(w.A,{title:"Overdue Queries",value:(null===M||void 0===M?void 0:M.overdueQueries)||0,valueStyle:{color:"#cf1322"}})})}),(0,$.jsx)(b.A,{span:6,children:(0,$.jsx)(k.A,{children:(0,$.jsx)(w.A,{title:"Avg. Completion Time (hrs)",value:(null===M||void 0===M||null===(e=M.averageCompletionTimeHours)||void 0===e?void 0:e.toFixed(1))||0,precision:1})})})]}),(0,$.jsxs)(A.A,{defaultActiveKey:"1",style:{marginTop:16},children:[(0,$.jsxs)(D,{tab:"Workflow Status",children:[(0,$.jsxs)(f.A,{gutter:[16,16],children:[(0,$.jsx)(b.A,{span:12,children:(0,$.jsx)(k.A,{title:"Workflow Status Distribution",children:M&&M.workflowsByState&&Object.keys(M.workflowsByState).length>0?(0,$.jsx)(P.Fq,{data:(()=>{if(!M||!M.workflowsByState)return null;return{labels:Object.keys(M.workflowsByState),datasets:[{label:"Workflows by State",data:Object.values(M.workflowsByState),backgroundColor:["rgba(54, 162, 235, 0.6)","rgba(255, 206, 86, 0.6)","rgba(75, 192, 192, 0.6)","rgba(153, 102, 255, 0.6)","rgba(255, 159, 64, 0.6)"],borderColor:["rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]}})(),options:{responsive:!0,maintainAspectRatio:!1},height:300}):(0,$.jsx)("div",{style:{textAlign:"center",padding:"50px"},children:(0,$.jsx)(W,{type:"secondary",children:"No workflow status data available"})})})}),(0,$.jsx)(b.A,{span:12,children:(0,$.jsx)(k.A,{title:"Recent Activity",children:M&&M.recentActivity&&Object.keys(M.recentActivity).length>0?(0,$.jsx)(P.N1,{data:(()=>{if(!M||!M.recentActivity)return null;const e=Object.keys(M.recentActivity).sort(),t=e.map(e=>M.recentActivity[e]);return{labels:e,datasets:[{label:"Workflow Activity",data:t,fill:!1,backgroundColor:"rgba(54, 162, 235, 0.6)",borderColor:"rgba(54, 162, 235, 1)",tension:.1}]}})(),options:{responsive:!0,maintainAspectRatio:!1},height:300}):(0,$.jsx)("div",{style:{textAlign:"center",padding:"50px"},children:(0,$.jsx)(W,{type:"secondary",children:"No recent activity data available"})})})})]}),(0,$.jsx)(f.A,{gutter:[16,16],style:{marginTop:16},children:(0,$.jsx)(b.A,{span:24,children:(0,$.jsx)(k.A,{title:"Workflows by Plant",children:(0,$.jsx)(S.A,{dataSource:M&&M.workflowsByPlant?Object.entries(M.workflowsByPlant).map(e=>{let[t,a]=e;return{key:t,plant:t,count:a}}):[],columns:[{title:"Plant",dataIndex:"plant",key:"plant"},{title:"Workflow Count",dataIndex:"count",key:"count"}],pagination:!1,locale:{emptyText:"No workflow data available"}})})})})]},"1"),(0,$.jsxs)(D,{tab:"Query SLA Reports",children:[(0,$.jsx)(j.Ay,{type:"primary",onClick:be,loading:J,style:{marginBottom:16},children:"Generate SLA Report"}),J?(0,$.jsxs)("div",{style:{textAlign:"center",padding:"50px"},children:[(0,$.jsx)(v.A,{}),(0,$.jsx)("p",{children:"Generating SLA report..."})]}):Z?(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(f.A,{gutter:[16,16],children:[(0,$.jsx)(b.A,{span:8,children:(0,$.jsxs)(k.A,{children:[(0,$.jsx)(w.A,{title:"Overall SLA Compliance",value:Z.overallSlaCompliance.toFixed(1),suffix:"%",precision:1}),(0,$.jsx)(T.A,{percent:Z.overallSlaCompliance,status:Z.overallSlaCompliance>=90?"success":"active"})]})}),(0,$.jsx)(b.A,{span:8,children:(0,$.jsx)(k.A,{children:(0,$.jsx)(w.A,{title:"Average Resolution Time",value:Z.overallAverageResolutionTime.toFixed(1),suffix:"hours",precision:1})})}),(0,$.jsx)(b.A,{span:8,children:(0,$.jsx)(k.A,{children:(0,$.jsx)(w.A,{title:"Resolution Rate",value:(Z.totalResolvedQueries/Z.totalQueries*100).toFixed(1),suffix:"%",precision:1})})})]}),(0,$.jsxs)(f.A,{gutter:[16,16],style:{marginTop:16},children:[(0,$.jsx)(b.A,{span:12,children:(0,$.jsx)(k.A,{title:"SLA Compliance by Team",children:Z.slaComplianceByTeam&&Object.keys(Z.slaComplianceByTeam).length>0?(0,$.jsx)(P.yP,{data:(()=>{if(!Z||!Z.slaComplianceByTeam)return null;return{labels:Object.keys(Z.slaComplianceByTeam),datasets:[{label:"SLA Compliance (%)",data:Object.values(Z.slaComplianceByTeam),backgroundColor:"rgba(75, 192, 192, 0.6)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}]}})(),options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,max:100}}},height:300}):(0,$.jsx)("div",{style:{textAlign:"center",padding:"50px"},children:(0,$.jsx)(W,{type:"secondary",children:"No SLA compliance data available"})})})}),(0,$.jsx)(b.A,{span:12,children:(0,$.jsx)(k.A,{title:"Average Resolution Times by Team",children:Z.averageResolutionTimesByTeam&&Object.keys(Z.averageResolutionTimesByTeam).length>0?(0,$.jsx)(P.yP,{data:(()=>{if(!Z||!Z.averageResolutionTimesByTeam)return null;return{labels:Object.keys(Z.averageResolutionTimesByTeam),datasets:[{label:"Average Resolution Time (hours)",data:Object.values(Z.averageResolutionTimesByTeam),backgroundColor:"rgba(255, 159, 64, 0.6)",borderColor:"rgba(255, 159, 64, 1)",borderWidth:1}]}})(),options:{responsive:!0,maintainAspectRatio:!1},height:300}):(0,$.jsx)("div",{style:{textAlign:"center",padding:"50px"},children:(0,$.jsx)(W,{type:"secondary",children:"No resolution time data available"})})})})]}),(0,$.jsx)(f.A,{gutter:[16,16],style:{marginTop:16},children:(0,$.jsx)(b.A,{span:24,children:(0,$.jsx)(k.A,{title:"Query Metrics by Team",children:(0,$.jsx)(S.A,{dataSource:Z.totalQueriesByTeam?Object.keys(Z.totalQueriesByTeam).map(e=>{var t,a;return{key:e,team:e,total:Z.totalQueriesByTeam[e],resolved:Z.resolvedQueriesByTeam[e],overdue:Z.overdueQueriesByTeam[e],avgTime:null===(t=Z.averageResolutionTimesByTeam[e])||void 0===t?void 0:t.toFixed(1),compliance:null===(a=Z.slaComplianceByTeam[e])||void 0===a?void 0:a.toFixed(1)}}):[],columns:[{title:"Team",dataIndex:"team",key:"team"},{title:"Total Queries",dataIndex:"total",key:"total"},{title:"Resolved",dataIndex:"resolved",key:"resolved"},{title:"Overdue",dataIndex:"overdue",key:"overdue"},{title:"Avg. Resolution Time (hrs)",dataIndex:"avgTime",key:"avgTime"},{title:"SLA Compliance",dataIndex:"compliance",key:"compliance",render:e=>`${e}%`}],pagination:!1,locale:{emptyText:"No query metrics data available"}})})})})]}):(0,$.jsx)("div",{style:{textAlign:"center",padding:"50px"},children:(0,$.jsx)(W,{type:"secondary",children:'Click "Generate SLA Report" to view query SLA metrics'})})]},"2"),(0,$.jsxs)(D,{tab:"Bottlenecks Analysis",children:[(0,$.jsx)(j.Ay,{type:"primary",onClick:()=>ke(),loading:ae,style:{marginBottom:16},children:"Refresh Bottlenecks Analysis"}),ae?(0,$.jsxs)("div",{style:{textAlign:"center",padding:"50px"},children:[(0,$.jsx)(v.A,{}),(0,$.jsx)("p",{children:"Analyzing bottlenecks..."})]}):ee?(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(f.A,{gutter:[16,16],children:[(0,$.jsx)(b.A,{span:12,children:(0,$.jsx)(k.A,{title:"Average Time in Each State (hours)",children:(0,$.jsx)(S.A,{dataSource:ee.averageTimeInState?Object.entries(ee.averageTimeInState).map(e=>{let[t,a]=e;return{key:t,state:t,hours:a.toFixed(1)}}):[],columns:[{title:"Workflow State",dataIndex:"state",key:"state"},{title:"Average Hours",dataIndex:"hours",key:"hours"}],pagination:!1,locale:{emptyText:"No state timing data available"}})})}),(0,$.jsx)(b.A,{span:12,children:(0,$.jsx)(k.A,{title:"Overdue Workflows by State",children:(0,$.jsx)(S.A,{dataSource:ee.overdueByState?Object.entries(ee.overdueByState).map(e=>{let[t,a]=e;return{key:t,state:t,count:a}}):[],columns:[{title:"Workflow State",dataIndex:"state",key:"state"},{title:"Overdue Count",dataIndex:"count",key:"count"}],pagination:!1,locale:{emptyText:"No overdue workflow data available"}})})})]}),(0,$.jsxs)(f.A,{gutter:[16,16],style:{marginTop:16},children:[(0,$.jsx)(b.A,{span:12,children:(0,$.jsx)(k.A,{title:"Open Queries by Team",children:(0,$.jsx)(S.A,{dataSource:ee.openQueriesByTeam?Object.entries(ee.openQueriesByTeam).map(e=>{let[t,a]=e;return{key:t,team:t,count:a}}):[],columns:[{title:"Team",dataIndex:"team",key:"team"},{title:"Open Queries",dataIndex:"count",key:"count"}],pagination:!1,locale:{emptyText:"No open queries data available"}})})}),(0,$.jsx)(b.A,{span:12,children:(0,$.jsx)(k.A,{title:"Delayed Workflows by Plant",children:(0,$.jsx)(S.A,{dataSource:ee.delayedByPlant?Object.entries(ee.delayedByPlant).map(e=>{let[t,a]=e;return{key:t,plant:t,count:a}}):[],columns:[{title:"Plant",dataIndex:"plant",key:"plant"},{title:"Delayed Count",dataIndex:"count",key:"count"}],pagination:!1,locale:{emptyText:"No delayed workflow data available"}})})})]})]}):(0,$.jsx)("div",{style:{textAlign:"center",padding:"50px"},children:(0,$.jsx)(W,{type:"secondary",children:'Click "Refresh Bottlenecks Analysis" to view workflow bottlenecks'})})]},"3"),(0,$.jsxs)(D,{tab:"Performance Metrics",children:[(0,$.jsx)(j.Ay,{type:"primary",onClick:()=>Ce(),loading:se,style:{marginBottom:16},children:"Refresh Performance Metrics"}),se?(0,$.jsxs)("div",{style:{textAlign:"center",padding:"50px"},children:[(0,$.jsx)(v.A,{}),(0,$.jsx)("p",{children:"Loading performance metrics..."})]}):re?(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(f.A,{gutter:[16,16],children:[(0,$.jsx)(b.A,{span:8,children:(0,$.jsxs)(k.A,{children:[(0,$.jsx)(w.A,{title:"Completion Rate",value:null===(t=re.completionRate)||void 0===t?void 0:t.toFixed(1),suffix:"%",precision:1}),(0,$.jsx)(T.A,{percent:re.completionRate,status:re.completionRate>=80?"success":"active"})]})}),(0,$.jsx)(b.A,{span:8,children:(0,$.jsx)(k.A,{children:(0,$.jsx)(w.A,{title:"Average Completion Time",value:null===(a=re.averageCompletionTimeHours)||void 0===a?void 0:a.toFixed(1),suffix:"hours",precision:1})})}),(0,$.jsx)(b.A,{span:8,children:(0,$.jsx)(k.A,{children:(0,$.jsx)(w.A,{title:"Queries Per Workflow",value:null===(l=re.queriesPerWorkflow)||void 0===l?void 0:l.toFixed(1),precision:1})})})]}),(0,$.jsx)(f.A,{gutter:[16,16],style:{marginTop:16},children:(0,$.jsx)(b.A,{span:24,children:(0,$.jsx)(k.A,{title:"Monthly Workflow Throughput",children:re.throughputByMonth&&Object.keys(re.throughputByMonth).length>0?(0,$.jsx)(P.yP,{data:{labels:Object.keys(re.throughputByMonth),datasets:[{label:"Completed Workflows",data:Object.values(re.throughputByMonth),backgroundColor:"rgba(54, 162, 235, 0.6)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0}}},height:300}):(0,$.jsx)("div",{style:{textAlign:"center",padding:"50px"},children:(0,$.jsx)(W,{type:"secondary",children:"No throughput data available"})})})})})]}):(0,$.jsx)("div",{style:{textAlign:"center",padding:"50px"},children:(0,$.jsx)(W,{type:"secondary",children:'Click "Refresh Performance Metrics" to view workflow performance data'})})]},"4"),(0,$.jsxs)(D,{tab:"Query Status Analysis",children:[(0,$.jsx)(j.Ay,{type:"primary",onClick:()=>we(),loading:de,style:{marginBottom:16},children:"Refresh Query Status Analysis"}),de?(0,$.jsxs)("div",{style:{textAlign:"center",padding:"50px"},children:[(0,$.jsx)(v.A,{}),(0,$.jsx)("p",{children:"Analyzing query statuses..."})]}):ie?(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(f.A,{gutter:[16,16],children:[(0,$.jsx)(b.A,{span:8,children:(0,$.jsx)(k.A,{children:(0,$.jsx)(w.A,{title:"Total Queries",value:ie.totalQueries||0,prefix:(0,$.jsx)(x.A,{})})})}),(0,$.jsx)(b.A,{span:8,children:(0,$.jsx)(k.A,{children:(0,$.jsx)(w.A,{title:"Active Queries",value:ie.activeQueries||0,prefix:(0,$.jsx)(p.A,{}),valueStyle:{color:"#1890ff"}})})}),(0,$.jsx)(b.A,{span:8,children:(0,$.jsx)(k.A,{children:(0,$.jsx)(w.A,{title:"Resolved Queries",value:ie.resolvedQueries||0,prefix:(0,$.jsx)(y.A,{}),valueStyle:{color:"#3f8600"}})})})]}),(0,$.jsxs)(f.A,{gutter:[16,16],style:{marginTop:16},children:[(0,$.jsx)(b.A,{span:12,children:(0,$.jsx)(k.A,{title:"Query Status Distribution",children:(0,$.jsx)(S.A,{dataSource:ie.statusCounts?Object.entries(ie.statusCounts).map(e=>{let[t,a]=e;return{key:t,status:t.replace(/_/g," ").toLowerCase().replace(/\b\w/g,e=>e.toUpperCase()),count:a,percentage:(a/ie.totalQueries*100).toFixed(1)}}):[],columns:[{title:"Status",dataIndex:"status",key:"status"},{title:"Count",dataIndex:"count",key:"count"},{title:"Percentage",dataIndex:"percentage",key:"percentage",render:e=>`${e}%`}],pagination:!1,locale:{emptyText:"No query status data available"}})})}),(0,$.jsx)(b.A,{span:12,children:(0,$.jsx)(k.A,{title:"Query Status by Team",children:(0,$.jsx)(S.A,{dataSource:ie.teamStatusCounts?Object.entries(ie.teamStatusCounts).map(e=>{let[t,a]=e;return{key:t,team:t,open:a.OPEN||0,resolved:a.RESOLVED||0,closed:a.CLOSED||0,total:Object.values(a).reduce((e,t)=>e+t,0)}}):[],columns:[{title:"Team",dataIndex:"team",key:"team"},{title:"Open",dataIndex:"open",key:"open"},{title:"Resolved",dataIndex:"resolved",key:"resolved"},{title:"Closed",dataIndex:"closed",key:"closed"},{title:"Total",dataIndex:"total",key:"total",render:e=>(0,$.jsx)("strong",{children:e})}],pagination:!1,scroll:{x:800},locale:{emptyText:"No team query data available"}})})})]})]}):(0,$.jsx)("div",{style:{textAlign:"center",padding:"50px"},children:(0,$.jsx)(W,{type:"secondary",children:'Click "Refresh Query Status Analysis" to view detailed query status breakdown'})})]},"5"),(0,$.jsxs)(D,{tab:"Performance Rankings",children:[(0,$.jsx)(j.Ay,{type:"primary",onClick:()=>Se(),loading:xe,style:{marginBottom:16},children:"Refresh Performance Rankings"}),xe?(0,$.jsxs)("div",{style:{textAlign:"center",padding:"50px"},children:[(0,$.jsx)(v.A,{}),(0,$.jsx)("p",{children:"Loading performance rankings..."})]}):pe?(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(f.A,{gutter:[16,16],style:{marginBottom:16},children:[(0,$.jsx)(b.A,{span:6,children:(0,$.jsxs)(k.A,{children:[(0,$.jsx)(w.A,{title:"Top Resolver",value:(null===(n=pe.topQueryResolvers)||void 0===n||null===(s=n[0])||void 0===s?void 0:s.count)||0,suffix:"queries",prefix:"\ud83c\udfc6",valueStyle:{color:"#52c41a"}}),(0,$.jsx)(W,{type:"secondary",style:{fontSize:"12px"},children:(null===(o=pe.topQueryResolvers)||void 0===o||null===(h=o[0])||void 0===h?void 0:h.name)||"N/A"})]})}),(0,$.jsx)(b.A,{span:6,children:(0,$.jsxs)(k.A,{children:[(0,$.jsx)(w.A,{title:"Top Creator",value:(null===(m=pe.topWorkflowCreators)||void 0===m||null===(R=m[0])||void 0===R?void 0:R.count)||0,suffix:"workflows",prefix:"\ud83d\ude80",valueStyle:{color:"#1890ff"}}),(0,$.jsx)(W,{type:"secondary",style:{fontSize:"12px"},children:(null===(F=pe.topWorkflowCreators)||void 0===F||null===(N=F[0])||void 0===N?void 0:N.name)||"N/A"})]})}),(0,$.jsx)(b.A,{span:6,children:(0,$.jsxs)(k.A,{children:[(0,$.jsx)(w.A,{title:"Best Team",value:Object.keys(pe.teamPerformance||{})[0]||"N/A",prefix:"\ud83d\udc65",valueStyle:{color:"#722ed1"}}),(0,$.jsx)(W,{type:"secondary",style:{fontSize:"12px"},children:"Highest resolution rate"})]})}),(0,$.jsx)(b.A,{span:6,children:(0,$.jsxs)(k.A,{children:[(0,$.jsx)(w.A,{title:"Best Plant",value:Object.keys(pe.plantPerformance||{})[0]||"N/A",prefix:"\ud83c\udfed",valueStyle:{color:"#fa8c16"}}),(0,$.jsx)(W,{type:"secondary",style:{fontSize:"12px"},children:"Highest completion rate"})]})})]}),(0,$.jsxs)(f.A,{gutter:[16,16],style:{marginBottom:16},children:[(0,$.jsx)(b.A,{span:12,children:(0,$.jsx)(k.A,{title:"\ud83c\udfc6 Top Query Resolvers Distribution",children:pe.topQueryResolvers&&pe.topQueryResolvers.length>0?(0,$.jsx)(P.Fq,{data:(()=>{if(!pe||!pe.topQueryResolvers)return null;const e=pe.topQueryResolvers.slice(0,5);return{labels:e.map(e=>e.username||e.name||"Unknown"),datasets:[{label:"Queries Resolved",data:e.map(e=>e.queriesResolved||e.count||0),backgroundColor:["rgba(255, 206, 86, 0.8)","rgba(75, 192, 192, 0.8)","rgba(153, 102, 255, 0.8)","rgba(255, 159, 64, 0.8)","rgba(54, 162, 235, 0.8)"],borderColor:["rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(54, 162, 235, 1)"],borderWidth:2}]}})(),options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}},height:300}):(0,$.jsx)("div",{style:{textAlign:"center",padding:"50px"},children:(0,$.jsx)(W,{type:"secondary",children:"No query resolver data available"})})})}),(0,$.jsx)(b.A,{span:12,children:(0,$.jsx)(k.A,{title:"\ud83d\ude80 Top Workflow Creators",children:pe.topWorkflowCreators&&pe.topWorkflowCreators.length>0?(0,$.jsx)(P.yP,{data:(()=>{if(!pe||!pe.topWorkflowCreators)return null;const e=pe.topWorkflowCreators.slice(0,10);return{labels:e.map(e=>e.username||e.name||"Unknown"),datasets:[{label:"Workflows Created",data:e.map(e=>e.workflowsCreated||e.count||0),backgroundColor:"rgba(54, 162, 235, 0.6)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1}]}})(),options:{responsive:!0,maintainAspectRatio:!1,indexAxis:"y",plugins:{legend:{display:!1}},scales:{x:{beginAtZero:!0}}},height:300}):(0,$.jsx)("div",{style:{textAlign:"center",padding:"50px"},children:(0,$.jsx)(W,{type:"secondary",children:"No workflow creator data available"})})})})]}),(0,$.jsxs)(f.A,{gutter:[16,16],style:{marginBottom:16},children:[(0,$.jsx)(b.A,{span:12,children:(0,$.jsx)(k.A,{title:"\ud83d\udc65 Team Performance Comparison",children:pe.teamPerformance&&Object.keys(pe.teamPerformance).length>0?(0,$.jsx)(P.yP,{data:(()=>{if(!pe||!pe.teamPerformance)return null;const e=Object.keys(pe.teamPerformance),t=e.map(e=>pe.teamPerformance[e].resolutionRate||0),a=e.map(e=>pe.teamPerformance[e].avgResolutionTime||0);return{labels:e,datasets:[{label:"Resolution Rate (%)",data:t,backgroundColor:"rgba(75, 192, 192, 0.6)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1,yAxisID:"y"},{label:"Avg Resolution Time (hrs)",data:a,backgroundColor:"rgba(255, 159, 64, 0.6)",borderColor:"rgba(255, 159, 64, 1)",borderWidth:1,yAxisID:"y1"}]}})(),options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"Resolution Rate (%)"}},y1:{type:"linear",display:!0,position:"right",title:{display:!0,text:"Avg Resolution Time (hrs)"},grid:{drawOnChartArea:!1}}}},height:300}):(0,$.jsx)("div",{style:{textAlign:"center",padding:"50px"},children:(0,$.jsx)(W,{type:"secondary",children:"No team performance data available"})})})}),(0,$.jsx)(b.A,{span:12,children:(0,$.jsx)(k.A,{title:"\ud83c\udfed Plant Performance Comparison",children:pe.plantPerformance&&Object.keys(pe.plantPerformance).length>0?(0,$.jsx)(P.yP,{data:(()=>{if(!pe||!pe.plantPerformance)return null;const e=Object.keys(pe.plantPerformance),t=e.map(e=>pe.plantPerformance[e].completionRate||0),a=e.map(e=>pe.plantPerformance[e].avgCompletionTime||0);return{labels:e,datasets:[{label:"Completion Rate (%)",data:t,backgroundColor:"rgba(153, 102, 255, 0.6)",borderColor:"rgba(153, 102, 255, 1)",borderWidth:1,yAxisID:"y"},{label:"Avg Completion Time (hrs)",data:a,backgroundColor:"rgba(255, 99, 132, 0.6)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1,yAxisID:"y1"}]}})(),options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"Completion Rate (%)"}},y1:{type:"linear",display:!0,position:"right",title:{display:!0,text:"Avg Completion Time (hrs)"},grid:{drawOnChartArea:!1}}}},height:300}):(0,$.jsx)("div",{style:{textAlign:"center",padding:"50px"},children:(0,$.jsx)(W,{type:"secondary",children:"No plant performance data available"})})})})]}),(0,$.jsxs)(f.A,{gutter:[16,16],children:[(0,$.jsx)(b.A,{span:8,children:(0,$.jsx)(k.A,{title:"\ud83c\udfc6 Top Query Resolvers",size:"small",children:(0,$.jsx)(S.A,{dataSource:(null===(z=pe.topQueryResolvers)||void 0===z?void 0:z.slice(0,5))||[],columns:[{title:"#",key:"rank",width:40,render:(e,t,a)=>(0,$.jsx)("span",{style:{fontWeight:"bold",color:0===a?"#faad14":1===a?"#8c8c8c":2===a?"#d4b106":"#666"},children:a+1})},{title:"Name",dataIndex:"name",key:"name",ellipsis:!0},{title:"Count",dataIndex:"count",key:"count",width:60}],pagination:!1,size:"small",locale:{emptyText:"No data"}})})}),(0,$.jsx)(b.A,{span:8,children:(0,$.jsx)(k.A,{title:"\ud83d\ude80 Top Workflow Creators",size:"small",children:(0,$.jsx)(S.A,{dataSource:(null===(L=pe.topWorkflowCreators)||void 0===L?void 0:L.slice(0,5))||[],columns:[{title:"#",key:"rank",width:40,render:(e,t,a)=>(0,$.jsx)("span",{style:{fontWeight:"bold",color:0===a?"#faad14":1===a?"#8c8c8c":2===a?"#d4b106":"#666"},children:a+1})},{title:"Name",dataIndex:"name",key:"name",ellipsis:!0},{title:"Count",dataIndex:"count",key:"count",width:60}],pagination:!1,size:"small",locale:{emptyText:"No data"}})})}),(0,$.jsx)(b.A,{span:8,children:(0,$.jsx)(k.A,{title:"\u2705 Top Form Completers",size:"small",children:(0,$.jsx)(S.A,{dataSource:(null===(q=pe.topFormCompleters)||void 0===q?void 0:q.slice(0,5))||[],columns:[{title:"#",key:"rank",width:40,render:(e,t,a)=>(0,$.jsx)("span",{style:{fontWeight:"bold",color:0===a?"#faad14":1===a?"#8c8c8c":2===a?"#d4b106":"#666"},children:a+1})},{title:"Name",dataIndex:"name",key:"name",ellipsis:!0},{title:"Count",dataIndex:"count",key:"count",width:60}],pagination:!1,size:"small",locale:{emptyText:"No data"}})})}),(0,$.jsx)(b.A,{span:12,children:(0,$.jsx)(k.A,{title:"\ud83d\udcca Team Performance Comparison",children:(0,$.jsx)(S.A,{dataSource:pe.teamPerformance?Object.entries(pe.teamPerformance).map(e=>{let[t,a]=e;return{key:t,team:t,...a}}):[],columns:[{title:"Team",dataIndex:"team",key:"team",render:e=>`\ud83d\udc65 ${e}`},{title:"Total",dataIndex:"totalQueries",key:"totalQueries"},{title:"Resolved",dataIndex:"resolvedQueries",key:"resolvedQueries"},{title:"Open",dataIndex:"openQueries",key:"openQueries"},{title:"Resolution %",dataIndex:"resolutionRate",key:"resolutionRate",render:e=>`${e}%`},{title:"Avg Time (hrs)",dataIndex:"avgResolutionTime",key:"avgResolutionTime",render:e=>`${e}h`}],pagination:!1,size:"small",locale:{emptyText:"No team performance data available"}})})})]}),(0,$.jsx)(f.A,{gutter:[16,16],style:{marginTop:16},children:(0,$.jsx)(b.A,{span:24,children:(0,$.jsx)(k.A,{title:"\ud83c\udfed Plant Performance Comparison",children:(0,$.jsx)(S.A,{dataSource:pe.plantPerformance?Object.entries(pe.plantPerformance).map(e=>{let[t,a]=e;return{key:t,plant:t,...a}}):[],columns:[{title:"Plant",dataIndex:"plant",key:"plant",render:e=>`\ud83c\udfed ${e}`},{title:"Total Workflows",dataIndex:"totalWorkflows",key:"totalWorkflows"},{title:"Completed",dataIndex:"completedWorkflows",key:"completedWorkflows"},{title:"Active",dataIndex:"activeWorkflows",key:"activeWorkflows"},{title:"Completion Rate",dataIndex:"completionRate",key:"completionRate",render:e=>(0,$.jsxs)("span",{style:{color:e>=80?"#52c41a":e>=60?"#faad14":"#ff4d4f",fontWeight:"bold"},children:[e,"%"]})},{title:"Avg Completion Time (hrs)",dataIndex:"avgCompletionTime",key:"avgCompletionTime",render:e=>`${e}h`}],pagination:!1,size:"small",scroll:{x:800},locale:{emptyText:"No plant performance data available"}})})})})]}):(0,$.jsx)("div",{style:{textAlign:"center",padding:"50px"},children:(0,$.jsx)(W,{type:"secondary",children:'Click "Refresh Performance Rankings" to view detailed performance rankings and comparisons'})})]},"6")]})]}):(0,$.jsxs)("div",{children:[(0,$.jsxs)(Q,{level:2,children:[(0,$.jsx)(i,{style:{marginRight:8}}),"QR Analytics Dashboard"]}),(0,$.jsxs)("div",{style:{textAlign:"center",padding:"50px"},children:[(0,$.jsx)(c.A,{style:{fontSize:"48px",color:"#ff4d4f",marginBottom:"16px"}}),(0,$.jsx)(Q,{level:4,children:"Unable to Load Analytics Data"}),(0,$.jsx)(W,{type:"secondary",children:"The QR Analytics service is currently unavailable. Please check your connection and try again."}),(0,$.jsx)("br",{}),(0,$.jsx)(j.Ay,{type:"primary",onClick:()=>window.location.reload(),style:{marginTop:"16px"},children:"Retry"})]})]})}},2878:(e,t,a)=>{a.d(t,{A:()=>i});var l=a(8168),r=a(5043);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"};var s=a(2172),o=function(e,t){return r.createElement(s.A,(0,l.A)({},e,{ref:t,icon:n}))};const i=r.forwardRef(o)},5123:(e,t,a)=>{a.d(t,{hm:()=>s});var l=a(5043),r=a(3719),n=a(4642);const s=()=>{const[e,t]=(0,l.useState)(null),[a,s]=(0,l.useState)(!0),[o,i]=(0,l.useState)(null),c=(0,l.useCallback)(async()=>{if(!(0,r.wR)())return t(null),void s(!1);try{s(!0),i(null);const e=await n.A.getUserAccessSummary();t(e)}catch(e){console.warn("Failed to load access summary, using fallback:",e),i(e);const a=n.A.getFallbackAccessSummary();t(a)}finally{s(!1)}},[]);(0,l.useEffect)(()=>{c()},[c]);const d=(0,l.useCallback)(async e=>{try{return await n.A.hasScreenAccess(e)}catch(o){return console.warn("Screen access check failed, using fallback:",o),n.A.getFallbackScreenAccess(e)}},[]),u=(0,l.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await n.A.hasDataAccess(e,t)}catch(o){return console.warn("Data access check failed, using fallback:",o),n.A.getFallbackDataAccess(e,t)}},[]),p=(0,l.useCallback)(async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{return await n.A.hasPlantDataAccess(e,t,a)}catch(o){return console.warn("Plant data access check failed, using fallback:",o),n.A.getFallbackPlantDataAccess(e,t,a)}},[]),y=(0,l.useCallback)(async function(e,t,a){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};try{return await n.A.makeAccessDecision(e,t,a,l)}catch(o){return console.warn("Access decision failed, using fallback:",o),n.A.getFallbackAccessDecision(e,t,a,l)}},[]),x=(0,l.useCallback)((e,t)=>n.A.filterDataByPlantAccess(e,t),[]);return{loading:a,error:o,isAuthenticated:(0,r.wR)(),currentUser:(0,r.HW)(),primaryRole:(0,r.Jv)(),userPlants:(0,r.nT)(),primaryPlant:(0,r.bN)(),isAdmin:(0,r.qc)(),isJvcUser:(0,r.bV)(),isCqsUser:(0,r.po)(),isTechUser:(0,r.C9)(),isPlantUser:(0,r.X9)(),isViewer:(0,r.Z$)(),accessSummary:e,hasRole:e=>(0,r.hf)(e),hasAnyRole:e=>e.some(e=>(0,r.hf)(e)),hasAllRoles:e=>e.every(e=>(0,r.hf)(e)),checkScreenAccess:d,checkDataAccess:u,checkPlantDataAccess:p,makeAccessDecision:y,filterByPlantAccess:x,refresh:c}}}}]);
//# sourceMappingURL=278.d9cbf5b1.chunk.js.map